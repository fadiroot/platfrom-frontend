"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3747],{43747:function(e,o,i){i.d(o,{Z:function(){return _}});var n=i(52676),r=i(75271),t=i(46974),l=i(88565),s=i(65893),a=i(52889),c=i(35019),d=i(17831),h=i(62935),x=i(48945),p=i(66462),u=i(2656),f=i(53049),g=i(68331),w=i(70565),j=i(77403),b=i(75616),Z=i(47261),k=i(42232),v=i(31289),m=i(41954),C=i(20014),y=i(97269);function _(e){let{workflow:o,postStyle:i,imageStyle:_,hideEmptyTitle:P,isViewProfile:I,isViewSelfProfile:F,isAdmin:W,isWorkflowAdmin:z,isRunnableTester:D,isChallengeWinner:$,inChallenge:E,isChallengeJudge:R,handleWinner:S,handleRemoveChallengeWorkflow:M}=e,N=(0,b.NL)(),A=(0,t.useRouter)(),O=(0,r.useRef)(),[B,H]=(0,r.useState)(!1),[X,J]=(0,r.useState)((null==o?void 0:o.is_public)||(null==o?void 0:o.is_public)===void 0),[L,Q]=(0,r.useState)(null==o?void 0:o.is_winner),[T]=(0,m.dn)(),[U,q]=(0,m.am)(),{id:G,key:K,name:V,thumbnails:Y,creator:ee,stats:eo,source:ei,join_contest:en,cloud_app_id:er,challenge_id:et}=o||{},{username:el}=ee||{},es=null;return Y&&(es=Y.find(e=>null==e?void 0:e.url)),(0,r.useEffect)(()=>{let{is_public:e=!0}=o||{};J(e)},[o]),(0,r.useEffect)(()=>{Q($)},[$]),(0,n.jsxs)(j.Z,{sx:{cursor:"pointer"},children:[F||I&&(W||z)?null:(()=>{let e=(null==ee?void 0:ee.name)||(null==ei?void 0:ei.name)||"",o=(null==ee?void 0:ee.avatar)||(null==ei?void 0:ei.avatar)||"",{uid:i,username:r}=ee||{},{source_link:t}=ei||{};return e||t?(0,n.jsxs)(s.Z,{sx:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"space-between",p:1,position:"absolute",top:0,left:0,right:0,zIndex:100},children:[(0,n.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,right:0,height:"100%",zIndex:-1,backgroundImage:"linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0) 100%)"}}),(0,n.jsx)(s.Z,{sx:{overflow:"hidden"},children:!!e&&(0,n.jsx)(a.Z,{href:`/workflows/@${r}/id/${i}`,target:"_blank",onClick:e=>{if(!r){e.preventDefault(),e.stopPropagation();return}window.open(`/workflows/@${r}/id/${i}`,"_blank"),e.preventDefault(),e.stopPropagation()},children:(0,n.jsxs)(c.Z,{direction:"row",children:[(0,n.jsx)(d.Z,{sx:{width:35,height:35},alt:e,src:(0,v.wX)({avatar:o})}),(0,n.jsx)(h.Z,{variant:"body2",sx:{ml:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:"bold",lineHeight:"35.012px"},children:e})]})})})]}):null})(),(0,n.jsx)(a.Z,{href:`/workflows/${el||"-"}/${K||"-"}/${G}`,target:"_blank",children:(0,n.jsxs)(s.Z,{sx:{opacity:X?1:.5,position:"relative"},children:[(0,n.jsxs)(s.Z,{sx:{position:"relative"},children:[(()=>{let{url:e=""}=es||{},{width:o,height:r}=es||{};return(e.endsWith("_raw.jpg")&&(e=e.replace("_raw.jpg","_512.webp")),e.endsWith("_raw.gif")&&(e=e.replace("_raw.gif","_preview.webp")),"masonry"===i)?(0,n.jsx)(C.M,{url:e,style:{objectFit:"cover",width:"100%",height:"auto"}}):(0,n.jsx)(C.M,{url:e,style:{objectFit:"cover",width:"100%",height:"300px",..._}})})(),er?(0,n.jsx)(s.Z,{sx:{bottom:30,right:10,position:"absolute",zIndex:999,backgroundColor:"rgba(0, 0, 0, 0.2)",p:"7px",borderRadius:"50%"},children:(0,n.jsx)(w.Z,{title:"This workflow can be run on OpenArt ComfyUI Cloud",children:(0,n.jsx)(c.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,n.jsx)(k.Z,{icon:"mdi:cloud",width:20,height:20,color:"#3cc365"})})})}):null]}),(0,n.jsxs)(c.Z,{direction:"column",sx:{width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",p:1,...P?{pt:0}:{}},position:"absolute",bottom:0,children:[L?(0,n.jsx)(s.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",p:"5px",position:"absolute",top:-35,right:0,zIndex:100},children:(0,n.jsx)(x.Z,{sx:{cursor:"pointer",background:"linear-gradient(45deg, #602DB6 30%, #885659 90%)"},label:(0,n.jsx)(h.Z,{variant:"caption",fontWeight:500,children:"Challenge Winner"}),size:"small",variant:"filled"})}):null,(()=>{let{nodes_index:e,nodes_count:i}=o||{};if(!e||!i)return null;let{total:r}=i;return(0,n.jsx)(s.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",p:"5px",position:"absolute",top:-35,left:0,right:0,zIndex:100},children:(0,n.jsx)(x.Z,{sx:{cursor:"pointer",backgroundColor:"rgba(0, 0, 0, 0.5)"},label:(0,n.jsxs)(h.Z,{variant:"caption",children:[(0,n.jsx)("strong",{children:r})," Nodes"]}),size:"small",variant:"filled"})})})(),W&&en?(0,n.jsx)(s.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",p:"5px",position:"absolute",top:-35,right:0,zIndex:100},children:(0,n.jsx)(x.Z,{sx:{cursor:"pointer",background:"linear-gradient(45deg, #602DB6 30%, #885659 90%)"},label:(0,n.jsx)(h.Z,{variant:"caption",fontWeight:500,children:"Contest entry"}),size:"small",variant:"filled"})}):null,P&&!V?null:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",mt:1},children:V||`${null==ee?void 0:ee.name}'s Workflow`}),(0,n.jsx)(y.XA,{workflow:o}),(0,n.jsx)(c.Z,{direction:"column",sx:{position:"relative"},children:(0,n.jsx)(y.AJ,{workflow:o,isWorkflow:!0})})]})]})}),(F||W||z)&&!X?(0,n.jsx)(s.Z,{sx:{top:10,left:10,position:"absolute",zIndex:999,backgroundColor:"rgba(0, 0, 0, 0.5)",p:"5px 7px",borderRadius:"15px"},children:(0,n.jsxs)(c.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,n.jsx)(k.Z,{icon:"mdi:eye-off-outline",width:15,height:15}),(0,n.jsx)(h.Z,{variant:"caption",fontWeight:500,children:"Private"})]})}):null,E&&R?(0,n.jsxs)(s.Z,{sx:{top:10,right:10,position:"absolute",color:"#FFFFFF",zIndex:999},children:[(0,n.jsx)(l.Z,{ref:O,id:"modelCard_d",onClick:e=>{H(!0),e.stopPropagation()}}),(0,n.jsxs)(p.Z,{open:B,anchorEl:O.current,onClose:e=>{H(!1),e.stopPropagation()},children:[(0,n.jsx)(u.Z,{sx:{minWidth:"100px"},children:(0,n.jsx)(f.Z,{control:(0,n.jsx)(g.Z,{checked:L,onChange:e=>{S(e.target.checked),Q(e.target.checked),H(!1)},inputProps:{"aria-label":"controlled"}}),label:(0,n.jsx)(s.Z,{sx:{cursor:"pointer"},children:(0,n.jsx)(Z.ZP,{title:(0,n.jsx)(Z.k5,{children:"Choose this workflow as one of the winners of the challenge."}),anchor:(0,n.jsx)(c.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,n.jsx)(h.Z,{variant:"body2",children:"Challenge Winner"})})})})})}),(0,n.jsx)(u.Z,{onClick:e=>{!0===confirm("Do you want to remove this workflow from the challenge?")&&(M({workflow_id:G}),H(!1),e.stopPropagation())},sx:{color:"rgba(255, 0, 0, 0.7)"},children:"Remove from challenge"})]})]}):F||W||z?(0,n.jsxs)(s.Z,{sx:{top:10,right:10,position:"absolute",color:"#FFFFFF",zIndex:999},children:[(0,n.jsx)(l.Z,{ref:O,id:"modelCard_d",onClick:e=>{H(!0),e.stopPropagation()}}),(0,n.jsxs)(p.Z,{open:B,anchorEl:O.current,onClose:e=>{H(!1),e.stopPropagation()},children:[(0,n.jsx)(u.Z,{sx:{minWidth:"100px"},onClick:e=>{H(!1),A.push(`/workflows/edit/${G}`),e.stopPropagation()},children:"Edit"}),(0,n.jsx)(u.Z,{sx:{minWidth:"100px"},children:(0,n.jsx)(f.Z,{control:(0,n.jsx)(g.Z,{disabled:!!et,checked:X,onChange:e=>{J(e.target.checked),T({workflow_id:o.id,is_public:e.target.checked})},inputProps:{"aria-label":"controlled"}}),label:(0,n.jsx)(s.Z,{sx:{cursor:"pointer"},children:(0,n.jsx)(Z.ZP,{title:(0,n.jsxs)(Z.k5,{children:[(0,n.jsx)("strong",{children:"Public"})," workflows are visible to everyone through search, feed and on your profile."]}),anchor:(0,n.jsx)(c.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,n.jsx)(h.Z,{variant:"body2",children:"Public"})})})})})}),F||W?(0,n.jsx)(u.Z,{onClick:e=>{!0===confirm("Do you want to delete the workflow?")&&(U({workflow_id:G}).then(()=>{N.refetchQueries(["useWorkflows"])}),H(!1),e.stopPropagation())},sx:{color:"rgba(255, 0, 0, 0.7)"},children:"Delete"}):null]})]}):null]})}},88565:function(e,o,i){var n=i(26538);o.Z=void 0;var r=n(i(64842)),t=i(52676);o.Z=(0,r.default)((0,t.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz")}}]);