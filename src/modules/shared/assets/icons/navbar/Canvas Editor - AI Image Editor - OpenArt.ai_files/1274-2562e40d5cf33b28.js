"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1274],{94889:function(e,t,i){i.d(t,{L:function(){return n}});let n="#161616"},33141:function(e,t,i){i.d(t,{oH:function(){return h}});var n,a,r=i(52676),o=i(75271),s=i(21461),l=i(53785),d=i(59204),c=i(42232);function h(e){return(0,r.jsx)(u,{...e,type:"text"})}function u(e){let{showClear:t,value:i,onChange:n,debounceTime:a,placeholder:h,sx:u,clearSx:p,type:x,startAdornment:m,...g}=e,[j,f]=(0,o.useState)(t),[b,v]=(0,o.useState)(i),S=e=>{null==n||n(e),e?f(!0):f(!1)},w=e=>{v(e)};return(0,o.useEffect)(()=>{v(i)},[i]),(0,o.useEffect)(()=>{let e=(0,d.Z)(S,a||0);return e(b),()=>{e.cancel()}},[b]),(0,r.jsx)(s.Z,{...g,placeholder:h,sx:u,type:x,value:b,onChange:e=>w(e.target.value),InputProps:{endAdornment:j?(0,r.jsx)(l.Z,{position:"end",children:(0,r.jsx)(c.Z,{icon:"ant-design:close-outlined",sx:{cursor:"pointer",width:20,height:20,...p},onClick:()=>{w("")}})}):null,startAdornment:m}})}(n=a||(a={})).text="text",n.number="number"},13581:function(e,t,i){i.d(t,{Y:function(){return c}});var n=i(52676),a=i(75271),r=i(13855),o=i(60609),s=i(7502),l=i(70565),d=i(46406);let c=a.forwardRef(function(e,t){let{value:i,max:d,min:c,onChange:h,disabled:m,buttonSize:g,...j}=e,[f,b]=(0,a.useState)(i);return(0,a.useEffect)(()=>{b(i)},[i]),(0,n.jsx)(l.Z,{title:m?"Cannot edit: Matches the number of prompts in your uploaded CSV file.":"",children:(0,n.jsx)(r.Y,{slots:{root:u,input:p,incrementButton:x,decrementButton:x},slotProps:{root:{},input:{isOutSize:i>d||i<c,height:j.height,width:j.width},incrementButton:{children:(0,n.jsx)(o.Z,{fontSize:"small"}),className:"increment",height:g,width:g},decrementButton:{children:(0,n.jsx)(s.Z,{fontSize:"small"}),height:g,width:g}},...j,value:f,min:c,max:d,disabled:m,onChange:(e,t)=>{h(t??c??1)},onInputChange:e=>{let t=Number.parseFloat(e.target.value);Number.isNaN(t)&&(t=1),t>=c&&t<=d&&h(t)},ref:t})})}),h={100:"#daecff",200:"#b6daff",300:"#66b2ff",400:"#3399ff",500:"#007fff",600:"#0072e5",700:"#0059B2",800:"#004c99"},u=(0,d.ZP)("div")(e=>{let{theme:t}=e;return`
  font-weight: 400;
  color: white;
  display: flex;
  flex-flow: row nowrap;
`}),p=(0,d.ZP)("input")(e=>{let{theme:t,disabled:i,isOutSize:n,height:a=32,width:r=40}=e;return`
  font-size: 0.875rem;
  font-family: inherit;
  font-weight: 400;
  line-height: 1.375;
  background: #1D1D1D;
  color: ${n?"#FF6B00":"#FFFFFF"};
  border: 1px solid #3C4257;
  border-radius: 5px;
  margin: 0 8px;
  padding: 10px 12px;
  outline: 0;
  min-width: 0;
  width: ${r}px; 
  height: ${a}px;
  text-align: center;

  ${i?`
    color: rgba(255, 255, 255, 0.38);
    cursor: not-allowed;
     `:`
     &:hover {
      border-color: ${h[400]};
    }
  
    &:focus-visible {
      outline: 0;
    }
     `}
`}),x=(0,d.ZP)("button")(e=>{let{theme:t,disabled:i,height:n=32,width:a=32}=e;return`
  font-family: 'IBM Plex Sans', sans-serif;
  font-size: 0.875rem;
  box-sizing: border-box;
  line-height: 1.5;
  border: 1px solid ;
  border-radius: 5px;
  border-color: rgba(255, 255, 255, 0.12);
  background: #444;
  width: ${a}px;
  height: ${n}px;
  display: flex;
  flex-flow: row nowrap;
  justify-content: center;
  align-items: center;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 120ms;
  cursor: pointer;

  ${i?`
    color: rgba(255, 255, 255, 0.38);
    cursor: not-allowed;
     `:`
    &:hover {
      border-color: ${h[400]};
    }
  
    &:focus-visible {
      outline: 0;
    }
     `}

  &:hover {
    border-color: ${h[400]};
  }

  &:focus-visible {
    outline: 0;
  }

  &.increment {
    order: 1;
  }
`})},4282:function(e,t,i){i.d(t,{i:function(){return l}});var n=i(52676),a=i(35019),r=i(12073),o=i(85315),s=i(7861);function l(e){let t=(0,r.Z)(),i=(i,a,r)=>(0,n.jsx)(s.Br,{active:e.value===i,label:a,sx:{flex:1,padding:"3px 5px",opacity:r?1:.5,transition:t.transitions.create(["background-color","opacity"],{duration:t.transitions.duration.shortest}),bgcolor:r?o.Um:o.dY,"&:hover":{...r?{}:{bgcolor:o.gb}},"&:active":{bgcolor:o.Um}},onClick:t=>{e.onChange(i,t)}});return(0,n.jsxs)(a.Z,{direction:"row",sx:{bgcolor:o.dY,padding:"2px",borderRadius:"5px",...e.sx},children:[i(e.leftValue,e.leftLabel,e.value===e.leftValue),e.midValue?i(e.midValue,e.midLabel,e.value===e.midValue):null,i(e.rightValue,e.rightLabel,e.value===e.rightValue)]})}},59409:function(e,t,i){i.d(t,{XZ:function(){return a},n7:function(){return r},qV:function(){return o}});var n=i(29573);let a={height:22,width:22,bgcolor:"transparent"},r={borderRadius:"5px",border:"1px solid #444",fontSize:14,fontWeight:600,textTransform:"none"},o=(0,n.Z)(a,"height","width")},6192:function(e,t,i){var n=i(71481),a=i(6321),r=i(79534);class o{execute(){this._restoreState(),this.receiver.setCoords(),(0,r.mO)(this.receiver)&&this.receiver.fire(a.l4.SIZE_CHANGE,{state:this.state,prevState:this.prevState}),this.canvas.requestRenderAll()}async undo(){await this._restorePrevState(),this.receiver.setCoords(),(0,r.mO)(this.receiver)&&this.receiver.fire(a.l4.SIZE_CHANGE,{state:this.prevState,prevState:this.state}),this.canvas.requestRenderAll()}_initStateProperties(){this.stateProperties=Object.keys(this.receiver._stateProperties)}_restoreState(){this._restore(this.state)}async _restorePrevState(){return new Promise((e,t)=>{try{n.fabric.util.enlivenObjectEnlivables(this.prevState,{},t=>{this._restore({...this.prevState,...t}),e("done")})}catch(e){t(e)}})}_restore(e){this.stateProperties.forEach(t=>{this.receiver.set(t,e[t])})}_saveState(){this.stateProperties.forEach(e=>{this.state[e]=this.receiver.get(e)})}_savePrevState(){this.receiver._stateProperties&&this.stateProperties.forEach(e=>{this.prevState[e]=this.receiver._stateProperties[e]})}constructor(e,t){this.canvas=e,this.receiver=t,this._initStateProperties(),this.state={},this.prevState={},this._saveState(),this._savePrevState()}}t.Z=o},41805:function(e,t,i){i.d(t,{N:function(){return l},W:function(){return s}});var n,a=i(71481),r=i(6321),o=i(72243);class s extends a.fabric.Group{get clipPath(){return this._clipPath}set clipPath(e){var t;null===(t=this.backgroundObject)||void 0===t||t.set("clipPath",e),this._clipPath=e}moveIn(e){let t=new a.fabric.Point(e.left,e.top),i=a.fabric.util.transformPoint(t,this.calcTransformMatrix());e.set({left:i.x,top:i.y}),this.addChildren(e)}moveOut(e){this.remove(e)}isChild(e){return this._objects.includes(e)}canAdd(e){return!1}handleScaling(){var e,t;let i=this.getCenterPoint();this._maintainAspectRatio&&this._adjustAspectRatio();let n=Math.round(this.height),a=Math.round(this.width);if(this._synchronism){this.backgroundObject&&this._updateBackgroundObjectSize(a,n),this.setDimensionsAndPosition({height:n,width:a,left:this.left,top:this.top,scaleX:this.scaleX,scaleY:this.scaleY});return}this.setDimensionsAndPosition({height:Math.round(this.rawHeight),width:Math.round(this.rawWidth),left:this.left,top:this.top,rawScaleX:1,rawScaleY:1});let r=i.x-((null===(e=this._lastCenter)||void 0===e?void 0:e.x)||0),o=i.y-((null===(t=this._lastCenter)||void 0===t?void 0:t.y)||0);(0!==r||0!==o)&&this._updateObjectPositions(r,o),this._lastCenter=i}addChildren(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(e=>{(0,o.i8)(e,this)||(e.set({container:this}),this.add(e),this.triggerRender())})}removeChildren(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(e=>{(0,o.i8)(e,this)&&(this.remove(e),this.triggerRender())})}adjustObjectLevel(e){this._objects=e,this.set("dirty",!0)}replaceBackground(e){this.backgroundObject=e,this.updateThumbnail(),this.triggerRender()}has(e){return this._objects.includes(e)}getLocalCoordinatesForGlobal(){let e=new a.fabric.Point(this.left,this.top),t=this.toLocalPoint(e,"center","center");return t.x/=this.scaleX,t.y/=this.scaleY,t}setDimensionsAndPosition(e){let{height:t,width:i,left:n,top:a,scaleX:r,scaleY:o,rawScaleX:s,rawScaleY:l}=e;this.set("height",t??this.get("height")),this.set("width",i??this.get("width")),this.set("left",n??this.get("left")),this.set("top",a??this.get("top")),this.set("scaleX",r??this.get("scaleX")),this.set("scaleY",o??this.get("scaleY")),this.set("rawScaleX",s??this.get("rawScaleX")),this.set("rawScaleY",l??this.get("rawScaleY")),this.setCoords(),this.triggerRender(),this._fireSizeChangeEvent({height:t??this.get("height"),width:i??this.get("width"),left:n??this.get("left"),top:a??this.get("top"),scaleX:r??this.get("scaleX"),scaleY:o??this.get("scaleY")})}setDimensions(e){var t;let{height:i,width:n}=e;this.set({height:i,width:n,rawScaleX:1,rawScaleY:1}),this._updateBackgroundObjectSize(this.width,this.height),null===(t=this.backgroundObject)||void 0===t||t.setCoords(),this.setCoords(),this.dirty=!0}render(e){this.backgroundObject&&this._renderBackgroundObject(e),super.render(e)}destroy(){return this.off("moving",this._updateLastCenterBind),this.off("scaling",this._handleScalingBind),super.destroy()}isTargetTransparent(e){if(!this.backgroundObject)return!0;if(this.group)return e(this.group);{let t=a.fabric.util.object.clone(this.backgroundObject);Object.assign(t,{left:this.left,top:this.top,height:this.height,width:this.width,scaleX:this.scaleX,scaleY:this.scaleY,zoom:this.zoom}),t.setCoords();let i=e(t);return t.dispose(),i}}onAdded(){this._initEventHandlers(),this._lastCenter=this.getCenterPoint(),this.canvas.on("before:render",()=>{this._objects.forEach(e=>{e.setCoords()})})}_initChildrenObject(e){null==e||e.forEach(e=>{e.set({container:this})})}_updateBackgroundObjectSize(e,t){if(!this.backgroundObject)return;let{width:i,height:n,scaleX:a,scaleY:r}=this.backgroundObject;(i!==e||n!==t)&&(this.backgroundObject.width=e/a,this.backgroundObject.height=t/r,this.backgroundObject.setCoords())}_fireSizeChangeEvent(e){let{height:t,width:i,left:n,top:a,scaleX:o,scaleY:s}=e;this.fire(r.l4.SIZE_CHANGE,{state:{height:t,width:i,scaleX:o,scaleY:s,left:n,top:a},prevState:{height:this.height,width:this.width,scaleX:this.scaleX,scaleY:this.scaleY,left:this.left,top:this.top}})}_updateObjectPositions(e,t){this.forEachObject(i=>{i.set({left:i.left-e/this.zoom,top:i.top-t/this.zoom}),i.setCoords()})}_renderBackgroundObject(e){e.save(),e.translate(this.left,this.top),e.rotate(this.angle*(Math.PI/180)),e.scale(this.scaleX,this.scaleY),this.backgroundObject.render(e),e.restore()}_initEventHandlers(){this.on("moving",this._updateLastCenterBind),this.on("scaling",this._handleScalingBind),this.on("modified",()=>{let{height:e,width:t}=this;this._updateBackgroundObjectSize(t,e)}),this.on(r.l4.SIZE_CHANGE,e=>{var t;(null===(t=this.handlerManager)||void 0===t?void 0:t.activeHandler)&&this.handlerManager.activeHandler.handleEvent(r.l4.SIZE_CHANGE,e)})}_updateLastCenter(){this._lastCenter=this.getCenterPoint()}_adjustAspectRatio(){let e=this.backgroundObject;if(e){let t,i;let n=e.width/e.height,a=this.getScaledWidth(),r=this.getScaledHeight();a/r>n?(i=a/n/this.height,this.scaleY>=this._lastScaleY?this.set("scaleY",i):(t=r*n/this.width,this.set("scaleX",t))):a/r<n&&(t=r*n/this.width,this.scaleX>=this._lastScaleX?this.set("scaleX",t):(i=a/n/this.height,this.set("scaleY",i))),this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY}}toObject(e){return Object.assign(super.toObject(e),{backgroundObject:{backgroundObject:this.backgroundObject?this.backgroundObject.toObject(e):null}})}static fromObject(e,t){let i=e.objects,n=a.fabric.util.object.clone(e);delete n.objects,a.fabric.util.enlivenObjects(i,i=>{a.fabric.util.enlivenObjectEnlivables(e,n,e=>{t(new s(i,{...n,...e}))})},"fabric")}constructor(e,t){let i=null==t?void 0:t.backgroundObject,{width:n,height:a}=i||{};super(e,{subTargetCheck:!0,erasable:!1,height:a,width:n,...t}),this._maintainAspectRatio=!1,this._synchronism=!1,this._lastScaleY=1,this._lastScaleX=1,this._initChildrenObject(e),this.backgroundObject=i,this.options=t,this._maintainAspectRatio=(null==t?void 0:t.maintainAspectRatio)||!1,this._synchronism=(null==t?void 0:t.synchronism)||!1,this._handleScalingBind=this.handleScaling.bind(this),this._updateLastCenterBind=this._updateLastCenter.bind(this),this.on("added",this.onAdded.bind(this))}}function l(e){return e instanceof s}s.type="Container",s.subclasses=[],s.superclass=a.fabric.Group,null===(n=a.fabric.Group.subclasses)||void 0===n||n.push(s),a.fabric.Container=s},6321:function(e,t,i){var n,a,r,o,s,l;i.d(t,{OF:function(){return r},Yj:function(){return n},l4:function(){return a}}),(o=n||(n={})).ActionImage="ActionImage",o.BlendBoard="BlendBoard",o.Text="ActionText",o.DrawableRect="DrawableRect",o.DrawableEllipse="DrawableEllipse",o.DrawableTriangle="DrawableTriangle",o.DrawableDialog="DrawableDialog",(s=a||(a={})).ADD="Container:add",s.READY="Container:ready",s.REMOVE="Container:remove",s.MOVE_IN="Container:moveIn",s.MOVE_OUT="Container:moveOut",s.SIZE_CHANGE="Container:size:change",s.POSITION_CHANGE="Container:position:change",s.LEVEL_CHANGE="Container:level:change",s.DESELECTED="Container:deselected",s.SELECTED="Container:selected",s.CHILDREN_CHANGE="Container:children:change",(l=r||(r={})).AuxiliaryObject="AuxiliaryObject",l.PrimaryObject="PrimaryObject"},79534:function(e,t,i){i.d(t,{Jk:function(){return h},N1:function(){return c},mO:function(){return s}});var n=i(71481),a=i(41227),r=i.n(a),o=i(41805);function s(e){return"addChildren"in e&&"removeChildren"in e&&"moveIn"in e&&"moveOut"in e&&"isChild"in e&&"canAdd"in e&&"function"==typeof e.isChild&&"function"==typeof e.moveOut&&"function"==typeof e.moveIn&&"function"==typeof e.addChildren&&"function"==typeof e.removeChildren}function l(e){return"group"===e.type}function d(e){e.setCoords();let t=n.fabric.util.invertTransform(e.canvas.viewportTransform),i=e;for(;i.group;){let e=(i=i.group).calcTransformMatrix();t=n.fabric.util.multiplyTransformMatrices(t,e)}let a=e.getCoords().map(e=>n.fabric.util.transformPoint(e,t)).map(e=>[e.x,e.y]);return a.push(a[0]),[a]}function c(e,t){let i=d(e),n=d(t);return r().intersection(i,n)}function h(e,t){if(e.clipPath&&l(e.clipPath)||(0,o.N)(e.clipPath)){let t=e.clipPath.getObjects().filter(e=>!e.isIntersectionClipPath);e.set({clipPath:t.length>0?new n.fabric.Group(t,{selectable:!1,originX:"center",originY:"center"}):null,perPixelTargetFind:!1})}else e.set({clipPath:null,perPixelTargetFind:!1});if(0===t.length){e.canvas.requestRenderAll();return}let i=n.fabric.util.invertTransform(e.calcTransformMatrix()),a=t.map(e=>{let t=e[0].map(e=>{let[t,a]=e;return n.fabric.util.transformPoint(new n.fabric.Point(t,a),i)});return new n.fabric.Polygon(t,{selectable:!1,isIntersectionClipPath:!0})}),r=e.clipPath;r?l(r)||(0,o.N)(r)?a.forEach(e=>r.addWithUpdate(e)):r=new n.fabric.Group([r,...a],{selectable:!1,originX:"center",originY:"center"}):r=new n.fabric.Group(a,{selectable:!1,originX:"center",originY:"center"}),e.set({clipPath:r,perPixelTargetFind:!0}),e.canvas.requestRenderAll()}},30388:function(e,t,i){i.d(t,{i:function(){return E}});var n=i(52676),a=i(99058),r=i(20091),o=i(35019),s=i(71137),l=i(70565),d=i(66686),c=i(8765),h=i(89717),u=i(75271),p=i(58684),x=i(62935),m=i(61271),g=i(77742),j=i(24337),f=i(57598),b=i(92598),v=i(21461),S=i(65893),w=i(79481),y=i(83954),C=i(80924),Z=i(27928),_=i(2125),k=i(30754),P=i(45137);let T=e=>{let{...t}=e,[i,a]=(0,Z.g)(),{isMobile:r}=(0,C.j)(),d=(0,h.aT)(),[c,T]=(0,u.useState)(""),{model:E}=t,[N,I]=(0,u.useState)(null),[A,M]=(0,u.useState)(!1);(0,u.useEffect)(()=>{if(null==E?void 0:E.sample_images){let e=[];for(let t of E.sample_images)e.push({image_url:t,is_nsfw:!1});I(e)}},[null==E?void 0:E.sample_images]);let U=async e=>{if(((null==e?void 0:e.training_mode)==="style"||(null==e?void 0:e.training_mode)==="character")&&!(null==e?void 0:e.object_prompt)&&!c){(0,k.QD)("Please describe the style");return}try{let t=await i({id:e.id,object_prompt:c,force_retrain:A});(null==t?void 0:t.id)===e.id&&(P.B("model_training",{training_type:"retrain",guiding_word:c,model_name:e.model_name,image_num:e.sample_images.length,model_type:e.training_mode,step_num:(null==e?void 0:e.step_num)??1e3}),R(),await d.normal({title:(0,n.jsx)(x.Z,{variant:"h4",children:"Re-training started"}),content:(0,n.jsx)(x.Z,{variant:"body1",children:"Please check back in 5-10 minutes."})}))}catch(e){var t,a,r,o,s,l;if(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.nsfw_images)for(let t of((null===(o=e.response)||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.nsfw_images.length)<(null==N?void 0:N.length)&&M(!0),null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.nsfw_images))(null==N?void 0:N.some(e=>e.image_url===t))&&I(e=>e.map(e=>e.image_url===t?{...e,is_nsfw:!0}:e))}},R=()=>{t.onClose({},"backdropClick")};return(0,n.jsxs)(m.Z,{...t,sx:{"& .MuiDialog-paper":{maxWidth:660,width:"600px",maxHeight:"700px"}},children:[(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(x.Z,{fontSize:"16px",fontWeight:600,children:"Start re-training?"}),(0,n.jsx)(y.h,{dark:!1,onClick:R,sx:{position:"absolute",top:{xs:4,md:10},right:{xs:4,md:10}}})]}),(0,n.jsx)(j.Z,{sx:{width:"100%",height:"1px",backgroundColor:"rgba(68, 68, 68, 0.1)",marginTop:"20px"}}),(0,n.jsx)(f.Z,{sx:{pt:"24px!important",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,n.jsxs)(o.Z,{spacing:2,direction:"column",children:[(0,n.jsx)(b.Z,{component:"div",severity:"info",sx:{mt:1,mb:1,fontWeight:600,color:"#FEFEFE",width:"100%","& .MuiAlert-message":{width:"100%"},display:"flex",alignItems:"center"},children:(0,n.jsxs)(x.Z,{variant:"body2",sx:{fontWeight:500},component:"div",children:["Read the"," ",(0,n.jsx)("a",{href:"https://openart.notion.site/Re-training-Guide-for-the-new-FLUX-based-Models-119269c1f5858064b3bbc71683ff85e6?pvs=74",target:"_blank",style:{textDecoration:"underline",fontWeight:700},rel:"noreferrer",children:"Re-training Guide"})," ","for best results."]})}),(0,n.jsxs)(x.Z,{fontWeight:"500",children:["Re-train this model for ",(0,n.jsx)("b",{children:"FREE"})," with the upgraded FLUX-based fine-tuning."]}),(null==E?void 0:E.training_mode)!=="style"&&(null==E?void 0:E.training_mode)!=="character"||(null==E?void 0:E.object_prompt)?null:(0,n.jsxs)(o.Z,{spacing:2,direction:"column",sx:{mt:5},children:[(0,n.jsxs)(x.Z,{fontWeight:"700",children:["Describe the ",null==E?void 0:E.training_mode,":"]}),(0,n.jsx)(v.Z,{fullWidth:!0,value:c,onChange:e=>T(e.target.value),placeholder:(null==E?void 0:E.training_mode)==="style"?_.W2:_.fK,variant:"outlined",multiline:!0,minRows:5}),(null==E?void 0:E.sample_images)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{sx:{mt:2},fontWeight:"700",children:"Sample Images:"}),(0,n.jsx)(S.Z,{sx:{display:"grid",gridTemplateColumns:`repeat(${r?2:4}, 1fr)`,gap:2},children:null==N?void 0:N.map(e=>(0,n.jsx)(S.Z,{sx:{border:e.is_nsfw?"3px solid #EC681E":"none",borderRadius:"10px",aspectRatio:"1/1"},children:(0,n.jsx)("img",{loading:"lazy",height:"120",width:"100%",alt:"",src:e.image_url,style:{borderRadius:"10px",objectFit:"cover"}})},e.image_url))})]}):null]})]})}),(0,n.jsxs)(w.Z,{children:[(0,n.jsx)(s.Z,{variant:"outlined",sx:{color:"rgba(153, 153, 153, 1)",fontSize:"12px",fontWeight:"600",borderRadius:"5px"},onClick:R,children:"Cancel"}),A?(0,n.jsx)(l.Z,{title:"We’ve detected one or more NSFW images. We’ll remove them in the retraining process.",placement:"top",open:A,arrow:!0,children:(0,n.jsx)(p.Z,{loading:a,variant:"contained",sx:{color:"white",backgroundColor:"rgba(236, 104, 30, 1)",fontSize:"12px",fontWeight:"600",borderRadius:"5px",":hover":{backgroundColor:"rgba(236, 104, 30, 0.8)"}},onClick:async()=>{await U(E)},children:"Force Re-train"})}):(0,n.jsx)(p.Z,{loading:a,variant:"contained",sx:{color:"white",backgroundColor:"rgb(9, 41, 247)",fontSize:"12px",fontWeight:"600",borderRadius:"5px",":hover":{backgroundColor:"rgba(9, 41, 247, 0.8)"}},onClick:async()=>{await U(E)},children:"Re-train"})]})]})},E=e=>{let{model:t,reTrainButtonSx:i,deleteButtonSx:u,normalDeleteButton:p}=e,x=(0,h.aT)(),[m]=(0,Z.Fc)(),g=e=>{x.confirm({title:"Are you sure to delete this model?",content:"this model will be removed from the model hub",iconType:"warning",onConfirm:()=>{m({id:e.id})}})},{showModal:j}=(0,c.dd)(),f=async e=>{j(T,{model:e})};return(0,n.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(s.Z,{variant:"contained",sx:{backgroundColor:"rgba(9, 41, 247, 0.8)",color:"white",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(9, 41, 247, 1)",transform:"scale(1.05)",boxShadow:"0 0 10px rgba(9, 41, 247, 0.5)"},...i},size:"small",endIcon:(0,n.jsx)(l.Z,{title:"To keep creating, re-train this model for free with the new FLUX-based fine-tuning.",children:(0,n.jsx)(a.Z,{fontSize:"small"})}),onClick:()=>f(t),children:"Re-train"}),p?(0,n.jsx)(s.Z,{variant:"outlined",sx:{backgroundColor:"rgba(11, 12, 12, 1)",color:"white",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(11, 12, 12, 1)",transform:"scale(1.05)",boxShadow:"0 0 10px rgba(11, 12, 12, 1)"},...u},size:"small",onClick:()=>g(t),children:"Delete"}):(0,n.jsx)(d.Z,{size:"small",onClick:()=>g(t),children:(0,n.jsx)(r.Z,{sx:{color:"primary.main"},fontSize:"small"})})]})}},92483:function(e,t,i){i.d(t,{A:function(){return r}});var n=i(52676),a=i(22952);let r=e=>{let{value:t,onChange:i,max:r,min:o,step:s,unit:l,disabled:d,label:c,tipText:h}=e;return(0,n.jsx)(a.X,{tipText:h,label:c,disabled:d,value:t,unit:l,min:o,max:r,step:s,onChange:i,inline:!0,showResult:!0})}},12484:function(e,t,i){i.d(t,{x:function(){return st}});var n={};i.r(n),i.d(n,{AddObjectCommand:function(){return ni},SetPositionCommand:function(){return na},SetRotationCommand:function(){return nr},SetScaleCommand:function(){return no}});var a=i(52676),r=i(70811),o=i(35019),s=i(65893),l=i(40728),d=i(90308),c=i(17910),h=i(75006),u=i(84530),p=i(9097),x=i(71367),m=i(80924),g=i(31526);function j(e){let{children:t,sx:i}=e,{isMobile:n}=(0,m.j)(),{mode:r}=(0,c.T)(),j=(0,h.TS)((0,l.N)(e=>e.key)),f=(0,h.TS)((0,l.N)(e=>e.getParameterValue("type"))),[b,v]=(0,x.y)({key:p.J[f]?`create.model.${p.J[f]}`:`create.model.${j}`,sx:{".feature-block-title-text":{fontSize:13},".feature-block-description":{fontSize:10}}});return(0,a.jsxs)(s.Z,{className:"create-config-container",flex:"1",sx:(0,g.j)({overflow:{md:"auto"}},i),children:[(()=>{if(r===u.V.CREATE){let e=v();return e?(0,a.jsx)(o.Z,{p:1,children:e}):null}return null})(),n&&"dalle"!==f?(0,a.jsx)(d.Z,{}):null,t]})}var f=i(62935),b=i(92598);let v=e=>{let{children:t}=e;return(0,a.jsx)(f.Z,{fontSize:"inherit",fontWeight:"inherit",children:t})},S=e=>{let{children:t}=e;return(0,a.jsx)(b.Z,{severity:"warning",sx:{m:"16px 10px"},children:t})};var w=i(75271),y=i(2850),C=i(26784),Z=i(24337),_=i(16850),k=i(12073),P=i(47261);let T=e=>{let{id:t,className:i,content:n,title:r,tooltip:s,expanded:l,defaultExpanded:d=!0,showExpandIcon:c=!0,expandIcon:h,sx:u,withDivider:p,onChange:x}=e,m=(0,w.useRef)(null),j=(0,k.Z)();return(0,a.jsxs)(y.Z,{id:t,className:i,ref:m,sx:p?(0,g.j)({padding:"0 !important"},u):u,expanded:l,onChange:(e,t)=>{null==x||x(e,t),t&&setTimeout(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},j.transitions.duration.standard)},defaultExpanded:d,children:[(0,a.jsx)(C.Z,{expandIcon:c?h:null,"aria-controls":"panel3-content",id:"panel3-header",sx:{fontSize:"14px",fontWeight:600,...p&&{px:1.25}},children:(()=>{let e="string"==typeof r?(0,a.jsx)(f.Z,{variant:"editor-h3",children:r}):r;return s?(0,a.jsx)(o.Z,{direction:"row",alignItems:"center",children:(0,a.jsx)(P.ZP,{title:"string"==typeof s?s:(0,a.jsx)(s,{}),anchor:e})}):e})()}),p?(0,a.jsx)(Z.Z,{}):null,(0,a.jsx)(_.Z,{sx:p?{mt:1.25,px:1.25}:{},children:n})]})},E=e=>"object"==typeof e&&"getValue"in e?e.getValue():"string"==typeof e&&"none"===e.toLocaleLowerCase()?"":e;function N(e){let{children:t,value:i,extra:n,expend:r,onExpendChange:s}=e,l=(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",width:"100%",children:[(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"start",children:[(0,a.jsx)(P.ZP,{title:e.tooltip,anchor:(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[e.startIcon,(0,a.jsxs)(f.Z,{variant:"editor-h3",sx:e.labelSx,children:[e.label,e.showValue?(0,a.jsxs)("span",{children:[":",E(i)]}):null]})]})}),!e.required&&e.showOptional?(0,a.jsx)(o.Z,{sx:{ml:"4px",borderRadius:1,background:"#464749",fontSize:13,padding:"0 5px"},alignItems:"center",justifyContent:"center",children:"Optional"}):null]}),(0,a.jsx)(o.Z,{mr:1,children:n})]});return(0,a.jsx)(T,{id:e.id,className:e.className,title:l,expanded:r,expandIcon:e.expandIcon,onChange:(e,t)=>s(t),content:t,sx:(0,g.j)({display:e.hidden&&"none"},e.sx)})}var I=i(31750),A=i(71137),M=i(8765),U=i(61271),R=i(77742),z=i(57598),D=i(33141),V=i(81578),F=i(12826),B=i(48945);let O=e=>{let{onSelect:t,options:i,multiple:n=!1,label:r="Filter",...l}=e,[d,c]=(0,w.useState)([]),h=e=>{c(t=>{let i=[...t];if(i.includes(e))i.splice(i.indexOf(e),1);else{if(!n)return[e];i.push(e)}return i})};return(0,w.useEffect)(()=>{null==t||t(d.map(e=>i[e].value))},[d]),(0,a.jsx)(s.Z,{children:(0,a.jsx)(o.Z,{direction:"row",spacing:1,sx:{p:2,overflow:"auto"},children:i.map((e,t)=>(0,a.jsx)(B.Z,{label:e.label,sx:{color:"#ffffff","&:hover":{boxShadow:"0 4px 8px 0 rgba(0,0,0,0.2)",backgroundColor:d.includes(t)?"secondary.dark":"primary.dark"},transition:"0.3s",borderRadius:"20px",backgroundColor:d.includes(t)?"secondary.main":"",...l},onClick:()=>h(t),clickable:!0},t))})})};var W=i(49117),L=i(46974),G=i(40174),H=i(29573),K=i(68779),$=i(60609),q=i(77403),X=i(68096),Y=i(11555);let Q=e=>{let{isMobile:t,pagePath:i=Y.ep,title:n="Train your own model",titleMobile:r="Train Model",description:l="Fine-tune your model within 10 minutes.",newTab:d=!1}=e,c=(0,L.useRouter)();return(0,a.jsxs)(q.Z,{sx:{height:"100%",border:"1px dashed #0084FF",cursor:"pointer"},onClick:()=>{d?window.open(i,"_blank"):c.push(i)},children:[(0,a.jsx)(X.Z,{component:"div",sx:{backgroundColor:"rgba(0, 132, 255, 0.10)",height:{xs:150,sm:200,md:300,lg:300,xl:350},width:"100%",position:"relative"}}),(0,a.jsx)(s.Z,{sx:{position:"absolute",top:0,height:"calc(100% - 110px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)($.Z,{sx:{height:44,width:44,color:"#0084FF"}})}),(0,a.jsxs)(o.Z,{sx:{height:"110px",px:1,py:2,position:"absolute",bottom:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.6)"},children:[(0,a.jsx)(f.Z,{gutterBottom:!0,variant:t?"body1":"h5",sx:t?{fontSize:"16px",fontWeight:600}:null,component:"div",noWrap:!0,children:t?r:n}),(0,a.jsx)(f.Z,{gutterBottom:!0,variant:"body2",color:"text.secondary",children:l})]})]})};var J=i(903),ee=i(49120);let et=e=>{let t;return"string"==typeof e?t=(0,ee.DY)(new Date(e).getTime()):"object"==typeof e&&e._seconds&&(t=(0,ee.DY)(1e3*e._seconds)),t};function ei(e){let{model:t,isSelected:i,showCreatedTime:n=!0,authorName:o,onSelect:l,multiSelect:d=!1}=e;if(!t.character)return null;let{character_name:c,short_description:h,thumbnail:u,created_at:p}=t.character;return(0,a.jsxs)(q.Z,{onClick:()=>l(t),sx:{position:"relative",height:"100%",border:"2px solid",cursor:"pointer",borderColor:"background.paper",opacity:.7,...i&&{opacity:1,borderColor:"primary.main"},"&:hover":{opacity:1}},children:[d?(0,a.jsx)(s.Z,{sx:{position:"absolute",top:8,right:8,zIndex:10001,width:24,height:24,backgroundColor:i?"#2563EB":"transparent",color:i?"white":"#9CA3AF",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"5px",boxShadow:"2px 2px 3.8px 0px rgba(0, 0, 0, 0.44)",border:i?"none":"white 1px solid"},children:i?(0,a.jsx)(J.Z,{sx:{fontSize:18}}):null}):null,(0,a.jsx)(r.Z,{direction:"column",sx:{position:"absolute",bottom:0,left:0,right:0,index:1e4,height:"110px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",display:"flex",p:1},children:(0,a.jsxs)(r.Z,{direction:"column",children:[(0,a.jsx)(f.Z,{variant:"body1",fontWeight:"bold",children:c}),n&&p?(0,a.jsxs)(f.Z,{variant:"caption",children:["Created at: ",et(p)]}):null,o?(0,a.jsxs)(f.Z,{variant:"caption",children:["By ",o]}):null,h?(0,a.jsx)(f.Z,{variant:"caption",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:h}):null]})}),(0,a.jsx)(X.Z,{component:"img",alt:c,sx:{height:{xs:150,sm:200,md:300,lg:300,xl:350}},image:u,title:c})]})}var en=i(56209);function ea(e){let{models:t,isFetching:i,selected:n,showCreateCard:r=!0,emptyComponent:o,showCreatedTime:l=!0,authorName:d,multiSelect:c=!1,onSelect:h}=e,u=i?[]:r?[{}].concat(t):t;return!i&&0===t.length&&o?o:i||0!==t.length||r?(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(K.Z,{loading:i}),(0,a.jsx)(G.ZP,{container:!0,spacing:3,alignItems:"stretch",children:u.map((e,t)=>{var i;let o=n.some(t=>t.id===e.id);return(0,a.jsx)(G.ZP,{item:!0,xs:12,sm:4,md:4,lg:3,xl:2,sx:{height:{xs:"300px",sm:"auto"}},children:0===t&&r?(0,a.jsx)(Q,{newTab:!0,title:"Create a character",titleMobile:"Create character",description:"Create a character within 10 minutes.",pagePath:Y.eb}):(0,a.jsx)(ei,{model:e,isSelected:o,onSelect:e=>{c?o?h(n.filter(t=>t.id!==e.id).map(e=>e)):h([...n.map(e=>e),e]):h([e])},authorName:(null===(i=e.character)||void 0===i?void 0:i.username)??"",showCreatedTime:l,multiSelect:c})},`${e.id}-${t}`)})})]}):(0,a.jsx)(ep,{showChooseFromLibrary:!1,sx:{width:"200px",border:"none",backgroundColor:"transparent",margin:"100px auto"}})}var er=i(23638),eo=i(39204),es=i(79267);let el=e=>{let{innerSelected:t,minLimit:i,maxLimit:n,myCharacterList:r,handleSelect:l,multiSelect:d}=e,{isMobile:h}=(0,c.T)();if(!d)return null;let u={initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-10,transition:{duration:.2}}},p={initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1,transition:{duration:.2}},exit:{scale:.8,opacity:0,transition:{duration:.1}}};return(0,a.jsx)(er.M,{mode:"popLayout",children:t.length<=0?(0,a.jsx)(eo.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:u,children:(0,a.jsxs)(o.Z,{sx:{height:"52px",backgroundColor:"rgba(255, 255, 255, 0.06)",borderRadius:"4px",p:"12px",border:"none",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"4px",padding:"1px",background:"linear-gradient(90deg, rgba(22, 216, 102) 0%, rgba(9, 41, 247) 100%)",mask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",maskComposite:"exclude",WebkitMaskComposite:"xor",pointerEvents:"none"}},justifyContent:"start",direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(s.Z,{sx:{color:"#16D866",fontSize:"14px",fontWeight:700,background:"rgba(22, 216, 102, 0.10)",borderRadius:"5px",padding:"2px 5px"},children:"NEW"}),(0,a.jsx)(es.cKl,{size:16}),(0,a.jsxs)(f.Z,{variant:"body2",fontSize:h?10:14,fontWeight:500,children:["You can select up to ",n," characters to create multi-character image now! Note that it only works with Prompts for now."]})]})},"info-view"):(0,a.jsx)(eo.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:u,children:(0,a.jsxs)(o.Z,{sx:{minHeight:"52px",backgroundColor:"rgba(255, 255, 255, 0.06)",borderRadius:"4px",p:"12px"},justifyContent:"start",direction:"row",alignItems:"center",spacing:1,flexWrap:"wrap",gap:1,children:[(0,a.jsx)(f.Z,{variant:"body2",fontSize:14,fontWeight:500,children:`${t.length} / ${n} Selected`}),(0,a.jsx)(s.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(0,a.jsx)(er.M,{children:t.map(e=>{let i=null==r?void 0:r.some(t=>t.id===e.id);return(0,a.jsx)(eo.E.div,{variants:p,initial:"initial",animate:"animate",exit:"exit",layout:!0,children:(0,a.jsx)(B.Z,{label:(0,a.jsxs)(o.Z,{direction:"row",spacing:.5,alignItems:"center",children:[(0,a.jsx)(f.Z,{variant:"caption",sx:{fontSize:"10px",whiteSpace:"nowrap"},children:e.model_name}),(0,a.jsx)(s.Z,{component:"span",sx:{fontSize:"10px",ml:.5,px:.5,py:.2,borderRadius:"3px",backgroundColor:i?"rgba(22, 216, 102, 0.15)":"rgba(9, 41, 247, 0.2)",color:i?"#16D866":"#4D6AFF",whiteSpace:"nowrap"},children:i?"My":"Library"})]}),sx:{fontSize:"10px",fontWeight:500,color:"#BFBFBF",height:"auto","& .MuiChip-label":{overflow:"visible"}},onDelete:()=>{l(t.filter(t=>t.id!==e.id))}})},e.id)})})})]})},"chip-view")})};var ed=i(61011),ec=i(44941);function eh(e){let{open:t,defaultTab:i="character",onClose:n,selected:r,handleSelectModel:l,multiSelect:d=!1,minLimit:c=1,maxLimit:h=2,hideCharacterIds:u=[]}=e,[p,x]=(0,w.useState)(r.map(e=>e.originalConfig)),{data:m,isFetching:g}=(0,ed.M0)(),{data:j,isFetching:f}=(0,ed.Lg)(),b=(0,ec.Z)("up","lg"),[v,S]=(0,w.useState)(i),y=(0,w.useCallback)(()=>{if(!d){null==n||n();return}p.length>=c?(l(p),null==n||n()):console.warn(`Please select at least ${c} character(s)`)},[d,p,c,n,l]),C=(0,w.useCallback)(e=>{let t=e.slice(0,h);x(t),d||(t.length>=c?(l(t),null==n||n()):console.warn(`Please select at least ${c} character(s)`))},[d,l,n,h,c]),Z=(0,w.useMemo)(()=>{let e=u?null==m?void 0:m.filter(e=>!u.includes(e.id)):m,t=u?null==j?void 0:j.filter(e=>!u.includes(e.id)):j;return"character"===v?(0,a.jsx)(ea,{models:e,isFetching:g,onClose:y,selected:p,onSelect:C,multiSelect:d}):"character_library"===v?(0,a.jsx)(ea,{models:t,isFetching:f,onClose:y,selected:p,onSelect:C,multiSelect:d}):void 0},[u,m,j,v,g,y,p,C,d,f]);return(0,a.jsxs)(U.Z,{open:t,onClose:y,fullScreen:!0,transitionDuration:{enter:300,exit:200},sx:{"& .MuiDialog-paperFullScreen":{margin:0}},children:[(0,a.jsx)(R.Z,{mb:1,sx:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"background.paper"},children:(0,a.jsx)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,a.jsxs)(A.Z,{size:"large",variant:"text",color:"primary",sx:{mb:1},onClick:y,disabled:d?p.length<c:null,children:[(0,a.jsx)(es.zf,{size:24,sx:{mr:1}}),"Back"]})})}),(0,a.jsxs)(z.Z,{children:[(0,a.jsx)(o.Z,{direction:b?"row":"column",justifyContent:b?"space-between":"start",alignItems:"center",children:(0,a.jsxs)(F.Y,{value:v,onChange:(e,t)=>{S(t)},centered:!0,sx:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"background.paper",pb:2},children:[(0,a.jsx)(V.i,{label:"My Characters",value:"character"}),(0,a.jsx)(V.i,{label:"Character Library",value:"character_library"})]})}),(0,a.jsx)(el,{innerSelected:p,minLimit:c,maxLimit:h,myCharacterList:m,handleSelect:C,multiSelect:d}),(0,a.jsx)(s.Z,{my:3,children:Z})]})]})}var eu=i(28382);let ep=e=>{let{sx:t,showChooseFromLibrary:i=!0}=e,{showModal:n}=(0,M.dd)(),r=(0,h.UK)(e=>e.characters),l=(0,h.UK)(e=>e.handleCharacterChange);return(0,a.jsx)(s.Z,{sx:{border:"1px dashed #0084FF",borderRadius:"4px",background:"rgba(0, 132, 255, 0.10)",p:2,...t},children:(0,a.jsxs)(o.Z,{alignItems:"center",spacing:2,children:[(0,a.jsx)(eu.L6,{src:"/_next/static/media/no-characters-icon.4eb7a60e.svg",width:76,height:76,alt:"No characters"}),(0,a.jsx)(f.Z,{variant:"editor-label1",textAlign:"center",sx:{fontSize:"12px",lineHeight:1.2},children:"No characters created yet."}),(0,a.jsxs)(o.Z,{sx:{width:"100%",mt:"16px"},gap:1,children:[(0,a.jsxs)(A.Z,{variant:"primary",LinkComponent:en.r,href:Y.eb,target:"_blank",fullWidth:!0,sx:{fontSize:"12px"},children:["Create a character ",(0,a.jsx)(es.AF6,{sx:{ml:.5}})]}),i?(0,a.jsxs)(A.Z,{variant:"secondary",fullWidth:!0,onClick:()=>{n(eh,{selected:r,handleSelectModel:l,defaultTab:"character_library"})},sx:{fontSize:"12px"},children:["Choose from Library ",(0,a.jsx)(es.Svx,{sx:{ml:.5}})]}):null]})]})})};function ex(e){let{models:t,isFetching:i,onClose:n,searchKeyword:r,selectedModel:o,showCreateCard:l=!0,emptyComponent:d,showCreatedTime:c=!0}=e,p=(0,h.l6)(e=>e.setStore,u.V.CHARACTER),x=(0,L.useRouter)(),{pathname:m,query:g}=x||{},j=async e=>{await x.push({pathname:m,query:{...(0,H.Z)(g,"finetuned_model"),ai_model:e.id,mode:"character"}},void 0,{shallow:!0}),p({characters:[e]}),null==n||n()},f=t.filter(e=>e.character.character_name.toLowerCase().includes(r.toLowerCase())),b=i?[]:l?[{}].concat(f):f;return!i&&0===t.length&&d?d:i||0!==t.length||l?(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(K.Z,{loading:i}),(0,a.jsx)(G.ZP,{container:!0,spacing:3,alignItems:"stretch",children:b.map((e,t)=>{var i;return(0,a.jsx)(G.ZP,{item:!0,xs:12,sm:4,md:4,lg:3,xl:2,sx:{height:{xs:"300px",sm:"auto"}},children:0===t&&l?(0,a.jsx)(Q,{newTab:!0,title:"Create a character",titleMobile:"Create character",description:"Create a character within 10 minutes.",pagePath:Y.eb}):(0,a.jsx)(ei,{model:e,isSelected:(null==o?void 0:o.id)===e.id,onSelect:()=>j(e),authorName:(null===(i=e.character)||void 0===i?void 0:i.username)??"",showCreatedTime:c})},e.id)})})]}):(0,a.jsx)(ep,{showChooseFromLibrary:!1,sx:{width:"200px",border:"none",backgroundColor:"transparent",margin:"100px auto"}})}function em(e){let{onClose:t,searchKeyword:i,selectedModel:n}=e,{data:r=[],isFetching:o}=(0,ed.Lg)();return(0,a.jsx)(ex,{models:r,isFetching:o,onClose:t,searchKeyword:i,selectedModel:n,showCreateCard:!1,showCreatedTime:!1})}var eg=i(39674),ej=i(52889),ef=i(70565),eb=i(22018),ev=i(46514),eS=i(55309),ew=i(75787);let ey=e=>{let{models:t,onClick:i,searchKeyword:n,selectedModel:r,modelCategories:l}=e,d=(0,ec.Z)("up","lg"),{showModal:h}=(0,M.dd)(),u=(0,k.Z)(),p=(0,L.useRouter)(),{profile:x}=(0,c.T)(),m=[],g=[];t.forEach(e=>{let t=(n??"").toLowerCase();if(t&&!e.metadata.name.toLowerCase().includes(t)||l.length>0&&!e.metadata.tags.some(e=>l.includes(e)))return;let{key:i}=e,[a]=(0,ew.Bw)(`create.model.${i}`,x),o={...e,has_access:a};a?r.key!==i?m.push(o):m.unshift(o):g.push(o)});let j=[...m,...g],b=e=>{null==i||i(e),setTimeout(()=>{p.replace({query:{...(0,H.Z)(p.query,"finetuned_model"),ai_model:e.key}},void 0,{shallow:!0})},200)},v=()=>{h(eb.Z,{type:"openart_subscription"})},S=e=>(0,a.jsx)(f.Z,{variant:"caption",sx:{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:{xs:12}},children:e});return(0,a.jsx)(G.ZP,{container:!0,spacing:3,alignItems:"stretch",children:j.map((e,t)=>{let{key:i,metadata:n,has_access:l,display_key_name:c}=e,{name:h,thumbnail:p,original_link:x,tags:m}=n,g=r.key===i;return(0,a.jsx)(G.ZP,{item:!0,xs:6,sm:4,md:4,lg:3,xl:2,children:(0,a.jsxs)(q.Z,{onClick:()=>l&&b(e),sx:{position:"relative",height:"100%",border:"3px solid",cursor:"pointer",opacity:l?1:.7,transition:u.transitions.create(["border-color","transform"],{duration:u.transitions.duration.short}),borderColor:g?"white":"background.paper","&:hover":{borderColor:l?"white":void 0,transform:l?"scale(1.03)":void 0}},children:[(0,a.jsxs)(o.Z,{direction:"column",sx:{position:"absolute",bottom:0,left:0,right:0,index:1e4,minHeight:{xs:"unset",md:105},backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",display:"flex",p:1},children:[(0,a.jsx)(f.Z,{variant:"body1",fontWeight:"bold",noWrap:!0,sx:{fontSize:{xs:13,md:14}},children:h}),x?"null"!==x?(0,a.jsx)(ej.Z,{href:x,target:"_blank",sx:{color:"white","&:hover":{color:"#30ACF2"}},onClick:e=>{e.stopPropagation()},children:S(c&&""!==c?c:i)}):S(c):S("dalle2"===i||"dalle3"===i?"OpenAI":"OpenArt"),(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(o.Z,{direction:"row",sx:{py:{xs:0,md:1}},spacing:1,children:m?m.map((e,t)=>{let{bgColor:i,color:n}=ev.YI[e];return(0,a.jsx)(B.Z,{label:e,size:"small",sx:{backgroundColor:i,color:n,minWidth:"50px"}},`tag-${t}`)}):null}),d?(0,a.jsx)(ef.Z,{title:"Discover more pictures!",placement:"top",children:(0,a.jsx)(ej.Z,{href:`discovery?ai_model=${i}`,target:"_blank",onClick:e=>{e.stopPropagation()},alignItems:"center",sx:{color:"white","&:hover":{color:"#30ACF2"}},children:(0,a.jsx)(eg.Z,{})})}):null]})]}),!l&&(0,a.jsx)(o.Z,{direction:"column",sx:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex"},children:(0,a.jsx)(s.Z,{sx:{opacity:.9,flex:1,backgroundColor:"rgba(0, 0, 0, 0.75)"}})}),!l&&(0,a.jsx)(o.Z,{direction:"column",sx:{position:"absolute",top:0,bottom:0,left:0,right:0},alignItems:"center",justifyContent:"center",children:(0,a.jsx)(A.Z,{size:"small",variant:"outlined",sx:{color:"white",borderColor:"white","&:hover":{color:"primary.main",borderColor:"primary.main"},minWidth:"150px",minHeight:"50px",borderRadius:eS.E0},onClick:v,children:"Upgrade"})}),(0,a.jsx)(X.Z,{component:"img",alt:"green iguana",sx:{height:{xs:150,sm:200,md:300,lg:300,xl:350}},image:p,title:h})]})},t)})})};function eC(e){let{onClose:t,searchKeyword:i,selectedModel:n}=e,{data:r=[],isFetching:o}=(0,ed.M0)();return(0,a.jsx)(ex,{models:r,isFetching:o,onClose:t,searchKeyword:i,selectedModel:n,showCreateCard:!0,showCreatedTime:!0})}var eZ=i(41696),e_=i(25105),ek=i(30388),eP=i(27928);let eT=e=>{let t;return"string"==typeof e?t=(0,ee.DY)(new Date(e).getTime()):"object"==typeof e&&e._seconds&&(t=(0,ee.DY)(1e3*e._seconds)),t};function eE(e){let{onClick:t,onClose:i,searchKeyword:n,selectedModel:r}=e,{data:l,isFetching:d}=(0,eP.DX)(),c=(0,L.useRouter)(),{pathname:h,query:u}=c||{},p=d?[]:[{}].concat(l.filter(e=>"completed"===e.status&&e.model_name.includes(n))),x=e=>{let{training_type:n,id:a}=e;"fal-ai/flux-lora-fast-training"===n&&(e.type||(e.type="finetuned"),null==t||t(e),c.replace({pathname:h,query:{...(0,H.Z)(u,"finetuned_model"),ai_model:a}},void 0,{shallow:!0}),(0,e_.Z)(i)&&i())},m=e=>{let{model_name:t,object_prompt:i,sample_images:[n]=[],training_mode:s,created_at:l,id:d,training_type:c}=e;return(0,a.jsxs)(q.Z,{onClick:()=>x(e),sx:{position:"relative",height:"100%",border:"2px solid",cursor:"fal-ai/flux-lora-fast-training"===c?"pointer":"default",borderColor:"background.paper",opacity:.7,...r.id===d&&{opacity:1,borderColor:"primary.main"},"&:hover":{opacity:1}},children:["fal-ai/flux-lora-fast-training"!==c&&(0,a.jsx)(o.Z,{direction:"column",sx:{position:"absolute",top:0,bottom:110,left:0,right:0,zIndex:1e4,color:"white",p:1,display:"flex",justifyContent:"center",..."fal-ai/flux-lora-fast-training"!==c&&{backgroundColor:"rgba(0, 0, 0, 0.5)"}},children:(0,a.jsxs)(o.Z,{direction:"row",spacing:1,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(eZ.Z,{sx:{color:"rgba(255, 255, 255, 0.6)"}}),(0,a.jsx)(f.Z,{variant:"body1",fontWeight:"bold",color:"rgba(255, 255, 255, 0.6)",children:"Deprecated model"})]})}),(0,a.jsx)(o.Z,{direction:"column",sx:{position:"absolute",bottom:0,left:0,right:0,index:1e4,height:"110px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",display:"flex",p:1},children:(0,a.jsxs)(o.Z,{direction:"column",children:[(0,a.jsx)(f.Z,{variant:"body1",fontWeight:"bold",children:t}),(0,a.jsxs)(f.Z,{variant:"caption",children:["Created at: ",eT(l)]}),"object"===s&&(0,a.jsxs)(f.Z,{variant:"caption",children:["Describe: ",i]}),(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{py:1},spacing:1,children:[(0,a.jsx)(B.Z,{label:s,size:"small",sx:{backgroundColor:ev.sD[s].bgColor,color:ev.sD[s].color,minWidth:"50px"}}),"fal-ai/flux-lora-fast-training"!==c?(0,a.jsx)(ek.i,{model:e,normalDeleteButton:!1}):null]})]})}),(0,a.jsx)(X.Z,{component:"img",alt:"green iguana",sx:{height:{xs:150,sm:200,md:300,lg:300,xl:350}},image:n,title:t})]})};return(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(K.Z,{loading:d}),(0,a.jsx)(G.ZP,{container:!0,spacing:3,alignItems:"stretch",children:p.map((e,t)=>(0,a.jsx)(G.ZP,{item:!0,xs:12,sm:4,md:4,lg:3,xl:2,sx:{height:{xs:"300px",sm:"auto"}},children:0===t?(0,a.jsx)(Q,{newTab:!0}):m(e)},t))})]})}let eN=[{label:"Standard",value:"Standard"},{label:"Flux",value:"Flux"},{label:"SDXL",value:"SDXL"},{label:"SD1.5",value:"SD1.5"},{label:"Art",value:"Art"},{label:"Cartoon",value:"Cartoon"},{label:"Anime",value:"Anime"},{label:"Photorealistic",value:"Photorealistic"}];var eI=i(82466);function eA(e){let{showPrivateModel:t,showPublicModel:i,showCharacterModel:n,isShowSearchModels:r,currentModel:l,defaultTab:d,onSwitch:h,onClose:u}=e,{isTeamPlan:p}=(0,eI.V)(),x=(0,ec.Z)("up","lg"),[m,g]=(0,w.useState)(()=>d||("finetuned"===l.type?"finetuned":"default")),{mode:j}=(0,c.T)(),[b,v]=(0,w.useState)(""),[S,y]=(0,w.useState)([]),[C,Z]=(0,w.useState)("Search All Models"),_=(0,w.useCallback)(e=>{h((0,W.J)({config:e,pageMode:j}))},[h,j]),k=Array.from(new Set(ev.cz.flatMap(e=>e.metadata.tags))).map(e=>({label:e,value:e})).filter(e=>!eN.some(t=>t.label===e.label)),P=[...eN,...k],T=(0,w.useMemo)(()=>"finetuned"===m?(0,a.jsx)(eE,{onClose:u,searchKeyword:b??"",onClick:_,selectedModel:l}):"character"===m?(0,a.jsx)(eC,{onClose:u,searchKeyword:b??"",selectedModel:l}):"character_library"===m?(0,a.jsx)(em,{onClose:u,searchKeyword:b??"",selectedModel:l}):(0,a.jsx)(ey,{models:ev.cz,onClick:_,searchKeyword:b,selectedModel:l,modelCategories:S}),[m,_,b,l,u,S]);return(0,a.jsxs)(s.Z,{children:[(0,a.jsxs)(o.Z,{direction:x?"row":"column",justifyContent:x?"space-between":"start",alignItems:"center",children:[(0,a.jsxs)(F.Y,{value:m,onChange:(e,t)=>{g(t),Z({character:"Search Characters",character_library:"Search Character Library",finetuned:"Search All Models",default:"Search All Models"}[t]),y([])},centered:!0,sx:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"background.paper",pb:2},children:[i?(0,a.jsx)(V.i,{label:"Public Models",value:"default"}):null,t?(0,a.jsx)(V.i,{label:p?"Shared Team Models":"My Trained Models",value:"finetuned"}):null,n?(0,a.jsx)(V.i,{label:p?"Shared Team Characters":"My Characters",value:"character"}):null,n?(0,a.jsx)(V.i,{label:"Character Library",value:"character_library"}):null]}),r||x?(0,a.jsx)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:(0,a.jsx)(D.oH,{sx:{width:300},placeholder:C,onChange:e=>v(e),startAdornment:(0,a.jsx)(es.Goc,{sx:{color:"#fff",mr:1}})})}):null]}),x&&"default"===m?(0,a.jsx)(o.Z,{alignItems:"center",direction:"row",children:P?(0,a.jsxs)(o.Z,{alignItems:"center",direction:"row",justifyContent:"center",children:[(0,a.jsx)(f.Z,{variant:"button",display:"block",sx:{fontWeight:"bold",height:"26px"},children:"Category:"}),(0,a.jsx)(O,{options:P,onSelect:e=>{e.length>0?Z(`Search Models From ${e}`):Z("Search All Models"),y(e)},isShowChip:x,label:x?"Filter":"",width:"110px",height:"26px"})]}):null}):null,(0,a.jsx)(s.Z,{my:3,children:T})]})}function eM(e){let{showPrivateModel:t,showPublicModel:i,showCharacterModel:n,currentModel:r,defaultTab:s,onSelectModel:l,...d}=e,[c,h]=(0,w.useState)(!1),u=(0,ec.Z)("up","lg");return(0,a.jsxs)(U.Z,{open:!1,...d,fullScreen:!0,transitionDuration:{enter:300,exit:200},sx:{"& .MuiDialog-paperFullScreen":{margin:0}},children:[(0,a.jsx)(R.Z,{mb:1,sx:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"background.paper"},children:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(A.Z,{size:"large",variant:"text",color:"primary",sx:{mb:1},onClick:null==d?void 0:d.onClose,children:[(0,a.jsx)(es.zf,{size:24,sx:{mr:1}}),"Back"]}),u?null:(0,a.jsx)(A.Z,{size:"large",onClick:()=>{h(!c)},children:(0,a.jsx)(es.Goc,{sx:{color:"#fff",mr:1}})})]})}),(0,a.jsx)(z.Z,{children:(0,a.jsx)(eA,{showCharacterModel:n,showPrivateModel:t,showPublicModel:i,onSwitch:e=>{l(e),d.onClose()},onClose:null==d?void 0:d.onClose,isShowSearchModels:c,currentModel:r,defaultTab:s})})]})}let eU=e=>{let{value:t,config:i,onChange:n,sx:r}=e,{showPrivateModel:s=!0,showPublicModel:l=!0,showCharacterModel:d=!0}=i||{},{showModal:c}=(0,M.dd)(),{metadata:h,currentSelect:u}=t,p=e=>{n(e)};return(0,a.jsx)(o.Z,{className:"switch-model",direction:"row",position:"relative",sx:(0,g.j)({width:"100%",height:{xs:68,sm:58},overflow:"hidden",border:"1px solid #444",borderRadius:eS.E0,cursor:"pointer",bgcolor:void 0},r),onClick:e=>{e.stopPropagation(),c(eM,{showCharacterModel:d,showPrivateModel:s,showPublicModel:l,onSelectModel:p,currentModel:u})},children:(0,a.jsx)(eR,{metadata:h})})},eR=e=>{let{metadata:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{height:"100%",width:"100%",src:t.thumbnail,alt:"model",style:{objectFit:"cover",objectPosition:"center"}}),(0,a.jsx)(o.Z,{height:"100%",width:"100%",position:"absolute",sx:{backgroundColor:"rgba(0, 0, 0, 0.60)",boxSizing:"border-box",px:{xs:2,md:1}},spacing:.5,children:(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:.5,width:"100%",height:"100%",children:[(0,a.jsx)(f.Z,{variant:"editor-label1",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",sx:{fontSize:{xs:16,md:12},fontWeight:500},children:t.name}),(0,a.jsx)(ez,{})]})})]})},ez=()=>(0,a.jsx)(A.Z,{size:"small",variant:"outlined",endIcon:(0,a.jsx)(I.Z,{sx:{fontSize:{xs:18,md:16}}}),sx:{ml:"auto!important",fontSize:{xs:16,md:12},fontWeight:600,border:"1px solid rgba(68, 68, 68, 1)",bgcolor:eS.LS,color:"white",flexShrink:0},children:"Switch"}),eD=e=>{let{modelKey:t="base_model",bottomElement:i}=e,n=(0,h.TS)(e=>e.metadata),r=(0,h.TS)(e=>e.getParameterValue("type")),o=(0,h.TS)(e=>e.getParameterValue(t)),s=(0,h.TS)(e=>e.originalConfig.character_creation_id),d=(0,h.TS)(e=>e.updateActiveModel),c=(0,h.TS)((0,l.N)(e=>e.getUiState("switch-model.expanded",!0))),u=(0,h.TS)(e=>e.ensureUiState);return(0,a.jsx)(N,{className:"switch-model-accordion",label:"Model or Character",sx:{scrollMarginTop:eS.Sw},value:{metadata:n,currentSelect:{type:r,key:o,id:o,character_creation_id:s}},expend:c,onExpendChange:e=>u("switch-model.expanded",e),children:(0,a.jsx)(eV,{value:{metadata:n,currentSelect:{type:r,key:o,id:o,character_creation_id:s}},onChange:d,bottomElement:i})})},eV=e=>{let{value:t,onChange:i,bottomElement:n}=e;return(0,a.jsxs)(r.Z,{spacing:1,children:[(0,a.jsx)(eU,{value:t,onChange:i}),n]})};var eF=i(89717),eB=i(86421);let eO=e=>{let{title:t,tooltip:i,content:n,className:r,expanded:o,onClick:s,sx:l}=e;return(0,a.jsx)(T,{className:r,title:t,tooltip:i,expanded:o,content:n,onChange:(e,t)=>null==s?void 0:s(t),sx:l})};var eW=i(44595),eL=i(18297);function eG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"object"==typeof e&&"getValue"in e?e.getValue():"string"==typeof e&&"none"===e.toLocaleLowerCase()?"":e}function eH(e){let{extra:t,children:i,value:n}=e,r=(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",children:[(0,a.jsxs)(o.Z,{direction:"row",spacing:.5,justifyContent:"start",children:[(0,a.jsx)(P.ZP,{title:e.tooltip,anchor:(0,a.jsxs)(f.Z,{variant:"editor-label1",sx:{mr:"2px",whiteSpace:"nowrap"},children:[e.label,e.showValue?(0,a.jsxs)("span",{children:[":",eG(n)]}):null]})}),!e.required&&e.showOptional?(0,a.jsx)(o.Z,{sx:{borderRadius:1,background:"#464749",fontSize:13,padding:"0 5px"},alignItems:"center",justifyContent:"center",children:"Optional"}):null]}),(0,a.jsx)(o.Z,{justifyContent:"end",flexWrap:"nowrap",children:t})]});return(0,a.jsxs)(o.Z,{sx:{display:e.hidden&&"none",...e.sx},direction:"column",spacing:2,children:[e.label?r:null,i]})}var eK=i(62205),e$=i(2656),eq=i(46740),eX=i(48870);let eY=(0,eq.F4)`
  0% { transform: rotate(0deg) scale(1); }
  25% { transform: rotate(-10deg) scale(1.15); }
  50% { transform: rotate(0deg) scale(1.2); }
  75% { transform: rotate(10deg) scale(1.15); }
  100% { transform: rotate(0deg) scale(1); }
`;function eQ(e){let{height:t,width:i}=e,n=i/t;return(0,a.jsx)(o.Z,{justifyContent:"center",alignItems:"center",sx:{width:18,height:18},children:(0,a.jsx)(s.Z,{sx:{boxSizing:"border-box",border:"2px solid white",width:n>1?"100%":`${18*n}px`,height:n>1?`${18/n}px`:"100%"}})})}let eJ=(0,w.forwardRef)((e,t)=>{let{value:i,lock:n,setLock:r,showLock:s,onChange:l,aspectRatios:d=[],disabled:c,showDefault:h=!0,showTitle:u=!0}=e,[p,x]=(0,w.useState)(!1),m=(0,w.useRef)(null),g=()=>{!p&&n&&s&&(x(!0),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{x(!1)},500))};return(0,w.useImperativeHandle)(t,()=>({animateLockIcon:g})),(0,w.useEffect)(()=>()=>{m.current&&clearTimeout(m.current)},[]),(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[u?(0,a.jsx)(f.Z,{variant:"editor-label1",whiteSpace:"nowrap",children:"Aspect Ratio"}):null,(0,a.jsxs)(eK.Z,{size:"small",disabled:c,value:d.some(e=>e.ratio===i)?i:"Default",onChange:e=>{let t=e.target.value;"Default"===t&&(t=d[0].ratio),l(t)},sx:{my:1,width:"100%"},children:[h?(0,a.jsx)(e$.Z,{value:"Default",children:"Default"},"Default"):null,d.map(e=>{let t=(0,eX.Z)(e),{ratio:i,name:n}=t,[r,s]=i.split(":").map(e=>Number.parseInt(e,10));return(0,a.jsx)(e$.Z,{value:t.ratio,children:(0,a.jsxs)(o.Z,{width:"100%",direction:"row",alignItems:"center",spacing:1,children:[r&&r!==Number.NaN&&s&&s!==Number.NaN?(0,a.jsx)(eQ,{width:r,height:s}):null,(0,a.jsxs)(f.Z,{variant:"editor-span1",children:[n," (",i,")"]}),n?null:(0,a.jsxs)(f.Z,{variant:"editor-span1",sx:{display:"inline-block",ml:"auto!important"},children:["(",i??"",")"]})]})},(null==t?void 0:t.name)??t.ratio)})]}),s&&r?n?(0,a.jsx)(es.RWh,{sx:{backgroundColor:eS.yS,color:eS.ce,borderRadius:"4px",cursor:"pointer","&:hover":{opacity:.8},width:40,px:.5,height:24,animation:p?`${eY} 0.5s ease`:"none"},onClick:()=>null==r?void 0:r(!1)}):(0,a.jsx)(es.zP$,{sx:{width:40,height:24,px:.5},onClick:()=>null==r?void 0:r(!0)}):null]})});var e0=i(92483),e1=i(61132);let e2=(e,t,i,n,a)=>{let r,o;let[s,l]=e.split(":").map(e=>Number.parseInt(e));return Math.max(l,s)===l?(r=i,(o=Math.round(i*s/l))>t&&(o=t,r=Math.round(t*l/s))):(o=t,(r=Math.round(t*l/s))>i&&(r=i,o=Math.round(i*s/l))),{width:o=Math.max(o,n),height:r=Math.max(r,a)}},e5=[{ratio:"1:1",name:"Square"},{ratio:"3:2",name:"Landscape"},{ratio:"16:9",name:"Cinema"},{ratio:"5:4",name:"Art print"},{ratio:"9:16",name:"Portrait"},{ratio:"2:3",name:"Tablet"},{ratio:"4:5",name:"Vertical"}],e4=e=>{let t=(0,w.useRef)(null),{showSizeSliders:i=!0,showDefault:n,aspectRatioOptions:r=e5}=e,[s]=(0,x.y)({key:"create.config.outputSize"}),d=(0,h.UK)((0,l.N)(e=>e.getParameterValue("creation_mode"))),{maxHeight:c,maxWidth:u,minHeight:p,minWidth:m}=e1.m[`character:${d}`],g="aspect_ratio:lock",j=(0,h.UK)((0,l.N)(e=>e.getParameterValue("aspect_ratio"))),f=(0,h.UK)((0,l.N)(e=>e.getUiState("aspect_ratio:tip",!1))),v=(0,h.UK)((0,l.N)(e=>e.getUiState(g,!1))),S=(0,h.UK)(e=>e.setUiState),y=(0,h.UK)((0,l.N)(e=>e.getParameterValue("height"))),C=(0,h.UK)((0,l.N)(e=>e.getParameterValue("width"))),Z=(0,h.UK)(e=>e.setAspectRatio),_=(0,h.UK)(e=>e.setImageSize),k=e=>{if(v&&"Default"!==j){let a=r.find(e=>e.ratio===j);if(a){var i,n;let[r,o]=a.ratio.split(":").map(Number),s=r/o;if("width"in e){let n=Math.min(Math.max(e.width,m),u),a=Math.round(n/s);if(a<p||a>c){null===(i=t.current)||void 0===i||i.animateLockIcon(),_({width:Math.min(Math.max(Math.round((a=Math.min(Math.max(a,p),c))*s),m),u),height:a,maxHeight:c,maxWidth:u,minHeight:p,minWidth:m,keepAspectRatio:!0});return}_({width:n,height:a,maxHeight:c,maxWidth:u,minHeight:p,minWidth:m,keepAspectRatio:!0});return}if("height"in e){let i=Math.min(Math.max(e.height,p),c),a=Math.round(i*s);if(a<m||a>u){null===(n=t.current)||void 0===n||n.animateLockIcon();let e=Math.round((a=Math.min(Math.max(a,m),u))/s);_({width:a,height:Math.min(Math.max(e,p),c),maxHeight:c,maxWidth:u,minHeight:p,minWidth:m,keepAspectRatio:!0});return}_({width:a,height:i,maxHeight:c,maxWidth:u,minHeight:p,minWidth:m,keepAspectRatio:!0});return}}}_({height:y,width:C,...e,maxHeight:c,maxWidth:u,minHeight:p,minWidth:m})};return(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eH,{children:(0,a.jsx)(eJ,{ref:t,aspectRatios:r,value:j,showLock:!0,lock:v,setLock:e=>{S(g,e)},onChange:e=>{let{width:t,height:i}=e2(e,u,c,m,p);Z({ratio:e,height:i,width:t})},disabled:!s,showDefault:n})}),i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eH,{showValue:!0,value:C,children:(0,a.jsx)(e0.A,{label:"Width",min:m,unit:"px",step:8,max:u,value:C,onChange:e=>k({width:e}),disabled:!s})}),(0,a.jsx)(eH,{showValue:!0,value:y,children:(0,a.jsx)(e0.A,{label:"Height",unit:"px",step:8,min:p,max:c,value:y,onChange:e=>k({height:e}),disabled:!s})})]}):null,(0,a.jsx)(eW.Z,{in:f,unmountOnExit:!0,children:(0,a.jsx)(b.Z,{severity:"info",children:"The image may look bad with small sizes."})}),s?null:(0,a.jsx)(eL.Y,{feature:"to set custom image size"})]})};var e3=i(48363),e6=i(18335),e8=i(26665);i(63042),i(74915);var e9=i(43495),e7=i(30076);let te=()=>{let e=(0,e7.B)(),{isAuthenticated:t}=(0,c.T)(),[i,n]=(0,e3.L)(),r=(0,h.UK)((0,l.N)(e=>e.getParameterValue("creation_mode")));tt("template"===r);let{prompt:o}=eG((0,h.UK)((0,l.N)(e=>e.getParameterValue("prompt")))),s=(0,h.UK)(e=>e.computedCharacterDisableFn()),d=(0,h.UK)((0,l.N)(e=>e.computedCharacterImageCost())),u=(0,h.UK)((0,l.N)(e=>e.computedShowCharacterImageNumber())),p=(0,h.UK)(e=>e.getValues),[x,m]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),g=(0,h.UK)(e=>e.computedImageNumInputDisable()),j="output-size-accordion.expanded",f=(0,h.UK)(e=>e.getUiState(j,!0)),b=(0,h.UK)(e=>e.ensureUiState),v=async()=>{let e=p();await i(e)};return(0,a.jsxs)(a.Fragment,{children:["template"===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eO,{expanded:f,onClick:e=>b(j,e),title:"Output Size",content:(0,a.jsx)(e4,{})}),(0,a.jsx)(Z.Z,{})]}),(0,a.jsx)(eB.X,{className:"create-config-button",disable:!!t&&s,imageNum:x,imageInputDisabled:g,showNumberInput:u,onChangeImageNum:m,maxImageNumForFreeUser:4,showEstimatedTime:!1,cost:d,loading:n,onSubmit:()=>{e({onAuthenticated:v,additionalParams:{prompt:o}})},sx:{padding:{xs:"16px",md:"10px"}}})]})},tt=e=>{let[t,i,n,a,r]=(0,h.UK)((0,l.N)(e=>[e.getParameterValue("active_template_type"),e.getParameterValue("active_template"),e.getParameterValue("height"),e.getParameterValue("width"),e.parameters])),o=(0,h.UK)((0,l.N)(e=>e.getParameterValue("type"))),s=(0,h.UK)(e=>e.setImageSize);(0,w.useEffect)(()=>{var l,d;if(!e||!i)return;let{maxHeight:c,maxWidth:h,minHeight:u,minWidth:p}=(o?e1.m[o]:null)||{maxHeight:1024,maxWidth:1024,minHeight:512,minWidth:512},x=(null===(l=r.height)||void 0===l?void 0:l.action)==="modifyByUser",m=(null===(d=r.width)||void 0===d?void 0:d.action)==="modifyByUser";if(x&&m)return;let g=("essentials"===t?e9.ZP:e9.KN).find(e=>e.value===i);if(g){let e=n,t=a;if("VideoTemplate"===g.constructor)"config"in g&&"object"==typeof g.config&&g.config&&"height"in g.config&&"width"in g.config&&(e=g.config.height||e,t=g.config.width||t);else if("config"in g&&"object"==typeof g.config&&g.config&&"height"in g.config&&"width"in g.config)e=g.config.height||e,t=g.config.width||t;else if("ratio"in g&&g.ratio&&"string"==typeof g.ratio){let i=g.ratio.split(":");if(2===i.length){let n=Number(i[0]),a=Number(i[1]);Number.isNaN(n)||Number.isNaN(a)||!(a>0)||(t=Math.min(h,Math.max(p,Math.round(n/a*e))))}}e===n&&t===a||x&&m||s({height:x?n:e,width:m?a:t,maxHeight:c,maxWidth:h,minHeight:u,minWidth:p})}},[i,t,s,n,a,r,o,e])};var ti=i(73576);let tn=e=>{let{page:t,onBack:i,title:n}=e,r="home"===t;return(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",sx:{width:"100%",px:1,justifyContent:"flex-start"},children:[!r&&(0,a.jsx)(es.wPn,{onClick:()=>{!r&&i&&i()},"aria-hidden":"true",sx:{cursor:"pointer"}}),(0,a.jsx)(f.Z,{variant:"editor-h2",sx:{display:{xs:"flex",md:"flex"},fontSize:{xs:20,md:16},justifyContent:{xs:"center",md:"flex-start"},alignItems:"center",height:{xs:40,md:ti.As},...r?{pl:0}:{pl:.5}},children:n})]})},ta=[{mode:"promptAndReference",Icon:es.vKs,title:"Prompt & Reference",gifUrl:"https://cdn.openart.ai/assets/character/cover_prompt_reference_4x.webp"},{mode:"pose",Icon:es.vJd,title:"Pose Your Character",gifUrl:"https://cdn.openart.ai/assets/character/cover_pose_your_character_4x.webp"},{mode:"inpaint",Icon:es.L3Q,title:"Place Character in Image",gifUrl:"https://cdn.openart.ai/assets/character/cover_place_character_in_image_4x.webp"}];var tr=i(78657),to=i(96262),ts=i(32964);let tl=()=>{let e=(0,h.UK)(e=>e.characters),t=(0,h.UK)(e=>e.addCharacter),{showModal:i}=(0,M.dd)();return(0,a.jsxs)(to.Z,{component:"div",sx:{width:"100%",borderRadius:"5px",height:"40px",borderTopLeftRadius:0,borderTopRightRadius:0,borderTop:"1px solid #444",backdropFilter:"blur(2px)"},onClick:n=>{n.stopPropagation(),i(eh,{selected:e,handleSelectModel:t,multiSelect:!1,hideCharacterIds:e.map(e=>e.key)})},children:[(0,a.jsx)(ts.Z,{component:"img",src:"https://cdn.openart.ai/assets/character/bg.webp",sx:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"top",borderRadius:"5px",opacity:.9}}),(0,a.jsx)(ts.Z,{sx:{position:"absolute",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.42)",backdropFilter:"blur(2px)",borderRadius:"5px"}}),(0,a.jsx)(A.Z,{variant:"text",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",whiteSpace:"nowrap",background:"transparent",color:"white","&:hover":{background:"transparent"},borderRadius:"4px",boxShadow:"none"},startIcon:(0,a.jsx)(es.nwL,{color:"#16D866"}),children:(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:600,children:"Add Character >"})}),(0,a.jsx)(ts.Z,{sx:{position:"absolute",top:"0",right:"0",px:"5px",py:"5px",bgcolor:"#0929F7",borderRadius:"0px 0px 0px 4px",fontSize:"10px",lineHeight:1,fontWeight:600},children:"BETA"})]})};var td=i(24386);let tc=e=>{let{bottomElement:t,multiSelect:i,showAddCharacter:n}=e,r=(0,h.UK)(e=>e.characters),s=(0,h.UK)(e=>e.handleCharacterChange),l=(0,h.UK)(e=>e.replaceCharacter),d=(0,h.UK)(e=>e.removeCharacter);return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(th,{models:r,onChange:s,multiSelect:i,onDelete:e=>{r.length>1&&d(e)},onReplace:l,showAddCharacter:n}),t]})},th=e=>{let{models:t,onChange:i,sx:n,multiSelect:r,showAddCharacter:s=!0,onDelete:l,onReplace:d}=e,{showModal:c}=(0,M.dd)(),h={xs:46,md:40},u=t.length>1&&l,p=t.length<2&&s;return(0,a.jsxs)(o.Z,{className:"switch-model",direction:"column",position:"relative",spacing:1,sx:(0,g.j)({width:"100%",overflow:"hidden",border:"1px solid #444",borderRadius:eS.E0,cursor:"pointer",bgcolor:eS.LS,pt:1},n),children:[t.map((e,i)=>{let{key:n,metadata:s}=e,p=t=>{d(e.originalConfig,t[0])};return(0,a.jsxs)(w.Fragment,{children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",width:"100%",height:"100%",sx:{px:{xs:2,md:1}},onClick:i=>{i.stopPropagation(),c(eh,{selected:[e],hideCharacterIds:t.filter(t=>t.key!==e.key).map(e=>e.key),handleSelectModel:p,multiSelect:r,minLimit:1,maxLimit:2})},children:[(0,a.jsx)(o.Z,{direction:"row",position:"relative",children:(0,a.jsx)(o.Z,{sx:{width:h,height:h,borderRadius:"50%",border:`2px solid ${eS.MK}`,overflow:"hidden",flexShrink:0,position:"relative",bgcolor:eS.LS},children:(0,a.jsx)("img",{width:"100%",height:"100%",src:s.thumbnail,alt:"character",style:{objectFit:"cover",objectPosition:"center"}})},n)}),(0,a.jsx)(o.Z,{sx:{flex:1,ml:"11px",minWidth:0},children:(0,a.jsx)(f.Z,{variant:"editor-label1",sx:{fontSize:"16px!important",fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:s.name})}),(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(A.Z,{size:"small",variant:"outlined",endIcon:(0,a.jsx)(I.Z,{sx:{fontSize:{xs:18,md:16}}}),sx:{ml:"auto!important",fontSize:{xs:16,md:12},fontWeight:600,border:"1px solid rgba(68, 68, 68, 1)",bgcolor:eS.LS,color:"white",flexShrink:0},children:"Switch"}),u?(0,a.jsx)(tr.default,{fontSize:"small",onClick:t=>{t.stopPropagation(),null==l||l(e.originalConfig)},sx:{cursor:"pointer"}}):null]})]}),i<t.length-1&&(0,a.jsx)(Z.Z,{})]},n)}),p?(0,a.jsx)(tl,{}):s?(0,a.jsxs)(o.Z,{sx:{width:"100%",borderRadius:"5px",height:"40px",borderTopLeftRadius:0,borderTopRightRadius:0,borderTop:"1px solid #444",backdropFilter:"blur(2px)",px:1,cursor:"auto"},justifyContent:"space-between",alignContent:"center",alignItems:"center",direction:"row",children:[(0,a.jsx)(f.Z,{fontSize:12,fontWeight:400,children:"Multiple Character mode"}),(0,a.jsx)(ef.Z,{title:"For full control, please use just one character—Multiple Character Mode only works with text prompts.",placement:"top",children:(0,a.jsx)(td.Z,{sx:{height:"18px !important",width:"18px !important"}})})]}):null]})};var tu=i(22952);let tp=e=>{let{value:t,onChange:i,max:n=15,min:r=2,step:o=1}=e;return(0,a.jsx)(tu.X,{label:"Prompt Adherence (CFG)",tipText:"How strictly the model will stick to the prompt. Lower numbers let AI be more creative, while higher numbers force it to stick to the prompt.",value:t,min:r,max:n,step:o,showResult:!0,onChange:i})};var tx=i(58684),tm=i(66686),tg=i(7861),tj=i(44754),tf=i(30967),tb=i(1399),tv=i(59409),tS=i(72243),tw=i(18536),ty=i(72100),tC=i.n(ty),tZ=i(71481),t_=i(6192);class tk{async add(e){if(!this._doing){if(this._historyUndo.length>=this._limit){var t;let e=this._historyUndo.shift();await (null==e?void 0:null===(t=e.destroy)||void 0===t?void 0:t.call(e))}await e.execute(),this._historyUndo.push(e),this._historyRedo=[],this._emitter.emit("history:change")}}canUndo(){return this._historyUndo.length>0}canRedo(){return this._historyRedo.length>0}async undo(){if(!this.canUndo()||this._doing)return;this._doing=!0;let e=this._historyUndo.pop();await (null==e?void 0:e.undo()),this._historyRedo.push(e),this._emitter.emit("history:undo"),this._emitter.emit("history:change"),this._doing=!1}async redo(){if(!this.canRedo()||this._doing)return;this._doing=!0;let e=this._historyRedo.pop();e.redo?await (null==e?void 0:e.redo()):await (null==e?void 0:e.execute()),this._historyUndo.push(e),this._emitter.emit("history:redo"),this._emitter.emit("history:change"),this._doing=!1}async clear(){var e,t;for(let t of this._historyUndo)await (null==t?void 0:null===(e=t.destroy)||void 0===e?void 0:e.call(t));for(let e of this._historyRedo)await (null==e?void 0:null===(t=e.destroy)||void 0===t?void 0:t.call(e));this._historyUndo=[],this._historyRedo=[],this._emitter.emit("history:change")}constructor(e){this._historyUndo=[],this._historyRedo=[],this._doing=!1,this._limit=50,this._emitter=e,this._historyUndo=[],this._historyRedo=[]}}class tP extends tZ.fabric.Rect{render(e){if(super.render(e),this.name){e.save(),e.font="bold 16px Arial",e.textAlign="center",e.textBaseline="middle";let t=this.getCenterPoint();e.fillStyle="white",e.fillText(this.name,t.x,t.y),e.restore()}}constructor(e){super({cornerColor:"white",cornerSize:8,borderScaleFactor:2,cornerStyle:"rect",hasControls:!0,borderColor:"transparent",strokeWidth:1.5,strokeUniform:!0,transparentCorners:!1,cornerStrokeColor:(0,tS.zT)(1),stroke:"white",strokeDashArray:[4,4],rx:6,ry:6,...e}),this.name=e.name||"",this.setControlsVisibility({mtr:!1})}}var tT=i(30754);let tE="rgba(22, 216, 102, 0.5)";class tN{get haveBaseImage(){return!!this._baseImage}get haveMaskArea(){return!!this.mask.obj}get color(){return new tZ.fabric.Color(this.mask?this.mask.color:tE)}set maskObj(e){this.mask.obj=e,this.emitter.emit("mask-update")}mount(e,t){this._canvas=new tZ.fabric.Canvas(e,{preserveObjectStacking:!0,selection:!1,containerClass:"manipulation-inpaint",stateful:!0}),this._container=t,this._canvasEl=e;let{width:i,height:n}=t.getBoundingClientRect();this.emitter.emit("canvas-mounted",this._canvas),this._canvas.setWidth(i),this._canvas.setHeight(n),this._canvas.isDrawingMode=this._isDrawingMode,this._canvas.freeDrawingBrush.width=this._brushWidth,this._canvas.freeDrawingBrush.color=this.color.toHexa(),this._canvas.on("object:moving",e=>{let t=e.target,i=this._canvas;if(!t)return;let n=t.getScaledWidth(),a=t.getScaledHeight();t.left<0&&(t.left=0),t.left+n>i.width&&(t.left=i.width-n),t.top<0&&(t.top=0),t.top+a>i.height&&(t.top=i.height-a)}),this._canvas.on("object:modified",e=>{this._handleObjectModified(this,e)}),this._canvas.on("dragenter",e=>{this.handleDragEnter(e.e)}),this._canvas.on("dragover",e=>{this.handleDragOver(e.e)}),this._canvas.on("drop",e=>{this.handleDrop(e.e)}),this._canvas.on("dragleave",e=>{this.handleDragLeave(e.e)})}handleDragEnter(e){e.preventDefault(),e.stopPropagation(),this.emitter.emit("drag-enter")}handleDragOver(e){e.preventDefault(),e.stopPropagation()}async handleDrop(e){var t;e.preventDefault(),e.stopPropagation();let i=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;if(!i||0===i.length)return;let n=i[0];if(!n.type.startsWith("image/"))return;let a=new FileReader;await new Promise(e=>{a.addEventListener("load",t=>{var i;let n=null===(i=t.target)||void 0===i?void 0:i.result,a=new Image;a.src=n,a.addEventListener("load",()=>{this.removeImage(),this.uploadImage(a),e(null)})}),a.readAsDataURL(n)}),this.emitter.emit("drag-end")}handleDragLeave(e){e.preventDefault(),e.stopPropagation(),this.emitter.emit("drag-end")}uploadImage(e){if(!this.checkUploadedImageSize(e)){(0,tT.cB)("The shortest side of the image must be at least 768 pixels");return}this._cleanupCurrentMode(),this.history.clear();let{width:t,height:i}=e;if(Math.max(t,i)>1536){let n=document.createElement("canvas"),a=n.getContext("2d"),r=1536/Math.max(t,i),o=Math.round(t*r),s=Math.round(i*r);n.width=o,n.height=s,null==a||a.drawImage(e,0,0,o,s);let l=new Image;return l.src=n.toDataURL("image/png"),new Promise(e=>{l.addEventListener("load",()=>{this._baseImage=l,this._initializeFabricImage(l),this._addDefaultRegion(),e(0)})})}this._baseImage=e,this._initializeFabricImage(e),this._addDefaultRegion()}checkUploadedImageSize(e){let{width:t,height:i}=e;return!(t<768)&&!(i<768)}_initializeFabricImage(e){let t;let i=new tZ.fabric.Image(e,{erasable:!1,selectable:!1,evented:!1}),{width:n,height:a}=e,{width:r,height:o}=this._container.getBoundingClientRect();t=n/a>r/o?Math.min(r/n,1):Math.min(o/a,1),i.scale(t),this._scale=t,this._canvas.setWidth(Math.round(n*t)),this._canvas.setHeight(Math.round(a*t)),this._canvas.backgroundImage=i,this.emitter.emit("image-update",i)}_addDefaultRegion(){var e;let t=.7*this._canvas.height,i=9/16*t,n=new tP({left:(this._canvas.width-i)/2,top:(this._canvas.height-t)/2+.1*this._canvas.height,width:i,height:t,fill:tE,name:null===(e=this.mask.metadata)||void 0===e?void 0:e.name});this._canvas.add(n),this.maskObj=n,this._canvas.setActiveObject(n),this._canvas.renderAll()}attach(e){this.mask.metadata=e,this.mask.obj&&(this.mask.obj.set({name:e.name}),this._canvas.renderAll())}exportScreenshot(){return this._canvas?this._canvas.toDataURL({format:"png",quality:1}):null}dispose(){var e,t,i,n;this._canvas.off("object:moving"),this._canvas.off("object:modified"),null===(e=this._canvas)||void 0===e||e.off("dragover"),null===(t=this._canvas)||void 0===t||t.off("drop"),null===(i=this._canvas)||void 0===i||i.off("dragenter"),null===(n=this._canvas)||void 0===n||n.off("dragleave")}async export(){var e;if(!this._canvas||!this._baseImage)return null;let{width:t,height:i}=this._baseImage,n=await this._createOfflineCanvas(),a=[{maskImage:this._createBinaryMask(n,t,i).toDataURL("image/png"),characterId:null===(e=this.mask.metadata)||void 0===e?void 0:e.id}];return{originImage:this._baseImage.src,characterList:a,width:t,height:i}}async _createOfflineCanvas(){let e=document.createElement("canvas"),t=new tZ.fabric.StaticCanvas(e);return t.setWidth(this._canvas.width),t.setHeight(this._canvas.height),e.width=this._canvas.width,e.height=this._canvas.height,new Promise(e=>{this.mask.obj.clone(i=>{i.strokeWidth=0,t.add(i),t.renderAll(),e(t)})})}_createBinaryMask(e,t,i){let n=document.createElement("canvas");n.width=t,n.height=i;let a=n.getContext("2d");if(!a)throw Error("Failed to get 2d context");a.drawImage(e.getElement(),0,0,t,i);let r=a.getImageData(0,0,t,i),o=r.data;for(let e=0;e<o.length;e+=4){let t=o[e+3]>0?255:0;o[e]=t,o[e+1]=t,o[e+2]=t,o[e+3]=255}return a.putImageData(r,0,0),n}_cleanupCurrentMode(){this._canvas&&(this._canvas.off("mouse:down"),this._canvas.off("mouse:move"),this._canvas.off("mouse:up"),this._drawingState.shape&&(this._canvas.remove(this._drawingState.shape),this._drawingState.shape=null),this._drawingState={isDown:!1,shape:null,startX:0,startY:0},this._canvas.isDrawingMode=!1)}async removeImage(){if(!this._canvas)return;this._canvas.backgroundImage=null,this._baseImage=null,this.maskObj=null;let{width:e,height:t}=this._container.getBoundingClientRect();this._canvas.setWidth(e),this._canvas.setHeight(t),this._canvas.getObjects().filter(e=>e instanceof tP).forEach(e=>{this._canvas.remove(e)}),await this.history.clear(),this._scale=1,this._canvas.renderAll(),this.emitter.emit("image-update")}_handleObjectModified(e,t){let{target:i}=t;if(!i||i.deleting)return;i.setCoords();let n=new t_.Z(this._canvas,i);i.saveState(),e.history.add(n)}constructor(){this._baseImage=null,this._scale=1,this.mask={obj:null,metadata:null,color:tE},this._isDrawingMode=!1,this._brushWidth=30,this._drawingState={isDown:!1,shape:null,startX:0,startY:0},this.emitter=new(tC()),this.history=new tk(this.emitter)}}let tI=[{displaySrc:"https://cdn.openart.ai/assets/character/openart-67d89ca6a3204422be8750101e62c2bb_raw.webp",actualSrc:"https://cdn.openart.ai/assets/character/openart-67d89ca6a3204422be8750101e62c2bb_raw.jpg",alt:"Example 1"},{displaySrc:"https://cdn.openart.ai/assets/character/openart-f972e68dc9c14716bd3ae4f6091dabd8_raw.webp",actualSrc:"https://cdn.openart.ai/assets/character/openart-f972e68dc9c14716bd3ae4f6091dabd8_raw.jpg",alt:"Example 2"},{displaySrc:"https://cdn.openart.ai/assets/character/openart-239db019978a4960888753af8c0ffae0_raw.webp",actualSrc:"https://cdn.openart.ai/assets/character/openart-239db019978a4960888753af8c0ffae0_raw.jpg",alt:"Example 3"}],tA=(0,w.forwardRef)((e,t)=>{var i;let{models:n}=e,{isMobile:r}=(0,m.j)(),l=(0,w.useRef)(null),d=(0,w.useRef)(null),c=(0,w.useRef)(null),[,h]=(0,w.useState)({}),{showModal:u}=(0,M.dd)(),p=(0,w.useRef)(new tN),[x,g]=(0,w.useState)(p.current.haveBaseImage),[j,v]=(0,w.useState)(p.current.haveMaskArea),[S,y]=(0,w.useState)(!1),[C,_]=(0,w.useState)(null),[k,P]=(0,w.useState)(null),[T,E]=(0,w.useState)(!1),N=(e,t)=>e.startsWith("data:image")?t((0,tS.Jr)(e)):Promise.resolve({imageUrl:e}),I=async()=>{var e,t;let{originImage:i,characterList:n,width:a,height:r}=await (null===(e=p.current)||void 0===e?void 0:e.export()),o=[];for(let{maskImage:e}of(o.push(N(i,tw.ZS)),n))o.push(N(e,tw.Ws));let s=null===(t=p.current)||void 0===t?void 0:t.exportScreenshot(),[l,...d]=(await Promise.all(o)).map(e=>e.imageUrl);return{creation_mode:"inpaint",origin_image:l,character_list:n.map((e,t)=>({character_id:e.characterId,mask_image:d[t]})),height:r,width:a,preview_image:s,inferType:"workflow"}};(0,w.useEffect)(()=>{if(!d.current||!l.current||!n||0===n.length)return;let{key:e,metadata:t}=n[0];p.current.attach({id:e,name:t.name,avatar:t.thumbnail})},[n]),(0,w.useEffect)(()=>{if(!d.current||!l.current)return;p.current.mount(l.current,d.current),_(d.current.querySelector(".manipulation-inpaint"));let e=e=>{if((e.metaKey||e.ctrlKey)&&"z"===e.key){var t,i;e.shiftKey?(null===(t=p.current)||void 0===t?void 0:t.history.canRedo())&&p.current.history.redo():(null===(i=p.current)||void 0===i?void 0:i.history.canUndo())&&p.current.history.undo(),e.preventDefault()}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e),p.current.dispose()}},[]),(0,w.useEffect)(()=>{if(!p.current)return;let e=()=>{g(p.current.haveBaseImage)},t=()=>{v(p.current.haveMaskArea)},i=()=>{y(!0)},n=()=>{y(!1)},a=p.current;return a.emitter.on("image-update",e),a.emitter.on("mask-update",t),a.emitter.on("drag-enter",i),a.emitter.on("drag-end",n),()=>{a&&(a.emitter.off("image-update",e),a.emitter.off("mask-update",t),a.emitter.off("drag-enter",i),a.emitter.off("drag-end",n))}},[p,g]),(0,w.useEffect)(()=>{if(!p.current)return;let e=()=>{h({})},t=p.current;return t.emitter.on("history:change",e),()=>{t&&t.emitter.off("history:change",e)}},[p,h]);let U=e=>{if(e&&e.length>0){E(!0);let t=e[0],i=new Image;i.src=t,i.crossOrigin="anonymous",i.addEventListener("load",()=>{p.current.uploadImage(i),E(!1)}),i.addEventListener("error",()=>{E(!1),console.error("Failed to load image from history")})}};return(0,w.useImperativeHandle)(t,()=>({handleExport:I})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z,{sx:{width:"100%",height:"100%"},children:[(0,a.jsxs)(s.Z,{ref:d,sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",gap:3},children:[(0,a.jsx)("canvas",{ref:l,style:{width:"100%",height:"100%"}}),x||S?null:(0,a.jsxs)(o.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:2,sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},onDragEnter:e=>p.current.handleDragEnter(e),onDragLeave:e=>p.current.handleDragLeave(e),onDragOver:e=>p.current.handleDragOver(e),onDrop:e=>p.current.handleDrop(e),children:[(0,a.jsx)(es.f91,{name:"upload",size:64}),(0,a.jsx)(f.Z,{fontWeight:"400",fontSize:r?"12px":"16px",lineHeight:r?"20px":"30px",sx:{whiteSpace:"normal",maxWidth:r?"280px":"none",textAlign:"center"},children:"1. Upload an image to get started. (Minimum size: 1024\xd71024)"}),(0,a.jsx)(f.Z,{fontWeight:"400",fontSize:r?"12px":"16px",lineHeight:r?"20px":"30px",sx:{whiteSpace:"normal",maxWidth:r?"280px":"none",textAlign:"center"},children:"2. Mark the area for your character."}),(0,a.jsx)(f.Z,{fontWeight:"400",fontSize:r?"12px":"16px",lineHeight:r?"20px":"30px",sx:{whiteSpace:"normal",maxWidth:r?"280px":"none",textAlign:"center"},children:'3. Save and return, then click "Create" to generate.'}),(0,a.jsx)("input",{type:"file",ref:c,style:{display:"none"},accept:"image/*",onChange:e=>{var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!i)return;let n=new FileReader;n.addEventListener("load",e=>{var t;let i=null===(t=e.target)||void 0===t?void 0:t.result,n=new Image;n.src=i,n.addEventListener("load",()=>{p.current.uploadImage(n)})}),n.readAsDataURL(i)}}),(0,a.jsx)(A.Z,{variant:"contained",color:"primary",sx:{backgroundColor:"#0929F7",border:"0px solid #E5E7EB",borderRadius:"8px",padding:"12px 17px","&:hover":{backgroundColor:"#0929F7"},color:"white"},onClick:()=>{var e;null===(e=c.current)||void 0===e||e.click()},disabled:T,children:T?"Loading...":"Upload Image"}),(0,a.jsxs)(f.Z,{variant:"body1",sx:{color:"text.secondary",display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:["Or choose from",(0,a.jsx)(A.Z,{variant:"text",disableRipple:!0,sx:{minWidth:"auto",padding:"0 4px",textTransform:"none",color:"text.secondary",borderColor:"text.secondary",borderBottomWidth:"1px",borderBottomStyle:"solid",borderRadius:0,lineHeight:1.2,fontSize:"inherit",fontWeight:500,"&:hover":{backgroundColor:"transparent",color:"text.primary",borderColor:"text.primary"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},onClick:()=>{u(tb.S,{maxSelectionCount:1,onClose:U})},disabled:T,children:"history"})]}),(0,a.jsx)(o.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:(0,a.jsx)(f.Z,{variant:"body1",sx:{color:"text.secondary",position:"relative",padding:"0 16px","&::before, &::after":{content:'""',position:"absolute",top:"50%",width:"80px",height:"1px",backgroundColor:"rgba(156, 163, 175, 0.5)"},"&::before":{right:"100%"},"&::after":{left:"100%"}},children:"Or try with one of ours"})}),(0,a.jsx)(o.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:tI.map((e,t)=>(0,a.jsxs)(s.Z,{sx:{position:"relative",width:100,height:100,display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,a.jsx)("img",{src:e.displaySrc,alt:e.alt,style:{width:"100%",height:"100%",borderRadius:8,cursor:"pointer",objectFit:"cover",transition:"transform 0.2s ease",opacity:k===t?.5:1},onClick:()=>{P(t);let i=new Image;i.src=e.actualSrc,i.crossOrigin="anonymous",i.addEventListener("load",()=>{p.current.uploadImage(i),P(null)})}}),k===t&&(0,a.jsx)(tj.Z,{size:24,sx:{position:"absolute",transform:"translate(-50%, -50%)"}})]},e.displaySrc))})]})]}),(0,a.jsx)(o.Z,{direction:"row",spacing:1,p:1,justifyContent:"center",onDragEnter:e=>p.current.handleDragEnter(e),onDragLeave:e=>p.current.handleDragLeave(e),onDragOver:e=>p.current.handleDragOver(e),onDrop:e=>p.current.handleDrop(e),children:(0,a.jsxs)(b.Z,{severity:"info",icon:(0,a.jsx)(es.zLJ,{color:"white"}),sx:{"& .MuiAlert-message":{fontSize:r?"12px":"14px"}},children:[(0,a.jsx)("li",{children:"Draw a green area around your character"}),(0,a.jsx)("li",{children:"Make sure the area matches your prompt and has appropriate spacing"})]})}),(0,a.jsxs)(o.Z,{direction:"row",spacing:1,p:1,justifyContent:"center",children:[(0,a.jsx)(tg.Br,{icon:"Undo",tooltip:(0,a.jsx)(tg.mQ,{shortcut:["cmd","Z"],children:"History Undo"}),disable:(null===(i=p.current)||void 0===i?void 0:i.history.canUndo())===!1,onClick:()=>{p.current.history.undo()},sx:tv.qV}),(0,a.jsx)(tg.Br,{icon:"Redo",tooltip:(0,a.jsx)(tg.mQ,{shortcut:["cmd","shift","Z"],children:"History Redo"}),disable:(null==p?void 0:p.current.history.canRedo())===!1,onClick:()=>{p.current.history.redo()},sx:tv.qV}),(0,a.jsx)(Z.Z,{orientation:"vertical",flexItem:!0}),(0,a.jsx)(tg.Br,{icon:"ph:trash",tooltip:(0,a.jsx)(tg.mQ,{children:"Remove image"}),disable:!x,onClick:async()=>{await p.current.removeImage()},sx:tv.qV,labelSx:{fontSize:16},label:"Remove image"})]})]}),C&&!j&&x?(0,tf.createPortal)((0,a.jsx)(s.Z,{sx:{top:"15px",left:"50%",transform:"translateX(-50%)",position:"absolute",borderRadius:"8px",border:"0px solid #E5E7EB",backgroundColor:"rgba(0, 0, 0, 0.5)",textAlign:"center",padding:"12px",whiteSpace:"nowrap",minWidth:"max-content"},children:(0,a.jsx)(f.Z,{fontSize:"14px",sx:{color:"white"},children:"Click and drag to mark where your character should be positioned."})}),C):null]})});tA.displayName="InpaintEditor";var tM=e=>{let{open:t,onClose:i,setPreviewImage:n,onSave:o,models:s}=e,{isMobile:l}=(0,m.j)(),d=(0,w.useRef)(),[c,h]=(0,w.useState)(!1);return(0,a.jsxs)(U.Z,{open:t,fullWidth:!0,maxWidth:"lg",keepMounted:!0,PaperProps:{sx:{alignItems:"center",bgcolor:"#1D1D1D"}},children:[(0,a.jsx)(R.Z,{sx:{width:"100%",borderBottom:"1px solid #444444",padding:2},children:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(f.Z,{variant:"h6",fontWeight:600,children:"Position your Character"}),l?null:(0,a.jsx)(f.Z,{variant:"body1",fontWeight:400,fontSize:14,children:"Define where your character will appear in any uploaded image."})]}),(0,a.jsxs)(r.Z,{direction:"row",gap:2,alignItems:"center",children:[(0,a.jsx)(tx.Z,{startIcon:(0,a.jsx)(tg.oE,{icon:"material-symbols:save-rounded",size:16}),variant:"contained",color:"primary",loading:c,sx:{color:"white",bgcolor:eS.u8,"&:hover":{bgcolor:eS.lr}},onClick:async()=>{h(!0);try{let e=await d.current.handleExport();n(e.preview_image),o(e),i({},"backdropClick")}catch(e){(0,tT.cB)("Save error")}finally{h(!1)}},children:(0,a.jsxs)("span",{children:[l?"Save":"Save Placement"," "]})}),(0,a.jsx)(tm.Z,{onClick:()=>i(null,"escapeKeyDown"),children:(0,a.jsx)(es.Bfz,{size:24})})]})]})}),(0,a.jsx)(z.Z,{sx:{width:"100%",height:"100vh",padding:0,bgcolor:"#1D1D1D"},children:(0,a.jsx)(tA,{ref:d,models:s})})]})};let tU=e=>{let{label:t="Steps",value:i,onChange:n,max:r,min:s,step:l=1,disabled:d,stepTipText:c="How long AI runs before generating the final image. Usually, higher is better but to a certain degree. The default we use is 25 steps which should be enough for generating any kind of image."}=e;return(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(tu.X,{label:t,tipText:c,tooltipSx:{width:"fit-content"},disabled:d,value:i,onChange:n,min:s,max:r,step:l,sx:{mt:1},showResult:!0}),d?(0,a.jsx)(eL.Y,{feature:"to change the number of steps"}):null]})},tR=e=>{let{max:t,min:i,value:n,onChange:r,stepProps:o}=e,[s]=(0,x.y)({key:"create.config.steps"});return(0,a.jsx)(eH,{children:(0,a.jsx)(tU,{max:t,min:i,value:n,onChange:r,disabled:!s,...o||{}})})};var tz=i(91476);function tD(e){let{src:t,children:i,activeText:n,active:r=!1,disabled:o=!1,onClick:l,onDelete:d,sx:c}=e;return(0,a.jsxs)(s.Z,{width:"100%",sx:(0,g.j)({position:"relative","&:hover":{button:{opacity:1},"&::after":{opacity:.3}},"&::after":{content:'""',position:"absolute",inset:0,backgroundColor:"black",opacity:0,transition:e=>e.transitions.create("opacity"),borderRadius:"6px"}},c),children:[d?(0,a.jsx)(tz.Z,{title:"Delete the image",icon:es.Xm5,iconSize:20,sx:{position:"absolute",top:8,right:8,cursor:"pointer"},onClick:()=>{d()}}):null,(0,a.jsx)(eu.L6,{src:t,sx:{width:"100%",objectFit:"cover",opacity:r?1:.5,borderRadius:"6px"}}),(0,a.jsx)(A.Z,{disabled:o,variant:r?"outlined":"primary",onClick:l,sx:{width:"max-content",gap:"4px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderRadius:"5px",opacity:r?0:1,zIndex:1,transition:e=>e.transitions.create(["opacity","background-color","border-color"]),...r&&{backgroundColor:"transparent",borderColor:"rgba(255, 255, 255, 0.5)",color:"rgba(255, 255, 255, 0.8)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.8)"}}},children:r?n:i})]})}var tV=i(52580),tF=i(50574),tB=i(21461),tO=i(31349),tW=i(70361),tL=i(38616),tG=i(3344);let tH="general-enhance",tK=[{value:"warm",label:"Warm"},{value:"cool",label:"Cool"},{value:"vibrant",label:"Vibrant"},{value:"muted",label:"Muted"},{value:"dark",label:"Dark"},{value:"pastel",label:"Pastel"}],t$=[{value:"realism",label:"Realism"},{value:"fantasy",label:"Fantasy"},{value:"anime",label:"Anime"},{value:"surrealism",label:"Surrealism"},{value:"photorealism",label:"Photorealism"},{value:"minimalism",label:"Minimalism"},{value:"pixel",label:"Pixel"},{value:"cartoon",label:"Cartoon"},{value:"vintage",label:"Vintage"},{value:"watercolor",label:"Watercolor"},{value:"baroque",label:"Baroque"},{value:"impressionism",label:"Impressionism"},{value:"ads-advertising",label:"Ads & Advertising"},{value:"artstyle-abstract",label:"Abstract"},{value:"ads-automotive",label:"Automotive"},{value:"ads-corporate",label:"Corporate"},{value:"ads-fashion editorial",label:"Fashion Editorial"},{value:"ads-food photography",label:"Food Photography"},{value:"ads-luxury",label:"Luxury"},{value:"ads-real estate",label:"Real Estate"},{value:"ads-retail",label:"Retail"},{value:"artstyle-abstract expressionism",label:"Abstract Expressionism"},{value:"artstyle-art deco",label:"Art Deco"},{value:"artstyle-art nouveau",label:"Art Nouveau"},{value:"artstyle-constructivist",label:"Constructivist"},{value:"artstyle-graffiti",label:"Graffiti"},{value:"artstyle-pointillism",label:"Pointillism"},{value:"artstyle-pop art",label:"Pop Art"},{value:"artstyle-psychedelic",label:"Psychedelic"},{value:"artstyle-renaissance",label:"Renaissance"},{value:"artstyle-steampunk",label:"Steampunk"},{value:"futuristic-biomechanical",label:"Biomechanical"},{value:"futuristic-cybernetic",label:"Cybernetic"},{value:"futuristic-futuristic",label:"Futuristic"},{value:"futuristic-retro futurism",label:"Retro Futurism"},{value:"futuristic-sci-fi",label:"Sci-Fi"},{value:"futuristic-vaporwave",label:"Vaporwave"},{value:"game-bubble bobble",label:"Bubble Bobble"},{value:"game-cyberpunk game",label:"Cyberpunk Game"},{value:"photo-silhouette",label:"Silhouette"},{value:"photo-film noir",label:"Film Noir"},{value:"papercraft-flat papercut",label:"Flat Papercut"},{value:"papercraft-collage",label:"Collage"},{value:"misc-tribal",label:"Tribal"},{value:"misc-stained glass",label:"Stained Glass"},{value:"misc-minimalist",label:"Minimalist"},{value:"misc-manga",label:"Manga"},{value:"misc-macabre",label:"Macabre"},{value:"misc-kawaii",label:"Kawaii"},{value:"misc-grunge",label:"Grunge"},{value:"misc-gothic",label:"Gothic"},{value:"misc-dystopian",label:"Dystopian"},{value:"misc-architectural",label:"Architectural"},{value:"game-zelda",label:"Zelda"},{value:"game-streetfighter",label:"Streetfighter"},{value:"game-strategy game",label:"Strategy Game"},{value:"game-rpg fantasy game",label:"RPG Fantasy Game"},{value:"game-retro arcade",label:"Retro Arcade"},{value:"game-pokemon",label:"Pokemon"},{value:"game-minecraft",label:"Minecraft"},{value:"game-mario",label:"Mario"},{value:"game-gta",label:"GTA"},{value:"game-fighting game",label:"Fighting Game"}],tq=(0,w.forwardRef)(function(e,t){let{onOk:i}=e,[n,r]=(0,w.useState)(!1),[l,d]=(0,w.useState)(""),[c,h]=(0,w.useState)("");return(0,w.useImperativeHandle)(t,()=>({open:()=>r(!0),close:()=>r(!1)})),(0,a.jsxs)(tG.Z,{anchor:"left",onClose:()=>r(!1),open:n,onOpen:()=>{},sx:{"& .MuiDrawer-paper":{width:"300px",padding:"20px",background:"#2A2A2A",height:"100%",overflowY:"auto"}},children:[(0,a.jsxs)(o.Z,{direction:"column",spacing:3,sx:{height:"100%",marginBottom:"20px"},children:[(0,a.jsxs)(o.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,a.jsx)(tW.Z,{onClick:()=>{r(!1)}}),(0,a.jsx)(f.Z,{fontSize:18,fontWeight:500,children:"Prompt enhancer"})]}),(0,a.jsxs)(o.Z,{spacing:3,children:[(0,a.jsx)(f.Z,{fontSize:16,fontWeight:500,children:"Color Scheme"}),(0,a.jsx)(o.Z,{direction:"column",spacing:1,children:tK.map(e=>(0,a.jsx)(A.Z,{variant:"contained",sx:{boxSizing:"border-box",width:"100%",backgroundColor:"background.paper",color:"text.primary","&:hover":{backgroundColor:"background.paper",color:"text.primary"},border:"1px solid",borderColor:l===e.value?"#0084FF":"background.paper"},onClick:()=>{if(l===e.value){d("");return}d(e.value)},children:e.label},e.value))})]}),(0,a.jsxs)(o.Z,{spacing:3,children:[(0,a.jsx)(f.Z,{fontSize:16,fontWeight:600,children:"Style"}),(0,a.jsxs)(o.Z,{direction:"column",spacing:1,children:[t$.map(e=>(0,a.jsx)(A.Z,{variant:"contained",sx:{boxSizing:"border-box",backgroundColor:"background.paper",color:"text.primary","&:hover":{backgroundColor:"background.paper",color:"text.primary"},border:"1px solid",borderColor:c===e.value?"#0084FF":"background.paper"},onClick:()=>{if(c===e.value){h("");return}h(e.value)},children:e.label},e.value)),(0,a.jsx)(s.Z,{sx:{height:"60px"}})]})]})]}),(0,a.jsx)(s.Z,{sx:{position:"fixed",bottom:0,height:"60px",backgroundColor:"#2A2A2A"},children:(0,a.jsx)(A.Z,{variant:"contained",sx:{width:"260px"},onClick:()=>{null==i||i({colorScheme:l,style:c}),r(!1)},className:"oa-button-primary",startIcon:(0,a.jsx)(tL.Z,{}),children:"Enhance prompt"})})]})});var tX=i(88532),tY=i(59437),tQ=i(43682),tJ=i(18002),t0=i(57984),t1=i(45137);let t2=e=>{let{value:t,options:i,onChange:n}=e;return(0,a.jsx)(o.Z,{direction:"row",sx:{bgcolor:"#1E1E1E",borderRadius:"5px",overflow:"hidden",position:"relative"},children:i.map(e=>(0,a.jsxs)(s.Z,{sx:{px:2,py:.3,color:"white",cursor:"pointer",position:"relative",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.20)"},onClick:t=>{n(e.value)},children:[(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:t===e.value?"bold":"normal",children:e.label}),t===e.value&&(0,a.jsx)(eo.E.div,{layoutId:"activeToggle",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,type:"spring",stiffness:500,damping:30},style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#0929F7",zIndex:-1}})]},e.value))})},t5=e=>{let{options:t,autoEnhance:i,onAutoEnhanceChange:n}=e,[r,l]=(0,w.useState)(!1),d=(0,w.useRef)(null),{isMobile:c}=(0,m.j)(),h=(0,ew.Xd)("prompt.enhance"),u=()=>{l(!1)},p=e=>{t1.B("change-prompt-assistant-mode",{mode:e}),null==n||n(e)},x=e=>()=>{t1.B("prompt_enhanced",{enhance_mode:e.value}),null==e||e.onclick(),u()},g=void 0!==i&&n,j=c?"350px":"280px";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z,{ref:d,direction:"row",alignItems:"center",justifyContent:"center",spacing:.5,height:"100%",width:"100%",onClick:()=>{l(!r)},children:[g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t0.r,{checked:"on"===i,onChange:e=>{e.stopPropagation();let t=e.target.checked?"on":"off";t1.B("change-prompt-assistant-mode",{mode:t}),null==n||n(t)},onClick:e=>e.stopPropagation(),value:i}),(0,a.jsxs)(f.Z,{variant:"editor-label1",children:["Auto Enhance:"," ",(0,a.jsx)("span",{style:{fontWeight:"bold",minWidth:"24px",display:"inline-block",textAlign:"center"},children:"on"===i?"ON":"OFF"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tL.Z,{fontSize:"small"}),(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Enhance prompt"})]}),(0,a.jsx)(tX.Z,{fontSize:"small"})]}),(0,a.jsx)(tY.Z,{anchorEl:d.current,open:r,sx:{zIndex:1e3},role:void 0,transition:!0,placement:"bottom",children:e=>{let{TransitionProps:n,placement:r}=e;return(0,a.jsx)(eW.Z,{...n,style:{transformOrigin:"bottom"===r?"center top":"center bottom",width:j},children:(0,a.jsx)(tQ.Z,{sx:{width:"280px",borderRadius:"10px",border:"1px solid #313131",backgroundColor:"#151718",boxShadow:"0px 4px 6px 0px rgba(0, 0, 0, 0.10), 0px 10px 15px 0px rgba(0, 0, 0, 0.10)"},children:(0,a.jsx)(tJ.d,{onClickAway:u,children:(0,a.jsxs)(o.Z,{children:[g?(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsxs)(o.Z,{p:1,direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(o.Z,{spacing:.3,direction:"row",alignItems:"center",children:[(0,a.jsx)(f.Z,{fontSize:c?16:12,fontWeight:500,color:"white",children:"Auto Prompt Enhance"}),(0,a.jsx)(ef.Z,{title:"In auto mode, prompts are enhanced for half of your generations. In on mode, prompts are always enhanced. In off mode, prompts are not enhanced.",placement:"top",children:(0,a.jsx)(es.eFz,{sx:{height:"18px !important",width:"18px !important",color:"rgba(255, 255, 255, 0.6)"}})})]}),(0,a.jsx)(t2,{value:i||"off",options:[{value:"on",label:"ON"},{value:"off",label:"OFF"}],onChange:p})]}),(0,a.jsx)(Z.Z,{flexItem:!0})," "]}):null,(0,a.jsxs)(o.Z,{p:1,pt:0,children:[(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{height:"32px"},children:[(0,a.jsx)(f.Z,{variant:"editor-label1",color:"white",children:"Manual Options:"}),(0,a.jsxs)(f.Z,{variant:"editor-label2",color:"#3FDD78",fontWeight:500,children:[h," credit each"]})]}),(0,a.jsx)(Z.Z,{flexItem:!0}),t.map((e,i)=>(0,a.jsxs)(w.Fragment,{children:[(0,a.jsxs)(to.Z,{disabled:e.disabled,onClick:x(e),sx:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"45px",width:"100%",px:1,transition:"background-color 0.2s ease","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(s.Z,{sx:{color:"#4459DD",display:"flex",alignItems:"center"},children:e.icon}),(0,a.jsx)(f.Z,{variant:"editor-label1",color:"white",children:e.label})]}),(0,a.jsx)(s.Z,{sx:{color:"white"},children:(0,a.jsx)(tX.Z,{fontSize:"small",sx:{transform:"rotate(-90deg)"}})})]}),i!==t.length-1&&(0,a.jsx)(Z.Z,{})]},e.value))]})]})})})})}})]})};var t4=i(5521),t3=i(85814),t6=i(20665),t8=i(78406),t9=i(2488),t7=i(57338),ie=i(24325),it=i(81192),ii=i(19082),ia=i(49523),ir=i(22289),io=i(28337);let is=async e=>(await io.ZP.post("common/prompt",e)).data,il=(0,io.py)(is,{onSuccessWithQueryClient:(e,t)=>{e.invalidateQueries([ir.uE])}});var id=i(14456);class ic{get list(){var e;return(null===(e=this.store)||void 0===e?void 0:e.list)??[]}attachQuery(e){this.queryFn=e}async next(e){return this.after?this.after:await this.query(e??this.currentParams)}async query(e){t1.B("prompt_enhanced",{enhance_mode:"more"});let t=await this.queryFn(e);(0,id.gf)().invalidateQueries([ir.uE]);let i=new ic({list:t.map(e=>new e8.N({prompt:e.prompt,is_generated:!0}))});return i.before=this,this.after=i,i.currentParams=e,i}constructor(e=null){this.before=null,this.after=null,this.store=e}}let ih=(0,it.cn)(new ic),iu=(0,it.cn)(!1),ip=e=>{let[t,i]=(0,ii.KO)(ih),[n,a]=(0,ii.KO)(iu),[r]=il({onError(){a(!1)}});t.attachQuery(r);let o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a(!0),i(await t.next(e)),a(!1)},s=async()=>{t.before&&i(t.before)},l=async()=>{(0,ia.Z)(t.currentParams,e)||n||(i(new ic),a(!0),i(await t.query(e)),a(!1))},d=!(0,ia.Z)(t.currentParams,e);return{data:t.list,loading:n,next:o,forward:s,start:l,isNew:d}},ix=(0,w.memo)(function(e){let{onClose:t,isMobile:i,sx:n,onSelect:r,dealWithDisplayPrompt:l}=e,{data:d,next:c,loading:h}=ip(null);return(0,a.jsx)(s.Z,{sx:n,children:(0,a.jsxs)(o.Z,{direction:"column",spacing:2,minHeight:i?0:462,children:[h?(0,a.jsxs)(o.Z,{direction:"row",width:"100%",alignItems:"center",spacing:1,children:[(0,a.jsx)(tj.Z,{size:24,sx:{color:eS.tE}}),(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Generating"})]}):(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(f.Z,{variant:"editor-label1",sx:{cursor:"default"},children:"Enhanced prompts"}),(0,a.jsx)(tr.default,{sx:{color:"#fff",cursor:"pointer"},onClick:()=>{null==t||t()}})]}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t8.Z,{sx:{m:0,p:0},children:(0,a.jsx)(ie.Z,{children:d.map((e,t)=>(0,a.jsx)(t9.Z,{sx:{mb:t===d.length-1?0:1},children:(0,a.jsx)(im,{prompt:e.value,onSelect:r,dealWithDisplayPrompt:l})},e.value))})}),d.length>0&&(0,a.jsx)(A.Z,{variant:"outlined",children:(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:.2,onClick:()=>c(),children:[(0,a.jsx)(t6.Z,{sx:{color:eS.tE}}),(0,a.jsxs)(f.Z,{variant:"editor-label1",children:["Regenerate (",3," credits)"]})]})})]})]})})}),im=e=>{let{prompt:t,onSelect:i,dealWithDisplayPrompt:n}=e;return(0,a.jsx)(t7.ZP,{sx:{p:0,m:0},children:(0,a.jsxs)(o.Z,{direction:"column",sx:{background:"#1F1F1F",borderRadius:"10px",padding:"12px",border:"1px solid #313131"},spacing:1,children:[(0,a.jsx)(f.Z,{variant:"editor-label1",dangerouslySetInnerHTML:{__html:n(t)}}),(0,a.jsx)(A.Z,{sx:{backgroundColor:eS.tE,color:"#fff","&:hover":{backgroundColor:eS.tE,color:"#fff"},fontWeight:600},variant:"contained",onClick:()=>{null==i||i(t)},children:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Select"})})]})})},ig=e=>{let{recentUserInputPrompt:t,recentUserInputDescribe:i,setPrompt:n,dealWithDisplayPrompt:r}=e,[s,l]=(0,w.useState)(!1),d=(0,w.useRef)(null),[c,h]=(0,w.useState)(0),[u,p]=(0,w.useState)(0),{start:x,isNew:m}=ip({prompt:t,num_return_sequences:3,model:tH,...i});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z,{ref:d,direction:"row",alignItems:"center",justifyContent:"center",spacing:.5,height:"100%",width:"100%",padding:"0",onClick:()=>{var e;x();let t=null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect();h((null==t?void 0:t.top)-150||0),p((null==t?void 0:t.left)+t.width+30||0),l(!s)},children:[(0,a.jsxs)(f.Z,{fontSize:"12px",fontWeight:500,children:["More options ",m?(0,a.jsxs)("span",{children:["( ",3," credits)"]}):null]}),(0,a.jsx)(t4.Z,{fontSize:"small"})]}),(0,a.jsx)(t3.ZP,{anchorReference:"anchorPosition",anchorPosition:{top:c,left:u},open:s,onClose:()=>{l(!1)},sx:{"& .MuiPopover-paper":{width:"320px",borderRadius:"10px",background:"#000",boxShadow:"0px 4px 15px 0px rgba(0, 0, 0, 0.80)",border:"1px solid #313131",padding:"24px 16px 16px 16px"}},children:(0,a.jsx)(ix,{onClose:()=>l(!1),onSelect:e=>n(e,!0),dealWithDisplayPrompt:r})})]})};var ij=i(31289);let ib=e=>{let{prompt:t,className:i,options:n,loading:r,type:s,MoreGeneratingComponent:l,isGenerated:d,recentUserInputDescribe:c,recentUserInputPrompt:h,setPrompt:u,dealWithDisplayPrompt:p,autoEnhance:x,onAutoEnhanceChange:m}=e,g=(0,w.useMemo)(()=>l||ig,[l]);return(0,a.jsx)(B.Z,{className:i,component:"div",sx:{borderRadius:"5px",padding:"7px 0px",border:"1px solid #444",cursor:"pointer",display:"edit"===s?"none":"flex","& .MuiChip-label":{pr:d?"2px":void 0},backgroundColor:"transparent"},size:"small",label:r?(0,a.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,a.jsx)(tj.Z,{size:16}),(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Enhancing"})]}):d?(0,a.jsx)(g,{recentUserInputDescribe:c,recentUserInputPrompt:h,setPrompt:u,dealWithDisplayPrompt:p}):(null==t?void 0:t.length)>0?(0,a.jsx)(t5,{options:n,autoEnhance:x,onAutoEnhanceChange:m}):(0,a.jsx)(iv,{setPrompt:u})})};function iv(e){let{setPrompt:t}=e,{isAuthenticated:i}=(0,c.T)(),{showModal:n}=(0,M.dd)();return(0,a.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",onClick:()=>{if(!i){(0,ij.uT)();return}n(tO.Z,{setPrompt:t,showCreateButton:!1})},children:[(0,a.jsx)(es.ZMD,{}),(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Image to Prompt"})]})}let iS=e=>{let{undo:t,haveBefore:i}=e;return i?(0,a.jsx)(B.Z,{component:"div",size:"small",sx:{borderRadius:"8px",padding:"none",backgroundColor:"white",color:eS.tE,cursor:"pointer"},label:(0,a.jsx)(o.Z,{direction:"row",alignItems:"center",spacing:.2,onClick:t,children:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Undo"})})}):null},iw=(0,w.createContext)(null);var iy=i(2345);let iC=e=>{let t=(0,w.useContext)(iw);if(!t)throw Error("usePromptStore must be used within a PromptStoreProvider");return(0,iy.o)(t,e)},iZ=e=>{let{isMobile:t,setPrompt:i,dealWithDisplayPrompt:n}=e,[r,s]=(0,w.useState)(!1),l=iC(e=>e.recentUserInputPrompt.value),{start:d,isNew:c}=ip({prompt:l,num_return_sequences:3,model:tH,...iC(e=>e.recentUserInputPrompt.describe)}),h=()=>{s(!1)},u=()=>{d(),s(!r)};return t?{openMoreOnMobile:r,operation:()=>(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:.5,height:"100%",width:"100%",padding:"0",onClick:u,children:[(0,a.jsxs)(f.Z,{variant:"editor-label1",children:["See more options ",c?(0,a.jsx)("span",{children:"( 3 credits)"}):null]}),(0,a.jsx)(t4.Z,{fontSize:"small"})]}),MorePromptContent:()=>(0,a.jsx)(ix,{onClose:h,isMobile:!0,sx:{display:r?"block":"none",marginTop:"10px"},onSelect:i,dealWithDisplayPrompt:n})}:{}};var i_=i(20512),ik=i(34077),iP=i(52973);let iT=(e,t)=>{let i=!1,n=!1,a=(0,ik.M)()((0,iP.mW)((a,r)=>({currentPromptIndex:0,promptHistory:e?[e]:[],haveBefore:!1,recentUserInputPrompt:new e8.N({prompt:"",is_generated:!1}),notifyExternalChange:e=>{!i&&n&&t&&t(e)},undo:()=>{a(e=>{let{currentPromptIndex:t,promptHistory:i}=e;if(t>0){let e=t-1,n=i[e];return r().notifyExternalChange(n),{currentPromptIndex:e,haveBefore:e>0}}return e},!1,"undo")},redo:()=>{a(e=>{let{currentPromptIndex:t,promptHistory:i}=e,n=t+1;if(n<i.length){let e=i[n];return r().notifyExternalChange(e),{currentPromptIndex:n,haveBefore:!0}}return{haveBefore:!1}},!1,"redo")},setPrompt:e=>{a(t=>{let i=t.promptHistory.slice(0,t.currentPromptIndex+1);i.push(e),r().notifyExternalChange(e);let n=i.length-1;return{promptHistory:i,currentPromptIndex:n,haveBefore:n>0}},!1,"setPrompt")},syncExternalValue:e=>{if(e)try{if(n)return;i=!0;let t=r(),o=t.promptHistory[t.currentPromptIndex];ia.Z(e,o)||a(t=>{let i=[...t.promptHistory.slice(0,t.currentPromptIndex+1),e],n=i.length-1;return{promptHistory:i,currentPromptIndex:n,haveBefore:n>0}},!1,"syncExternalValue"),e.isGenerated||ia.Z(e,t.recentUserInputPrompt)||a({recentUserInputPrompt:e},!1,"updateRecentUserInputPrompt")}finally{i=!1}}}),{trace:!0}));a.subscribe((t,i)=>{!(t.promptHistory.length>0)&&e&&a.setState({promptHistory:[e]},!1,"initPromptHistory")});let r={setPrompt:e=>{try{n=!0,a.getState().setPrompt(e)}finally{n=!1}},undo:()=>{try{n=!0,a.getState().undo()}finally{n=!1}},redo:()=>{try{n=!0,a.getState().redo()}finally{n=!1}},syncExternalValue:i_.Z(e=>{a.getState().syncExternalValue(e)},50,{leading:!1,trailing:!0})};return{...a,...r}},iE=e=>{let{value:t,onChange:i,children:n}=e,r=(0,w.useMemo)(()=>iT(t,i),[i]);return(0,w.useEffect)(()=>{r.syncExternalValue(t)},[r,t]),(0,a.jsx)(iw.Provider,{value:r,children:n})},iN=(0,w.memo)(function(e){let{placeholder:t="e.g. A cat is sitting on a table. We support all languages.",value:i,InputProps:n,showActionButtons:r=!0,enhancePromptProps:s,dealWithDisplayPrompt:l,autoEnhance:d,onAutoEnhanceChange:h}=e,u=(0,w.useContext)(iw),p=u.setPrompt,x=u.undo,m=iC(e=>e.haveBefore),g=iC(e=>e.recentUserInputPrompt.describe),j=iC(e=>e.recentUserInputPrompt.value),{showModal:f}=(0,M.dd)(),{isAuthenticated:b,isMobile:v}=(0,c.T)(),[S,y]=il(),C=(0,w.useRef)(null),Z=(0,w.useRef)(null),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p(new e8.N({prompt:e,is_generated:t,describe:s}))},{operation:k,MorePromptContent:P,openMoreOnMobile:T}=iZ({isMobile:v,setPrompt:e=>{_(e,!0)},dealWithDisplayPrompt:l}),E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(await S({...s,prompt:i.value,num_return_sequences:1,model:tH,...e}))[0].prompt;p(new e8.N({prompt:t,is_generated:!0,describe:e}))},N=[{value:"quick",label:"Quick Enhance",disabled:!1,credit:1,icon:(0,a.jsx)(tF.Z,{}),onclick:()=>{if(!b){(0,ij.uT)();return}E()}},{value:"customize",label:"Customize Prompt",disabled:!1,credit:1,icon:(0,a.jsx)(tV.Z,{}),onclick:()=>{if(!b){(0,ij.uT)();return}Z.current.open()}},{value:"img2prompt",label:"Image to Prompt",disabled:!1,credit:0,amplitude:"img2prompt",icon:(0,a.jsx)(es.ZMD,{height:24,width:24}),onclick:()=>{if(!b){(0,ij.uT)();return}f(tO.Z,{setPrompt:_,showCreateButton:!1})}}],I="23px";return(0,a.jsxs)(o.Z,{sx:{position:"relative"},spacing:2,children:[(0,a.jsxs)(o.Z,{sx:{position:"relative",width:"100%"},children:[(0,a.jsx)(tB.Z,{ref:C,multiline:!0,placeholder:t,fullWidth:!0,value:null==i?void 0:i.value,onChange:e=>_(e.target.value),InputProps:n??{slotProps:{input:{sx:{lineHeight:I,minHeight:`calc(${I} * 4)`}}}},sx:{width:"100%","& .MuiInputBase-input":{mb:3,width:"100%"},"& .MuiInputBase-root":{position:"relative",width:"100%"}}}),r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z,{direction:"row",sx:{zIndex:10,...T?{mt:2}:{position:"absolute",bottom:"5px",right:"5px"}},spacing:1,children:[(0,a.jsx)(iS,{undo:x,haveBefore:m}),(0,a.jsx)(ib,{prompt:null==i?void 0:i.value,className:"enhance-prompt-select",MoreGeneratingComponent:k,options:N,loading:y,isGenerated:i.isGenerated,recentUserInputDescribe:g,recentUserInputPrompt:j,setPrompt:_,dealWithDisplayPrompt:l,autoEnhance:d,onAutoEnhanceChange:h})]}),P?(0,a.jsx)(P,{}):null]}):null]}),(0,a.jsx)(tq,{ref:Z,onOk:E})]})}),iI=e=>{let{value:t,placeholder:i,onChange:n,InputProps:r,showActionButtons:o,enhancePromptProps:s,dealWithDisplayPrompt:l,autoEnhance:d,onAutoEnhanceChange:c}=e;return(0,a.jsx)(iE,{value:t,onChange:n,children:(0,a.jsx)(iN,{value:t,placeholder:i,InputProps:r,showActionButtons:o,enhancePromptProps:s,dealWithDisplayPrompt:l,autoEnhance:d,onAutoEnhanceChange:c})})},iA=(0,w.forwardRef)(function(e,t){let{value:n,placeholder:r,onChange:o,models:l,...d}=e;(0,w.useImperativeHandle)(t,()=>{var e;return{focus:()=>{var e;null===(e=m.current)||void 0===e||e.focus()},value:(null===(e=m.current)||void 0===e?void 0:e.textContent)??""}});let c=(0,w.useMemo)(()=>{let e=l.reduce((e,t)=>(e[t.model_name]||(e[t.model_name]=[]),e[t.model_name].push(t),e),{});return l.map(t=>{let i=e[t.model_name];return{key:i.length>1?`${t.model_name}(${i.indexOf(t)+1})`:t.model_name,value:t.id,originalName:t.model_name}})},[l]),h=(0,w.useMemo)(()=>{if(!n)return!1;let e=l.map(e=>`@${e.id}`).join("|");return RegExp(`^(${e})((\\s+)?(${e}))*$`).test(n.trim())},[n,l]),u=(0,w.useCallback)(e=>{let t=e.replaceAll("\n","<br>");return l.forEach(e=>{let i=`@${e.id}`,n=c.find(t=>t.value===e.id),a=(null==n?void 0:n.key)||e.model_name,r=`<span class="mention-text" data-model-id="${e.id}" contenteditable="false" data-model-name="${a}">@${a}</span>`;t=t.replaceAll(i,r)}),t},[l,c]),p=(0,w.useCallback)(e=>{let t=e,i=document.createElement("div");return i.innerHTML=e,i.querySelectorAll(".mention-text").forEach(e=>{let i=e.dataset.modelId;if(i){let n=e.textContent||"";t=t.replace(n,`@${i}`)}}),c.forEach(e=>{RegExp(`@${e.key.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`)}`,"g").test(t)&&(t=t.replaceAll(`@${e.key}`,`@${e.value}`))}),t},[c]),x=(0,w.useMemo)(()=>h?u(n):null,[n,h,u]),m=(0,w.useRef)(null),g=(0,w.useRef)(null),j=(0,w.useCallback)(e=>{if(e.nodeType===Node.TEXT_NODE)return e;for(let i=e.childNodes.length-1;i>=0;i--){var t;let n=e.childNodes[i];if(n.nodeType===Node.TEXT_NODE&&(null===(t=n.textContent)||void 0===t?void 0:t.trim()))return n;if(n.nodeType===Node.ELEMENT_NODE){let e=j(n);if(e)return e}}return null},[]),b=(0,w.useCallback)(()=>{if(!m.current)return;let e=m.current.innerHTML,t=m.current.textContent||"",i=p(t);!l.some(e=>t.includes(`@${e.model_name}`))&&e.includes("mention-text")&&(m.current.innerHTML=t),null==o||o({target:{value:i}})},[p,l,o]);return(0,w.useEffect)(()=>{if(!m.current)return;let e=e=>{var t;e.preventDefault();let i=((null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain"))??"").replaceAll(/\n\s*\n/g,"\n").trim();document.execCommand("insertText",!1,i)},t=e=>{var t,i,n;if("Backspace"===e.key||"Delete"===e.key){let n=window.getSelection();if(!n||0===n.rangeCount)return;let a=n.getRangeAt(0);if(n.toString()===(null===(t=m.current)||void 0===t?void 0:t.textContent)){e.preventDefault(),m.current.innerHTML="",b();return}let r=null===(i=a.startContainer.parentElement)||void 0===i?void 0:i.closest(".mention-text");if(r){let t=r.textContent||"";l.some(e=>`@${e.model_name}`===t.trim())&&"Backspace"!==e.key||(e.preventDefault(),r.remove(),b())}}else if("Enter"===e.key){let t=window.getSelection();if(!t||0===t.rangeCount)return;let i=null===(n=t.getRangeAt(0).startContainer.parentElement)||void 0===n?void 0:n.closest(".mention-text");if(i){e.preventDefault();let n=document.createRange();n.setStartAfter(i),n.collapse(!0),t.removeAllRanges(),t.addRange(n)}}},n=e=>{let t=e.target.closest(".mention-text");if(t){e.preventDefault();let i=window.getSelection(),n=document.createRange();n.setStartAfter(t),n.collapse(!0),null==i||i.removeAllRanges(),null==i||i.addRange(n)}},a=()=>{var e;let t=window.getSelection();if(!t||0===t.rangeCount)return;let i=null===(e=t.getRangeAt(0).startContainer.parentElement)||void 0===e?void 0:e.closest(".mention-text");if(i){let e=document.createRange();e.setStartAfter(i),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}},r=m.current;return r.addEventListener("paste",e),r.addEventListener("keydown",t),r.addEventListener("click",n),document.addEventListener("selectionchange",a),g.current&&(g.current.detach(r),g.current=null),i.e(7233).then(i.t.bind(i,27233,23)).then(e=>{let t=e.default,i=document.querySelectorAll(".tribute-container");if(i.length>1)for(let e=0;e<i.length-1;e++)i[e].remove();g.current=new t({trigger:"@",values:c,menuContainer:document.body,positionMenu:!0,selectTemplate:e=>e?`<span class="mention-text" contenteditable="false" data-model-id="${e.original.value}" data-model-name="${e.original.key}">@${e.original.key}</span>&nbsp;`:"",containerClass:"tribute-container",menuItemTemplate:e=>`<div class="mention-item">@${e.original.key}</div>`,noMatchTemplate:()=>'<div class="mention-item no-match">No matches found</div>',allowSpaces:!0,requireLeadingSpace:!1,replaceTextSuffix:""}),m.current&&g.current.attach(m.current)}),()=>{g.current&&r&&(g.current.detach(r),r.removeEventListener("paste",e),r.removeEventListener("keydown",t),r.removeEventListener("click",n),document.removeEventListener("selectionchange",a))}},[c]),(0,w.useEffect)(()=>{m.current&&p(m.current.textContent)!==n&&(n.includes("@")?(m.current.innerHTML=u(n),m.current.querySelectorAll(".mention-text").forEach(e=>{e.setAttribute("contenteditable","false")})):m.current.textContent=n)},[n,p,u]),(0,a.jsxs)(s.Z,{sx:{position:"relative",width:"100%",minHeight:"100%","& *":{fontSize:{xs:"16px!important",md:"12px!important"}}},children:[(0,a.jsx)(s.Z,{ref:m,contentEditable:!0,onInput:b,sx:{width:"100%",minHeight:"100%",color:"inherit",bgcolor:"transparent",caretColor:"white",font:"inherit",p:"inherit",m:"inherit",border:"none",outline:"none",whiteSpace:"pre-wrap",wordBreak:"break-word"},...(0,H.Z)(d,"isCharacterModel")}),h?(0,a.jsxs)(s.Z,{"aria-hidden":!0,sx:{position:"absolute",top:0,left:0,right:0,bottom:0,p:"inherit",pointerEvents:"none"},children:[(0,a.jsx)(s.Z,{component:"span",dangerouslySetInnerHTML:{__html:x},sx:{display:"inline",visibility:"hidden"}}),(0,a.jsx)(f.Z,{component:"span",sx:{color:"text.disabled"},children:r??"is playing guitar."})]}):!n&&r?(0,a.jsx)(f.Z,{component:"span",sx:{position:"absolute",top:0,left:0,color:"text.disabled",userSelect:"none",pointerEvents:"none",p:"inherit"},children:r}):null]})}),iM="23px",iU=e=>{let{bottomElement:t,defaultExpanded:i,showActionButtons:n,autoEnhance:o,onAutoEnhanceChange:s}=e,d=(0,h.UK)((0,l.N)(e=>e.getParameterValue("creation_mode"))),c=(0,h.UK)(e=>e.characters),u=(0,h.UK)((0,l.N)(e=>e.getParameterValue("prompt"))),p=(0,h.UK)(e=>e.setPrompt),x=(0,h.UK)(e=>e.computedHaveAllMentions()),m="prompt.expanded",g=(0,h.UK)((0,l.N)(e=>e.getUiState(m,i))),j=(0,h.UK)(e=>e.ensureUiState),f=(0,w.useMemo)(()=>c.map(e=>e.originalConfig),[c]),v=(0,w.useMemo)(()=>c.map(e=>e.key),[c]),S=(0,w.useCallback)(e=>{let t=e;return c.forEach(e=>{let{key:i,metadata:n}=e;t=t.replaceAll(`@${i}`,`<span style="color: #0d99ff; font-weight: 500;">@${n.name}</span>`)}),t},[c]);return(0,a.jsx)(N,{className:"prompt-accordion-form-item",label:"Prompt",defaultExpanded:!0,value:u,sx:{scrollMarginTop:eS.Sw},tooltip:(0,a.jsxs)(P.k5,{children:["The description of what you want to see in the image.",(0,a.jsx)("br",{}),"For more details see the",(0,a.jsx)(P.Tb,{text:" Prompt Book ",href:"/promptbook"}),".",(0,a.jsx)("br",{}),"Non-English prompts are automatically translated to English when you create."]}),expend:g,onExpendChange:e=>j(m,e),children:(0,a.jsxs)(r.Z,{spacing:1,children:[(0,a.jsx)(iI,{enhancePromptProps:{model_ids:v,mode:"multipleCharacter"===d?"multipleCharacter":"character",model_id:v[0]},showActionButtons:n,value:u,onChange:p,InputProps:{inputComponent:iA,inputProps:{value:u.value,models:f,sx:{lineHeight:iM,minHeight:`calc(${iM} * 4)`},placeholder:"multipleCharacter"===d?"are having a picnic together.":"is playing guitar."}},dealWithDisplayPrompt:S,autoEnhance:o,onAutoEnhanceChange:s}),x?null:(0,a.jsx)(b.Z,{severity:"warning",children:"Don’t forget to add your character’s name using @ to ensure it appears."}),t]})})};function iR(){return(0,a.jsxs)(f.Z,{variant:"caption",children:["Upload an image to guide the AI in style, composition, pose, and more to create your ideal image.\xa0",(0,a.jsx)(P.Tb,{text:"Watch video tutorial ->",href:"https://youtu.be/JMBe9fjApcM?feature=shared"})]})}function iz(e){let{startIcon:t,expandIcon:i,label:n,sx:r,isNew:s,isBeta:l,...d}=e,c=d.expend?es.RVF:es.Kah;return(0,a.jsx)(N,{startIcon:(0,a.jsx)(t,{size:{xs:22,md:20}}),expandIcon:(0,a.jsx)(c,{size:{xs:18,md:16}}),label:(0,a.jsxs)(o.Z,{direction:"row",spacing:1,children:[(0,a.jsx)(f.Z,{variant:"editor-label1",children:n}),s?(0,a.jsx)(f.Z,{variant:"caption",sx:{color:eS.MK},children:"New"}):null,l?(0,a.jsx)(f.Z,{variant:"caption",sx:{color:"rgba(98, 144, 255, 1)"},children:"Beta"}):null]}),sx:(0,g.j)({"& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(180deg)"}},r),...d})}let iD={xs:30,md:30},iV=e=>{let{value:t,onChange:i,defaultExpand:n=!1,metadata:r}=e,s=(0,h.UK)((0,l.N)(e=>e.getUiState(`${t.model_id}.expanded`,n))),d=(0,h.UK)(e=>e.ensureUiState);return(0,a.jsx)(iz,{value:t,startIcon:()=>(0,a.jsx)(o.Z,{sx:{width:iD,height:iD,borderRadius:"50%",border:`2px solid ${eS.MK}`,overflow:"hidden",flexShrink:0,position:"relative",marginLeft:0,boxShadow:"none",bgcolor:eS.LS},children:(0,a.jsx)("img",{width:"100%",height:"100%",src:r.thumbnail,alt:"character",style:{objectFit:"cover",objectPosition:"center"}})},t.model_id),label:r.name,sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",scrollMarginTop:eS.Sw},expend:s,onExpendChange:e=>d(`${t.model_id}.expanded`,e),children:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(eH,{showValue:!0,value:t.model_weight,children:(0,a.jsx)(e0.A,{label:"Weight",step:.1,min:0,max:1.2,value:t.model_weight,onChange:e=>{i({...t,model_weight:e})}})}),(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,a.jsxs)(f.Z,{fontSize:12,fontWeight:400,children:[" ","Keep clothes the same"]}),(0,a.jsx)(t0.r,{checked:t.strict_character_features,onChange:e=>{i({...t,strict_character_features:e.target.checked})}})]})]})})},iF=()=>{let e=(0,h.UK)(e=>e.characters),[t,i]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("characters"))),n="character-settings-accordion.expanded",r=(0,h.UK)(e=>e.getUiState(n,!0)),s=(0,h.UK)(e=>e.ensureUiState);return(0,a.jsx)(eO,{expanded:r,onClick:e=>s(n,e),title:"Character Settings",tooltip:iR,content:(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:e.map((e,n)=>{let r=t.getCharacterById(e.key);return(0,a.jsx)(iV,{defaultExpand:0===n,metadata:e.metadata,value:r,onChange:n=>{t.modifyModel(e.key,n),i(t.clone())}},e.key)})})})},iB=()=>{let[e,t]=(0,w.useState)(!1),[i,n]=(0,w.useState)(null),r=(0,h.UK)(e=>e.characters),[s,d]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),c=(0,h.UK)((0,l.N)(e=>e.getParameterValue("steps"))),u=(0,h.UK)(e=>e.setSteps),p=(0,h.UK)(e=>e.ensureUiState),x="inpaint-editor-accordion.expanded",m=(0,h.UK)(e=>e.getUiState(x,!0)),g="advance-settings-accordion.expanded",j=(0,h.UK)(e=>e.getUiState(g,!1)),f=(0,h.UK)(e=>e.setPlaceData);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eO,{expanded:m,title:"Position Your Character",onClick:e=>p(x,e),content:(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(b.Z,{severity:"info",children:"This beta feature is in early access and still improving. \uD83D\uDEE0️"}),(0,a.jsx)(tD,{src:i||"https://cdn.openart.ai/assets/character/Place1.webp",active:!!i,onClick:()=>t(!0),activeText:"Modify Position",children:"Place your Character"}),(0,a.jsx)(tM,{models:r,open:e,onClose:()=>t(!1),setPreviewImage:n,onSave:e=>{f(e)}})]})}),(0,a.jsx)(iU,{bottomElement:(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{max:35,min:28,step:1,value:s,onChange:d})})})}),(0,a.jsx)(iF,{}),(0,a.jsx)(eO,{expanded:j,title:"Advance Settings",onClick:e=>p(g,e),content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(tR,{min:10,max:50,value:c,onChange:u})})})]})},iO=[{ratio:"1:1",name:"Square"},{ratio:"3:2",name:"Landscape"},{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"2:3",name:"Tablet"}],iW=()=>{let[e,t]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode"))),i=(0,h.UK)(e=>e.ensureUiState),n="output-size-accordion.expanded",r=(0,h.UK)(e=>e.getUiState(n,!0));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iU,{autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Output Size",content:(0,a.jsx)(e4,{showSizeSliders:!1,showDefault:!1,aspectRatioOptions:iO})})]})};var iL=i(6499),iG=i(75318);let iH=e=>{let{content:t,operation:i}=e;return(0,a.jsxs)(r.Z,{width:"100%",height:"100%",direction:"row",sx:{position:"relative"},children:[(0,a.jsx)(r.Z,{width:"75%",height:"100%",children:t}),(0,a.jsx)(r.Z,{width:"25%",children:i})]})},iK=e=>{let{content:t,operation:i}=e;return(0,a.jsxs)(r.Z,{width:"100%",height:"100%",direction:"column",sx:{position:"relative"},children:[(0,a.jsx)(r.Z,{height:"50%",direction:"column",children:t}),(0,a.jsx)(r.Z,{height:"50%",direction:"column",children:i})]})},i$=e=>{let{options:t,value:i,onChange:n}=e,r=e=>{null==n||n(e)};return(0,a.jsx)(eK.Z,{value:i,onChange:e=>r(e.target.value),renderValue:e=>{let i=t.find(t=>t.value===e);return(0,a.jsx)(f.Z,{variant:"body2",sx:{lineHeight:"36px"},children:(null==i?void 0:i.label)||""})},sx:{color:"white",backgroundColor:"#292929",borderRadius:"4px",border:"1px solid #444","& .MuiSelect-icon":{color:"white"},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover":{backgroundColor:"#292929"}},children:t.map(e=>(0,a.jsxs)(e$.Z,{value:e.value,sx:{display:"flex",alignItems:"center",gap:2},children:[e.thumbnail?(0,a.jsx)("img",{src:e.thumbnail,alt:e.label,style:{width:"64px",height:"64px",objectFit:"cover",borderRadius:"4px"}}):null,(0,a.jsx)(f.Z,{variant:"body2",children:e.label})]},e.value))})},iq=e=>{let{title:t,children:i}=e;return(0,a.jsxs)(o.Z,{spacing:2,px:2,py:2,children:[(0,a.jsx)(f.Z,{variant:"h6",children:t}),i]})};var iX=i(39413);let iY=e=>{let{position:t,...i}=e;return(0,a.jsx)(s.Z,{sx:{width:"8px",height:"8px",background:"#16D866",pointerEvents:"auto",position:"absolute",cursor:`${t}-resize`,...(()=>{switch(t){case"n":return{top:"0",left:"50%",transform:"translate(0, 60%)"};case"s":return{bottom:"0",left:"50%",transform:"translate(0, -60%)"};case"e":return{top:"50%",right:"50%"};case"w":case"nw":return{top:"50%",left:"50%"};case"ne":return{top:"50%",left:"0"};case"sw":return{bottom:"50%",left:"50%"};case"se":return{bottom:"50%",right:"50%"};default:return{}}})()},...i},t)};function iQ(e){let{lock:t,maskRef:i,size:n,onChange:r,active:o=!1}=e,l=(0,w.useRef)(null),[d,c]=(0,w.useState)(!1),h=()=>{c(!0)},u=()=>{var e;let{x:t,y:n,width:a,height:r}=(null===(e=l.current)||void 0===e?void 0:e.getBoundingClientRect())??{x:0,y:0,width:0,height:0},o=i.current;if(!o)return;let{x:s,y:d,width:c,height:h}=o.getBoundingClientRect(),u=t-s,p=n-d;o.style.clipPath=`polygon(
      0 0,
      ${c}px 0,
      ${c}px ${h}px,
      0 ${h}px,
      0 0,
      ${u}px ${p}px,
      ${u}px ${p+r}px,
      ${u+a}px ${p+r}px,
      ${u+a}px ${p}px,
      ${u}px ${p}px
    )`};return(0,w.useEffect)(()=>{l.current&&i.current&&u()},[n]),(0,a.jsx)(iX.s,{lockAspectRatio:t,bounds:"parent",size:{width:n.width,height:n.height},position:{x:n.x,y:n.y},style:{pointerEvents:"none",position:"absolute"},dragHandleClassName:"drag-handle",resizeHandleComponent:o?{bottom:(0,a.jsx)(iY,{position:"s"}),bottomRight:(0,a.jsx)(iY,{position:"se"}),bottomLeft:(0,a.jsx)(iY,{position:"sw"}),right:(0,a.jsx)(iY,{position:"e"}),left:(0,a.jsx)(iY,{position:"w"}),top:(0,a.jsx)(iY,{position:"n"}),topRight:(0,a.jsx)(iY,{position:"ne"}),topLeft:(0,a.jsx)(iY,{position:"nw"})}:{},onResizeStart:h,onDragStart:h,onDrag:u,onResize:u,onDragStop:(e,t)=>{c(!1),null==r||r({...n,x:t.x,y:t.y})},onResizeStop:(e,t,i,n,a)=>{c(!1),null==r||r({width:Number.parseInt(i.style.width),height:Number.parseInt(i.style.height),x:a.x,y:a.y})},children:(0,a.jsxs)(s.Z,{ref:l,sx:{position:"relative",width:"100%",height:"100%",border:o?"2px solid #16D866":"none",background:"transparent",pointerEvents:"none",boxSizing:"border-box",isolation:"isolate"},children:[(0,a.jsx)(s.Z,{sx:{position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:"transparent",mixBlendMode:"destination-out",pointerEvents:"none"}}),o?(0,a.jsx)(s.Z,{className:"drag-handle",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"32px",height:"32px",backgroundColor:"rgba(22, 216, 102, 0.2)",borderRadius:"50%",cursor:"move",pointerEvents:"auto",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(4px)",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(22, 216, 102, 0.4)",transform:"translate(-50%, -50%) scale(1.1)"}},children:(0,a.jsx)(iL.Z,{sx:{fontSize:20,color:"white"}})}):null,d?(0,a.jsx)(s.Z,{sx:{position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",whiteSpace:"nowrap",textAlign:"center",color:"white",fontSize:"12px",pointerEvents:"none",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"8px 12px",borderRadius:"6px"},children:"Selected area matches the image size in Settings."}):null]})})}class iJ{execute(){}undo(){}update(e){}toJSON(){return{type:this.type,id:this.id,name:this.name}}fromJSON(e){this.inMemory=!0,this.type=e.type,this.id=e.id,this.name=e.name}isUpdatableCmd(e){}constructor(e){this.id=-1,this.inMemory=!1,this.updatable=!1,this.type="",this.name="",this.editor=e}}class i0 extends iJ{execute(){let e=this.editor.objectUtilsByUuid(this.object.uuid);this.newClip?e.addAnimation(this.newClip):e.stopAnimation(),this.editor.signals.objectChanged.dispatch(this.object,!0)}undo(){let e=this.editor.objectUtilsByUuid(this.object.uuid);this.oldClip?e.addAnimation(this.oldClip):e.stopAnimation(),this.editor.signals.objectChanged.dispatch(this.object,!0)}constructor(e,t,i,n=null){super(e),this.type="SetAnimation",this.object=t,this.oldClip=n,this.newClip=i}}var i1=i(21997),i2=i(36674);class i5{async load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i1.E0,t=i1.AY.find(t=>t.key===e);return this._load(t)}async loadPose(e,t){let i=this._loaders[e.type],n=`${i5.baseUrl}/three-models/pose/${t}`,a=await i.loadAsync(n);return a.scale.setScalar(.01),a.scale.set(e.scale,e.scale,e.scale),a.userData.type=i1.xb,a.userData.boneSystem=e.boneSystem,a}async loadPoseConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i1.E0;if(!this._modelConfig[e]){let t=i1.AY.find(t=>t.key===e).config,i=await fetch(`${i5.baseUrl}/three-models/config/${t}.json`);this._modelConfig[e]=await i.json()}return this._modelConfig[e]}async _load(e){let t=this._loaders[e.type],i=await t.loadAsync(this._getUrl(e.path));return i.scale.setScalar(.01),i.scale.set(e.scale,e.scale,e.scale),i.userData.type=i1.xb,i.userData.boneSystem=e.boneSystem,i}_getUrl(e){return`${i5.baseUrl}${e}`}constructor(){this._loaders={fbx:new i2.y},this._modelConfig={}}}i5.baseUrl="https://cdn.openart.ai/";let i4=new i5;var i3=i(54028),i6=i(90587),i8=i(33715);class i9 extends iJ{execute(){let e=this.editor.objectUtilsByUuid(this.oldObject.uuid);null==e||e.clear(),this.editor.removeObject(this.oldObject),this.editor.addObject(this.object)}undo(){let e=this.editor.objectUtilsByUuid(this.object.uuid);null==e||e.clear(),this.editor.removeObject(this.object),this.editor.addObject(this.oldObject)}toJSON(){let e=super.toJSON();return Object.assign(e,{object:this.object.toJSON()}),e}fromJSON(e){if(super.fromJSON(e),this.object=this.editor.objectByUuid(e.object.object.uuid),void 0===this.object){let t=new i3.Gql;this.object=t.parse(e.object)}}constructor(e,t=null,i=null){super(e),this.type="SwitchObjectCommand",this.object=i,this.oldObject=t,null!==i&&(this.name=`command/SwitchObjectCommand: ${i.name}-${t.name}`)}}let i7=`
  varying vec2 vUv;

  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,ne=`
  #include <packing>

  varying vec2 vUv;
  uniform sampler2D tDiffuse;
  uniform sampler2D tDepth;
  uniform float cameraNear;
  uniform float cameraFar;

  float readDepth( sampler2D depthSampler, vec2 coord ) {
    float fragCoordZ = texture2D( depthSampler, coord ).x;
    float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
    return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );
  }

  void main() {
    vec2 centeredUv = vUv;
    float depth = readDepth( tDepth, centeredUv );
    
    // 使用线性映射来可视化深度
    vec3 color = vec3(1.0 - pow(depth, 1.0));
    
    gl_FragColor = vec4(color, 1.0);
  }
`;class nt{exportScreenshot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1536,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n={transformMode:this._editor.signals.transformMode.value,gridHelperVisible:this._editor.signals.gridHelperVisible.value};try{this._editor.signals.transformMode.value="none",this._editor.hideGridHelper(),i||this._editor.hideFloor(),this._render.render(this._scene,this._camera);let{height:n,width:a,x:r,y:o}=e,s=2*window.devicePixelRatio,l=document.createElement("canvas"),d=l.getContext("2d");if(!d)throw Error("Failed to get 2D context for target canvas");let c=this._calculateScaledDimensions(a*s,n*s,t);return l.width=c.width,l.height=c.height,d.drawImage(this._render.domElement,r*s,o*s,a*s,n*s,0,0,c.width,c.height),{dataUrl:l.toDataURL("image/png"),width:c.width,height:c.height}}finally{this._editor.signals.transformMode.value=n.transformMode,n.gridHelperVisible&&this._editor.showGridHelper(),this._editor.showFloor()}}_calculateScaledDimensions(e,t,i){return e>t?{width:i,height:Math.round(t*i/e)}:{height:i,width:Math.round(e*i/t)}}exportDepth(){let e=this._editor.signals.transformMode.value;this._editor.signals.transformMode.value="none";let t=this._editor.signals.gridHelperVisible.value;this._editor.hideGridHelper(),this._render.setRenderTarget(this._depthTarget),this._render.clear(),this._render.render(this._scene,this._camera),this._editor.signals.transformMode.value=e,t&&this._editor.showGridHelper();let[i,n,a]=(()=>{let e=new i3.iKG(-1,1,1,-1,0,1),t=new i3.jyz({vertexShader:i7,fragmentShader:ne,uniforms:{cameraNear:{value:this._camera.near},cameraFar:{value:this._camera.far},tDiffuse:{value:null},tDepth:{value:null}}}),i=new i3._12(2,2),n=new i3.Kj0(i,t),a=new i3.xsS;return a.add(n),[a,e,t]})();return a.uniforms.tDiffuse.value=this._depthTarget.texture,a.uniforms.tDepth.value=this._depthTarget.depthTexture,this._render.setRenderTarget(null),this._render.render(i,n),this._render.domElement.toDataURL("image/png")}exportSkeleton(){let e=this._editor.signals.transformMode.value;this._editor.signals.transformMode.value="none";let t=this._editor.signals.gridHelperVisible.value;this._editor.hideGridHelper();let i=new Map,n=this._scene.background;this._scene.background=new i3.Ilk(0),this._scene.children.forEach(e=>{e.userData.type===i1.xb&&(i.set(e,e.visible),!0===e.visible&&this._editor.objectUtilsByUuid(e.uuid).showSkeleton(),e.visible=!1)}),this._render.render(this._scene,this._camera);let a=this._render.domElement.toDataURL("image/jpeg");return this._scene.background=n,this._editor.scene.children.forEach(e=>{e.userData.type===i1.xb&&i.has(e)&&(e.visible=i.get(e),this._editor.objectUtilsByUuid(e.uuid).hideSkeleton())}),this._editor.signals.transformMode.value=e,t&&this._editor.showGridHelper(),a}constructor(e,t,i,n,a){this._editor=e,this._render=t,this._scene=i,this._camera=n,this._depthTarget=a}}class ni extends iJ{execute(){this.editor.addObject(this.object)}undo(){let e=this.editor.objectUtilsByUuid(this.object.uuid);null==e||e.clear(),this.editor.removeObject(this.object)}toJSON(){let e=super.toJSON();return Object.assign(e,{object:this.object.toJSON()}),e}fromJSON(e){if(super.fromJSON(e),this.object=this.editor.objectByUuid(e.object.object.uuid),void 0===this.object){let t=new i3.Gql;this.object=t.parse(e.object)}}constructor(e,t=null){super(e),this.type="AddObjectCommand",this.object=t,null!==t&&(this.name=`command/AddObject: ${t.name}`)}}let nn={async animate(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{duration:a=500,onUpdate:r=()=>{},easingFunction:o=e=>e<.5?4*e*e*e:1-(-2*e+2)**3/2}=n,s=performance.now();return new Promise(n=>{let l=d=>{let c=Math.min((d-s)/a,1);i(e,t,o(c)),r(),c<1?requestAnimationFrame(l):n()};requestAnimationFrame(l)})},async animateRotation(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.rotation.clone();return this.animate(n,t,(t,i,n)=>{e.rotation.set(t.x+(i.x-t.x)*n,t.y+(i.y-t.y)*n,t.z+(i.z-t.z)*n),e.updateMatrixWorld(!0)},{...i,easingFunction:e=>e*(2-e)})},async animatePosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.position.clone();return this.animate(n,t,(t,i,n)=>{e.position.lerpVectors(t,i,n),e.updateMatrixWorld(!0)},i)},async animateScale(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.scale.clone();return this.animate(n,t,(t,i,n)=>{e.scale.lerpVectors(t,i,n),e.updateMatrixWorld(!0)},i)}};class na extends iJ{async execute(){await nn.animatePosition(this.object,this.newPosition,{duration:500,onUpdate:()=>{this.editor.signals.objectChanged.dispatch(this.object,!0)}})}async undo(){await nn.animatePosition(this.object,this.oldPosition,{duration:500,onUpdate:()=>{this.editor.signals.objectChanged.dispatch(this.object,!0)}})}update(e){this.newPosition.copy(e.newPosition)}toJSON(){let e=super.toJSON();return e.objectUuid=this.object.uuid,e.oldPosition=this.oldPosition.toArray(),e.newPosition=this.newPosition.toArray(),e}fromJSON(e){super.fromJSON(e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldPosition=new i3.Pa4().fromArray(e.oldPosition),this.newPosition=new i3.Pa4().fromArray(e.newPosition)}constructor(e,t=null,i=null,n=null){super(e),this.type="SetPositionCommand",this.name="command/SetPosition",this.updatable=!0,this.object=t,null!==t&&null!==i&&(this.oldPosition=t.position.clone(),this.newPosition=i.clone()),null!==n&&(this.oldPosition=n.clone())}}class nr extends iJ{async execute(){return nn.animateRotation(this.object,this.newRotation,{onUpdate:()=>this.editor.signals.objectChanged.dispatch(this.object,!0)})}async undo(){return nn.animateRotation(this.object,this.oldRotation,{onUpdate:()=>this.editor.signals.objectChanged.dispatch(this.object,!0)})}update(e){this.newRotation.copy(e.newRotation)}toJSON(){let e=super.toJSON();return e.objectUuid=this.object.uuid,e.oldRotation=this.oldRotation.toArray(),e.newRotation=this.newRotation.toArray(),e}fromJSON(e){super.fromJSON(e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldRotation=new i3.USm().fromArray(e.oldRotation),this.newRotation=new i3.USm().fromArray(e.newRotation)}constructor(e,t=null,i=null,n=null){super(e),this.type="SetRotationCommand",this.name="command/SetRotation",this.updatable=!0,this.object=t,null!==t&&null!==i&&(this.oldRotation=t.rotation.clone(),this.newRotation=i.clone()),null!==n&&(this.oldRotation=n.clone())}}class no extends iJ{async execute(){await nn.animateScale(this.object,this.newScale,{duration:300,onUpdate:()=>{this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object,!0)}})}async undo(){await nn.animateScale(this.object,this.oldScale,{duration:300,onUpdate:()=>{this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object,!0)}})}update(e){this.newScale.copy(e.newScale)}toJSON(){let e=super.toJSON();return e.objectUuid=this.object.uuid,e.oldScale=this.oldScale.toArray(),e.newScale=this.newScale.toArray(),e}fromJSON(e){super.fromJSON(e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldScale=new i3.Pa4().fromArray(e.oldScale),this.newScale=new i3.Pa4().fromArray(e.newScale)}constructor(e,t=null,i=null,n=null){super(e),this.type="SetScaleCommand",this.name="command/SetScale",this.updatable=!0,this.object=t,null!==t&&null!==i&&(this.oldScale=t.scale.clone(),this.newScale=i.clone()),null!==n&&(this.oldScale=n.clone())}}class ns{execute(e,t){this.commandQueue.push({action:"execute",command:e}),this.isProcessing||this.processCommandQueue()}undo(){if(!this.historyDisabled&&this.undos.length>0){let e=this.undos.pop();this.commandQueue.push({action:"undo",command:e}),this.isProcessing||this.processCommandQueue()}}redo(){if(!this.historyDisabled&&this.redos.length>0){let e=this.redos.pop();this.commandQueue.push({action:"redo",command:e}),this.isProcessing||this.processCommandQueue()}}async processCommandQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.commandQueue.length>0;){let{action:e,command:t}=this.commandQueue[0];try{switch(e){case"execute":{let e=this.undos.at(-1),i=Date.now()-this.lastCmdTime;if(e&&e.updatable&&t.updatable&&e.object===t.object&&e.type===t.type&&i<500){e.update(t);let i=e.execute();i instanceof Promise&&await i}else{this.undos.push(t),t.id=++this.idCounter;let e=t.execute();e instanceof Promise&&await e,t.inMemory=!0,t.json=t.toJSON()}this.lastCmdTime=Date.now(),this.redos=[];break}case"undo":{!1===t.inMemory&&t.fromJSON(t.json);let e=t.undo();e instanceof Promise&&await e,this.redos.push(t);break}case"redo":{!1===t.inMemory&&t.fromJSON(t.json);let e=t.execute();e instanceof Promise&&await e,this.undos.push(t)}}this.editor.signals.historyChanged.dispatch(t)}catch(t){console.error(`Error executing ${e}:`,t)}this.commandQueue.shift()}this.isProcessing=!1}}canUndo(){return this.undos.length>0}canRedo(){return this.redos.length>0}toJSON(){let e={undos:[],redos:[]};for(let t=0;t<this.undos.length;t++)this.undos[t].hasOwnProperty("json")&&e.undos.push(this.undos[t].json);for(let t=0;t<this.redos.length;t++)this.redos[t].hasOwnProperty("json")&&e.redos.push(this.redos[t].json);return e}fromJSON(e){if(void 0!==e){for(let t=0;t<e.undos.length;t++){let i=e.undos[t],a=new n[i.type](this.editor);a.json=i,a.id=i.id,a.name=i.name,this.undos.push(a),this.idCounter=Math.max(i.id,this.idCounter)}for(let t=0;t<e.redos.length;t++){let i=e.redos[t],a=new n[i.type](this.editor);a.json=i,a.id=i.id,a.name=i.name,this.redos.push(a),this.idCounter=Math.max(i.id,this.idCounter)}this.editor.signals.historyChanged.dispatch(this.undos.at(-1))}}clear(){this.undos=[],this.redos=[],this.idCounter=0,this.editor.signals.historyChanged.dispatch(new iJ(this.editor))}async goToState(e){if(this.historyDisabled)return;let t=this.undos.at(-1);if(t){if(e>t.id)for(;this.redos.length>0;){let t=this.redos.at(-1);if(!t||t.id>e)break;await this.redo()}else if(e<t.id)for(;this.undos.length>0;){let t=this.undos.at(-1);if(!t||t.id<=e)break;await this.undo()}this.editor.signals.sceneGraphChanged.dispatch("history"),this.editor.signals.historyChanged.dispatch(this.undos.at(-1))}}async enableSerialization(e){for(let e of(await this.goToState(-1),this.redos))e.hasOwnProperty("json")||(e.json=e.toJSON());await this.goToState(e)}constructor(e){this.commandQueue=[],this.isProcessing=!1,this.editor=e,this.undos=[],this.redos=[],this.lastCmdTime=Date.now(),this.idCounter=0,this.historyDisabled=!1}}var nl=i(87970);let nd=e=>{for(let i of Object.values(i1.PW)){var t;if(null===(t=i.core.find(t=>t===e))||void 0===t?void 0:t.toLowerCase().includes("head"))return i1.Nj.core.head;if(e===i.system_bone)return i1.Nj.core.hip;if(i.core.includes(e)&&(e.toLowerCase().includes("spine")||e.toLowerCase().includes("spine")))return i1.Nj.core.spine;if(i.left.includes(e)){if(e.toLowerCase().includes("arm")||e.toLowerCase().includes("hand")||e.toLowerCase().includes("shoulder"))return i1.Nj.left.arm;return i1.Nj.left.leg}if(i.right.includes(e)){if(e.toLowerCase().includes("arm")||e.toLowerCase().includes("hand")||e.toLowerCase().includes("shoulder"))return i1.Nj.right.arm;return i1.Nj.right.leg}}return i1.Nj.default};class nc{get currentChip(){return this._currentClip}showSkeleton(){this.skeleton=new i3._YX(this.object),this.editor.scene.add(this.skeleton)}hideSkeleton(){this.skeleton&&(this.editor.scene.remove(this.skeleton),this.skeleton=null)}select(e){this.editor.signals.selectObject.value=this.object;let t=this.editor.signals.transformMode.value;e&&(this.attachTransformControl(e,t),this.actionRegion=e)}updateActionRegion(e){if(!e&&this.transformControls){this.cleanTransformControls();return}let t=this.editor.signals.transformMode.value;this.attachTransformControl(e,t)}clear(){this.cleanLister(),this.skeleton&&this.hideSkeleton(),this.transformControls&&this.cleanTransformControls(),this.cleanTorusGeometry()}cleanTransformControls(){this.transformControls&&(this.transformControls.dispose(),this.editor.scene.remove(this.transformControls.getHelper()),this.transformControls=null,this.actionRegion="")}cleanTorusGeometry(){this._torusGeometry.forEach(e=>{e.geometry.dispose(),e.material&&e.material.dispose(),e.parent&&e.parent.remove(e)}),this._torusGeometry=[]}cleanLister(){this.editor.signals.transformMode.detach(this.transformBindingFlag),this.editor.signals.objectChanged.detach(this.objectChangedBindingFlag)}addAnimation(e){return this._currentClip=e,this._updateFlag=!0,this._mixer=new i3.Xcj(this.object),this._animation=this._mixer.clipAction(e),this._animation.play(),this._animation}stopAnimation(){this._animation&&this._animation.stop(),this._mixer&&this._mixer.stopAllAction(),this._updateFlag=!1,this._currentClip=null}update(e){this._mixer&&this._updateFlag&&(this._mixer.update(e),this.editor.signals.objectChanged.dispatch(this.object,!1)),this._updateFlag=!1}getCurrentAction(){return this._animation}attachTransformControl(e,t){if("none"===t)return;let i=this.findBones(e);i&&(this.cleanTransformControls(),this.transformControls=this.createTransformControls(t,i),this.addTransformControlListeners())}createTransformControls(e,t){let i=new nl.Ys(this.editor.camera,this.editor.domElement);return i.setMode(e),i.attach(t),i.setSize(1),i.showX=i.showY=i.showZ=!0,this.editor.scene.add(i.getHelper()),i}addTransformControlListeners(){this.transformControls.addEventListener("mouseDown",this.handleMouseDown.bind(this)),this.transformControls.addEventListener("mouseUp",this.handleMouseUp.bind(this)),this.transformControls.addEventListener("objectChange",this.handleObjectChange.bind(this))}handleMouseDown(){this.editor.signals.isGridHelperClicked.value=!0,this.editor.orbitControls.enabled=!1;let e=this.transformControls.object;this.objectPositionOnDown=e.position.clone(),this.objectRotationOnDown=e.rotation.clone(),this.objectScaleOnDown=e.scale.clone()}handleMouseUp(){this.editor.orbitControls.enabled=!0;let e=this.transformControls.object,t=this.transformControls.getMode(),i={translate:{condition:!this.objectPositionOnDown.equals(e.position),command:()=>new na(this.editor,e,e.position,this.objectPositionOnDown)},rotate:{condition:!this.objectRotationOnDown.equals(e.rotation),command:()=>new nr(this.editor,e,e.rotation,this.objectRotationOnDown)},scale:{condition:!this.objectScaleOnDown.equals(e.scale),command:()=>new no(this.editor,e,e.scale,this.objectScaleOnDown)}}[t];(null==i?void 0:i.condition)&&this.editor.history.execute(i.command())}handleObjectChange(){this.editor.signals.objectChanged.dispatch(this.transformControls.object,!1),this.updateControlPoints()}findMainBones(e){let t=this._boneSystem=e.userData.boneSystem,i=i1.PW[t],n=[],a=new Set([...i.core,...i.left,...i.right]);return e.traverse(e=>{e instanceof i3.N$j&&a.has(e.name)&&n.push(e)}),n}createControlPoints(e){for(let t of e){let e=this.createTorusMesh(t);this.editor.scene.add(e),this._torusGeometry.push(e)}}createTorusMesh(e){let t=new i3.xo$(.8,32,32),i=this.getBoneColor(e.name),n=new i3.vBJ({color:i,transparent:!0,opacity:.8,depthTest:!1,side:i3.ehD}),a=new i3.Kj0(t,n);return Object.assign(a.userData,{parentId:this.object.uuid,type:i1.vb,region:e.name}),a.position.copy(e.getWorldPosition(new i3.Pa4)),a}getBoneColor(e){return nd(e)}findRootBone(){let e=i1.PW[this._boneSystem].system_bone;return this.findBones(e)}transformModeChange(e){if(this.cleanTransformControls(),this.cleanTorusGeometry(),"none"===e)return;let t=this.findRootBone(),i="rotate"===e?this._mainBones:[t].filter(Boolean);this.createControlPoints(i),this.updateActionRegion(t.name)}findBones(e){return this._mainBones.find(t=>t.name.includes(e))}updateControlPoints(){this._torusGeometry.forEach(e=>{let t=e.userData.region,i=this.findBones(t);i&&(e.position.copy(i.getWorldPosition(new i3.Pa4)),e.lookAt(this.editor.camera.position))})}dispose(){this.clear(),this.stopAnimation(),this._mixer&&(this._mixer.uncacheRoot(this.object),this._mixer=null),this._animation=null,this._currentClip=null,this.object=null,this.editor=null,this._mainBones=null}constructor(e,t){this._boneSystem="mixamorig",this.skeleton=null,this._torusGeometry=[],this._mixer=null,this._animation=null,this._updateFlag=!1,this._currentClip=null,this.object=t,this.editor=e,this._mainBones=this.findMainBones(this.object);let i=this.editor.signals.transformMode.value;this.transformModeChange.call(this,i),this.transformBindingFlag=this.editor.signals.transformMode.add(e=>{this.transformModeChange(e)}),this.objectChangedBindingFlag=this.editor.signals.objectChanged.add(e=>{this.updateControlPoints()})}}var nh=i(75449);class nu extends nh.MiniSignal{get value(){return this._value}set value(e){this._value=e,this.dispatch(e)}constructor(e){super(),this._value=e}}class np{clear(){this.historyChanged.detachAll(),this.objectAdded.detachAll(),this.objectRemoved.detachAll(),this.sceneGraphChanged.detachAll(),this.sizeChanged.detachAll(),this.transformMode.detachAll(),this.selectObject.detachAll(),this.objectChanged.detachAll(),this.isGridHelperClicked.detachAll(),this.gridHelperVisible.detachAll()}constructor(){this.historyChanged=new nh.MiniSignal,this.objectAdded=new nh.MiniSignal,this.objectRemoved=new nh.MiniSignal,this.sceneGraphChanged=new nh.MiniSignal,this.sizeChanged=new nh.MiniSignal,this.transformMode=new nu("rotate"),this.selectObject=new nu,this.objectChanged=new nh.MiniSignal,this.isGridHelperClicked=new nu(!1),this.gridHelperVisible=new nu(!0)}}class nx{get scene(){return this._scene}get camera(){return this._camera}get domElement(){return this._renderElement}get orbitControls(){return this._orbitControls}get exporter(){return this._exporter}get modelCount(){return this.scene.children.filter(e=>e.userData.type===i1.xb).length}get isWebGLSupported(){return this._webglSupported}mount(e){this._renderElement=e;let{height:t,width:i}=e.getBoundingClientRect();this.cssWidth=i,this.cssHeight=t,this.height=t,this.width=i,this._clock=new i3.SUY,this._setupOrbitControls(),this._setupRender(),this._setupRenderTarget(),this._webglSupported&&this._depthTarget&&(this._exporter=new nt(this,this._render,this._scene,this._camera,this._depthTarget)),this._initializationEvent()}setSize(e,t){this.width=e,this.height=t,this._render&&this._render.setSize(e,t,!0),this._camera instanceof i3.cPb&&(this._camera.aspect=e/t,this._camera.updateProjectionMatrix()),this._setupRenderTarget(),this._webglSupported&&this._depthTarget&&(this._exporter=new nt(this,this._render,this._scene,this._camera,this._depthTarget)),this._renderElement.style.height=`${this.cssHeight}px`,this._renderElement.style.width=`${this.cssWidth}px`,this.signals.sizeChanged.dispatch({width:e,height:t})}select(e){this.signals.selectObject.value=e,this.objectUtilsByUuid(e.uuid).select()}unselect(){let e=this.signals.selectObject.value;if(e){let t=this.objectUtilsByUuid(e.uuid);t&&t.cleanTransformControls(),this.signals.selectObject.value=null}else this.objects.forEach(e=>{e.cleanTransformControls()})}addObject(e,t,i){void 0===t?this._scene.add(e):(t.children.splice(i,0,e),e.parent=t),this.objects.set(e.uuid,new nc(this,e)),this.signals.objectAdded.dispatch(e)}removeObject(e){null!==e.parent&&(this.objects.delete(e.uuid),e.parent.remove(e),this.signals.objectRemoved.dispatch(e),this.signals.sceneGraphChanged.dispatch("object"))}objectByUuid(e){return this._scene.getObjectByProperty("uuid",e)}objectUtilsByUuid(e){return this.objects.get(e)}setTransformMode(e){this.signals.transformMode.value=e}dispose(){this._orbitControls&&this._orbitControls.dispose(),this.domElement.removeEventListener("click",this._handleInteraction),this.domElement.removeEventListener("touchstart",this._handleInteraction),this._depthTarget&&(this._depthTarget.dispose(),this._depthTarget.depthTexture.dispose()),this._render&&this._render.dispose(),this._orbitControls=null,this._render=null,this._depthTarget=null,this._exporter=null,this._clock=null}clear(){this.dispose(),this._floor=null,this._setupScene(),this._setupCamera(),this.history.clear(),this.objects.clear(),this.signals.clear()}showGridHelper(){this.signals.gridHelperVisible.value=!0}hideGridHelper(){this.signals.gridHelperVisible.value=!1}getSelectModel(){return this._getSceneModel()}showFloor(){this._floor||(this._floor=this._createFloor(),this._scene.add(this._floor)),this._floor.visible=!0}hideFloor(){this._floor&&(this._floor.visible=!1)}async switchModel(e){let t=this._getSceneModel();this.signals.selectObject.value=null,await this.history.execute(new i9(this,t,e))}_setupScene(){let e=new i3.xsS;e.background=new i3.Ilk(15132390);let t=this._createDirectionalLight();return e.add(t),this._gridHelper=this._createGrid(),this.signals.gridHelperVisible.add(e=>{this._gridHelper.visible=e}),e.add(this._gridHelper),this._scene=e,this.showFloor(),e}_createDirectionalLight(){let e=new i3.vmT(16777215,4473924,3);e.position.set(0,200,0);let t=new i3.Ox3(16777215,3);t.position.set(0,200,100),t.castShadow=!0,t.shadow.camera.top=180,t.shadow.camera.bottom=-100,t.shadow.camera.left=-120,t.shadow.camera.right=120;let i=new i3.ZAu;return i.add(t),i.add(e),i}_setupCamera(){let e=this.width/this.height,t=new i3.cPb(45,e,.1,1e3);return t.position.set(80,60,70),t.lookAt(0,0,0),this._camera=t,t}_setupOrbitControls(){let e=new i8.z(this._camera,this._renderElement);return e.target.set(0,30,0),e.minDistance=20,e.maxDistance=500,e.minPolarAngle=Math.PI/6,e.maxPolarAngle=.7*Math.PI,this._renderElement.addEventListener("touchstart",e=>{e.preventDefault(),e.stopPropagation()},{passive:!1}),this._renderElement.addEventListener("touchmove",e=>{e.preventDefault(),e.stopPropagation()},{passive:!1}),this._renderElement.addEventListener("touchend",e=>{e.preventDefault(),e.stopPropagation()},{passive:!1}),e.listenToKeyEvents(window),e.enableDamping=!0,e.dampingFactor=.05,e.addEventListener("change",(0,i_.Z)(()=>{this.signals.sceneGraphChanged.dispatch("orbit")},100)),e.update(),this._orbitControls=e,e}_setupRender(){if(this._webglSupported=this._isWebGLAvailable(),!this._webglSupported){if(!this.width||!this.height){let e=this._renderElement.getBoundingClientRect();this.width=e.width||800,this.height=e.height||600}console.warn("WebGL is not supported, falling back to basic rendering");let e=this._renderElement.getContext("2d");if(e){let t=window.devicePixelRatio||1;this._renderElement.width=this.width*t,this._renderElement.height=this.height*t,this._renderElement.style.width=this.width+"px",this._renderElement.style.height=this.height+"px",e.scale(t,t),e.fillStyle="#1a1a1a",e.fillRect(0,0,this.width,this.height);let i=this.width/2,n=this.height/2,a=i-200,r=n-100;e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=10,e.fillStyle="#ffffff",e.fillRect(a,r,400,200),e.shadowColor="transparent",e.fillStyle="#ff4444",e.font="48px Arial",e.textAlign="center",e.fillText("⚠",i,r+60),e.fillStyle="#333333",e.font="bold 24px -apple-system, Arial",e.fillText("WebGL Required",i,r+100),e.fillStyle="#666666",e.font="16px -apple-system, Arial",e.fillText("This application requires WebGL support",i,r+130),e.fillText("Please update your browser",i,r+155)}return this._render=null,null}let e=new i6.CP7({antialias:!0,canvas:this._renderElement,alpha:!0,precision:"highp"});return e.setPixelRatio(2*window.devicePixelRatio),e.autoClear=!1,e.setAnimationLoop(this._animate.bind(this)),this._render=e,this.setSize(this.width,this.height),e}_isWebGLAvailable(){try{let e=document.createElement("canvas"),t=e.getContext("webgl2")||e.getContext("webgl")||e.getContext("experimental-webgl");return null!==t}catch(e){return!1}}_animate(){if(!this._render||!this._webglSupported)return;this._orbitControls.update();let e=this._clock.getDelta();this.objects.forEach(t=>{t.update(e)}),this._render.render(this._scene,this._camera)}_createGrid(){let e=new i3.VLJ(2e3,20,0,0);return e.material.opacity=.2,e.material.transparent=!0,e}_setupRenderTarget(){if(!this._webglSupported){console.warn("Skipping render target setup - WebGL not supported");return}let e=this.width,t=this.height;this._depthTarget=new i3.dd2(e,t,{minFilter:i3.TyD,magFilter:i3.TyD,format:i3.wk1,type:i3.VzW,stencilBuffer:!1,depthBuffer:!0,generateMipmaps:!1}),this._depthTarget.depthTexture=new i3.$YQ(e,t),this._depthTarget.depthTexture.format=i3.qkB,this._depthTarget.depthTexture.type=i3.VzW,this._depthTarget.depthTexture.minFilter=i3.TyD,this._depthTarget.depthTexture.magFilter=i3.TyD,this._depthTarget.depthTexture.generateMipmaps=!1}_getSceneModel(){if(this.signals.selectObject.value)return this.signals.selectObject.value;for(let e of this.scene.children)if(e.userData.type===i1.xb)return e;return null}_initializationEvent(){this._webglSupported&&(this.domElement.addEventListener("click",this._handleInteraction),this.domElement.addEventListener("touchstart",e=>{e.preventDefault(),this._handleInteraction(e)},{passive:!1}))}_createFloor(){let e=new i3._12(2e3,2e3),t=new i3.Wid({color:13421772,roughness:1,metalness:0}),i=new i3.Kj0(e,t);return i.rotation.x=-Math.PI/2,i.receiveShadow=!0,i}constructor(){this._floor=null,this._webglSupported=!0,this.state="uninitialized",this.objects=new Map,this._handleInteraction=e=>{let t,i;if(e instanceof MouseEvent)t=e.offsetX,i=e.offsetY;else{let n=e.touches[0],a=this._renderElement.getBoundingClientRect();t=n.clientX-a.left,i=n.clientY-a.top}let{height:n,width:a}=this._renderElement.getBoundingClientRect(),r=t/a*2-1,o=-(i/n*2)+1,s=new i3.iMs;if(s.setFromCamera(new i3.FM8(r,o),this._camera),this.signals.isGridHelperClicked.value){this.signals.isGridHelperClicked.value=!1;return}let l=this.scene.children.filter(e=>e.userData.type===i1.vb),d=s.intersectObjects(l,!1);if(d.length>0){let{parentId:e,region:t}=d[0].object.userData,i=this.signals.selectObject.value;if(i&&i.uuid===e||this.objectUtilsByUuid(e).select(t),i&&i.uuid===e){let i=this.objectUtilsByUuid(e);i.actionRegion!==t&&i.updateActionRegion(t)}return}let c=[];this.scene.children.filter(e=>e.userData.type===i1.xb).forEach(e=>{e.traverse(e=>{e instanceof i3.Kj0&&c.push(e)})});let h=s.intersectObjects(c,!1);if(h.length>0){let e=h[0].object;for(;e&&e.userData.type!==i1.xb;)e=e.parent;if(e){let t=this.objectUtilsByUuid(e.uuid);null==t||t.updateActionRegion()}return}this.unselect()},this.history=new ns(this),this.signals=new np,this._setupScene(),this._setupCamera()}}let nm=null;function ng(e){let{icon:t,label:i,onClick:n,isActive:r}=e;return(0,a.jsx)(A.Z,{variant:"contained",startIcon:t,onClick:n,sx:{backgroundColor:r?eS.u8:"#1d1d1d",color:"white","&:hover":{backgroundColor:r?eS.lr:"#1d1d1d"},padding:"4px 12px",minHeight:"32px",fontSize:"0.875rem"},children:i})}var nj=(0,w.forwardRef)(function(e,t){let{targetMaxSize:i,defaultRatio:n,showFloor:r}=e,l=(nm||(nm=new nx),nm),d=(0,w.useRef)(null),c=(0,w.useRef)(null),[h,u]=(0,w.useState)("rotate"),{isMobile:p}=(0,m.j)(),[,x]=(0,w.useState)({}),[g,j]=(0,w.useState)(!1),[b,v]=(0,w.useState)(i1.E0),[S,y]=(0,w.useState)(i1.iW),[C,_]=(0,w.useState)("custom"),[k,P]=(0,w.useState)({height:300,width:400,x:0,y:0}),[T,E]=(0,w.useState)("Default"),[N,I]=(0,w.useState)(!1),[A,M]=(0,w.useState)(!0),[U,R]=(0,w.useState)(!0),[z,D]=(0,w.useState)("Click dots to rotate joints and adjust angles."),V=i1.AY.find(e=>e.key===b);(0,w.useEffect)(()=>{if(d.current&&l)return l.mount(d.current),l.signals.transformMode.add(e=>{u(e)}),l.signals.historyChanged.add(()=>{x({})}),l.modelCount<1&&i4.load().then(async e=>{l.addObject(e),j(!1)}),()=>{l&&l.dispose()}},[l]),(0,w.useEffect)(()=>{if(U){let e=setTimeout(()=>{R(!1)},5e3);return()=>clearTimeout(e)}},[U]);let F=async e=>{j(!0),v(e),y(i1.AY.find(t=>t.key===e).config);let t=await i4.load(e);l.switchModel(t),_("custom"),j(!1)},B=async e=>{if("custom"===e)return;j(!0),_(e);let t=l.getSelectModel(),i=await i4.loadPose(V,e),n=l.objectUtilsByUuid(t.uuid).currentChip,a=i?i.animations[0]:null;await l.history.execute(new i0(l,t,a,n)),j(!1)},O=(0,w.useCallback)(()=>{l&&l.clear(),l.mount(d.current),l.signals.transformMode.add(e=>{u(e)}),l.signals.historyChanged.add(()=>{x({})}),l.modelCount<1&&i4.load().then(async e=>{l.addObject(e),j(!1)})},[l]);(0,w.useImperativeHandle)(t,()=>({exportData(){let{dataUrl:e,width:t,height:n}=null==l?void 0:l.exporter.exportScreenshot(k,i,r),a=S.find(e=>e.path===C);return{pose_image:e,height:n,width:t,pose_description:a?a.description:"",pose_model:b}}}));let W=(0,w.useCallback)(()=>{(null==l?void 0:l.history.canUndo())&&l.history.undo()},[l]),L=(0,w.useCallback)(()=>{(null==l?void 0:l.history.canRedo())&&l.history.redo()},[l]);(0,w.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&("z"===e.key.toLowerCase()?e.shiftKey?(e.preventDefault(),L()):(e.preventDefault(),W()):"r"===e.key.toLowerCase()&&(e.preventDefault(),O()))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[W,L,O]),(0,w.useEffect)(()=>{let e,t;if(!d.current)return;let{height:i,width:a}=d.current.getBoundingClientRect(),[r,o]=(n??(p?"3:2":"16:9")).split(":").map(e=>Number.parseInt(e));a/r<i/o?t=(e=1*a)*o/r:e=(t=1*i)*r/o,P({height:t,width:e,x:(a-e)/2,y:(i-t)/2})},[d.current,p,n]);let G=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Z,{width:"100%",height:"100%",sx:{position:"relative"},children:[(0,a.jsx)("canvas",{ref:d,style:{width:"100%",height:"100%"}}),(0,a.jsx)(s.Z,{ref:c,sx:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",isolation:"isolate",background:"rgba(0, 0, 0, 0.3)"}}),(0,a.jsx)(iQ,{active:A,lock:N,size:k,onChange:e=>{P(e)},maskRef:c}),g?(0,a.jsxs)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[(0,a.jsx)(tj.Z,{}),(0,a.jsx)(s.Z,{sx:{color:"white",background:"rgba(0, 0, 0, 0.6)",padding:"4px 8px",borderRadius:"4px"},children:"Loading model..."})]}):null,U?(0,a.jsx)(s.Z,{sx:{position:"absolute",top:"10px",left:"50%",transform:"translate(-50%,0)",display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:(0,a.jsx)(f.Z,{variant:"body1",sx:{color:"white",background:"rgba(0, 0, 0, 0.6)",padding:"4px 8px",borderRadius:"4px",whiteSpace:"nowrap",textAlign:"center",fontWeight:500,fontSize:{xs:"0.65rem",sm:"1rem"}},children:z})}):null]}),(0,a.jsxs)(o.Z,{direction:"row",spacing:1,p:1,justifyContent:"center",position:"relative",bottom:0,children:[(0,a.jsx)(ng,{icon:(0,a.jsx)(iL.Z,{}),label:"Move",isActive:"translate"===h,onClick:()=>{null==l||l.setTransformMode("translate"),R(!0),D(p?"Use arrows to move the character or two fingers to adjust the camera.":"Click to move the character or press arrow keys to adjust the camera.")}}),(0,a.jsx)(ng,{icon:(0,a.jsx)(iG.Z,{}),label:"Rotate",isActive:"rotate"===h,onClick:()=>{null==l||l.setTransformMode("rotate"),R(!0),D("Click dots to rotate joints and adjust angles.")}}),(0,a.jsx)(Z.Z,{orientation:"vertical",flexItem:!0}),(0,a.jsx)(tg.Br,{icon:"Undo",tooltip:(0,a.jsx)(tg.mQ,{shortcut:["cmd","Z"],children:"History Undo"}),disable:(null==l?void 0:l.history.canUndo())===!1,onClick:()=>{l.history.undo()},sx:tv.qV}),(0,a.jsx)(tg.Br,{icon:"Redo",tooltip:(0,a.jsx)(tg.mQ,{shortcut:["cmd","shift","Z"],children:"History Redo"}),disable:(null==l?void 0:l.history.canRedo())===!1,onClick:()=>{l.history.redo()},sx:tv.qV}),(0,a.jsx)(tg.Br,{icon:"ph:arrows-clockwise",tooltip:(0,a.jsx)(tg.mQ,{shortcut:["cmd","R"],children:"Reset"}),onClick:()=>{O()},label:"Reset",sx:{...tv.qV,position:"absolute",right:"0px",zIndex:1e3}})]})]}),H=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iq,{title:"3D Model",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:1,mb:2},children:[...i1.AY.filter(e=>e.key===b),...i1.AY.filter(e=>e.key!==b).slice(0,2)].map(e=>(0,a.jsx)(s.Z,{onClick:()=>F(e.key),sx:{cursor:"pointer",border:b===e.key?"2px solid #4CAF50":"2px solid #444",borderRadius:"4px",overflow:"hidden",aspectRatio:"1","&:hover":{opacity:.8}},children:(0,a.jsx)("img",{src:`${i5.baseUrl}/${e.thumbnail}`,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}})},e.key))}),(0,a.jsx)(i$,{value:b,onChange:F,options:i1.AY.map(e=>({label:e.name,value:e.key,thumbnail:`${i5.baseUrl}/${e.thumbnail}`}))})]})}),(0,a.jsx)(Z.Z,{}),(0,a.jsx)(iq,{title:"Pose",children:(0,a.jsx)(i$,{value:S.some(e=>e.path===C)?C:"custom",onChange:B,options:[{label:"Custom",value:"custom",thumbnail:`${i5.baseUrl}/${V.thumbnail}`},...S.map(e=>({label:e.description,value:e.path,thumbnail:`${i5.baseUrl}three-models/thumbnail/${e.thumbnail}`}))]})}),(0,a.jsx)(Z.Z,{}),(0,a.jsx)(iq,{title:"Image Size",children:(0,a.jsx)(o.Z,{direction:"column",spacing:1,children:(0,a.jsx)(eJ,{showLock:!0,lock:N,setLock:I,value:T,aspectRatios:i1.pI,onChange:e=>{var t;let i=i1.pI.find(t=>t.ratio===e);if(!i)return;let n=null===(t=d.current)||void 0===t?void 0:t.getBoundingClientRect();if(!n)return;let a=1*n.width,r=i.size.height/i.size.width*a;r>1*n.height&&(r=1*n.height,a=i.size.width/i.size.height*r),E(e),M(!0),P({...k,width:a,height:r,x:(n.width-a)/2,y:(n.height-r)/2})}})})})]});return(0,a.jsx)(p?iK:iH,{content:G,operation:H})}),nf=e=>{let{open:t,onClose:i,onPoseChange:n,targetMaxSize:o,defaultRatio:s,showFloor:l}=e,d=(0,w.useRef)(),{isMobile:c}=(0,m.j)(),[h,u]=(0,w.useState)(!1);return(0,a.jsxs)(U.Z,{open:t,fullWidth:!0,maxWidth:"lg",PaperProps:{sx:{alignItems:"center",bgcolor:"#1D1D1D"}},children:[(0,a.jsx)(R.Z,{sx:{width:"100%",borderBottom:"1px solid #444444",padding:2},children:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(f.Z,{variant:"h6",fontWeight:600,children:"Pose your character"}),c?null:(0,a.jsx)(f.Z,{variant:"body1",fontWeight:400,fontSize:14,children:"Click joints to adjust poses or select from preset poses below"})]}),(0,a.jsxs)(r.Z,{direction:"row",gap:2,alignItems:"center",children:[(0,a.jsxs)(A.Z,{variant:"contained",LinkComponent:en.r,href:"https://youtu.be/SY28s_omVxw?si=dAWQdhk5Jwugj13N",target:"_blank",sx:{bgcolor:"rgb(68, 68, 68)",color:"white","&:hover":{bgcolor:"rgb(60, 60, 60)"}},children:[(0,a.jsx)(es.Zdg,{size:16,sx:{mr:1}}),"Tutorial"]}),(0,a.jsx)(tx.Z,{startIcon:(0,a.jsx)(tg.oE,{icon:"material-symbols:save-rounded",size:16}),variant:"contained",color:"primary",loading:h,sx:{color:"white",bgcolor:eS.u8,"&:hover":{bgcolor:eS.lr}},onClick:async()=>{try{u(!0);let e=d.current.exportData(),t=e.pose_image,a=(await (0,tw.Ws)((0,tS.Jr)(t))).imageUrl;e.pose_image=a,n(e),i({},"backdropClick")}catch{(0,tT.cB)("Save pose error")}finally{u(!1)}},children:(0,a.jsxs)("span",{children:[c?"Save":"Update Pose"," "]})}),(0,a.jsx)(tm.Z,{onClick:()=>i(null,"escapeKeyDown"),children:(0,a.jsx)(es.Bfz,{size:24})})]})]})}),(0,a.jsx)(z.Z,{sx:{width:"100%",height:"100vh",padding:0,bgcolor:"#1D1D1D"},children:(0,a.jsx)(nj,{ref:d,targetMaxSize:o,defaultRatio:s,showFloor:l})})]})},nb=i(17615);let nv=()=>{let[e]=(0,x.y)({key:"create.config.upscaleMode.x2"}),t=(0,h.UK)((0,l.N)(e=>e.getParameterValue("upscale_mode"))),i=(0,h.UK)(e=>e.setUpscaleMode),n=(0,h.UK)((0,l.N)(e=>e.getParameterValue("height"))),r=(0,h.UK)((0,l.N)(e=>e.getParameterValue("width"))),o=(0,h.UK)((0,l.N)(e=>e.getParameterValue("image_url")));return(0,a.jsx)(eH,{children:(0,a.jsx)(nb.S,{value:t,onChange:e=>i(e),haveImageUrl:!!o,height:n,width:r,disabled:!e})})},nS=()=>{let[e,t]=(0,w.useState)(!1),i=(0,h.UK)(e=>e.getParameterValue("pose_image")),n=(0,h.UK)(e=>e.setPoseData),[r,s]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("pose_weight"))),[d,c]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),u=(0,h.UK)((0,l.N)(e=>e.getParameterValue("steps"))),p=(0,h.UK)(e=>e.setSteps),x=(0,h.UK)(e=>e.ensureUiState),m="pose-and-composition-accordion.expanded",g=(0,h.UK)(e=>e.getUiState(m,!0)),j="advance-settings-accordion.expanded",b=(0,h.UK)(e=>e.getUiState(j,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eO,{expanded:g,onClick:e=>x(m,e),title:"Pose & Composition",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(f.Z,{variant:"editor-label1",color:"#E5E7EB",children:"Set your character's pose and composition using the Pose Editor."}),(0,a.jsx)(tD,{src:i||"https://cdn.openart.ai/assets/character/Pose1.webp",active:!!i,onClick:()=>t(!0),activeText:"Modify Pose",children:"Open Pose Editor"}),(0,a.jsx)(tg.X9,{showResult:!0,min:.1,max:1,step:.01,value:r,onChange:s,label:"Weight"}),(0,a.jsx)(nf,{targetMaxSize:1536,open:e,onClose:()=>t(!1),onPoseChange:n})]})}),(0,a.jsx)(iU,{bottomElement:(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{max:20,min:2,step:1,value:d,onChange:c})})})}),(0,a.jsx)(iF,{}),(0,a.jsx)(eO,{expanded:b,onClick:e=>x(j,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(tR,{min:10,max:50,value:u,onChange:p}),(0,a.jsx)(nv,{})]})})]})};var nw=i(68836),ny=i.n(nw),nC=i(32757),nZ=i(36412);let n_=e=>{let{disabled:t,value:i,uploadUrl:n,onChange:r}=e,[o,l]=(0,w.useState)(null),[d,c]=(0,w.useState)(!1),[h,u]=(0,w.useState)(""),p=(0,w.useRef)(null),x=async e=>{u("");try{let t=e[0];if(!t)return;let i=URL.createObjectURL(t);if(t){l({...t,preview:i}),c(!0);let e=new FormData;e.append("file",t);let a=await io.ZP.post(n,e,{headers:{"Content-Type":"multipart/form-data"}});200===a.status&&a.data&&r(a.data)}}catch(i){let e=i.message||"An error occurred while uploading the image";if(i instanceof nw.AxiosError){var t;let n=null===(t=i.response)||void 0===t?void 0:t.data;"string"==typeof n?e=n:(null==n?void 0:n.message)&&(e=n.message)}u(e)}finally{c(!1)}},{UploadContextMenu:m,handleMenuOpen:g}=(0,nZ.w)({onChange:async e=>{if(e&&e.length>0&&!t)try{u(""),c(!0),l({preview:e[0]});let t={imageUrl:e[0],height:0,width:0},i=new Image;i.addEventListener("load",()=>{t.height=i.height,t.width=i.width,r(t),c(!1)}),i.addEventListener("error",()=>{u("Failed to load image dimensions"),c(!1)}),i.src=e[0]}catch{u("Failed to process image from history"),c(!1)}},onClickUpload:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.triggerInputClick()},maxSelectionCount:1});return(0,w.useEffect)(()=>{i?l({preview:i}):l(null)},[i]),(0,a.jsxs)(s.Z,{sx:{borderRadius:3,backgroundColor:"#2C2E35",position:"relative"},children:[(0,a.jsx)(nC.Z,{ref:p,disabled:t,buttonVariant:!0,sx:{width:"100%",height:o?200:75,border:"none",backgroundColor:"#1D1D1D",borderRadius:1,margin:0},dropZoneSx:{borderRadius:.5,width:"100%",padding:0},file:o,isUploading:d,maxSize:10485760,onDrop:x,onAreaClick:t?void 0:g,title:"Click or drag to upload / history",accept:{"image/png":[],"image/jpeg":[],"image/webp":[]},caption:(()=>{if(h)return(0,a.jsx)(f.Z,{variant:"caption",sx:{margin:"8px 0"},color:"error.main",children:h})})()}),m,o&&!d?(0,a.jsx)(tz.Z,{title:"Delete the image",icon:es.Xm5,iconSize:20,sx:{position:"absolute",top:8,right:8,cursor:"pointer"},onClick:()=>{l(null),r(null)}}):null]})},nk=e=>{let{banner:t,value:i,onChange:n,sliderConfigProps:o,hideInfluenceStrength:s=!1}=e;return(0,a.jsxs)(r.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(n_,{value:i.image_url,uploadUrl:"/media/upload_image",onChange:e=>{n({...i,image_url:(null==e?void 0:e.imageUrl)??"",height:null==e?void 0:e.height,width:null==e?void 0:e.width})}}),t?(0,a.jsx)(b.Z,{severity:"info",children:t}):null,i.image_url&&!s?(0,a.jsx)(tg.X9,{showResult:!0,min:.1,max:1,step:.01,value:i.influenceStrength,onChange:e=>{n({...i,influenceStrength:e})},label:"Influence Strength",tipText:"The higher this number is, the more influence the upload imaged will have on the generated image.",...o??{}}):null]})},nP=e=>{let{banner:t,value:i,onChange:n}=e,[r,s]=(0,w.useState)(!1),l=(0,w.useMemo)(()=>i.image_url||i.pose_image?()=>{n({...i,pose_image:"",image_url:""})}:null,[n,i]);return(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(tD,{src:i.pose_image||"https://cdn.openart.ai/assets/character/Pose1.webp",active:!!i.pose_image,onClick:()=>s(!0),activeText:"Modify Pose",onDelete:l,children:"Open Pose Editor"}),(0,a.jsx)(tg.X9,{showResult:!0,min:.1,max:1,step:.01,value:i.pose_weight,onChange:e=>{n({...i,pose_weight:e})},label:"Weight"}),(0,a.jsx)(nf,{open:r,onClose:()=>s(!1),onPoseChange:e=>{n({...i,pose_image:e.pose_image,height:e.height,width:e.width})},targetMaxSize:1024}),t?(0,a.jsx)(b.Z,{severity:"info",children:t}):null]})},nT=e=>{let{name:t,value:i}=e,n=`${t}.enable`,r=(0,h.TS)((0,l.N)(e=>e.getUiState(n,!0))),s=(0,h.TS)(e=>e.initUiState),d=(0,h.TS)(e=>e.ensureUiState);return(0,w.useEffect)(()=>{s(n,!0)},[]),("string"==typeof i?i:"pose_image"in i&&!!i.pose_image||i.image_url)?(0,a.jsx)(o.Z,{direction:"row",spacing:.5,alignItems:"center",children:(0,a.jsx)(t0.r,{checked:r,inputProps:{"aria-label":"ant design"},onChange:e=>{e.stopPropagation(),d(n,e.target.checked)},onClick:e=>{e.stopPropagation()}})}):null},nE={display:"flex",flexDirection:"column",justifyContent:"space-between"},nN=e=>{let t=(0,h.UK)((0,l.N)(e=>e.getParameterValue("type"))),i=(0,h.UK)((0,l.N)(e=>e.getParameterValue("imageReference"))),n=(0,h.UK)(e=>e.setReference),r=(0,h.UK)(e=>e.ensureUiState),o=(0,h.UK)((0,l.N)(e=>e.getUiState("imageReference.pose.expanded",!1))),s=(0,h.UK)((0,l.N)(e=>e.getUiState("imageReference.composition.expanded",!1))),d=(0,h.UK)((0,l.N)(e=>e.getUiState("imageReference.sketch.expanded",!1)));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iz,{className:"image-reference-pose-accordion-item",startIcon:es.J8O,label:"Pose Reference",isNew:!0,value:i.getTypeValue("pose"),extra:(0,a.jsx)(nT,{name:"imageReference.pose",value:i.getTypeValue("pose")}),sx:nE,expend:o,onExpendChange:e=>r("imageReference.pose.expanded",e),children:(0,a.jsx)(nP,{value:i.getTypeValue("pose"),onChange:e=>n({data:e,...e1.m[t]})})}),(0,a.jsx)(iz,{className:"image-reference-composition-accordion-item",startIcon:es.G_G,label:"Composition Reference",isNew:!0,value:i.getTypeValue("composition"),expend:s,onExpendChange:e=>r("imageReference.composition.expanded",e),extra:(0,a.jsx)(nT,{name:"imageReference.composition",value:i.getTypeValue("composition")}),sx:nE,children:(0,a.jsx)(nk,{banner:"Composition Reference",value:i.getTypeValue("composition"),onChange:e=>n({data:e,...e1.m[t]})})}),(0,a.jsx)(iz,{startIcon:es.zOx,className:"image-reference-sketch-accordion-item",label:"Sketch Reference",value:i.getTypeValue("sketch"),extra:(0,a.jsx)(nT,{name:"imageReference.sketch",value:i.getTypeValue("sketch")}),expend:d,onExpendChange:e=>r("imageReference.sketch.expanded",e),sx:nE,children:(0,a.jsx)(nk,{banner:"Sketch Reference",value:i.getTypeValue("sketch"),onChange:e=>n({data:e,...e1.m[t]})})})]})};var nI=i(81138);let nA=e=>{let{children:t,onClick:i,...n}=e;return(0,a.jsx)(A.Z,{size:"small",variant:"outlined",sx:{ml:1},onClick:i,...n,children:t})};function nM(e){let{uploadedImgUrl:t,value:i,onChange:n,viewPrompt:r}=e,{mutate:s,isLoading:l,error:d,reset:c}=(0,nI.AY)(),[h,u]=(0,w.useState)(!1),[p,x]=(0,w.useState)(t);(0,w.useEffect)(()=>{t&&t!==p&&(c(),u(!1)),x(t)},[p,c,t]);let m=(0,w.useMemo)(()=>t?l?"loading":h?"success":d?"error":t?"uploaded":"default":"default",[d,h,l,t]),g=(0,w.useMemo)(()=>"loading"===m?"Generating prompt...":"error"===m?"Generate failed!":"uploaded"===m?"Auto generate prompt based on this image":"success"===m?"Prompt had been generated":"",[m]);if("default"===m)return null;let j=async()=>{t1.B("image_to_prompt",{image_url:t}),s({image:t,is_tmp_image:!0,model:"gpt-4o-mini"},{onSuccess:e=>{((null==e?void 0:e.caption)??"").length>0&&(null==n||n(new e8.N({prompt:e.caption,is_generated:!1})),u(!0))}})};return(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",children:[(0,a.jsx)(f.Z,{variant:"editor-ghost",children:g}),(()=>{switch(m){case"uploaded":case"error":return(0,a.jsx)(nA,{onClick:j,children:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Generate"})});case"loading":return(0,a.jsx)(tj.Z,{size:20,sx:{ml:1}});case"success":return(0,a.jsx)(nA,{onClick:r,children:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"View"})});default:return null}})()]})}let nU=()=>{let e=(0,h.UK)((0,l.N)(e=>e.getParameterValue("type"))),t=(0,h.UK)((0,l.N)(e=>e.getParameterValue("image_url"))),[i,n]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("strength"))),r=(0,h.UK)(e=>e.setImageUrl),s=(0,h.UK)(e=>e.setPrompt),d=(0,h.UK)(e=>e.ensureUiState);return(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(n_,{value:t,uploadUrl:"/media/upload_raw_image",onChange:t=>r({...t,...e1.m[e]})}),(0,a.jsx)(nM,{uploadedImgUrl:t,onChange:s,viewPrompt:()=>{var e;null===(e=document.querySelector(".prompt-accordion-form-item"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"}),d("prompt.expanded",!0)}}),(0,a.jsx)(b.Z,{severity:"info",children:"Output will match uploaded image’s aspect ratio"}),(0,a.jsx)(tg.X9,{showResult:!0,min:.1,max:1,step:.01,value:i,onChange:n,label:"Creativity level",tipText:"The higher this number is, the more creative AI is and less similar the output image is to the original image."})]})},nR=()=>{let e=(0,h.UK)((0,l.N)(e=>e.getParameterValue("image_url"))),t=(0,h.UK)((0,l.N)(e=>e.getUiState("image_url.expanded",!1))),i=(0,h.UK)(e=>e.ensureUiState);return(0,a.jsx)(iz,{value:e,defaultExpanded:!1,className:"image-to-image-accordion-item",startIcon:es.L3Q,label:"Image to Image",extra:(0,a.jsx)(nT,{name:"image_url",value:e}),sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",scrollMarginTop:eS.Sw},expend:t,onExpendChange:e=>i("image_url.expanded",e),children:(0,a.jsx)(nU,{})})},nz=()=>{let[e]=(0,x.y)({key:"create.config.imageGuidance"}),{isMobile:t}=(0,c.T)(),[i,n]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),[r,s]=(0,h.UK)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode"))),d=(0,h.UK)((0,l.N)(e=>e.getParameterValue("steps"))),u=(0,h.UK)(e=>e.setSteps),p=(0,h.UK)(e=>e.ensureUiState),m="image-guidance-accordion.expanded",g=(0,h.UK)(e=>e.getUiState(m,!0)),j="output-size-accordion.expanded",f=(0,h.UK)(e=>e.getUiState(j,!t)),b="advance-settings-accordion.expanded",v=(0,h.UK)(e=>e.getUiState(b,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iU,{bottomElement:(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{max:20,min:2,step:1,value:i,onChange:n})})}),autoEnhance:r,onAutoEnhanceChange:s}),(0,a.jsx)(iF,{}),(0,a.jsx)(eO,{expanded:g,onClick:e=>p(m,e),title:"Image Guidance",tooltip:iR,content:e?(0,a.jsxs)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(nR,{}),(0,a.jsx)(nN,{})]}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:f,onClick:e=>p(j,e),title:"Output Size",content:(0,a.jsx)(e4,{})}),(0,a.jsx)(eO,{expanded:v,onClick:e=>p(b,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(tR,{min:10,max:70,value:d,onChange:u}),(0,a.jsx)(nv,{})]})})]})};var nD=i(6891),nV=i(25238),nF=function(e){let{title:t,image:i,selected:n=!1,isVideo:r=!1,videoUrl:l,onClick:d,sx:c}=e,[h,u]=w.useState(!1),p=w.useRef(null);return w.useEffect(()=>{h&&p.current?p.current.play():!h&&p.current&&(p.current.pause(),p.current.currentTime=0)},[h]),(0,a.jsxs)(to.Z,{onClick:d,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),sx:{position:"relative",width:"100%",borderRadius:"6px",overflow:"hidden",border:n?"1px solid #4CAF50":"1px solid #444",backgroundColor:"#333",display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1,p:1,gap:1},children:[r?(0,a.jsx)(s.Z,{sx:{position:"absolute",top:12,right:12,zIndex:2,color:"white",backgroundColor:"rgba(1, 1, 1, 0.2)",border:"1px solid rgba(255, 255, 255, 0.13)",borderRadius:"50%",padding:"4px",height:"20px",width:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(es.Mld,{})}):null,n?(0,a.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(76, 175, 80, 0.2)",zIndex:0}}):null,r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{component:"img",src:i,alt:t,sx:{width:"100%",height:"120px",objectFit:"cover",objectPosition:"top",zIndex:1,display:h?"none":"block",borderRadius:"6px",...c}}),(0,a.jsx)(s.Z,{component:"video",ref:p,src:l,loop:!0,muted:!0,playsInline:!0,autoPlay:h,sx:{width:"100%",height:"120px",objectFit:"cover",objectPosition:"top",zIndex:1,display:h?"block":"none",borderRadius:"6px",...c},onMouseEnter:()=>{p.current&&p.current.play().catch(e=>console.error("Video play error:",e))}})]}):(0,a.jsx)(s.Z,{component:"img",src:i,alt:t,sx:{width:"100%",height:"120px",objectFit:"cover",objectPosition:"top",zIndex:1,borderRadius:"6px",...c}}),(0,a.jsxs)(o.Z,{sx:{background:"#333",width:"100%"},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(f.Z,{variant:"subtitle1",sx:{color:"white",fontSize:"14px",fontWeight:"600"},children:t}),(0,a.jsx)(tg.EU,{active:n,size:"small"})]})]})},nB=function(e){let{title:t,image:i,selected:n=!1,isVideo:r=!1,videoUrl:l,onClick:d,sx:c}=e,[h,u]=(0,w.useState)(!1),p=(0,w.useRef)(null);return(0,a.jsxs)(to.Z,{onClick:d,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),sx:{position:"relative",width:"100%",borderRadius:"6px",overflow:"hidden",border:n?"1px solid #4CAF50":"1px solid #444",backgroundColor:"#333",display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1,p:1,gap:1},children:[r?(0,a.jsx)(s.Z,{sx:{position:"absolute",top:8,right:8,zIndex:2,color:"white",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.13)",borderRadius:"50%",padding:"4px",height:"20px",width:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(es.Mld,{})}):null,n?(0,a.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(76, 175, 80, 0.2)",zIndex:0}}):null,r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{component:"img",src:i,alt:t,sx:{width:"100%",height:"120px",objectFit:"cover",objectPosition:"top",zIndex:1,display:h?"none":"block",borderRadius:"6px",...c}}),(0,a.jsx)(s.Z,{component:"video",ref:p,src:l,loop:!0,muted:!0,playsInline:!0,autoPlay:h,sx:{width:"100%",height:"120px",objectFit:"cover",objectPosition:"top",zIndex:1,display:h?"block":"none",borderRadius:"6px",...c},onMouseEnter:()=>{p.current&&p.current.play().catch(e=>console.error("Video play error:",e))}})]}):(0,a.jsx)(s.Z,{component:"img",src:i,alt:t,sx:{width:"100%",height:"120px",objectFit:"cover",objectPosition:"top",zIndex:1,borderRadius:"6px",...c}}),(0,a.jsxs)(o.Z,{sx:{background:"#333",width:"100%"},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(f.Z,{variant:"subtitle1",sx:{color:n?"white":"#8A8A8A",fontSize:"11px",fontWeight:"600"},children:t}),(0,a.jsx)(tg.EU,{active:n,size:"small"})]})]})};function nO(e){var t,i,n;let{}=e,{isMobile:r}=(0,m.j)(),s=(0,h.UK)((0,l.N)(e=>e.getParameterValue("active_template_type"))),d=w.useRef(s),c=(0,h.UK)(e=>e.updateTemplateTab),u=(0,h.UK)((0,l.N)(e=>e.getParameterValue("active_template"))),p=(0,h.UK)(e=>e.setActiveTemplate),x=[{value:"essentials",label:"Essentials",icon:"lucide:layout-template",multiple:!1,options:e9.ZP,column:r?2:1,component:nF},{value:"scene",label:"Scenes",icon:"ph:smiley",multiple:!1,options:e9.KN,column:2,component:nB}],g=null===(t=x.find(e=>e.value===s))||void 0===t?void 0:t.options,j=null===(i=x.find(e=>e.value===s))||void 0===i?void 0:i.column,f=null===(n=x.find(e=>e.value===s))||void 0===n?void 0:n.component;w.useEffect(()=>{d.current=s},[s]);let b=d.current===s?{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50}}:"essentials"===s?{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50}}:{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50}};return(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsxs)(nV.sg,{gap:1,sx:{px:"10px",pb:"10px"},children:[(0,a.jsx)(nW,{value:s,options:x,onChange:e=>c(e)}),(0,a.jsx)(eo.E.div,{style:{width:"100%"},initial:b.initial,animate:b.animate,exit:b.exit,transition:{duration:.2},children:(0,a.jsx)(G.ZP,{container:!0,spacing:1,children:g.map(e=>(0,a.jsx)(G.ZP,{item:!0,xs:12/j,md:12/j,sm:12/j,children:(0,a.jsx)(f,{title:e.title,image:e.image,selected:u===e.value,sx:e.sx,isVideo:"VideoTemplate"===e.constructor,videoUrl:null==e?void 0:e.videoUrl,onClick:()=>{p(e.value)}},e.value)},e.value))})},s)]})})}function nW(e){let{value:t,options:i,onChange:n,sx:r}=e,o=i.findIndex(e=>e.value===t);return(0,a.jsxs)(s.Z,{sx:{display:"flex",backgroundColor:"#525252",borderRadius:"4px",padding:"4px",position:"relative",...r},children:[i.map(e=>(0,a.jsxs)(to.Z,{onClick:()=>n(e.value),sx:{flex:1,py:"4px",px:"8px",borderRadius:"4px",display:"flex",alignItems:"center",gap:1,color:"white",position:"relative",zIndex:1,transition:"all 0.2s",fontWeight:500},children:[(0,a.jsx)(nD.JO,{icon:e.icon}),e.label]},e.value)),(0,a.jsx)(eo.E.div,{className:"segmented-control-indicator",layoutId:"segmentedControlIndicator",initial:!1,animate:{left:`calc(${100/i.length*o}% + 4px)`,width:`calc(${100/i.length}% - 8px)`},transition:{type:"spring",duration:.2,bounce:.2},style:{position:"absolute",top:"4px",height:"calc(100% - 8px)",borderRadius:"4px",backgroundColor:"#232323",zIndex:0}})]})}function nL(){let e=(0,h.UK)((0,l.N)(e=>e.getParameterValue("creation_mode")));return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(o.Z,{sx:{p:1},spacing:1,children:(0,a.jsx)(tc,{multiSelect:!1,showAddCharacter:"template"!==e})}),(()=>{switch(e){case"promptAndReference":return(0,a.jsx)(nz,{});case"pose":return(0,a.jsx)(nS,{});case"inpaint":return(0,a.jsx)(iB,{});case"multipleCharacter":return(0,a.jsx)(iW,{});case"template":return(0,a.jsx)(nO,{})}})()]})}function nG(e){let{onSelectMode:t,disabled:i,noFeatureAccess:n}=e;return(0,a.jsxs)(nV.sg,{gap:1,sx:{px:"10px",pt:"10px"},children:[(0,a.jsxs)(s.Z,{sx:{position:"relative",height:"68px",width:"100%",borderRadius:"5px",border:"1px solid #444",justifyContent:"center",alignItems:"center"},children:[(0,a.jsx)(s.Z,{component:"img",src:"https://cdn.openart.ai/assets/character/bg.webp",sx:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",borderRadius:"5px",opacity:.5}}),(0,a.jsx)(A.Z,{variant:"contained",disabled:i,sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",whiteSpace:"nowrap",background:"rgba(0, 0, 0, 0.42)",color:"white","&:hover":{background:"rgba(0, 0, 0, 0.42)"},borderRadius:"4px",border:"1px solid rgba(68, 68, 68, 0.28)",backdropFilter:"blur(2px)",cursor:i?"not-allowed":"pointer"},onClick:()=>{null==t||t("template")},children:(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:600,children:"⚡️Quick Templates >"})})]}),ta.map(e=>(0,a.jsx)(nH,{...e,disabled:i,noFeatureAccess:n,onClick:()=>{null==t||t(e.mode)}},e.title))]})}function nH(e){let{Icon:t,title:i,gifUrl:n,disabled:r,noFeatureAccess:l,onClick:d}=e;return(0,a.jsx)(to.Z,{sx:{cursor:r?"not-allowed":"pointer"},children:(0,a.jsxs)(nV.sg,{p:2,gap:"12px",onClick:e=>{if(r){e.stopPropagation();return}d()},sx:{flex:1,border:"1px solid #444",borderRadius:"5px"},children:[(0,a.jsxs)(nV.X2,{children:[(0,a.jsx)(t,{color:eS.MK}),(0,a.jsx)(f.Z,{variant:"editor-label1",sx:{ml:"4px",fontSize:"16px",fontWeight:"600"},children:i}),(0,a.jsx)(es.D0R,{sx:{ml:"auto"}})]}),(0,a.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,a.jsx)(eu.L6,{src:n,sx:{opacity:r?"0.4":1,objectFit:"cover"}}),l?(0,a.jsx)(o.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"38px",height:"38px",bgcolor:"rgba(253, 234, 0, 0.30)",borderRadius:"10px",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(es.qtW,{size:22,color:"#FDEA00"})}):null]})]})})}var nK=i(75616),n$=i(45285),nq=i(19523),nX=i(97348),nY=i(54055),nQ=i(79365),nJ=i(83805),n0=i(53049),n1=i(68331),n2=i(79481),n5=i(83954),n4=i(13200),n3=i(63888);let n6=function(){let{userId:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{status:n}=(0,n3.useSession)(),a=async()=>(await io.ZP.get("presets/",{params:t})).data,{data:r,error:o,isFetching:s,status:l}=(0,n4.a)(["useUserPresets",e||"",t],a,{enabled:i&&"authenticated"===n});return{data:r,error:o,isFetching:s,status:l}},n8=async e=>(await io.ZP.delete("/presets/",{data:e})).data,n9=(0,io.py)(n8,{}),n7=async e=>(await io.ZP.post("/presets/",{preset_name:e.preset_name,preset_settings:e.preset_settings})).data,ae=(0,io.py)(n7,{});var at=i(2638);let ai=e=>{let{onCreateSuccess:t,...i}=e,[n,r]=(0,w.useState)(""),[l,d]=(0,w.useState)(!1),[c,u]=(0,w.useState)(!1),p=(0,h.TS)(e=>e.metadata),x=(0,h.l6)(e=>e.getValues)(),[m]=ae(),g={model_id:{showName:"Model",sort:1e3,lock:!0,display:e=>(0,a.jsx)(s.Z,{sx:{color:"primary.main",fontWeight:500},children:p.name})},base_model:{showName:"Model",lock:!0,sort:1e3,display:e=>(0,a.jsx)(s.Z,{sx:{color:"primary.main",fontWeight:500},children:p.name})},prompt:{showName:"Prompt",sort:900,display:e=>(0,a.jsx)(s.Z,{sx:{color:e?"error.main":"text.disabled",fontStyle:"italic"},children:e||"None"})},width:{showName:"Width",sort:800,display:e=>(0,a.jsxs)(s.Z,{sx:{color:"text.secondary"},children:[e,"px"]})},height:{showName:"Height",sort:700,display:e=>(0,a.jsxs)(s.Z,{sx:{color:"text.secondary"},children:[e,"px"]})},cfg_scale:{showName:"CFG Scale",sort:600,display:e=>(0,a.jsx)(s.Z,{sx:{color:"text.secondary"},children:e})},model_weight:{showName:"Model Weight",sort:600,display:e=>(0,a.jsx)(s.Z,{sx:{color:"text.secondary"},children:e})},image_num:{showName:"Number of Images",sort:500,display:e=>(0,a.jsx)(B.Z,{label:`${e} images`,size:"small",variant:"outlined",sx:{height:"20px"}})},image_url:{showName:"Image URL",sort:400,display:e=>e?(0,a.jsx)(ej.Z,{href:e,target:"_blank",sx:{fontSize:"12px",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"View Image"}):(0,a.jsx)(s.Z,{sx:{color:"text.disabled"},children:"None"})},negative_prompt:{showName:"Negative Prompt",sort:300,display:e=>(0,a.jsx)(s.Z,{sx:{color:e?"error.main":"text.disabled",fontStyle:"italic"},children:e||"None"})},prompt_assistant_mode:{showName:"Prompt Assistant Mode",sort:250,display:e=>(0,a.jsx)(B.Z,{label:e,size:"small",color:"off"===e?"default":"primary",sx:{height:"20px"}})},sampler:{showName:"Sampler",sort:200,display:e=>(0,a.jsx)(s.Z,{sx:{color:"text.secondary"},children:e})},steps:{showName:"Steps",sort:100,display:e=>(0,a.jsx)(B.Z,{label:`${e} steps`,size:"small",variant:"outlined",sx:{height:"20px"}})},strength:{showName:"Strength",sort:50,display:e=>(0,a.jsx)(s.Z,{sx:{color:"text.secondary"},children:e.toFixed(2)})},tiling:{showName:"Tiling",sort:40,display:e=>(0,a.jsx)(B.Z,{label:e?"On":"Off",size:"small",color:e?"success":"default",sx:{height:"20px"}})},upscale_mode:{showName:"Upscale Mode",sort:30,display:e=>(0,a.jsx)(s.Z,{sx:{color:e?"text.primary":"text.disabled"},children:e||"None"})},aspect_ratio:{showName:"Aspect Ratio",sort:20,display:e=>(0,a.jsx)(B.Z,{label:e||"Default",size:"small",variant:"outlined",sx:{height:"20px"}})},imageReference:{showName:"Reference Images",sort:10,display:e=>(null==e?void 0:e.length)?(0,a.jsx)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:e.map((e,t)=>(0,a.jsx)(B.Z,{icon:(0,a.jsx)(ej.Z,{href:e.image_url,target:"_blank",children:(0,a.jsx)(nY.Z,{sx:{width:16,height:16,color:"inherit","&:hover":{color:"primary.main"},display:"flex",alignItems:"center"}})}),label:e.type.charAt(0).toUpperCase()+e.type.slice(1),size:"small",color:"default",sx:{height:"20px"}},e.type))}):(0,a.jsx)(B.Z,{icon:(0,a.jsx)(nY.Z,{sx:{width:16,height:16}}),label:"None",size:"small",variant:"outlined",sx:{height:"20px"}})},controlnet:{showName:"ControlNet",sort:5,display:e=>(0,a.jsx)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:(0,a.jsx)(B.Z,{icon:e.image_url?(0,a.jsx)(ej.Z,{href:e.image_url,target:"_blank",children:(0,a.jsx)(nY.Z,{sx:{width:16,height:16,color:"inherit","&:hover":{color:"primary.main"},display:"flex",alignItems:"center"}})}):(0,a.jsx)(nQ.Z,{sx:{width:16,height:16}}),label:e.model_name?e.model_name.charAt(0).toUpperCase()+e.model_name.slice(1):"None",size:"small",color:"default",sx:{height:"20px"}})})}},[j,b]=(0,w.useState)(Object.keys(x).reduce((e,t)=>(e[t]=!0,e),{})),v=()=>{i.onClose({},"backdropClick")},S=async()=>{try{if(u(!0),""===n.trim()){d(!0),await (0,at.b)(".create-preset-input");return}d(!1);let e=Object.fromEntries(Object.keys(x).filter(e=>e in g&&j[e]).map(e=>[e,x[e]]));await m({preset_name:n,preset_settings:e}),t1.B("custom_settings_acted",{action:"created"}),(0,tT.t5)("Preset created successfully"),t({preset_name:n,preset_settings:e}),v()}catch(e){console.error("Error creating preset",e)}finally{u(!1)}},y=e=>{b(t=>({...t,[e]:!t[e]}))};return(0,a.jsxs)(U.Z,{...i,sx:{"& .MuiDialog-paper":{maxWidth:660,width:"600px",height:"700px"}},children:[(0,a.jsxs)(R.Z,{children:[(0,a.jsx)(f.Z,{fontSize:"16px",fontWeight:600,children:"Create custom settings"}),(0,a.jsx)(n5.h,{dark:!1,onClick:v,sx:{position:"absolute",top:{xs:4,md:10},right:{xs:4,md:10}}})]}),(0,a.jsx)(Z.Z,{sx:{width:"100%",height:"1px",backgroundColor:"rgba(68, 68, 68, 0.1)",marginTop:"20px"}}),(0,a.jsxs)(z.Z,{sx:{pt:"24px!important",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,a.jsx)(tB.Z,{className:"create-preset-input",label:"Custom settings name",size:"small",value:n,onChange:e=>r(e.target.value),variant:"outlined",fullWidth:!0,required:!0,error:l,helperText:l?"Preset name cannot be empty":"",inputProps:{maxLength:100},InputLabelProps:{sx:{fontSize:"12px",fontWeight:"400"}}}),(0,a.jsx)(Z.Z,{sx:{width:"100%",height:"1px",backgroundColor:"rgba(68, 68, 68, 0.1)",marginTop:"20px!important",marginBottom:"20px!important"}}),(0,a.jsx)(f.Z,{fontSize:"14px",fontWeight:600,children:"Settings"}),(0,a.jsx)(f.Z,{fontSize:"12px",fontWeight:400,color:"rgba(153, 153, 153, 1)",sx:{mb:2,mt:2},children:"The following settings will be saved as a template. Select which fields you want saved."}),(0,a.jsx)(nJ.Z,{children:(0,a.jsx)(G.ZP,{container:!0,spacing:2,children:Object.keys(x).filter(e=>null!=x[e]&&e in g).sort((e,t)=>{let i=g[e].sort;return g[t].sort-i}).filter(e=>x[e]).map(e=>(0,a.jsx)(G.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(o.Z,{direction:"column",sx:{width:"100%"},children:[(0,a.jsx)(n0.Z,{sx:{mb:.5,"& .MuiFormControlLabel-label":{fontSize:"14px",fontWeight:500}},control:(0,a.jsx)(n1.Z,{checked:j[e],onChange:()=>y(e),disabled:g[e].lock,size:"small"}),label:g[e].showName}),(0,a.jsx)(s.Z,{sx:{height:"36px",bgcolor:"action.hover",borderRadius:1,p:1,display:"flex",alignItems:"center","& > *":{maxWidth:"100%"},"& .MuiBox-root, & .MuiTypography-root":{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.4,fontSize:"13px",color:"text.secondary"},"& .MuiChip-root":{maxWidth:"100%",height:"24px"}},children:g[e].display(x[e])})]})},e))})})]}),(0,a.jsxs)(n2.Z,{children:[(0,a.jsx)(A.Z,{variant:"outlined",sx:{color:"rgba(153, 153, 153, 1)",fontSize:"12px",fontWeight:"600",borderRadius:"5px"},onClick:v,children:"Cancel"}),(0,a.jsx)(tx.Z,{loading:c,variant:"contained",sx:{color:"white",backgroundColor:"rgb(9, 41, 247)",fontSize:"12px",fontWeight:"600",borderRadius:"5px",":hover":{backgroundColor:"rgba(9, 41, 247, 0.8)"}},onClick:async()=>{await S()},children:"Create custom settings"})]})]})},an=e=>{let{id:t,name:i,value:n,icon:r,onClick:o,sx:l,canDelete:d,onDeletePreset:c,isMobile:h}=e;return(0,a.jsxs)(e$.Z,{value:n,onClick:o,sx:{"&.Mui-selected":{backgroundColor:"transparent!important"},"&:hover .delete-icon":{display:"block"}},children:[(0,a.jsx)(s.Z,{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",overflow:"hidden",width:"30px",height:"30px",bgcolor:"rgba(68, 68, 68, 1)",sx:{marginRight:"8px"},children:r}),(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:500,children:i}),(0,a.jsx)(s.Z,{sx:{flexGrow:1}}),d?(0,a.jsx)(n$.default,{sx:{color:"gray",display:h?"block":"none",cursor:"pointer",transition:"color 0.3s","&:hover":{color:"red"}},className:"delete-icon",fontSize:"small",onClick:e=>{e.stopPropagation(),c(t)}}):null]})};function aa(e){let{isEdited:t,openart_presets_list:i,myPresets:n,showModal:r,handlerClickPreset:o,onDeletePreset:l,onCreatePresetSuccess:d,currentPreset:c,isMobile:h,isFinetuned:u}=e,p=(null==c?void 0:c.preset_name)||"None";return(0,a.jsx)(s.Z,{sx:{width:"100%"},children:(0,a.jsx)(nX.Z,{fullWidth:!0,children:(0,a.jsxs)(eK.Z,{id:"grouped-select",sx:{height:"40px",width:"100%","& .MuiSelect-select":{backgroundColor:"transparent"}},value:p,renderValue:e=>{switch(e){case"None":case"Save current settings":return(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:500,children:"None"});default:return e+(t?" *":"")}},children:[(0,a.jsxs)(e$.Z,{onClick:e=>{if(t1.B("custom_settings_acted",{action:"initiated"}),e.stopPropagation(),u){(0,tT.QD)("Private models do not support saving settings.");return}r(ai,{onCreateSuccess:d})},sx:{color:"white",backgroundColor:"rgba(9, 41, 247, 1)!important","&:hover":{backgroundColor:"rgba(9, 41, 247, 0.8)!important"},borderRadius:"6px",marginLeft:"3px",marginRight:"3px"},children:[(0,a.jsx)(s.Z,{display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"30px",bgcolor:"transparent",sx:{marginRight:"8px"},children:(0,a.jsx)($.Z,{sx:{color:"white"},fontSize:"medium"})}),(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:500,children:"Save current settings"})]},"save-current-settings"),(0,a.jsx)(an,{name:"None",value:"None",icon:(0,a.jsx)(nq.Z,{sx:{color:"white"},fontSize:"small"}),onClick:()=>{o()}},"none"),n.length>0&&(0,a.jsx)(Z.Z,{}),n.length>0&&(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:800,sx:{marginLeft:"16px",marginTop:"10px",marginBottom:"5px",cursor:"pointer"},children:"Your settings"}),n.map(e=>(0,a.jsx)(an,{id:e.id,name:e.preset_name,value:e.preset_name,icon:(0,a.jsx)(es.QtS,{size:{xs:20,md:20}}),onClick:()=>{o(e)},canDelete:!0,onDeletePreset:l,sx:{marginBottom:"10px"},isMobile:h},e.id)),(0,a.jsx)(Z.Z,{}),(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:800,sx:{marginLeft:"16px",marginTop:"10px",marginBottom:"10px",cursor:"pointer"},children:"By OpenArt"}),i.map(e=>(0,a.jsx)(an,{id:e.id,name:e.preset_name,value:e.preset_name,icon:(0,a.jsx)("img",{src:e.preset_icon,alt:e.preset_name}),onClick:()=>{o(e)},canDelete:!1,isMobile:h},e.preset_name)),(0,a.jsx)("a",{href:"https://openart.ai/style-palettes",style:{color:"#09F",fontSize:"12px",fontWeight:500,marginLeft:"16px",marginTop:"10px",marginBottom:"5px",cursor:"pointer",textDecoration:"none",display:"block"},target:"_blank",onMouseEnter:e=>{e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},onMouseLeave:e=>{e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")},rel:"noreferrer",children:"View 100+ more style presets ->"})]})})})}let ar=e=>{let{openart_presets_list:t}=e,{showModal:i}=(0,M.dd)(),n=(0,nK.NL)(),{isMobile:r}=(0,m.j)(),s=(0,h.Bz)(e=>e.currentPreset),l=(0,h.Bz)(e=>e.setPreset),d=(0,h.Bz)(e=>e.presetIsEdit),{data:c}=n6(),[u]=n9(),p=(0,eF.aT)(),x=async e=>{p.confirm({title:"Warning",content:"Are you sure you want to delete this setting?",iconType:"warning",async onConfirm(){await u({preset_id:e}).then(()=>{e===(null==s?void 0:s.id)&&l(null),n.refetchQueries({queryKey:["useUserPresets"]})})},onCancel(){}})},g={isEdited:d,openart_presets_list:t,myPresets:(null==c?void 0:c.user_presets)??[],showModal:i,handlerClickPreset:l,onDeletePreset:x,onCreatePresetSuccess:e=>{l(e),n.refetchQueries({queryKey:["useUserPresets"]})},currentPreset:s,isMobile:r,isFinetuned:!1};return(0,a.jsx)(T,{className:"switch-model-accordion",defaultExpanded:!0,showExpandIcon:!1,expanded:!0,title:(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:"4px",children:[(0,a.jsx)(es.QtS,{size:{xs:20,md:16}}),(0,a.jsx)(f.Z,{variant:"editor-h3",children:"Custom Settings"})]}),content:(0,a.jsx)(aa,{...g}),tooltip:"Save and manage your own custom settings to quickly reuse your preferred settings like prompts, models, and aspect ratios any time.",sx:{"&::before":{content:"none"}}})},ao=e=>{let{bottomElement:t,defaultExpanded:i}=e,n=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),r=(0,h.TS)(e=>e.setPrompt),s="prompt.expanded",d=(0,h.TS)((0,l.N)(e=>e.getUiState(s,i))),c=(0,h.TS)(e=>e.initUiState),u=(0,h.TS)(e=>e.ensureUiState),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,w.useEffect)(()=>{c(s,i)},[]),(0,a.jsx)(N,{className:"prompt-accordion-form-item",label:"Prompt",defaultExpanded:!0,value:n,sx:{scrollMarginTop:eS.Sw},tooltip:(0,a.jsxs)(P.k5,{children:["The description of what you want to see in the image.",(0,a.jsx)("br",{}),"For more details see the",(0,a.jsx)(P.Tb,{text:" Prompt Book ",href:"/promptbook"}),".",(0,a.jsx)("br",{}),"Non-English prompts are automatically translated to English when you create."]}),expend:d,onExpendChange:e=>u(s,e),children:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(iI,{value:n,onChange:r,dealWithDisplayPrompt:e=>e,autoEnhance:p,onAutoEnhanceChange:x}),t]})})};var as=i(4425),al=i(2125);let ad=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),{mutateAsync:n,isLoading:r}=(0,nI.iT)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries([ir.uE]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])};return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),imageNum:p,onChangeImageNum:x,showEstimatedTime:!0,cost:as.o.dalle,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};function ac(e){let{value:t,onChange:i}=e,[n,r]=w.useState(null),o=()=>{r(null)},l=e=>{"clear"===e.value?i(""):(""===t&&i(e.value),""===t||t.includes(e.value)||i(`${t}, ${e.value}`)),o()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(A.Z,{variant:"outlined",onClick:e=>{r(e.currentTarget)},sx:{ml:"auto",p:"2px 4px",whiteSpace:"nowrap",fontSize:"12px",borderColor:eS.UX,borderRadius:eS.E0},children:[(0,a.jsx)(es.Zr,{size:13}),"Commonly-Used"]}),(0,a.jsx)(t3.ZP,{open:!!n,anchorEl:n,onClose:o,disableScrollLock:!0,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:(0,a.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:"12px",maxWidth:"480px",columnGap:"8px",rowGap:"12px"},children:al.SU.map((e,t)=>(0,a.jsx)(B.Z,{size:"small",label:e.label,onClick:()=>l(e),color:"clear"===e.value?"default":e.color,variant:"clear"===e.value?"outlined":"contained",onDelete:"clear"===e.value?()=>l(e):null},`chip-${t}`))})})]})}let ah=e=>{let{value:t,onChange:i}=e,n="23px",r=`calc(${n} * 1)`,[o,s]=(0,w.useState)(r);return(0,w.useEffect)(()=>{s("unset")},[]),(0,a.jsx)(tB.Z,{InputProps:{slotProps:{input:{sx:{lineHeight:n,minHeight:r,maxHeight:o}}}},sx:{marginTop:1,"& > .MuiInputBase-multiline":{p:"10px 12px"}},size:"small",multiline:!0,fullWidth:!0,value:t,onChange:e=>i(e.target.value)})},au=e=>{let{value:t,onChange:i}=e,n="23px",r=`calc(${n} * 1)`,[o,s]=(0,w.useState)(r);return(0,w.useEffect)(()=>{s("unset")},[]),(0,a.jsx)(tB.Z,{InputProps:{slotProps:{input:{sx:{lineHeight:n,minHeight:r,maxHeight:o}}}},sx:{marginTop:3,"& > .MuiInputBase-multiline":{p:"10px 12px"}},size:"small",placeholder:"Anything you’d like to exclude?",multiline:!0,fullWidth:!0,value:t,onChange:e=>i(e.target.value)})};var ap=i(59418);let ax=e=>(0,a.jsx)(eH,{label:"Have a Seed",tooltip:"A number that determines the initial noise. The same seed usually generates a similar style.",extra:(0,a.jsx)(ap.dp,{...e}),children:(0,a.jsx)(ap.Y_,{...e})}),am=e=>{let{name:t,value:i}=e,n=`${t}.enable`,r=(0,h.TS)((0,l.N)(e=>e.getUiState(n,!0))),s=(0,h.TS)(e=>e.initUiState),d=(0,h.TS)(e=>e.setFluxDevReferenceEnable);return(0,w.useEffect)(()=>{s(n,!0)},[]),("string"==typeof i?i:Array.isArray(i)?i.length>0:"image_url"in i&&i.image_url)?(0,a.jsx)(o.Z,{direction:"row",spacing:.5,alignItems:"center",children:(0,a.jsx)(t0.r,{checked:r,inputProps:{"aria-label":"ant design"},onChange:e=>{e.stopPropagation(),d(n,e.target.checked)},onClick:e=>{e.stopPropagation()}})}):null},ag={display:"flex",flexDirection:"column",justifyContent:"space-between"},aj=e=>{let t=(0,h.TS)((0,l.N)(e=>e.getParameterValue("type"))),i=(0,h.TS)((0,l.N)(e=>e.getParameterValue("imageReference"))),n=(0,h.TS)(e=>e.setFluxDevReference),r=(0,h.TS)(e=>e.ensureUiState),o=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.subject.expanded",!1))),s=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.pose.expanded",!1))),d=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.composition.expanded",!1))),c=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.sketch.expanded",!1)));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iz,{className:"image-reference-subject-accordion-item",startIcon:es.tPR,label:"Subject/Face Reference",isNew:!0,value:i.getTypeValue("subject"),expend:o,onExpendChange:e=>r("imageReference.subject.expanded",e),extra:(0,a.jsx)(am,{name:"imageReference.subject",value:i.getTypeValue("subject")}),sx:ag,children:(0,a.jsx)(nk,{hideInfluenceStrength:!0,banner:"Subject Reference",value:i.getTypeValue("subject"),onChange:e=>n({data:e,...e1.m[t]})})}),(0,a.jsx)(iz,{className:"image-reference-pose-accordion-item",startIcon:es.J8O,label:"Pose Reference",value:i.getTypeValue("pose"),extra:(0,a.jsx)(am,{name:"imageReference.pose",value:i.getTypeValue("pose")}),sx:ag,expend:s,onExpendChange:e=>r("imageReference.pose.expanded",e),children:(0,a.jsx)(nP,{value:i.getTypeValue("pose"),onChange:e=>n({data:e,...e1.m[t]})})}),(0,a.jsx)(iz,{className:"image-reference-composition-accordion-item",startIcon:es.G_G,label:"Composition Reference",value:i.getTypeValue("composition"),expend:d,onExpendChange:e=>r("imageReference.composition.expanded",e),extra:(0,a.jsx)(am,{name:"imageReference.composition",value:i.getTypeValue("composition")}),sx:ag,children:(0,a.jsx)(nk,{banner:"Composition Reference",value:i.getTypeValue("composition"),onChange:e=>n({data:e,...e1.m[t]})})}),(0,a.jsx)(iz,{startIcon:es.zOx,className:"image-reference-sketch-accordion-item",label:"Sketch Reference",value:i.getTypeValue("sketch"),extra:(0,a.jsx)(am,{name:"imageReference.sketch",value:i.getTypeValue("sketch")}),expend:c,onExpendChange:e=>r("imageReference.sketch.expanded",e),sx:ag,children:(0,a.jsx)(nk,{banner:"Sketch Reference",value:i.getTypeValue("sketch"),onChange:e=>n({data:e,...e1.m[t]})})})]})},af=e=>{let{name:t,value:i}=e,n=`${t}.enable`,r=(0,h.TS)((0,l.N)(e=>e.getUiState(n,!0))),s=(0,h.TS)(e=>e.initUiState),d=(0,h.TS)(e=>e.ensureUiState);return(0,w.useEffect)(()=>{s(n,!0)},[]),(0,w.useMemo)(()=>"string"==typeof i?i:"pose_image"in i&&!!i.pose_image||"image_url"in i&&!!i.image_url||!!Array.isArray(i)&&i.length>0,[i])?(0,a.jsx)(o.Z,{direction:"row",spacing:.5,alignItems:"center",children:(0,a.jsx)(t0.r,{checked:r,inputProps:{"aria-label":"ant design"},onChange:e=>{e.stopPropagation(),d(n,e.target.checked)},onClick:e=>{e.stopPropagation()}})}):null},ab=()=>{let e=(0,h.TS)((0,l.N)(e=>e.getParameterValue("type"))),t=(0,h.TS)((0,l.N)(e=>e.getParameterValue("image_url"))),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("strength"))),r=(0,h.TS)(e=>e.setImageUrl),s=(0,h.TS)(e=>e.setPrompt),d=(0,h.TS)(e=>e.ensureUiState);return(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(n_,{value:t,uploadUrl:"/media/upload_raw_image",onChange:t=>r({...t,...e1.m[e]})}),(0,a.jsx)(nM,{uploadedImgUrl:t,onChange:s,viewPrompt:()=>{var e;null===(e=document.querySelector(".prompt-accordion-form-item"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"}),d("prompt.expanded",!0)}}),(0,a.jsx)(b.Z,{severity:"info",children:"Output will match uploaded image’s aspect ratio"}),(0,a.jsx)(tg.X9,{showResult:!0,min:.1,max:1,step:.01,value:i,onChange:n,label:"Creativity level",tipText:"The higher this number is, the more creative AI is and less similar the output image is to the original image."})]})},av=()=>{let e=(0,h.TS)((0,l.N)(e=>e.getParameterValue("image_url"))),t=(0,h.TS)((0,l.N)(e=>e.getUiState("image_url.expanded",!1))),i=(0,h.TS)(e=>e.ensureUiState);return(0,a.jsx)(iz,{value:e,defaultExpanded:!1,className:"image-to-image-accordion-item",startIcon:es.L3Q,label:"Image to Image",extra:(0,a.jsx)(af,{name:"image_url",value:e}),sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",scrollMarginTop:eS.Sw},expend:t,onExpendChange:e=>i("image_url.expanded",e),children:(0,a.jsx)(ab,{})})},aS=[{ratio:"1:1",name:"Square"},{ratio:"16:9",name:"Cinema"},{ratio:"5:4",name:"Art print"},{ratio:"3:2",name:"Landscape"},{ratio:"2:3",name:"Tablet"},{ratio:"4:5",name:"Vertical"},{ratio:"9:16",name:"Portrait"}],aw=e=>{let t=(0,w.useRef)(null),[i]=(0,x.y)({key:"create.config.outputSize"}),n=(0,h.TS)((0,l.N)(e=>e.getParameterValue("type"))),{maxHeight:r,maxWidth:s,minHeight:d,minWidth:c}=e1.m[n],u="aspect_ratio",p="aspect_ratio:tip",m="aspect_ratio:lock",g=(0,h.TS)((0,l.N)(e=>e.getUiState(u,"Default"))),j=(0,h.TS)((0,l.N)(e=>e.getUiState(p,!1))),f=(0,h.TS)((0,l.N)(e=>e.getUiState(m,!1))),v=(0,h.TS)(e=>e.initUiState),S=(0,h.TS)(e=>e.setUiState);(0,w.useEffect)(()=>{v(u,"Default"),v(p,!1),v(m,!1)},[]);let y=(0,h.TS)((0,l.N)(e=>e.getParameterValue("height"))),C=(0,h.TS)((0,l.N)(e=>e.getParameterValue("width"))),Z=(0,h.TS)(e=>e.setAspectRatio),_=(0,h.TS)(e=>e.setImageSize),k=e=>{if(f&&"Default"!==g){let a=aS.find(e=>e.ratio===g);if(a){var i,n;let[o,l]=a.ratio.split(":").map(Number),h=o/l;if("width"in e){let n=Math.min(Math.max(e.width,c),s),a=Math.round(n/h);if(a<d||a>r){null===(i=t.current)||void 0===i||i.animateLockIcon(),_({width:Math.min(Math.max(Math.round((a=Math.min(Math.max(a,d),r))*h),c),s),height:a,maxHeight:r,maxWidth:s,minHeight:d,minWidth:c,keepAspectRatio:!0});return}_({width:n,height:a,maxHeight:r,maxWidth:s,minHeight:d,minWidth:c,keepAspectRatio:!0});return}if("height"in e){let i=Math.min(Math.max(e.height,d),r),a=Math.round(i*h);if(a<c||a>s){null===(n=t.current)||void 0===n||n.animateLockIcon();let e=Math.round((a=Math.min(Math.max(a,c),s))/h);_({width:a,height:Math.min(Math.max(e,d),r),maxHeight:r,maxWidth:s,minHeight:d,minWidth:c,keepAspectRatio:!0});return}_({width:a,height:i,maxHeight:r,maxWidth:s,minHeight:d,minWidth:c,keepAspectRatio:!0});return}}}_({height:y,width:C,...e,maxHeight:r,maxWidth:s,minHeight:d,minWidth:c})};return(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eH,{children:(0,a.jsx)(eJ,{ref:t,aspectRatios:aS,value:g,showLock:!0,lock:f,setLock:e=>{S(m,e)},onChange:e=>{let{width:t,height:i}=e2(e,s,r,c,d);Z({ratio:e,height:i,width:t})},disabled:!i})}),(0,a.jsx)(eH,{showValue:!0,value:C,children:(0,a.jsx)(e0.A,{label:"Width",min:c,unit:"px",step:8,max:s,value:C,onChange:e=>k({width:e}),disabled:!i})}),(0,a.jsx)(eH,{showValue:!0,value:y,children:(0,a.jsx)(e0.A,{label:"Height",unit:"px",step:8,min:d,max:r,value:y,onChange:e=>k({height:e}),disabled:!i})}),(0,a.jsx)(eW.Z,{in:j,unmountOnExit:!0,children:(0,a.jsx)(b.Z,{severity:"info",children:"The image may look bad with small sizes."})}),i?null:(0,a.jsx)(eL.Y,{feature:"to set custom image size"})]})},ay=e=>{let[t]=(0,x.y)({key:"create.config.upscaleMode.x2"}),i=(0,h.TS)((0,l.N)(e=>e.getParameterValue("upscale_mode"))),n=(0,h.TS)(e=>e.setUpscaleMode),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("height"))),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("width"))),s=(0,h.TS)((0,l.N)(e=>e.getParameterValue("image_url")));return(0,a.jsx)(eH,{children:(0,a.jsx)(nb.S,{value:i,onChange:e=>n(e),haveImageUrl:!!s,height:r,width:o,disabled:!t,...(null==e?void 0:e.UpscaleAEnhanceProps)??{}})})},aC=e=>{let{buttonContent:t,collapseContent:i,open:n,onClick:r}=e;return(0,a.jsxs)(o.Z,{children:[n?null:(0,a.jsx)(s.Z,{sx:{cursor:"pointer"},onClick:()=>{null==r||r(!n)},children:t}),(0,a.jsx)(t9.Z,{in:n,sx:{"&.MuiCollapse-vertical":{mt:"0"}},children:i})]})},aZ=()=>{let e=(0,e7.B)(),{isAuthenticated:t}=(0,c.T)(),[i,n]=(0,e3.L)(),r=eG((0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt")))).prompt,o=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),s=(0,h.TS)((0,l.N)(e=>e.computedImageCost())),d=(0,h.TS)(e=>e.getValues),[u,p]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,h.TS)(e=>e.computedImageNumInputDisable()),m=(0,h.TS)(e=>e.key),g=async()=>{let e=d();await i(e)};return(0,a.jsx)(eB.X,{className:"create-config-button",disable:!!t&&o(),imageNum:u,imageInputDisabled:x,onChangeImageNum:p,maxImageNumForFreeUser:4,showEstimatedTime:!0,estimatedTimeModel:m,cost:s,loading:n,onSubmit:()=>{e({onAuthenticated:g,additionalParams:{prompt:r}})},sx:{padding:{xs:"16px",md:"10px"}}})},a_=()=>{let e=(0,e7.B)(),{isAuthenticated:t}=(0,c.T)(),[i,n]=(0,e3.L)(),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),o=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),s=(0,h.TS)((0,l.N)(e=>e.computedImageCost())),d=(0,h.TS)(e=>e.getValues),[u,p]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,h.TS)(e=>e.key),m=async()=>{let e=d();await i(e)};return(0,a.jsx)(eB.X,{className:"create-config-button",disable:!!t&&o(),maxImageNumForFreeUser:4,imageNum:u,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,estimatedTimeModel:x,cost:s,loading:n,onSubmit:()=>{e({onAuthenticated:m,additionalParams:{prompt:eG(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var ak=i(87931);let aP=[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"1024x1024",title:"Square (1024\xd71024)",subtitle:"1:1 ratio"},{value:"1536x1024",title:"Landscape (1536\xd71024)",subtitle:"3:2 ratio"},{value:"1024x1536",title:"Portrait (1024\xd71536)",subtitle:"2:3 ratio"}],aT={"1024x1024":{width:1024,height:1024},"1536x1024":{width:1536,height:1024},"1024x1536":{width:1024,height:1536},auto:{width:1024,height:1024}},aE=e=>{let{width:t,height:i}=e,n=t/i;return(0,a.jsx)(o.Z,{justifyContent:"center",alignItems:"center",sx:{width:18,height:18,mr:1},children:(0,a.jsx)(s.Z,{sx:{boxSizing:"border-box",border:"2px solid white",width:n>1?"100%":`${18*n}px`,height:n>1?`${18/n}px`:"100%"}})})},aN=e=>{let{predefinedSizes:t=aP,sizeMappings:i=aT,showTitle:n=!0,delimiter:r="x"}=e,[s]=(0,x.y)({key:"create.config.outputSize"}),[d,c]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio")));return(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[n?(0,a.jsx)(f.Z,{variant:"editor-label1",whiteSpace:"nowrap",children:"Size"}):null,(0,a.jsx)(eK.Z,{size:"small",disabled:!s,value:d,onChange:e=>{s&&c(e.target.value)},sx:{my:1,width:"100%"},children:t.map(e=>{let t=i[e.value];if(!t){let[i,n]=e.value.split(r).map(Number);t={width:i,height:n}}let n=t&&t.width&&t.height;return(0,a.jsx)(e$.Z,{value:e.value,children:(0,a.jsxs)(o.Z,{width:"100%",direction:"row",alignItems:"center",children:[n?(0,a.jsx)(aE,{width:t.width,height:t.height}):null,(0,a.jsx)(f.Z,{variant:"editor-span1",children:e.title})]})},e.value)})})]}),s?null:(0,a.jsx)(eL.Y,{feature:"to set image size"})]})};var aI=i(86180),aA=i(50272),aM=i(25110),aU=i(84625),aR=i(93001);let az="upload-image-in-video-button",aD=(0,w.forwardRef)((e,t)=>{let{error:i,file:n,isUploading:r,caption:o,sx:l,dropZoneSx:d,bordered:c,title:h="Click or drag a photo to upload",zoomable:u,deletable:p,onDelete:x,onDrop:m,onChange:j,multiple:b,disabled:v=!1,accept:S,showIcon:y=!0,buttonVariant:C,onAreaClick:Z,..._}=e,P=(0,k.Z)(),{getRootProps:T,getInputProps:E,isDragActive:N,isDragReject:I,fileRejections:A,inputRef:M}=(0,aU.uI)({multiple:b,accept:S??{"image/png":[],"image/jpeg":[],"image/webp":[],"image/gif":[],"image/svg+xml":[],"image/apng":[],"image/avif":[],"image/bmp":[]},onDrop:e=>{e.length>0?null==j||j(b?e:e[0]):null==j||j(null),null==m||m(e)},disabled:v,noClick:!!Z,..._}),U=T(),R=()=>{M.current&&M.current.click()};(0,w.useImperativeHandle)(t,()=>({triggerInputClick:R}));let[z,D]=(0,w.useState)(!1),V=e=>{D(e)},F=e=>{if(!Z)return;let t=e.target,i=!1;for(;t&&t!==e.currentTarget;){if(t.classList.contains(az)){i=!0;break}t=t.parentElement}i||Z(e)},B=n&&(n.preview||(n.file?URL.createObjectURL(n.file):"")),O={display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",color:P.palette.text.secondary,backgroundColor:C?null:P.palette.background.neutral,transition:P.transitions.create("opacity",{duration:P.transitions.duration.shorter}),"&:hover":{opacity:C&&!n?1:.72},...n&&{opacity:0,color:"common.white",bgcolor:"grey.900","&:hover":{opacity:.72}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Z,{sx:(0,g.j)({width:144,height:144,margin:"auto",borderRadius:"50%",padding:P.spacing(1),position:"relative",border:!1===c?"none":`1px dashed ${P.palette.grey[50032]}`},l),children:[r?(0,a.jsx)(s.Z,{sx:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:9999,color:"white"},children:(0,a.jsx)(tj.Z,{})}):null,(0,a.jsxs)(s.Z,{...U,onClick:Z?F:U.onClick,onContextMenu:Z?F:void 0,sx:{zIndex:0,width:"100%",height:"100%",outline:"none",display:"flex",overflow:"hidden",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center",[`& > *:not(.${az})`]:{width:"100%",height:"100%"},"&:hover":{cursor:"pointer","& .placeholder":{zIndex:9}},...N&&{opacity:.72},...(I||i)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"},...d},children:[(0,a.jsx)("input",{...E()}),n?u?(0,a.jsx)(s.Z,{onClick:e=>e.stopPropagation(),sx:{"&>div, &>div>div, & img":{height:"100%",width:"100%"}},children:(0,a.jsx)(aR.f,{zoomMargin:20,isZoomed:z,onZoomChange:V,children:(0,a.jsx)(s.Z,{component:"img",alt:"avatar",src:B,sx:{zIndex:8,objectFit:"contain"}})})}):(0,a.jsx)(s.Z,{component:"img",alt:"avatar",src:B,sx:{zIndex:8,objectFit:"contain"}}):null,(0,a.jsx)(s.Z,{className:"placeholder",sx:O,children:h}),n&&u?(0,a.jsx)(s.Z,{className:az,sx:{position:"absolute",top:4,right:4,zIndex:1e3,background:"rgba(0,0,0,0.5)",width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:1},onClick:e=>{e.stopPropagation(),V(!0)},children:(0,a.jsx)(aA.Z,{})}):null,n&&p?(0,a.jsx)(s.Z,{className:az,sx:{position:"absolute",top:4,right:40,zIndex:1e3,background:"rgba(0,0,0,0.5)",width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:1},onClick:e=>{e.stopPropagation(),null==x||x(),null==j||j(null)},children:(0,a.jsx)(aI.Z,{})}):null]})]}),o,A.length>0&&(0,a.jsx)(tQ.Z,{variant:"outlined",sx:{py:1,px:2,my:2,borderColor:"error.light",bgcolor:e=>(0,aM.Fq)(e.palette.error.main,.08)},children:A.map(e=>{let{file:t,errors:i}=e,{name:n}=t;return(0,a.jsxs)(s.Z,{sx:{my:1},children:[(0,a.jsx)(f.Z,{variant:"subtitle2",noWrap:!0,children:n}),i.map(e=>(0,a.jsxs)(f.Z,{variant:"caption",component:"p",children:["- ",e.message]},e.code))]},n)})})]})});aD.displayName="UploadAvatar";var aV=i(15349);let aF=(0,a.jsxs)(o.Z,{justifyContent:"center",alignItems:"center",spacing:1,children:[(0,a.jsx)(es.yjM,{size:32}),(0,a.jsxs)(f.Z,{fontSize:12,fontWeight:500,color:aV.d6,align:"center",children:["Drag & drop a image",(0,a.jsx)("br",{}),"Or from Generation History"]})]}),aB=async()=>({}),aO=e=>{let{height:t=148,disabled:i,value:n,uploadUrl:r,onChange:o,onSelectImage:l=aB,title:d=aF}=e,c=(0,e7.B)(),[h,u]=(0,w.useState)(null),[p,x]=(0,w.useState)(!1),[m,g]=(0,w.useState)(""),j=(0,w.useRef)(null),b=async e=>{g("");try{let t=e[0];if(!t)return;let i=URL.createObjectURL(t);if(t){u({...t,preview:i}),x(!0);let e=new FormData;e.append("file",t);let n=await io.ZP.post(r,e,{headers:{"Content-Type":"multipart/form-data"}});200===n.status&&n.data&&o(n.data)}}catch(i){let e=i.message||"An error occurred while uploading the image";if(i instanceof nw.AxiosError){var t;let n=null===(t=i.response)||void 0===t?void 0:t.data;"string"==typeof n?e=n:(null==n?void 0:n.message)&&(e=n.message)}g(e)}finally{x(!1)}},{UploadContextMenu:v,handleMenuOpen:S}=(0,nZ.w)({onChange:async e=>{if(e&&e.length>0&&!i)try{g(""),x(!0),u({preview:e[0]});let t=await (null==l?void 0:l(e[0])),i={imageUrl:e[0],height:0,width:0,...t},n=new Image;n.addEventListener("load",()=>{i.height=n.height,i.width=n.width,o(i),x(!1)}),n.addEventListener("error",()=>{g("Failed to load image dimensions"),x(!1)}),n.src=e[0]}catch{g("Failed to process image from history"),x(!1)}},onClickUpload:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.triggerInputClick()},maxSelectionCount:1,showCharacter:!0});return(0,w.useEffect)(()=>{n?u({preview:n}):u(null)},[n]),(0,a.jsxs)(s.Z,{sx:{borderRadius:aV.zO,border:"1px dashed #464749",position:"relative"},children:[(0,a.jsx)(aD,{ref:j,disabled:i,buttonVariant:!0,sx:{width:"100%",height:t,border:"none",backgroundColor:"transparent",borderRadius:1,margin:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},dropZoneSx:{borderRadius:.5,width:"100%",padding:0},file:h,isUploading:p,maxSize:10485760,onDrop:b,onAreaClick:i?void 0:e=>c({onAuthenticated:S,e}),title:d,accept:{"image/png":[],"image/jpeg":[],"image/webp":[]},caption:(()=>{if(m)return(0,a.jsx)(f.Z,{variant:"caption",sx:{margin:"8px 0"},color:"error.main",children:m})})()}),v,h&&!p?(0,a.jsx)(tz.Z,{title:"Delete the image",icon:es.Xm5,iconSize:20,sx:{position:"absolute",top:8,right:8,cursor:"pointer"},onClick:()=>{u(null),o(null)}}):null]})},aW=e=>{let{value:t,onChange:i,sx:n}=e,r=(e,n)=>{let a=[...t||[]];a[e]=n,i(a)},l=t&&t.some(e=>!!e);return(0,a.jsx)(o.Z,{sx:{backgroundColor:aV.P,borderRadius:aV.zO,p:2,gap:2,...n},children:(0,a.jsx)(s.Z,{sx:{display:"grid",gridTemplateColumns:l?"repeat(2, 1fr)":"1fr",gap:1},children:l?[0,1,2,3].map(e=>(0,a.jsx)(s.Z,{sx:{borderRadius:aV.zO,overflow:"hidden",backgroundColor:aV.hb,cursor:"pointer",position:"relative",height:80},children:(0,a.jsx)(aO,{height:80,value:(null==t?void 0:t[e])||void 0,onChange:t=>{r(e,(null==t?void 0:t.imageUrl)||"")},uploadUrl:"/media/upload_image",title:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"center",alignItems:"center",spacing:1,children:[(0,a.jsx)(es.ZMD,{size:24}),(0,a.jsx)(es.rYO,{size:24}),(0,a.jsx)(es.D6p,{size:24})]})})},e)):(0,a.jsx)(s.Z,{sx:{borderRadius:aV.zO,overflow:"hidden",backgroundColor:aV.hb,cursor:"pointer",position:"relative"},children:(0,a.jsx)(aO,{value:void 0,onChange:e=>{(null==e?void 0:e.imageUrl)&&r(0,e.imageUrl)},uploadUrl:"/media/upload_image",title:(0,a.jsxs)(o.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:1,sx:{width:"100%"},children:[(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"center",alignItems:"center",spacing:1,children:[(0,a.jsx)(es.ZMD,{size:24}),(0,a.jsx)(es.rYO,{size:24}),(0,a.jsx)(es.D6p,{size:24})]}),(0,a.jsx)(f.Z,{color:aV.d6,fontSize:12,children:"Drag & drop up to 4 images"}),(0,a.jsx)(f.Z,{color:aV.b5,fontSize:12,textAlign:"center",children:"Use up to 4 Backgrounds, characters or items, and combine them freely"})]})})})})})};var aL=i(55913);let aG={display:"flex",flexDirection:"column",justifyContent:"space-between"},aH=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),[n,r]=(0,e3.L)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])},j=(0,h.TS)((0,l.N)(e=>e.computedImageCost()));return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),imageNum:p,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:x,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},aK={display:"flex",flexDirection:"column",justifyContent:"space-between"},a$=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),[n,r]=(0,e3.L)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])},j=(0,h.TS)((0,l.N)(e=>e.computedImageCost()));return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),imageNum:p,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:x,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},aq=()=>{let e="outputSizeKey",t=(0,h.TS)(t=>t.getUiState(e,!1)),i=(0,h.TS)(e=>e.ensureUiState),n="advance-settings-accordion.expanded",r=(0,h.TS)(e=>e.getUiState(n,!1)),s="image-guidance-accordion.expanded",d=(0,h.TS)(e=>e.getUiState(s,!0));(0,w.useEffect)(()=>{i(e,!0)},[]);let[c]=(0,x.y)({key:"create.config.imageGuidance"}),[p,m]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_urls"))),g=(0,h.TS)((0,l.N)(e=>e.getUiState("image_urls.expanded",!0))),f=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),v=(0,h.TS)(e=>e.setSteps),S=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),y=(0,h.TS)(e=>e.setSeed),C=(0,L.useRouter)(),_=(0,h.TS)(e=>e.updateActiveModel),k=async e=>{e.preventDefault();try{let e=await (0,ev.jE)("Flux_dev");if(e){let t=(0,W.J)({pageMode:u.V.CREATE,config:e});_(t)}setTimeout(()=>{C.replace({query:{...(0,H.Z)(C.query,"finetuned_model"),ai_model:"Flux_dev"}},void 0,{shallow:!0})},200)}catch(e){console.error("Failed to switch to Flux_dev model:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:d,onClick:e=>i(s,e),title:"Image Guidance",tooltip:iR,content:c?(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(iz,{className:"image-to-image-accordion-item",startIcon:aL.Z,label:"Omni Reference",value:p,expend:g,onExpendChange:e=>i("image_urls.expanded",e),extra:(0,a.jsx)(af,{name:"image_urls",value:p}),sx:aK,children:(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(aW,{value:p,onChange:m,sx:{p:1}}),(0,a.jsx)(b.Z,{severity:"info",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"https://openart.ai/fluxkontextbook",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Learn more"})," ","how to use Omni reference. To iteratively edit, use"," ",(0,a.jsx)("a",{href:"https://openart.ai/create?mode=chat_to_edit",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Chat to Edit"}),". For classic img2img, select"," ",(0,a.jsx)("a",{style:{textDecoration:"underline",cursor:"pointer"},onClick:k,children:"Flux dev"}),"."]})})]})})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(aN,{delimiter:":",predefinedSizes:[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"1:1",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"16:9",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"5:4",title:"Art Print (5:4)",subtitle:"5:4 ratio"},{value:"4:3",title:"Classic (4:3)",subtitle:"4:3 ratio"},{value:"3:2",title:"Photo (3:2)",subtitle:"3:2 ratio"},{value:"2:3",title:"Book (2:3)",subtitle:"2:3 ratio"},{value:"3:4",title:"Portrait (3:4)",subtitle:"3:4 ratio"},{value:"4:5",title:"Vertical (4:5)",subtitle:"4:5 ratio"},{value:"9:16",title:"Mobile (9:16)",subtitle:"9:16 ratio"},{value:"21:9",title:"Ultrawide (21:9)",subtitle:"21:9 ratio"},{value:"16:21",title:"Tall (16:21)",subtitle:"16:21 ratio"}]})}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(ax,{value:S,onChange:y}),(0,a.jsx)(tR,{min:1,max:150,value:f,onChange:v}),(0,a.jsx)(ay,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(a$,{})]})]})},aX={display:"flex",flexDirection:"column",justifyContent:"space-between"},aY=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),[n,r]=(0,e3.L)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])},j=(0,h.TS)((0,l.N)(e=>e.computedImageCost()));return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),imageNum:p,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:x,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var aQ=i(4282);let aJ=e=>{let{value:t,onChange:i}=e;return(0,a.jsx)(aQ.i,{leftValue:!0,leftLabel:"On",rightValue:!1,rightLabel:"Off",value:t,onChange:i})},a0=()=>{let[e,t]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_upsampling")));return(0,a.jsx)(eH,{label:"Prompt Optimizer",tooltip:(0,a.jsx)(P.k5,{children:"Enable prompt optimizer to enhance generation creativity. Avoid using with already enhanced prompts, as this may produce unpredictable results."}),children:(0,a.jsx)(aJ,{value:e,onChange:t})})},a1=()=>{let e=(0,e7.B)(),{isAuthenticated:t}=(0,c.T)(),[i,n]=(0,e3.L)(),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),o=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),s=(0,h.TS)((0,l.N)(e=>e.computedImageCost())),d=(0,h.TS)(e=>e.getValues),[u,p]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,h.TS)(e=>e.key),m=async()=>{let e=d();await i(e)};return(0,a.jsx)(eB.X,{maxImageNumForFreeUser:4,className:"create-config-button",disable:!!t&&o(),imageNum:u,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,estimatedTimeModel:x,cost:s,loading:n,onSubmit:()=>{e({onAuthenticated:m,additionalParams:{prompt:eG(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var a2=i(9094);let a5=e=>{let{enableEnhance:t=["face","anime"]}=e,[i]=(0,x.y)({key:"create.config.upscaleMode.x2"}),n=(0,h.TS)((0,l.N)(e=>e.getParameterValue("upscale_mode"))),r=(0,h.TS)(e=>e.setUpscaleMode),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("height"))),s=(0,h.TS)((0,l.N)(e=>e.getParameterValue("width")));return(0,a.jsx)(eH,{children:(0,a.jsx)(nb.S,{value:n,onChange:e=>r(e),haveImageUrl:!1,height:o,width:s,disabled:!i,enableEnhance:t})})},a4=[{value:"low",title:"Low",subtitle:"Faster generation with lower quality"},{value:"medium",title:"Medium",subtitle:"Balanced quality and speed"},{value:"high",title:"High",subtitle:"Higher quality with slower generation"}],a3=e=>{let{qualityOptions:t=a4,featureKey:i="create.config.outputSize",showTitle:n=!0}=e,[r]=(0,x.y)({key:i}),[s,d]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("quality",{processFeatureKey:(e,t)=>({...e,quality:[`create.config.quality.${t}`]})})));return(0,w.useEffect)(()=>{d(s)},[]),(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[n?(0,a.jsx)(f.Z,{variant:"editor-label1",whiteSpace:"nowrap",children:"Quality"}):null,(0,a.jsx)(eK.Z,{size:"small",disabled:!r,value:s||"auto",onChange:e=>{r&&d(e.target.value)},sx:{my:1,width:"100%"},children:t.map(e=>(0,a.jsx)(e$.Z,{value:e.value,children:(0,a.jsx)(o.Z,{width:"100%",direction:"row",alignItems:"center",children:(0,a.jsx)(f.Z,{variant:"editor-span1",children:e.title})})},e.value))})]}),r?null:(0,a.jsx)(eL.Y,{feature:"to set quality"})]})},a6={display:"flex",flexDirection:"column",justifyContent:"space-between"},a8=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),[n,r]=(0,e3.L)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])},j=(0,h.TS)((0,l.N)(e=>e.computedImageCost()));return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),maxImageNumForFreeUser:4,imageNum:p,imageNumberMax:4,onChangeImageNum:x,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},a9=e=>{let{options:t}=e,[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("mode")));return(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(f.Z,{variant:"editor-label1",whiteSpace:"nowrap",children:"Mode"}),(0,a.jsx)(eK.Z,{size:"small",value:i,onChange:e=>{n(e.target.value)},sx:{my:1,width:"100%"},children:t.map(e=>(0,a.jsx)(e$.Z,{value:e.value,children:(0,a.jsx)(o.Z,{width:"100%",direction:"row",alignItems:"center",children:(0,a.jsx)(f.Z,{variant:"editor-span1",children:e.title})})},e.value))})]})})},a7=[{value:"HiDream_I1_Full",title:"Full"},{value:"HiDream_I1_Dev",title:"Dev"},{value:"HiDream_I1_Fast",title:"Fast"}],re=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),[n,r]=(0,e3.L)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])},j=(0,h.TS)((0,l.N)(e=>e.computedImageCost()));return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),imageNum:p,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:x,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},rt=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),[n,r]=(0,e3.L)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])},j=(0,h.TS)((0,l.N)(e=>e.computedImageCost()));return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),maxImageNumForFreeUser:4,imageNum:p,imageNumberMax:4,onChangeImageNum:x,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},ri=[{value:"1:1",title:"1:1"},{value:"9:16",title:"9:16"},{value:"16:9",title:"16:9"},{value:"3:4",title:"3:4"},{value:"4:3",title:"4:3"}],rn={"1:1":{width:1024,height:1024},"9:16":{width:1024,height:1920},"16:9":{width:1920,height:1080},"3:4":{width:1024,height:1365},"4:3":{width:1365,height:1024}},ra=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),[n,r]=(0,e3.L)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])},j=(0,h.TS)((0,l.N)(e=>e.computedImageCost()));return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),imageNum:p,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:x,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},rr=()=>{let e=(0,e7.B)(),{isAuthenticated:t}=(0,c.T)(),[i,n]=(0,e3.L)(),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),o=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),s=(0,h.TS)((0,l.N)(e=>e.computedImageCost())),d=(0,h.TS)(e=>e.getValues),[u,p]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,h.TS)(e=>e.key),m=async()=>{let e=d();await i(e)};return(0,a.jsx)(eB.X,{className:"create-config-button",disable:!!t&&o(),maxImageNumForFreeUser:4,imageNum:u,onChangeImageNum:p,showEstimatedTime:!0,estimatedTimeModel:x,cost:s,loading:n,onSubmit:()=>{e({onAuthenticated:m,additionalParams:{prompt:eG(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},ro=e=>{let{options:t,value:i,onChange:n}=e;return(0,a.jsx)(eK.Z,{size:"small",value:i,onChange:e=>{n(e.target.value)},sx:{mt:"8px!important"},children:t.map(e=>(0,a.jsx)(e$.Z,{value:e.value,children:e.label},e.value))})};var rs=i(74701);let rl=e=>{let{value:t,onChange:i,disabled:n}=e;return(0,a.jsx)(n0.Z,{labelPlacement:"start",label:(0,a.jsx)(P.ZP,{title:(0,a.jsx)(rd,{}),anchor:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Seamless Tiling"})}),control:(0,a.jsx)(rs.Z,{color:"info",disabled:n,onChange:e=>{i(e.target.checked)},checked:t??!1,value:t??!1}),sx:{justifyContent:"space-between"}})},rd=w.memo(function(e){let{}=e;return(0,a.jsxs)(s.Z,{sx:{width:"550px",p:1},children:[(0,a.jsx)(f.Z,{variant:"body2",sx:{mb:2},children:"Toggle on to create tileable textures and seamless patterns."}),(0,a.jsxs)(o.Z,{spacing:1,direction:"row",children:[(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(f.Z,{variant:"body2",fontWeight:"bold",children:"Prompt"}),(0,a.jsx)(s.Z,{sx:{width:"100px",border:"1px solid #909EAB",p:1,borderRadius:"8px"},children:(0,a.jsx)(f.Z,{variant:"body2",children:"chinoiserie floral patterns, sky blue"})})]}),(0,a.jsx)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",children:(0,a.jsx)(es.Svx,{size:16,sx:{ml:1}})}),(0,a.jsx)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",children:(0,a.jsx)(s.Z,{sx:{width:{xs:"100px",md:"150px"},p:1,borderRadius:"8px"},children:(0,a.jsx)("img",{src:"https://cdn.openart.ai/assets/others/tiling_raw_example.jpg",alt:"Raw Example",width:200,style:{borderRadius:"8px",objectFit:"cover"}})})}),(0,a.jsx)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",children:(0,a.jsx)(es.Svx,{size:16,sx:{ml:1}})}),(0,a.jsx)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",children:(0,a.jsx)(s.Z,{sx:{width:{xs:"100px",md:"150px"},p:1,borderRadius:"8px"},children:(0,a.jsx)("img",{src:"https://cdn.openart.ai/assets/others/tiling_example.jpg",alt:"Tiling Example",width:200,style:{borderRadius:"8px",objectFit:"cover"}})})})]})]})});var rc=i(52846);let rh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return e&&e.length>t?`${e.slice(0,t)}...`:e};async function ru(e){try{let t=[],i=new rc.C;i.on("log",e=>{let{message:i}=e;t.push(i)}),await i.load();let n="input.mp4",a="audio.wav",r=await fetch(e,{headers:{Range:"bytes=0-10485759"}}),o=await r.arrayBuffer();await i.writeFile(n,new Uint8Array(o)),await i.exec(["-i",n,"-vn","-acodec","pcm_s16le",a]);try{let e=(await i.readFile(a)).length>44;return await i.deleteFile(n),await i.deleteFile(a),e}catch{return await i.deleteFile(n),!1}}catch{return!1}}async function rp(e){return new Promise(t=>{let i=document.createElement("video");i.preload="metadata",i.addEventListener("loadedmetadata",()=>{t(i.duration),i.remove()}),i.addEventListener("error",()=>{t(0),i.remove()}),i.src=e})}function rx(e){let{value:t,onChange:i}=e,n=(0,w.useRef)(null),[r,l]=(0,w.useState)(!1),d=async e=>{l(!0);try{let t=await e6.S.fromFile(e);i(t)}catch(e){console.error("Failed to upload image",e)}finally{l(!1)}},[c,h]=(0,w.useState)(!1),u=t&&!t.isEmpty?es.kEF:c?es.dnT:es.f91,p=t&&!t.isEmpty;return(0,a.jsxs)(s.Z,{children:[(0,a.jsxs)(tx.Z,{onDragOver:e=>{e.preventDefault(),h(!0)},onDragEnter:e=>{e.preventDefault()},onDragLeave:()=>{h(!1)},onDrop:e=>{e.preventDefault(),h(!1);let t=e.dataTransfer.files;0!==t.length&&d(t[0])},loading:r,onClick:e=>{n.current.click(),e.stopPropagation()},sx:{width:"100%",height:"36px",border:`1px ${c?"dashed":"solid"} ${c?"white":eS.UX}`,borderRadius:eS.E0,bgcolor:c?eS.dY:eS.gb,cursor:"pointer",transition:"transform 0.1s ease","&:active":{transform:"translate(1px, -1px)"},justifyContent:t&&!t.isEmpty?"space-between":"center"},children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",children:[(0,a.jsx)(u,{}),c?null:p?(0,a.jsx)(f.Z,{variant:"editor-p1",sx:{ml:1},children:rh(t.fileName,20)}):(0,a.jsx)(f.Z,{variant:"editor-label1",sx:{ml:1,textTransform:"none"},children:"Click or Drag to Upload"})]}),t&&!t.isEmpty?(0,a.jsx)(es.ttv,{size:20,onClick:e=>{e.stopPropagation(),i(new e6.S),n.current.value=""},sx:{ml:"auto",cursor:"pointer"}}):null]}),(0,a.jsx)("input",{ref:n,type:"file",accept:".txt,.csv",style:{display:"none"},multiple:!1,onChange:()=>{0!==n.current.files.length&&d(n.current.files[0])}})]})}let rm=e=>{let{defaultExpanded:t}=e,i=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),n=(0,h.TS)(e=>e.setPrompt),r="prompt.expanded",s=(0,h.TS)((0,l.N)(e=>e.getUiState(r,t))),d=(0,h.TS)(e=>e.initUiState),c=(0,h.TS)(e=>e.ensureUiState);return(0,w.useEffect)(()=>{d(r,t)},[]),(0,a.jsx)(N,{className:"prompt-accordion-form-item",label:"Prompt",defaultExpanded:!0,value:i,sx:{scrollMarginTop:eS.Sw},tooltip:(0,a.jsxs)(P.k5,{children:["The description of what you want to see in the image.",(0,a.jsx)("br",{}),"For more details see the",(0,a.jsx)(P.Tb,{text:" Prompt Book ",href:"/promptbook"}),".",(0,a.jsx)("br",{}),"Non-English prompts are automatically translated to English when you create."]}),expend:s,onExpendChange:e=>c(r,e),children:(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsx)(rg,{value:i,onChange:n})})})},rg=e=>{let t=(0,h.TS)((0,l.N)(e=>e.getParameterValue("bulk"))),i=(0,h.TS)(e=>e.setBulkPrompts),[n,r]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[s,d]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),c="showShowMoreSettings.open",u=(0,h.TS)(e=>e.getUiState(c,!1)),p=(0,h.TS)(e=>e.ensureUiState),x=()=>{["/assets/prompt-examples.csv","/assets/prompt-examples.txt"].forEach(e=>{let t=document.createElement("a");t.href=e,t.download=e.split("/").pop(),document.body.append(t),t.click(),t.remove()})};return(0,a.jsxs)(o.Z,{spacing:2,children:[t.isEmpty?(0,a.jsx)(iI,{value:e.value,onChange:e.onChange,dealWithDisplayPrompt:e=>e}):null,t.isEmpty?(0,a.jsx)(f.Z,{variant:"editor-label1",fontWeight:500,children:"Or, upload multiple prompts"}):null,(0,a.jsx)(eH,{children:(0,a.jsx)(rx,{value:t,onChange:i})}),(0,a.jsxs)(b.Z,{severity:"info",children:["Upload a .csv or .txt file with one prompt per line. Download"," ",(0,a.jsxs)(ej.Z,{component:"a",style:{textDecoration:"underline",fontWeight:700,cursor:"pointer"},onClick:e=>{e.preventDefault(),x()},children:["the example"," "]}),"or"," ",(0,a.jsx)(ej.Z,{component:"a",style:{textDecoration:"underline",fontWeight:700,cursor:"pointer"},href:"https://openart.ai/wiki/image-creation/bulk-create",target:"_blank",rel:"noreferrer noopener",children:"learn more ->"})]}),(0,a.jsx)(aC,{open:u,onClick:e=>p(c,e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(eH,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ac,{value:n,onChange:r}),children:(0,a.jsx)(au,{value:n,onChange:r})}),(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{value:s,onChange:d})})]})})]})};var rj=i(13581),rf=i(10659);let rb=rf.Qe.Starter,rv={name:"",capacity:0,limitMax:0,limitMin:0,jobLimit:0,nextLevel:rf.Qe.Starter},rS={[rf.Qe.Free]:{name:"Free",capacity:0,limitMax:20,limitMin:1,jobLimit:3,nextLevel:rf.Qe.Starter},[rf.Qe.Starter]:{name:"Starter",capacity:100,limitMax:20,limitMin:1,jobLimit:3,nextLevel:rf.Qe.Hobbyist},[rf.Qe.Hobbyist]:{name:"Hobbyist",capacity:500,limitMax:100,limitMin:1,jobLimit:3,nextLevel:rf.Qe.Pro},[rf.Qe.Pro]:{name:"Pro",capacity:5e3,limitMax:500,limitMin:1,jobLimit:3},99999:{name:"Unlimited",capacity:99999,limitMax:5e3,limitMin:1,jobLimit:100},[rf.Qe.Essential]:{name:"Essential",capacity:0,limitMax:10,limitMin:1,jobLimit:3,nextLevel:rf.Qe.Advanced},[rf.Qe.Advanced]:{name:"Advanced",capacity:500,limitMax:100,limitMin:1,jobLimit:3,nextLevel:rf.Qe.Infinite},[rf.Qe.Infinite]:{name:"Infinite",capacity:5e3,limitMax:500,limitMin:1,jobLimit:3},[rf.Qe.Team]:{name:"Team",capacity:5e3,limitMax:500,limitMin:1,jobLimit:30}};var rw=i(36945);let ry=()=>{let{showModal:e}=(0,M.dd)(),{userLevel:t,profile:i}=(0,c.T)(),n=(0,h.TS)((0,l.N)(e=>e.getParameterValue("bulk"))),[r,s]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),d=rS[t]??rv,u=(null==d?void 0:d.nextLevel)?rS[d.nextLevel]:null;rw.En.includes(null==i?void 0:i.id)&&(d=rS[99999]);let p=(0,w.useMemo)(()=>!!n&&!n.isEmpty&&(n.size<d.limitMin||n.size>d.limitMax),[n,d.limitMax,d.limitMin]),x=!!n&&!n.isEmpty;return(0,a.jsxs)(o.Z,{sx:{width:"100%",justifyContent:"start"},spacing:2,children:[(0,a.jsx)(eH,{children:(0,a.jsx)(rj.Y,{min:d.limitMin,max:d.limitMax,width:100,value:r,onChange:s,disabled:x})}),(0,a.jsx)(eW.Z,{in:p,unmountOnExit:!0,children:(0,a.jsx)(b.Z,{severity:"warning",icon:!1,sx:{fontSize:"0.75rem",backgroundColor:"rgba(255, 107, 0, 0.15);"},children:(0,a.jsxs)(f.Z,{fontSize:12,fontWeight:500,color:eS.MA,children:["The total number of creations cannot exceed ",d.limitMax,"."]})})}),t<rb?(0,a.jsx)(f.Z,{variant:"editor-p1",sx:{fontWeight:500},component:"div",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ej.Z,{style:{textDecoration:"underline",cursor:"pointer",color:eS.MK},onClick:t=>{t.stopPropagation(),t.preventDefault(),e(eb.Z,{type:"openart_subscription"})},children:(0,a.jsx)(f.Z,{variant:"editor-p1",sx:{display:"inline"},fontWeight:700,children:"Upgrade to Hobbyist"})})," ",(0,a.jsx)(f.Z,{variant:"editor-p1",sx:{display:"inline"},children:"to use bulk create."})]})}):(0,a.jsxs)(f.Z,{variant:"editor-p1",sx:{fontWeight:500},component:"div",children:[(0,a.jsxs)(f.Z,{variant:"editor-p1",sx:{display:"inline"},children:["Up to ",d.limitMax," images per creation."]})," ",u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ej.Z,{style:{textDecoration:"underline",cursor:"pointer",color:eS.MK},onClick:t=>{t.stopPropagation(),t.preventDefault(),e(eb.Z,{type:"openart_subscription"})},children:(0,a.jsxs)(f.Z,{variant:"editor-p1",sx:{display:"inline"},fontWeight:700,children:["Upgrade to ",u.name]})})," ",(0,a.jsxs)(f.Z,{variant:"editor-p1",sx:{display:"inline"},children:["and get ",u.limitMax," images per creation."]})]}):null]})]})};var rC=i(7762);let rZ=e=>{let{controlnetOptions:t,value:i,onChange:n}=e;return(0,a.jsxs)(r.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(n_,{value:i.image_url,uploadUrl:"/media/upload_image",onChange:e=>{n(i.clone({image_url:(null==e?void 0:e.imageUrl)??""}))}}),i.image_url?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eH,{label:"Mode",sx:{mt:"8px !important"},children:(0,a.jsx)(tg.fc,{options:t.map(e=>{let t=`${e.value.annotator_type}:${e.value.model_name}`;return{label:e.label,value:t}}),value:`${i.annotator_type}:${i.model_name}`,onChange:e=>{let[t,a]=e.split(":");n(i.clone({annotator_type:t,model_name:a}))}})}),(0,a.jsx)(tg.X9,{showResult:!0,min:.1,max:1,step:.01,value:i.controlnet_conditioning_scale,onChange:e=>{n(i.clone({controlnet_conditioning_scale:e}))},label:"Control Weight"}),(0,a.jsx)(eH,{label:"Mode",sx:{mt:"0px !important"},children:(0,a.jsx)(tg.fc,{options:rC.Sf.map(e=>({label:e,value:e})),value:i.resize_mode,onChange:e=>{n(i.clone({resize_mode:e}))}})})]}):null]})},r_={display:"flex",flexDirection:"column",justifyContent:"space-between"},rk=e=>{let{options:t}=e,i=(0,h.TS)((0,l.N)(e=>e.getParameterValue("controlnet"))),n=(0,h.TS)(e=>e.setControlnet),r=(0,h.TS)((0,l.N)(e=>e.getUiState("controlnet.expanded",!1))),o=(0,h.TS)(e=>e.ensureUiState);return(0,a.jsx)(iz,{defaultExpanded:!1,label:"Advanced (ControlNet)",startIcon:es.ub_,extra:(0,a.jsx)(af,{name:"controlnet",value:i}),value:i,sx:r_,expend:r,onExpendChange:e=>o("controlnet.expanded",e),children:(0,a.jsx)(rZ,{controlnetOptions:t,value:i,onChange:n})})},rP=e=>{let{disabled:t,banner:i,value:n,onChange:o}=e;return(0,a.jsxs)(r.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(n_,{disabled:t,value:n.image_url,uploadUrl:"/media/upload_image",onChange:e=>{o({...n,image_url:(null==e?void 0:e.imageUrl)??"",height:null==e?void 0:e.height,width:null==e?void 0:e.width})}}),i?(0,a.jsx)(b.Z,{severity:"info",children:i}):null,n.image_url?(0,a.jsx)(tg.X9,{showResult:!0,min:.1,max:1,step:.01,value:n.influenceStrength,onChange:e=>{o({...n,influenceStrength:e})},label:"Influence Strength",tipText:"The higher this number is, the more influence the upload imaged will have on the generated image."}):null]})},rT=e=>{let{maxSize:t,banner:i,value:n,onChange:o}=e,[s,l]=(0,w.useState)(!1),d=(0,w.useMemo)(()=>n.pose_image?()=>{o({...n,pose_image:""})}:null,[o,n]);return(0,a.jsxs)(r.Z,{spacing:1,children:[(0,a.jsx)(rP,{value:n,onChange:e=>o({...n,...e,pose_image:""}),disabled:!!n.pose_image}),(0,a.jsx)(Z.Z,{textAlign:"center",children:(0,a.jsx)(f.Z,{variant:"body2",children:"or"})}),(0,a.jsx)(tD,{src:n.pose_image||"https://cdn.openart.ai/assets/character/Pose1.webp",active:!!n.pose_image,onClick:()=>l(!0),activeText:"Modify Pose",onDelete:d,disabled:!!n.image_url,children:"Open Pose Editor"}),(0,a.jsx)(tg.X9,{showResult:!0,min:.1,max:1,step:.01,value:n.pose_weight,onChange:e=>{o({...n,pose_weight:e})},label:"Weight",disabled:!!n.image_url}),(0,a.jsx)(nf,{open:s,onClose:()=>l(!1),onPoseChange:e=>{o({...n,...e,image_url:""})},targetMaxSize:t,defaultRatio:"1:1",showFloor:!1}),i?(0,a.jsx)(b.Z,{severity:"info",children:i}):null]})},rE={display:"flex",flexDirection:"column",justifyContent:"space-between"},rN=e=>{let t=(0,h.TS)((0,l.N)(e=>e.getParameterValue("type"))),i=(0,h.TS)((0,l.N)(e=>e.getParameterValue("imageReference"))),n=(0,h.TS)(e=>e.setReference),r=(0,h.TS)(e=>e.ensureUiState),o=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.style.expanded",!1))),s=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.pose.expanded",!1))),d=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.composition.expanded",!1))),c=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.face.expanded",!1)));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iz,{className:"image-reference-style-accordion-item",startIcon:es.lHp,label:"Style Reference",extra:(0,a.jsx)(af,{name:"imageReference.style",value:i.getTypeValue("style")}),value:i.getTypeValue("style"),sx:rE,expend:o,onExpendChange:e=>r("imageReference.style.expanded",e),children:(0,a.jsx)(rP,{banner:"Works best with the composition reference",value:i.getTypeValue("style"),onChange:e=>n({data:e,...e1.m[t]})})}),(0,a.jsx)(iz,{className:"image-reference-pose-accordion-item",isNew:!0,startIcon:es.J8O,label:"Pose Reference",extra:(0,a.jsx)(af,{name:"imageReference.pose",value:i.getTypeValue("pose")}),value:i.getTypeValue("pose"),sx:rE,expend:s,onExpendChange:e=>r("imageReference.pose.expanded",e),children:(0,a.jsx)(rT,{banner:"Only for humans",maxSize:e1.m[t].maxWidth,value:i.getTypeValue("pose"),onChange:e=>n({data:e,...e1.m[t]})})}),(0,a.jsx)(iz,{className:"image-reference-composition-accordion-item",startIcon:es.G_G,label:"Composition Reference",extra:(0,a.jsx)(af,{name:"imageReference.composition",value:i.getTypeValue("composition")}),value:i.getTypeValue("composition"),sx:rE,expend:d,onExpendChange:e=>r("imageReference.composition.expanded",e),children:(0,a.jsx)(rP,{value:i.getTypeValue("composition"),onChange:e=>n({data:e,...e1.m[t]})})}),(0,a.jsx)(iz,{className:"image-reference-face-accordion-item",startIcon:es.S2P,label:"Face Reference",extra:(0,a.jsx)(af,{name:"imageReference.face",value:i.getTypeValue("face")}),value:i.getTypeValue("face"),sx:rE,expend:c,onExpendChange:e=>r("imageReference.face.expanded",e),children:(0,a.jsx)(rP,{value:i.getTypeValue("face"),onChange:e=>n({data:e,...e1.m[t]})})})]})};var rI=i(74861),rA=i(7097),rM=i(46913),rU=i(10986),rR=i(49621);function rz(){return eG((0,h.TS)((0,l.N)(e=>e.getParameterValue("image_num"))))}var rD=i(7315);let rV=()=>{let e=(0,nK.NL)(),[t,i]=(0,w.useState)(0),[n,a]=(0,rD.sI)(),r=rz();return[async t=>{let a=setInterval(()=>{i(e=>100===e?(clearInterval(a),100):Math.min(e+10*Math.random()/2,100))},500);try{var o;await n(t),t1.B("asset_created",{creation_source:"bulk",image_num:t.image_num,csv_used:(null===(o=t.batch_generations)||void 0===o?void 0:o.length)>0,credits_num:r}),await e.invalidateQueries([ir.uE]),await e.refetchQueries(["useGenerationHistories"]),i(99)}finally{clearInterval(a),setTimeout(()=>{i(0)},1e3)}},a,t]},rF=()=>{let{enqueueSnackbar:e}=(0,rU.Ds)(),{isMobile:t,isAuthenticated:i}=(0,c.T)(),n=(0,e7.B)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)(e=>e.getValues),d=(0,h.TS)((0,l.N)(e=>e.getParameterValue("image_num"))),u=rz(),p=(0,h.TS)((0,l.N)(e=>e.getParameterValue("bulk"))),x=(0,h.TS)(e=>e.key),[m,g,j]=rV(),{userLevel:f}=(0,c.T)(),b=rS[f]??rv,v=o.value,S=!p.isEmpty,w=d>b.limitMax||d<b.limitMin,y=!(i&&(v||S)&&!w),C=async()=>{let t=s();try{await m(t),e("Generation started",{variant:"success"})}catch(t){ny().isAxiosError(t)||e((null==t?void 0:t.message)??"Generation error",{variant:"error"})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsxs)(r.Z,{spacing:"6px",padding:"10px",children:[(0,a.jsxs)(r.Z,{children:[!t&&!!j&&(0,a.jsx)(rI.Z,{variant:j<100?"determinate":"indeterminate",value:j,sx:{width:"100%",[`&.${rA.Z.colorPrimary}`]:{backgroundColor:"background.neutral"},[`& .${rA.Z.bar}`]:{borderRadius:rM.E0}},"aria-label":"generation progress"}),(0,a.jsx)(r.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:(0,a.jsx)(tx.Z,{loading:g,disabled:y,fullWidth:!0,sx:{textTransform:"none",bgcolor:y?eS.UX:eS.u8,"&:hover":{bgcolor:eS.lr}},onClick:()=>{n({onAuthenticated:C,additionalParams:{prompt:eG(o).prompt}})},children:(0,a.jsx)("span",{children:"Create"})})})]}),(0,a.jsxs)(tg.Se,{disabled:y,children:[(0,a.jsxs)("span",{style:{fontWeight:700,color:eS.MK},children:[u," credits"]}),"\xa0 will be charged"]}),(0,a.jsx)(rR.E,{disabled:y,model:x})]})]})};var rB=i(83516),rO=i(84879);let rW=()=>{let e=(0,e7.B)(),{isAuthenticated:t}=(0,c.T)(),[i,n]=(0,e3.L)(),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),o=(0,h.TS)((0,l.N)(e=>e.computedImageReferenceNum())),s=(0,h.TS)((0,l.N)(e=>e.computedImageCost())),d=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),u=(0,h.TS)(e=>e.getValues),p=(0,h.TS)(e=>e.computedImageNumInputDisable()),[x,m]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),g=(0,h.TS)(e=>e.key),j=async()=>{let e=u();await i(e)};return(0,a.jsx)(eB.X,{className:"create-config-button",disable:!!t&&d(),imageNum:x,imageInputDisabled:p,onChangeImageNum:m,maxImageNumForFreeUser:4,showEstimatedTime:!0,estimatedTimeModel:g,cost:s,loading:n,extraInfoAboveButton:(0,a.jsx)(rO.R,{children:o>=2?(0,a.jsx)(b.Z,{severity:"warning",children:"Pro Tip: For best results, limit your image guidance to 2."}):null}),onSubmit:()=>{e({onAuthenticated:j,additionalParams:{prompt:eG(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},rL=()=>{let{enqueueSnackbar:e}=(0,rU.Ds)(),{isMobile:t,isAuthenticated:i}=(0,c.T)(),n=(0,e7.B)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)(e=>e.key),d=(0,h.TS)(e=>e.getValues),u=(0,h.TS)((0,l.N)(e=>e.getParameterValue("image_num"))),p=rz(),x=(0,h.TS)((0,l.N)(e=>e.getParameterValue("bulk"))),[m,g,j]=rV(),{userLevel:f}=(0,c.T)(),b=rS[f]??rv,v=o.value,S=!x.isEmpty,w=u>b.limitMax||u<b.limitMin,y=!(i&&(v||S)&&!w),C=async()=>{let t=d();try{await m(t),e("Generation started",{variant:"success"})}catch(t){ny().isAxiosError(t)||e((null==t?void 0:t.message)??"Generation error",{variant:"error"})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsxs)(r.Z,{spacing:"6px",padding:"10px",children:[(0,a.jsxs)(r.Z,{children:[!t&&!!j&&(0,a.jsx)(rI.Z,{variant:j<100?"determinate":"indeterminate",value:j,sx:{width:"100%",[`&.${rA.Z.colorPrimary}`]:{backgroundColor:"background.neutral"},[`& .${rA.Z.bar}`]:{borderRadius:rM.E0}},"aria-label":"generation progress"}),(0,a.jsx)(r.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:(0,a.jsx)(tx.Z,{loading:g,disabled:y,fullWidth:!0,sx:{textTransform:"none",bgcolor:y?eS.UX:eS.u8,"&:hover":{bgcolor:eS.lr}},onClick:()=>{n({onAuthenticated:C,additionalParams:{prompt:eG(o).prompt}})},children:(0,a.jsx)("span",{children:"Create"})})})]}),(0,a.jsxs)(tg.Se,{disabled:y,children:[(0,a.jsxs)("span",{style:{fontWeight:700,color:eS.MK},children:[p," credits"]})," \xa0 will be charged"]}),(0,a.jsx)(rR.E,{disabled:y,model:s})]})]})},rG=()=>{let e=(0,e7.B)(),{isAuthenticated:t}=(0,c.T)(),[i,n]=(0,e3.L)(),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),o=(0,h.TS)((0,l.N)(e=>e.computedImageReferenceNum())),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),d=(0,h.TS)((0,l.N)(e=>e.computedImageCost())),u=(0,h.TS)(e=>e.getValues),p=(0,h.TS)(e=>e.key),[x,m]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),g=(0,h.TS)(e=>e.computedImageNumInputDisable()),j=async()=>{let e=u();await i(e)};return(0,a.jsx)(eB.X,{className:"create-config-button",disable:!!t&&s(),imageNum:x,imageInputDisabled:g,onChangeImageNum:m,maxImageNumForFreeUser:4,extraInfoAboveButton:(0,a.jsx)(rO.R,{children:o>=2?(0,a.jsx)(b.Z,{severity:"warning",children:"Pro Tip: For best results, limit your image guidance to 2."}):null}),showEstimatedTime:!0,estimatedTimeModel:p,cost:d,loading:n,onSubmit:()=>{e({onAuthenticated:j,additionalParams:{prompt:eG(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},rH={display:"flex",flexDirection:"column",justifyContent:"space-between"},rK=()=>{let e=(0,nK.NL)(),t=(0,e7.B)(),{profile:i}=(0,c.T)(),[n,r]=(0,e3.L)(),o=(0,h.TS)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.TS)((0,l.N)(e=>e.computedCreateDisableFn)),{isAuthenticated:d}=(0,c.T)(),u=(0,h.TS)(e=>e.getValues),[p,x]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,h.TS)(e=>e.key),g=async()=>{let t=u();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:al.QP}])},j=(0,h.TS)((0,l.N)(e=>e.computedImageCost()));return(0,a.jsx)(eB.X,{className:"create-config-button",estimatedTimeModel:m,disable:!!d&&s(),maxImageNumForFreeUser:4,imageNum:p,imageNumberMax:4,onChangeImageNum:x,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:eG(o).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},r$=[{value:"1024x1024",title:"1:1 (Square)"},{value:"864x1152",title:"3:4 (Vertical)"},{value:"1152x864",title:"4:3 (Horizontal)"},{value:"1280x720",title:"16:9 (Widescreen)"},{value:"720x1280",title:"9:16 (Tall)"},{value:"832x1248",title:"2:3 (Slim)"},{value:"1248x832",title:"3:2 (Wide)"},{value:"1512x648",title:"21:9 (Cinematic)"}],rq={adaptive:{width:1024,height:1024},"1024x1024":{width:1024,height:1024},"864x1152":{width:864,height:1152},"1152x864":{width:1152,height:864},"1280x720":{width:1280,height:720},"720x1280":{width:720,height:1280},"832x1248":{width:1248,height:832},"1248x832":{width:832,height:1248},"1512x648":{width:1512,height:648}};var rX=i(7502);let rY=e=>{let{title:t,icon:i,tooltip:n,content:r,className:l,expanded:d,onClick:c,sx:h,canExpand:u=!0,rightContent:p}=e,x=(0,w.useRef)(null),m=(0,k.Z)();return u?(0,a.jsx)(o.Z,{children:(0,a.jsxs)(y.Z,{className:l,ref:x,sx:(0,g.j)({padding:"0 !important",backgroundColor:aV.P},h),expanded:d,onChange:(e,t)=>{null==c||c(t),t&&setTimeout(()=>{var e;null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},m.transitions.duration.standard)},children:[(0,a.jsx)(C.Z,{expandIcon:d?(0,a.jsx)(rX.Z,{sx:{color:"white",fontSize:"20px"}}):(0,a.jsx)($.Z,{sx:{color:"white",fontSize:"20px"}}),"aria-controls":"panel3-content",id:"panel3-header",sx:{fontSize:"14px",fontWeight:600,"& .MuiAccordionSummary-expandIconWrapper":{transition:m.transitions.create(["transform"],{duration:m.transitions.duration.shortest}),"&.Mui-expanded":{transform:"rotate(180deg)"}}},children:(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"100%",pr:2,children:[(()=>{let e=(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[i,(0,a.jsx)(f.Z,{fontSize:14,fontWeight:600,children:t})]});return n?(0,a.jsx)(o.Z,{direction:"row",alignItems:"center",children:(0,a.jsx)(P.ZP,{title:"string"==typeof n?n:(0,a.jsx)(n,{}),anchor:e})}):e})(),p??null]})}),(0,a.jsx)(_.Z,{sx:{p:1.5},children:r})]})}):(0,a.jsxs)(o.Z,{direction:"column",children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,justifyContent:"space-between",children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[i,(0,a.jsx)(f.Z,{variant:"body1",fontSize:14,fontWeight:600,children:t})]}),p??null]}),(0,a.jsx)(s.Z,{p:1.5,sx:h,children:r})]})};var rQ=i(59966);let rJ=(0,w.forwardRef)(function(e,t){let{onUploadSuccess:i,onRemoveSuccess:n}=e,[r,d]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("audio_url"))),[c,u]=(0,w.useState)(!1),[p,x]=(0,w.useState)("");(0,w.useImperativeHandle)(t,()=>({setError:e=>x(e??"Unknown error"),clearError:()=>x("")}));let m=async e=>{x("");try{let t=e[0];if(!t)return;if(t.size>5242880)throw Error("Audio file must be 5MB or less");u(!0);let n=URL.createObjectURL(t),a=new Audio(n),r=t;await new Promise((e,i)=>{a.addEventListener("loadedmetadata",async()=>{if(URL.revokeObjectURL(n),a.duration>60)try{r=await (0,rQ.C8)(t),e()}catch(e){i(Error("Failed to process audio file"))}else e()}),a.addEventListener("error",e=>{URL.revokeObjectURL(n),i(Error("Failed to load audio file"))})});let o=new FormData;o.append("file",r),o.append("cdnFolder","studio/audio");let{data:s}=await io.ZP.post("/media/upload_file",o,{headers:{"Content-Type":"multipart/form-data"}});s&&s.url&&(d(s.url),i())}catch(e){x(e.message||"An error occurred while uploading the audio")}finally{u(!1)}},{getRootProps:g,getInputProps:j,isDragActive:b}=(0,aU.uI)({onDrop:m,accept:{"audio/mpeg":[".mp3"],"audio/wav":[".wav"]},disabled:c,multiple:!1});return(0,a.jsxs)(o.Z,{sx:{position:"relative",borderRadius:aV.zO,backgroundColor:aV.hb},spacing:1,children:[r?(0,a.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,a.jsx)(s.Z,{component:"audio",controls:!0,src:r,sx:{width:"100%",height:"32px"}}),(0,a.jsx)(A.Z,{size:"small",onClick:()=>{d(""),n()},sx:{position:"absolute",top:-8,right:-8,color:"rgba(255, 255, 255, 0.6)",backgroundColor:aV.hb,minWidth:"auto",width:24,height:24,padding:0,borderRadius:"50%","&:hover":{backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#ef4444"}},children:(0,a.jsx)(es.Xm5,{size:10})})]}):(0,a.jsxs)(s.Z,{...g(),className:p?"error":"",sx:{border:"1px dashed",borderColor:p?"error.main":"rgba(255, 255, 255, 0.2)",borderRadius:aV.zO,padding:2,textAlign:"center",cursor:"pointer",transition:"border-color 0.2s ease","&:hover":{borderColor:p?"error.main":"rgba(255, 255, 255, 0.4)"}},children:[(0,a.jsx)("input",{...j()}),c?(0,a.jsx)(tj.Z,{size:20}):(0,a.jsxs)(o.Z,{spacing:.5,alignItems:"center",children:[(0,a.jsx)(es.k78,{sx:{fontSize:20,color:"rgba(255, 255, 255, 0.6)"}}),(0,a.jsx)(f.Z,{fontSize:12,color:"rgba(255, 255, 255, 0.8)",children:b?"Drop audio here":"Upload Audio"}),(0,a.jsx)(f.Z,{fontSize:10,color:"rgba(255, 255, 255, 0.4)",children:"MP3, WAV • Max 5MB • Max 60s (longer files will be truncated)"})]})]}),p?(0,a.jsx)(f.Z,{fontSize:10,color:"error.main",children:p}):null]})});var r0=i(46406);let r1=(0,r0.ZP)("span")(e=>{let{theme:t,realitySize:i=16,checked:n}=e;return{width:i,height:i,backgroundColor:"transparent","input:hover ~ &":{backgroundColor:"transparent"},"input:disabled ~ &":{boxShadow:"none",border:"1.167px solid #474747",background:" rgba(0, 0, 0, 0.18)"},borderRadius:"3px",border:n?"none":"1.167px solid #FFF",background:" rgba(0, 0, 0, 0.18)"}}),r2=(0,r0.ZP)(r1)({backgroundColor:aV.Hp,backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))","&::before":{display:"block",width:"inherit",height:"inherit",backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\")",content:'""',backgroundSize:"contain"},"input:hover ~ &":{backgroundColor:aV.Hp}});function r5(e){let{realitySize:t=16,...i}=e;return(0,a.jsx)(n1.Z,{sx:{"&:hover":{bgcolor:"transparent"},p:0},disableRipple:!0,checkedIcon:(0,a.jsx)(r2,{realitySize:t,checked:i.checked}),icon:(0,a.jsx)(r1,{}),...i})}let r4=()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("sound_prompt"))),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("keep_original_audio")));return(0,a.jsxs)(o.Z,{sx:{position:"relative",backgroundColor:aV.hb,borderRadius:aV.zO},children:[(0,a.jsx)(tB.Z,{multiline:!0,rows:2,fullWidth:!0,placeholder:"[Option]Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{color:"white"},"& .MuiInputBase-input":{mb:3,width:"100%",fontWeight:{xs:400,md:500},fontSize:{xs:12}},"& .MuiFormHelperText-root":{color:aV._c,position:"absolute",right:"8px",bottom:"8px",p:0,m:0,fontSize:"12px",fontWeight:400}}}),(0,a.jsxs)(o.Z,{direction:"row",spacing:.5,sx:{position:"absolute",right:"8px",bottom:"8px",opacity:.7},alignItems:"center",children:[(0,a.jsx)(r5,{checked:i,onChange:(e,t)=>n(t)}),(0,a.jsx)(f.Z,{color:"white",fontWeight:500,fontSize:14,children:"Keep original sound"})]})]})};var r3=i(65089);let r6=e=>{let{label:t,content:i,labelWidth:n="40%",contentWidth:r="60%",sx:l}=e;return(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch",sx:l,children:[(0,a.jsx)(s.Z,{sx:{width:n,flexShrink:0},children:t}),(0,a.jsx)(s.Z,{sx:{width:r,flexShrink:0},children:i})]})};var r8=i(17889);let r9=e=>{let{sx:t={}}=e,[i,n]=(0,w.useState)(null),[r,d]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("speech_voice"))),c=(0,w.useMemo)(()=>r8.B8.find(e=>e.key===r),[r]),[u,p]=(0,w.useState)(!1),[x,m]=(0,w.useState)(null),g=w.useRef(null),j=()=>{g.current&&(g.current.pause(),g.current.currentTime=0),m(null),p(!1),n(null)},b=e=>{d(e),j()},v=(e,t)=>{if(t.stopPropagation(),x===e){g.current&&(g.current.pause(),g.current.currentTime=0,g.current=null),m(null);return}g.current&&(g.current.pause(),g.current.currentTime=0),m(e);let i=r8.B8.find(t=>t.key===e);if(null==i?void 0:i.voice){let e=new Audio(i.voice);g.current=e,e.play().then(()=>{e.addEventListener("ended",()=>{m(null),g.current=null})}).catch(e=>{console.error("Error playing audio:",e),m(null),g.current=null})}};return(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",sx:{backgroundColor:aV.P,borderRadius:aV.tO,height:40,p:1.5,cursor:"pointer",...t},alignItems:"center",onClick:e=>{n(e.currentTarget),p(!0)},children:[(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,children:"Select Sound"}),(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:.5,children:[(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,color:aV.F2,children:c.label}),(0,a.jsx)(es.Svx,{})]}),(0,a.jsx)(t3.ZP,{open:u,anchorEl:i,onClose:j,keepMounted:!1,style:{zIndex:1500},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},slotProps:{paper:{sx:{backgroundColor:aV.oe,borderRadius:aV.tO,width:160,maxHeight:300,overflowY:"auto",mt:1,ml:2}}},disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,onClick:e=>e.stopPropagation(),children:(0,a.jsx)(o.Z,{px:.5,py:1,children:r8.B8.map(e=>(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",justifyItems:"center",sx:{p:.5,height:32,borderRadius:aV.zO,backgroundColor:r===e.key?aV.VY:"transparent","&:hover":{backgroundColor:r===e.key?aV.VY:"rgba(255, 255, 255, 0.1)"},cursor:"pointer"},onClick:()=>b(e.key),children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)("img",{src:e.thumbnail,alt:e.label,style:{width:24,height:24,borderRadius:"50%",overflow:"hidden",backgroundColor:"#555"}}),(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,children:e.label})]}),(0,a.jsx)(s.Z,{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},bgcolor:"black",onClick:t=>v(e.key,t),children:x===e.key?(0,a.jsx)(es.gq7,{size:10,style:{color:"white",cursor:"pointer"}}):(0,a.jsx)(es.Mld,{size:10,style:{color:"white",cursor:"pointer"}})})]},e.key))})})]})},r7=(e,t)=>Math.ceil(12.5*e*t)+5,oe=(0,w.forwardRef)(function(e,t){let{onSpeechPromptChange:i}=e,[n,r]=(0,w.useState)(!1);(0,w.useImperativeHandle)(t,()=>({setError:()=>r(!0),clearError:()=>r(!1)}));let[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("speech_prompt"))),[,u]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("enable_auto_speech"))),[p,x]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("lip_sync"))),m=(0,h.Bf)((0,l.N)(e=>e.getParameterValue("duration"))),[g,j]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("speech_speed"))),b=r7(m??5,g),v=e=>{c(e),i(e),e?(u(!0),n&&r(!1)):u(!1)};return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsxs)(o.Z,{sx:{position:"relative"},children:[(0,a.jsx)(tB.Z,{multiline:!0,rows:3,fullWidth:!0,placeholder:"Please input the text you'd like the character to say in Chinese or English. Other languages are not supported now.",value:d,onChange:e=>v(e.target.value),inputProps:{maxLength:b},helperText:`${(null==d?void 0:d.length)||0}/${b}`,error:n,sx:{"& .MuiOutlinedInput-root":{color:"white",backgroundColor:aV.P},"& .MuiInputBase-input":{mb:3,width:"100%",fontWeight:{xs:400,md:500},fontSize:{xs:12}},"& .MuiFormHelperText-root":{color:n?"error.main":aV._c,position:"absolute",right:"8px",bottom:"8px",p:0,m:0,fontSize:"12px",fontWeight:400}}}),(0,a.jsxs)(o.Z,{direction:"row",spacing:.5,sx:{position:"absolute",left:"8px",bottom:"8px",opacity:.7},alignItems:"center",children:[(0,a.jsx)(r5,{checked:p,onChange:(e,t)=>x(t)}),(0,a.jsx)(f.Z,{fontWeight:500,color:"white",fontSize:14,children:"Lip-sync"})]})]}),(0,a.jsx)(r9,{sx:{p:0,backgroundColor:"transparent"}}),(0,a.jsx)(Z.Z,{}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,children:"Speed"})}),labelWidth:"10%",contentWidth:"80%",content:(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(r3.ZP,{value:g,onChange:(e,t)=>{j(t)},min:.1,max:5,step:.1,sx:{"& .MuiSlider-root":{touchAction:"none"},"& .MuiSlider-thumb":{backgroundColor:"white",border:`3px solid ${aV.Hp}`,width:16,height:16,touchAction:"none"},"& .MuiSlider-rail":{backgroundColor:"#555"},"& .MuiSlider-track":{backgroundColor:aV.te,opacity:1}}}),(0,a.jsx)(s.Z,{sx:{backgroundColor:"#333",borderRadius:aV.zO,padding:"1px 7px",minWidth:32,textAlign:"center"},children:(0,a.jsx)(f.Z,{fontWeight:400,color:"white",fontSize:12,children:g.toFixed(1)})})]})})]})}),ot=e=>{let{children:t,tipContent:i,backgroundColor:n,color:r="white",position:o="bottom"}=e;return(0,a.jsx)(ef.Z,{title:i,placement:o,componentsProps:{tooltip:{sx:{bgcolor:n,color:r,"& .MuiTooltip-arrow":{color:n},p:0,height:190,width:260}}},children:t})},oi=(0,w.forwardRef)(function(e,t){let{className:i,size:n,color:r,sx:o,startColor:s,stopColor:l,...d}=e;return(0,a.jsxs)(eu.Ld,{className:`iconify-icon iconify-icon-custom-mdi-music-box-multiple-outline${i?` ${i}`:""}`,ref:t,width:"40",height:"16",viewBox:"0 0 40 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",sx:(0,g.j)({...n?{width:n,height:n,fontSize:n}:{},color:r},o),...d,children:[(0,a.jsx)("path",{d:"M39.5 16H0C3.86379 16 13 12 13 7C13 4 12 1.5 4.5 0.000169605L34 0C34 0 24.5 2 24.5 7C24.5 12 36 16 39.5 16Z",fill:"url(#paint0_linear_370_30960)"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_370_30960",x1:"19.75",y1:"0",x2:"19.75",y2:"13.5",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:s}),(0,a.jsx)("stop",{offset:"1",stopColor:l})]})})]})}),on=()=>{let e=(0,h.Bf)(e=>e.adapter.creation_mode),t=(0,h.Bf)(e=>e.updateCreationMode),i=[{mode:"text2video",label:"Text",color:aV.zP,activeTextColor:aV.Ke,activeIconColor:aV.Ke,inactiveIconColor:aV.zP,icon:es.tl$,coming:!1,tipText:"Just enter text to turn your idea into a video. The AI generates it instantly—customize style, camera, and duration.",tipImage:"https://cdn.openart.ai/video/text_to_video_tip.webm",tipType:"video"},{mode:"image2video",label:"Image",color:aV.FJ,activeTextColor:aV.YZ,activeIconColor:aV.YZ,inactiveIconColor:aV.FJ,icon:es.sOQ,coming:!1,tipText:"Upload an image to instantly generate a video. AI animates your picture—customize duration, and style.",tipImage:"https://cdn.openart.ai/video/image_to_video.webm",tipType:"video"},{mode:"elements",label:"Element",color:aV.E9,activeTextColor:aV.YZ,activeIconColor:aV.YZ,inactiveIconColor:aV.E9,icon:es.ETh,coming:!1,tipText:"Upload multiple images—AI randomly combines them into a unique video. Customize motion, and duration for creative control.",tipImage:"https://cdn.openart.ai/video/element_to_video_tip.webm",tipType:"video"},{mode:"audio",label:"Audio",color:aV.w9,activeTextColor:aV.Ke,activeIconColor:aV.Ke,inactiveIconColor:aV.w9,icon:es.GPe,coming:!1,tipText:"Add background sound and speech to bring your video to life. Mix audio styles for a more immersive result.",tipImage:"https://cdn.openart.ai/assets/gen_audio.png",tipType:"image"}];return(0,a.jsx)(o.Z,{direction:"row",justifyContent:"space-between",spacing:1,mb:0,children:i.map(i=>{let n=e===i.mode,r=i.icon;return(0,a.jsxs)(o.Z,{sx:{cursor:"pointer",width:"100%",alignItems:n?"center":"none",opacity:i.coming?.5:1},children:[(0,a.jsx)(ot,{tipContent:(0,a.jsxs)(o.Z,{sx:{width:"100%",height:"100%"},justifyContent:"space-between",alignItems:"center",p:1.5,children:[(0,a.jsx)(f.Z,{fontSize:11,fontWeight:500,lineHeight:"150%",color:"white",letterSpacing:"-0.22px",children:i.tipText}),"video"===i.tipType?(0,a.jsx)(s.Z,{component:"video",src:i.tipImage,autoPlay:!0,muted:!0,loop:!0,sx:{borderRadius:1}}):(0,a.jsx)(s.Z,{component:"img",src:i.tipImage,sx:{width:"100%",height:108,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),backgroundColor:aV.FJ,children:(0,a.jsxs)(o.Z,{sx:{cursor:"pointer",height:68,width:"100%",backgroundColor:n?i.color:aV.L8,px:1,py:1.5,borderRadius:aV.o0,alignItems:"center",justifyContent:"center",position:"relative"},onClick:()=>{i.coming||t(i.mode)},children:[(0,a.jsx)(r,{size:24,color:n?i.activeIconColor:i.inactiveIconColor}),(0,a.jsx)(f.Z,{color:n?i.activeTextColor:aV.Wv,fontWeight:600,align:"center",fontSize:{md:14},children:i.label})]})}),n?(0,a.jsx)(oi,{startColor:i.color,stopColor:aV.hb}):null]},i.mode)})})},oa="upload-image-in-video-button",or=(0,w.forwardRef)((e,t)=>{let{error:i,file:n,isUploading:r,caption:l,sx:d,dropZoneSx:c,bordered:h,title:u="Click or drag a video to upload",zoomable:p,deletable:x,onDelete:m,onDrop:j,onChange:b,multiple:v,disabled:S=!1,accept:y,showIcon:C=!0,buttonVariant:Z,onAreaClick:_,...P}=e,T=(0,k.Z)(),{getRootProps:E,getInputProps:N,isDragActive:I,isDragReject:A,fileRejections:M,inputRef:U}=(0,aU.uI)({multiple:v,accept:y??{"video/mp4":[],"video/webm":[],"video/ogg":[],"video/quicktime":[]},onDrop:e=>{e.length>0?null==b||b(v?e:e[0]):null==b||b(null),null==j||j(e)},disabled:S,noClick:!!_,...P}),R=E(),z=()=>{U.current&&U.current.click()};(0,w.useImperativeHandle)(t,()=>({triggerInputClick:z}));let D=e=>{if(!_)return;let t=e.target,i=!1;for(;t&&t!==e.currentTarget;){if(t.classList.contains(oa)){i=!0;break}t=t.parentElement}i||_(e)},V=n&&(n.preview||(n.file?URL.createObjectURL(n.file):"")),F={display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",color:T.palette.text.secondary,backgroundColor:Z?null:T.palette.background.neutral,transition:T.transitions.create("opacity",{duration:T.transitions.duration.shorter}),"&:hover":{opacity:Z&&!n?1:.72},...n&&{opacity:0,color:"common.white",bgcolor:"grey.900","&:hover":{opacity:.72}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Z,{sx:(0,g.j)({width:144,height:144,margin:"auto",padding:T.spacing(1),position:"relative",border:!1===h?"none":`1px dashed ${T.palette.grey[50032]}`},d),children:[r?(0,a.jsx)(s.Z,{sx:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:9999,color:"white"},children:(0,a.jsx)(tj.Z,{})}):null,(0,a.jsxs)(s.Z,{...R,onClick:_?D:R.onClick,onContextMenu:_?D:void 0,sx:{zIndex:0,width:"100%",height:"100%",outline:"none",display:"flex",overflow:"hidden",position:"relative",alignItems:"center",justifyContent:"center",[`& > *:not(.${oa})`]:{width:"100%",height:"100%"},"&:hover":{cursor:"pointer","& .placeholder":{zIndex:9}},...I&&{opacity:.72},...(A||i)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"},...c},children:[(0,a.jsx)("input",{...N()}),n?(0,a.jsx)(s.Z,{component:"video",src:V,sx:{zIndex:8,objectFit:"cover"}}):null,(0,a.jsx)(s.Z,{className:"placeholder",sx:F,children:(0,a.jsxs)(o.Z,{justifyContent:"center",alignItems:"center",spacing:1,children:[(0,a.jsx)(es.yjM,{size:32}),(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,color:aV.d6,align:"center",children:u||"Drag & drop a video"})]})}),n&&x?(0,a.jsx)(s.Z,{className:oa,sx:{position:"absolute",top:4,right:4,zIndex:1e3,background:"rgba(0,0,0,0.5)",width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:1},onClick:e=>{e.stopPropagation(),null==m||m(),null==b||b(null)},children:(0,a.jsx)(aI.Z,{})}):null]})]}),l,M.length>0&&(0,a.jsx)(tQ.Z,{variant:"outlined",sx:{py:1,px:2,my:2,borderColor:"error.light",bgcolor:e=>(0,aM.Fq)(e.palette.error.main,.08)},children:M.map(e=>{let{file:t,errors:i}=e,{name:n}=t;return(0,a.jsxs)(s.Z,{sx:{my:1},children:[(0,a.jsx)(f.Z,{variant:"subtitle2",noWrap:!0,children:n}),i.map(e=>(0,a.jsxs)(f.Z,{variant:"caption",component:"p",children:["- ",e.message]},e.code))]},n)})})]})});or.displayName="UploadAvatarVideo";let oo=e=>{let{disabled:t,value:i,uploadUrl:n,onChange:r,duration:o}=e,l=(0,e7.B)(),[d,c]=(0,w.useState)(null),[h,u]=(0,w.useState)(!1),[p,x]=(0,w.useState)(""),m=(0,w.useRef)(null),g=async e=>{x("");try{let t=e[0];if(!t)return;let i=URL.createObjectURL(t);if(t){c({...t,preview:i}),u(!0);let e=new FormData;e.append("file",t);let{data:a,status:o}=await io.ZP.post(n,e,{headers:{"Content-Type":"multipart/form-data"}}),[s,l]=await Promise.all([ru(a.url),rp(a.url)]);if(Math.round(l)>60)throw Error("Video must be under 60 seconds");200===o&&a&&r({videoUrl:a.url,hasAudio:s,duration:l})}}catch(i){let e=i.message||"An error occurred while uploading the video";if(i instanceof nw.AxiosError){var t;let n=null===(t=i.response)||void 0===t?void 0:t.data;"string"==typeof n?e=n:(null==n?void 0:n.message)&&(e=n.message)}x(e)}finally{u(!1)}},{UploadContextMenu:j,handleMenuOpen:b}=(0,nZ.w)({onChange:async e=>{if(e&&e.length>0&&!t)try{x(""),u(!0),c({preview:e[0]});let[t,i]=await Promise.all([ru(e[0]),rp(e[0])]);if(Math.round(i)>60)throw Error("Video must be under 60 seconds");let n={videoUrl:e[0],hasAudio:t,duration:i};r(n)}catch{x("Failed to process video from history")}finally{u(!1)}},onClickUpload:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.triggerInputClick()},maxSelectionCount:1,historyFilter:{resource_type:"video"}});return(0,w.useEffect)(()=>{i?c({preview:i}):c(null)},[i]),(0,a.jsxs)(s.Z,{sx:{borderRadius:aV.zO,border:"1px dashed #464749",position:"relative"},children:[(0,a.jsx)(or,{ref:m,disabled:t,buttonVariant:!0,sx:{width:"100%",height:148,border:"none",backgroundColor:"transparent",borderRadius:1,margin:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},dropZoneSx:{borderRadius:.5,width:"100%",padding:0},file:d,isUploading:h,maxSize:52428800,onDrop:g,onAreaClick:t?void 0:e=>l({onAuthenticated:b,e}),title:(0,a.jsxs)(a.Fragment,{children:["Drag & drop a video",(0,a.jsx)("br",{}),"under 60 seconds or from generation history"]}),accept:{"video/mp4":[]},caption:(()=>{if(p)return(0,a.jsx)(f.Z,{variant:"caption",sx:{margin:"8px 0"},color:"error.main",children:p})})()}),j,d&&!h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{variant:"caption",sx:{position:"absolute",top:10,left:10,backgroundColor:"rgba(0, 0, 0, 0.5)",padding:"2px 4px",borderRadius:.5,color:"white"},children:o?`${Math.round(o)}s`:""}),(0,a.jsx)(tz.Z,{title:"Delete the image",icon:es.Xm5,iconSize:20,sx:{position:"absolute",top:8,right:8,cursor:"pointer"},onClick:()=>{c(null),r(null),x("")}})]}):null]})},os=()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("video_url"))),[,i]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("keep_original_audio"))),[n,r]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),s=async e=>{if(!e||!(null==e?void 0:e.videoUrl)){t(""),i(!1);return}let{videoUrl:n,hasAudio:a,duration:o}=e;t(n),i(a),r(Math.round(o))};return(0,a.jsx)(o.Z,{spacing:1,sx:{backgroundColor:aV.hb,borderRadius:aV.tO},p:1.5,children:(0,a.jsx)(o.Z,{sx:{backgroundColor:aV.P,borderRadius:aV.zO},children:(0,a.jsx)(oo,{duration:n,value:e,onChange:e=>s(e),uploadUrl:"/media/upload_file"})})})};var ol=i(78656),od=i(10607),oc=i(94929),oh=i(26841);let ou=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,nK.NL)(),i=(0,h.Bf)((0,l.N)(e=>e.adapter)),[n,a]=(0,oc.Xu)(),[r,o]=(0,w.useState)(!1),s=(0,od.F)(e=>e.addMockingGeneration),d=(0,od.F)(e=>e.updateResourceIdByRequestId),c=(0,od.F)(e=>e.removeMockingGenerationByRequestId),u=async a=>{let r="";try{o(!0);let t=e?a:i.verifyRequestParameters(a);r=s({...t,turbo_mode:"turbo"}),setTimeout(()=>{o(!1)},ti.aW);let l=(await n(t)).generation_media_resource_ids;r&&l&&l.length>0?d(r,l):r&&c(r);let h="";a.prompt&&(h="string"==typeof a.prompt?await (0,oh.c)(a.prompt):""),op(a,h)}catch(e){throw console.error("Error sending video generation request:",e),o(!1),r&&c(r),e}finally{await Promise.all([t.invalidateQueries([ir.uE]),t.invalidateQueries({queryKey:["useGenerationHistories"],exact:!1})])}};return[(0,ol.Z)(u),r&&a]},op=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i={...e,creation_source:"video",image_num:1,creation_mode:{image2video:"image",text2video:"text",audio:"audio",elements:"element"}[(null==e?void 0:e.creation_mode)??"image"],auto_audio:(null==e?void 0:e.enable_auto_sound)?"yes":"no",auto_speech:(null==e?void 0:e.enable_auto_speech)?"yes":"no",model:null==e?void 0:e.model,prompt_language:t};t1.B("asset_created",i)};var ox=i(61415);let om=()=>{let e=(0,e7.B)(),t=(0,ox.Vi)(),i=(0,h.Bf)(e=>e.isAuthenticated),n=(0,h.Bf)((0,l.N)(e=>e.getParameterValue("prompt"))),r=(0,h.Bf)(e=>{var t;return null===(t=e.adapter.model)||void 0===t?void 0:t.key}),o=(0,h.Bf)((0,l.N)(e=>e.computedCreateDisableFn())),s=(0,h.Bf)((0,l.N)(e=>e.computedImageCost(t))),d=(0,h.Bf)((0,l.N)(e=>e.computedImageCost({}))),c=(0,h.Bf)(e=>e.getValues),[u,p]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("image_num"))),[x,m]=ou(),g=async()=>{let e=c();await x(e)};return(0,a.jsx)(eB.X,{className:"create-config-button",disable:!!i&&o,imageNum:u,onChangeImageNum:p,showNumberInput:!1,maxImageNumForFreeUser:4,isLimitTimeOffer:!!r&&"veo2"!==r&&"veo3"!==r&&"MiniMax-Hailuo-02"!==r,cost:s,oldCost:d,loading:m,onSubmit:()=>{e({onAuthenticated:g,additionalParams:{prompt:n?eG(n).prompt:""}})},sx:{padding:{xs:"16px",md:"12px"}}})},og=e=>{let{children:t,sx:i}=e;return(0,a.jsx)(o.Z,{px:2,py:"12px",sx:{overflow:"auto",height:"100%",...i},children:t})},oj=()=>{let[e,t]=(0,w.useState)(null),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("enable_auto_sound"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("sound_prompt")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z,{sx:{width:"100%",backgroundColor:aV.P,height:"28px",borderRadius:aV.zO,cursor:"pointer"},direction:"row",justifyContent:"space-around",alignItems:"center",px:1,onClick:e=>{t(e.currentTarget)},children:[(0,a.jsx)(es.id9,{}),(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,children:"Auto Sound"}),(0,a.jsx)(t0.r,{checked:i,onChange:(e,t)=>n(t)})]}),(0,a.jsx)(t3.ZP,{open:!!e,anchorEl:e,onClose:()=>{t(null)},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{width:245,p:1,backgroundColor:aV.oe,mt:-1}}},children:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(o.Z,{direction:"row",spacing:.4,children:[(0,a.jsx)(es.id9,{}),(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,children:"Auto Sound"})]}),(0,a.jsx)(t0.r,{checked:i,onChange:(e,t)=>n(t)})]}),(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"[Optional] Describe the Sound, for example: the sound of waves hitting the shore.",value:r,onChange:e=>s(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"}},InputProps:{slotProps:{input:{sx:{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}}}})]})})]})},of=e=>Math.ceil(12.5*e)+5,ob=()=>{let[e,t]=(0,w.useState)(null),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("enable_auto_speech"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("speech_prompt"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("lip_sync"))),u=of((0,h.Bf)((0,l.N)(e=>e.getParameterValue("duration")))??5),p=e=>{r&&n(e)},x=e=>{s(e),e?n(!0):n(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z,{sx:{width:"100%",backgroundColor:aV.P,height:"28px",borderRadius:aV.zO,cursor:"pointer"},direction:"row",justifyContent:"space-around",alignItems:"center",px:1,onClick:e=>{t(e.currentTarget)},children:[(0,a.jsx)(es.GSb,{}),(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,children:"Auto Speech"}),(0,a.jsx)(t0.r,{checked:i,onChange:(e,t)=>p(t)})]}),(0,a.jsx)(t3.ZP,{open:!!e,anchorEl:e,onClose:()=>{t(null)},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{width:290,p:1,backgroundColor:aV.oe,mt:-1}}},children:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(o.Z,{direction:"row",spacing:.4,children:[(0,a.jsx)(es.GSb,{}),(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,children:"Auto Speech"})]}),(0,a.jsx)(t0.r,{checked:i,onChange:(e,t)=>p(t)})]}),(0,a.jsxs)(o.Z,{sx:{position:"relative"},children:[(0,a.jsx)(tB.Z,{multiline:!0,rows:3,fullWidth:!0,placeholder:"[Required] Describe the Sound, for example: the sound of waves hitting the shore.",value:r,onChange:e=>x(e.target.value),inputProps:{maxLength:u},helperText:`${(null==r?void 0:r.length)||0}/${u}`,sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{mb:3,width:"100%",fontWeight:{xs:400,md:500},fontSize:{xs:12}},"& .MuiFormHelperText-root":{color:aV._c,position:"absolute",right:"8px",bottom:"8px",p:0,m:0,fontSize:"12px",fontWeight:400}}}),(0,a.jsxs)(o.Z,{direction:"row",spacing:.5,sx:{position:"absolute",left:"8px",bottom:"8px",opacity:.7},alignItems:"center",children:[(0,a.jsx)(r5,{checked:d,onChange:(e,t)=>c(t)}),(0,a.jsx)(f.Z,{color:aV.d6,fontWeight:400,fontSize:14,children:"Lip-sync"})]})]}),(0,a.jsx)(r9,{})]})})]})},ov=e=>{let{value:t,options:i,onChange:n,id:o,disabled:s,disabledReason:l,sx:d,buttonSx:c}=e;return(0,a.jsx)(r.Z,{direction:"row",sx:{bgcolor:"#1E1E1E",borderRadius:aV.tO,border:`1px solid ${s?"#2a2a2a":aV.b5}`,overflow:"hidden",position:"relative",width:"100%",minWidth:0,opacity:s?.75:1,...d},children:i.map(e=>{let i=s||e.disabled,r=i?e.disabled?e.disabledReason:l:void 0,d=(0,a.jsxs)(ts.Z,{sx:{px:1.5,py:.3,color:"white",cursor:i?"not-allowed":"pointer",position:"relative",zIndex:1,flex:1,textAlign:"center",...c},onClick:t=>{i||n(e.value)},children:[(0,a.jsx)(f.Z,{variant:"editor-label1",color:i?t===e.value?"#8ba6c6":"#676767":t===e.value?aV.Xp:aV.F2,fontWeight:{xs:400,md:500},fontSize:{xs:11,sm:12},sx:{whiteSpace:"nowrap"},children:e.label}),t===e.value&&(0,a.jsx)(eo.E.div,{layoutId:`activeToggle-${o}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,type:"spring",stiffness:500,damping:30},style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:i?"#2a3748":aV.G9,zIndex:-1}})]},e.value.toString());return i&&r?(0,a.jsx)(ef.Z,{title:r,arrow:!0,placement:"top",children:d},e.value.toString()):d})})},oS=e=>{let{type:t}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("resolution"))),d=(0,w.useMemo)(()=>"image2video"===t?[{value:"512P",label:"512P"}]:[],[t]);return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:[{value:6,label:"6s"},{value:10,label:"10s"}],value:i,onChange:n})})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Resolution"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Resolution",options:[...d,{value:"768P",label:"768P"},{value:"1080P",label:"1080P",disabled:10===i,disabledReason:"1080P resolution is not available for 10s videos"}],value:r,onChange:s})})})]})},ow=()=>{let e=(0,ox.jz)(),t=(0,h.Bf)(e=>e.adapter.model),i=(0,h.Bf)(e=>e.adapter.supportModels),n=(0,h.Bf)(e=>e.updateVideoModel),r=(0,w.useMemo)(()=>{if(!i||!e)return i;let t=i.find(t=>t.key===e),n=i.filter(t=>t.key!==e);return t?[t,...n]:i},[i,e]),[s,l]=(0,w.useState)(null),d=()=>{l(null)},c=e=>{n(e.key),d()};return t?(0,a.jsxs)(o.Z,{px:1,py:1.5,height:48,sx:{backgroundColor:aV.hb,borderRadius:aV.tO},justifyContent:"space-between",alignItems:"center",direction:"row",children:[(0,a.jsx)(f.Z,{fontSize:14,fontWeight:600,children:"Select Model"}),(0,a.jsxs)(o.Z,{sx:{height:32,maxWidth:200,backgroundColor:aV.P,borderRadius:aV.zO,cursor:"pointer",px:1},direction:"row",alignItems:"center",justifyContent:"center",spacing:1,onClick:e=>{l(e.currentTarget)},children:[(0,a.jsx)("img",{height:"14px",width:"14px",src:t.iconUrl,alt:"model",style:{objectFit:"cover",objectPosition:"center"}}),(0,a.jsx)(f.Z,{variant:"body2",fontWeight:500,fontSize:16,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.label}),(0,a.jsx)(es.dFO,{})]}),(0,a.jsx)(t3.ZP,{open:!!s,anchorEl:s,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},slotProps:{paper:{sx:{width:300}}},children:(0,a.jsx)(o.Z,{sx:{py:1},children:null==r?void 0:r.map((e,i)=>(0,a.jsxs)(w.Fragment,{children:[(0,a.jsxs)(o.Z,{sx:{py:.75,px:2,cursor:"pointer","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"},position:"relative"},onClick:()=>c(e),spacing:.5,children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)("img",{height:"14px",width:"14px",src:e.iconUrl,alt:e.label,style:{objectFit:"cover",objectPosition:"center"}}),(0,a.jsx)(f.Z,{fontSize:16,fontWeight:500,children:e.label}),e.highQuality?(0,a.jsx)(o.Z,{sx:{backgroundColor:aV.$w,borderRadius:"4px",px:1,py:.25},children:(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,color:aV.U4,children:"High-Quality"})}):null,e.isNew?(0,a.jsx)(o.Z,{sx:{backgroundColor:aV.Hp,borderRadius:"4px",px:1,py:.25},children:(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,color:"white",children:"New"})}):null]}),(0,a.jsx)(tg.EU,{active:e.key===t.key,size:"small"})]}),(0,a.jsx)(f.Z,{color:aV.VA,fontSize:12,fontWeight:400,children:e.description})]}),i<r.length-1&&(0,a.jsx)(Z.Z,{})]},e.key))})})]}):null},oy=e=>{let{imageUrl:t}=e;return t?(0,a.jsx)("img",{src:t,alt:"Frame Preview",style:{width:28,height:28,minWidth:28,borderRadius:aV.c_,overflow:"hidden",backgroundColor:"#555"}}):(0,a.jsx)(s.Z,{sx:{width:28,height:28,minWidth:28,borderRadius:aV.c_,border:"1px dashed #888",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(f.Z,{sx:{color:"#888",fontSize:16},children:"+"})})},oC=e=>{let{imageUrl:t,label:i,isActive:n,onClick:r}=e;return(0,a.jsxs)(to.Z,{component:o.Z,direction:"row",spacing:1,onClick:r,sx:{backgroundColor:aV.hb,border:n?`1px solid ${aV.i7}`:"1px solid transparent",height:40,p:.5,borderRadius:aV.o0,cursor:"pointer",flex:1},justifyContent:"start !important",children:[(0,a.jsx)(oy,{imageUrl:t}),(0,a.jsx)(f.Z,{fontSize:12,fontWeight:500,color:aV.r_,children:i})]})},oZ=()=>{let e="activeFrameUpload",t=(0,h.Bf)(e=>e.adapter.model),i=(0,h.Bf)(t=>t.getUiState(e,"image_url")),n=(0,h.Bf)(e=>e.setUiState),[r,d]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("image_url"))),[c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("end_frame_image_url"))),u=(0,h.Bf)(e=>e.setEndFrameUrl),p=(0,w.useCallback)(t=>{n(e,t)},[n]),x=(0,w.useCallback)(()=>{r&&c&&(d(c),u(c?r:void 0))},[r,c,d,u]);return(0,w.useEffect)(()=>{t.support_end_frame||p("image_url")},[t.support_end_frame,p]),(0,a.jsxs)(o.Z,{sx:{backgroundColor:aV.P,borderRadius:aV.zO},children:[(0,a.jsx)(s.Z,{sx:{display:"image_url"===i?"block":"none"},children:(0,a.jsx)(aO,{value:r,onChange:e=>d(null==e?void 0:e.imageUrl),uploadUrl:"/media/upload_image"})}),(0,a.jsx)(s.Z,{sx:{display:"end_frame_image_url"===i?"block":"none"},children:(0,a.jsx)(aO,{value:c,onChange:e=>u(null==e?void 0:e.imageUrl),uploadUrl:"/media/upload_image"})}),(0,a.jsx)(Z.Z,{sx:{visibility:"image_url"===i&&r||"end_frame_image_url"===i&&c?"visible":"hidden",my:0}}),t.support_end_frame&&(r||c)?(0,a.jsxs)(o.Z,{direction:"row",px:1,py:1.5,alignItems:"center",spacing:1,children:[(0,a.jsx)(oC,{imageUrl:r,label:"Start Frame",isActive:"image_url"===i,onClick:()=>p("image_url")}),(0,a.jsx)(to.Z,{sx:{display:"flex",justifyContent:"center",borderRadius:"50%",p:.5,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"},transition:"background-color 0.2s",cursor:r&&c?"pointer":"default",opacity:r&&c?1:.5},disabled:!r||!c,onClick:x,children:(0,a.jsx)(es.N3R,{size:20})}),(0,a.jsx)(oC,{imageUrl:c,label:"End Frame (Optional)",isActive:"end_frame_image_url"===i,onClick:()=>p("end_frame_image_url")})]}):null]})},o_=e=>{let{placeholder:t="[Optional] Please provide a detailed description of the actions unfolding in the scene.",bottomElement:i,Component:n=oZ}=e,r=(0,h.Bf)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.Bf)(e=>e.setPrompt),d=(0,h.Bf)((0,l.N)(e=>e.getParameterValue("image_url"))),c=(0,h.Bf)((0,l.N)(e=>e.getParameterValue("image_urls")));return(0,a.jsxs)(o.Z,{spacing:1,sx:{backgroundColor:aV.hb,borderRadius:aV.tO},p:1.5,children:[(0,a.jsx)(n,{}),(0,a.jsx)(iI,{value:r,placeholder:t,onChange:s,dealWithDisplayPrompt:e=>e,showActionButtons:!1,InputProps:{slotProps:{input:{sx:{lineHeight:"23px",maxHeight:"69px",minHeight:"69px",overflowY:"auto !important",fontWeight:{xs:400,md:500},fontSize:{xs:12}}}},sx:{backgroundColor:aV.P,"& .MuiInputBase-input":{mb:0,width:"100%"},display:(null==c?void 0:c.length)>0||d?"block":"none"}}}),i]})},ok=e=>{let{bottomElement:t,autoEnhance:i,onAutoEnhanceChange:n}=e,r=(0,h.Bf)((0,l.N)(e=>e.getParameterValue("prompt"))),s=(0,h.Bf)(e=>e.setPrompt);return(0,a.jsxs)(o.Z,{spacing:1,sx:{backgroundColor:aV.hb,borderRadius:aV.tO},p:1.5,children:[(0,a.jsx)(iI,{value:r,placeholder:"Describe your video, For example: A 3D image of a little girl, wearing a flight jacket, skateboarding in a park.",onChange:s,dealWithDisplayPrompt:e=>e,autoEnhance:i,onAutoEnhanceChange:n,InputProps:{slotProps:{input:{sx:{lineHeight:"23px",maxHeight:"92px",minHeight:"92px",overflowY:"auto !important",fontWeight:{xs:400,md:500},fontSize:{xs:12}}}},sx:{backgroundColor:aV.P}}}),t]})},oP=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"}],oT=e=>{let{showResolution:t=!1}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("resolution"))),d=(0,w.useMemo)(()=>[{value:"580p",label:"580p"},{value:"720p",label:"720p"}],[]);return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:oP,value:i,onChange:n,showTitle:!1,showDefault:!1})})}),t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Resolution"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Resolution",options:d,value:r,onChange:s})})}):null]})},oE=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"1:1",name:"Square"}],oN=e=>{let{showAspectRatio:t=!0}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("creativity"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio")));return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:[{value:5,label:"5s"},{value:10,label:"10s"}],value:r,onChange:s})})}),t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:oE,value:d,onChange:c,showTitle:!1,showDefault:!1})})}):null]})},oI=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"1:1",name:"Square"}],oA=e=>{let{showAspectRatio:t=!0,showMode:i=!0}=e,n=(0,h.Bf)(e=>e.getParameterValue("end_frame_image_url")),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("videoMode"))),[u,p]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio")));return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),labelWidth:"30%",contentWidth:"70%",content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",disabledReason:"Not available when using end frame image",options:[{value:5,label:"5s"},{value:10,label:"10s"}],value:r,onChange:s})})}),i?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Quality Mode"})}),labelWidth:"30%",contentWidth:"70%",content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{disabled:!!n,id:"QualityMode",disabledReason:"Not available when using end frame image",options:[{value:"std",label:"Standard"},{value:"pro",label:"Pro"},{value:"master",label:"Master"}],value:d,onChange:c})})}):null,t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:oI,value:u,onChange:p,showTitle:!1,showDefault:!1})})}):null]})},oM=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"1:1",name:"Square"}],oU=e=>{let{showAspectRatio:t=!0}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("videoMode"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio")));return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:[{value:5,label:"5s"},{value:10,label:"10s"}],value:i,onChange:n})})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Quality Mode"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"QualityMode",options:[{value:"std",label:"Standard"},{value:"pro",label:"Pro"}],value:r,onChange:s})})}),t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:oM,value:d,onChange:c,showTitle:!1,showDefault:!1})})}):null]})},oR=()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("image_urls")));return(0,a.jsx)(aW,{value:e,onChange:t})},oz=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"1:1",name:"Square"}],oD=e=>Math.round(1e3*(-(e/1*1)+1))/1e3,oV=e=>-((e-1)/1*1),oF=e=>{let{showAspectRatio:t=!0,showMode:i=!0}=e,n=(0,h.Bf)(e=>e.getParameterValue("end_frame_image_url")),[r,d]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("creativity"))),[c,u]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),[p,x]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("videoMode"))),[m,g]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),j=e=>{d(oD(e))};return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Creativity level"})}),content:(0,a.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(r3.ZP,{value:oV(r),onChange:(e,t)=>{j(t)},min:0,max:1,step:.1,sx:{"& .MuiSlider-root":{touchAction:"none"},"& .MuiSlider-thumb":{backgroundColor:"white",border:`3px solid ${aV.Hp}`,width:16,height:16,touchAction:"none"},"& .MuiSlider-rail":{backgroundColor:"#555"},"& .MuiSlider-track":{backgroundColor:aV.te,opacity:1}}}),(0,a.jsx)(s.Z,{sx:{backgroundColor:"#333",borderRadius:aV.zO,padding:"1px 7px",minWidth:32,textAlign:"center"},children:(0,a.jsx)(f.Z,{fontWeight:400,color:"white",fontSize:12,children:oV(r).toFixed(1)})})]})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",disabledReason:"Not available when using end frame image",options:[{value:5,label:"5s"},{value:10,label:"10s"}],value:c,onChange:u})})}),i?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Quality Mode"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{disabled:!!n,id:"QualityMode",disabledReason:"Not available when using end frame image",options:[{value:"std",label:"Standard"},{value:"pro",label:"Pro"}],value:p,onChange:x})})}):null,t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:oz,value:m,onChange:g,showTitle:!1,showDefault:!1})})}):null]})},oB=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"1:1",name:"Square"},{ratio:"4:5",name:"Vertical"},{ratio:"5:4",name:"Art Print"},{ratio:"3:2",name:"Photo"},{ratio:"2:3",name:"Book"}],oO=e=>{let{showAspectRatio:t=!1}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("resolution"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),u=(0,w.useMemo)(()=>[{value:"720p",label:"720p"},{value:"1080p",label:"1080p"}],[]);return(0,a.jsxs)(o.Z,{spacing:1,children:[t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:oB,value:i,onChange:n,showTitle:!1,showDefault:!1})})}):null,(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Resolution"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Resolution",options:u,value:r,onChange:s})})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:[{value:5,label:"5s"},{value:10,label:"10s"}],value:d,onChange:c})})})]})},oW=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"3:4",name:"Classic"},{ratio:"1:1",name:"Square"}],oL=e=>{let{showAspectRatio:t=!0}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("resolution")));return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:[{value:5,label:"5s"},{value:8,label:"8s"}],value:r,onChange:s})})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Resolution"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Resolution",options:[{value:"360p",label:"Turbo"},{value:"720p",label:"720p"},{value:"1080p",label:"1080p",disabled:8===r,disabledReason:"1080p resolution is not available for 8s videos"}],value:d,onChange:c})})}),t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:oW,value:i,onChange:n,showTitle:!1,showDefault:!1})})}):null]})},oG=[{ratio:"1280:720",name:"Cinema"},{ratio:"720:1280",name:"Portrait"},{ratio:"1104:832",name:"Landscape"},{ratio:"832:1104",name:"Vertical"},{ratio:"960:960",name:"Square"},{ratio:"1584:672",name:"Photo"}],oH=e=>{let{showAspectRatio:t=!0}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration")));return(0,a.jsxs)(o.Z,{spacing:1,children:[t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:oG,value:i,onChange:n,showTitle:!1,showDefault:!1})})}):null,(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:[{value:5,label:"5s"},{value:10,label:"10s"}],value:r,onChange:s})})})]})},oK=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Vertical"},{ratio:"4:3",name:"Standard"},{ratio:"3:4",name:"Portrait"},{ratio:"9:21",name:"Portrait"},{ratio:"21:9",name:"Ultra Wide"},{ratio:"1:1",name:"Square"}],o$=[{ratio:"21:9",name:"Ultra Wide"},{ratio:"16:9",name:"Cinema"},{ratio:"4:3",name:"Standard"},{ratio:"1:1",name:"Square"},{ratio:"3:4",name:"Portrait"},{ratio:"9:16",name:"Vertical"}],oq=e=>{let{showResolution:t=!0}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("videoMode"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("resolution"))),[u,p]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[x,m]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("end_frame_image_url"))),g=(0,w.useMemo)(()=>"pro"===i?[{value:"480p",label:"480p"},{value:"1080p",label:"1080p"}]:[{value:"480p",label:"480p"},{value:"720p",label:"720p"},{value:"1080p",label:"1080p"}],[i]),j=(0,w.useMemo)(()=>"pro"===i?o$:oK,[i]);return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Quality Mode"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"QualityMode",options:[{value:"lite",label:"Lite"},{value:"pro",label:"Pro",disabled:""!==x&&null!=x,disabledReason:"Pro mode is not supported for end frame image"}],value:i,onChange:e=>{"pro"===e&&"720p"===d&&c("1080p"),n(e)}})})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:[{value:5,label:"5s"},{value:10,label:"10s"}],value:r,onChange:s})})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Resolution"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Resolution",options:g,value:d,onChange:c})})}),t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:j,value:u,onChange:p,showTitle:!1,showDefault:!1})})}):null]})},oX=[{value:"fast",label:"Fast"},{value:"normal",label:"Normal"}],oY=[{value:!0,label:"On"},{value:!1,label:"Off"}],oQ=[{value:"720p",label:"720p"},{value:"1080p",label:"1080p"}],oJ=e=>{let{showVideoMode:t=!1}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("generate_audio"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("resolution"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("videoMode")));return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Audio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Audio",options:oY,value:i,onChange:n})})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Resolution"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Resolution",options:oQ,value:r,onChange:s})})}),t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Video Mode"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Video Mode",options:oX,value:d,onChange:c})})}):null]})},o0=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"}],o1=[{ratio:"auto",name:"Auto"},{ratio:"auto_prefer_portrait",name:"Auto prefer portrait"},{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"}],o2=[{value:5,label:"5s"},{value:8,label:"8s"}],o5=()=>{let e=(0,h.Bf)((0,l.N)(e=>e.adapter.creation_mode)),[t,i]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[n,r]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration")));return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:o2,value:n,onChange:r})})}),(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:"image2video"===e?o1:o0,value:t,onChange:i,showTitle:!1,showDefault:!1})})})]})},o4=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"1:1",name:"Square"}],o3=e=>{let{showAspectRatio:t=!0}=e,[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[r,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("duration")));return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Duration"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Duration",options:[{value:4,label:"4s"},{value:8,label:"8s"}],value:r,onChange:s})})}),t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:o4,value:i,onChange:n,showTitle:!1,showDefault:!1})})}):null]})},o6=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"1:1",name:"Square"}],o8=e=>{let{showAspectRatio:t=!1,showVideoMode:i=!1}=e,[n,r]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[s,d]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("resolution"))),[c,u]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("videoMode"))),p=(0,w.useMemo)(()=>"5b"===c?[{value:"580p",label:"580p"},{value:"720p",label:"720p"}]:[{value:"480p",label:"480p"},{value:"580p",label:"580p"},{value:"720p",label:"720p"}],[c]),x=(0,w.useMemo)(()=>[{value:"5b",label:"Lite"},{value:"a14b",label:"Pro"}],[]);return(0,a.jsxs)(o.Z,{spacing:1,children:[t?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:o6,value:n,onChange:r,showTitle:!1,showDefault:!1})})}):null,(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Resolution"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Resolution",options:p,value:s,onChange:d})})}),i?(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Video mode"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(ov,{id:"Video mode",options:x,value:c,onChange:e=>{u(e),"5b"===e&&"480p"===s&&d("580p")}})})}):null]})},o9=[{ratio:"16:9",name:"Cinema"},{ratio:"9:16",name:"Portrait"},{ratio:"1:1",name:"Square"}],o7=()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio")));return(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsx)(r6,{sx:{height:32},label:(0,a.jsx)(o.Z,{children:(0,a.jsx)(f.Z,{fontSize:12,color:aV.Gw,fontWeight:500,children:"Aspect ratio"})}),content:(0,a.jsx)(o.Z,{children:(0,a.jsx)(eJ,{aspectRatios:o9,value:e,onChange:t,showTitle:!1,showDefault:!1})})})})};var se=i(40446);let st={[se.u.GPT_IMAGE_1]:()=>{let e="outputSizeKey",t=(0,h.TS)(t=>t.getUiState(e,!1)),i=(0,h.TS)(e=>e.ensureUiState),n="advance-settings-accordion.expanded",r=(0,h.TS)(e=>e.getUiState(n,!1)),s="image-guidance-accordion.expanded",d=(0,h.TS)(e=>e.getUiState(s,!0));(0,w.useEffect)(()=>{i(e,!0)},[]);let[c]=(0,x.y)({key:"create.config.imageGuidance"}),p=(0,h.TS)((0,l.N)(e=>e.getUiState("image_urls.expanded",!0))),[m,g]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_urls"))),f=(0,L.useRouter)(),v=(0,h.TS)(e=>e.updateActiveModel),S=async e=>{e.preventDefault();try{let e=await (0,ev.jE)("Flux_dev");if(e){let t=(0,W.J)({pageMode:u.V.CREATE,config:e});v(t)}setTimeout(()=>{f.replace({query:{...(0,H.Z)(f.query,"finetuned_model"),ai_model:"Flux_dev"}},void 0,{shallow:!0})},200)}catch(e){console.error("Failed to switch to Flux_dev model:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:d,onClick:e=>i(s,e),title:"Image Guidance",tooltip:iR,content:c?(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(iz,{className:"image-to-image-accordion-item",startIcon:aL.Z,label:"Omni Reference",value:m,expend:p,onExpendChange:e=>i("image_urls.expanded",e),extra:(0,a.jsx)(af,{name:"image_urls",value:m}),sx:a6,children:(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(aW,{value:m,onChange:g,sx:{p:1}}),(0,a.jsx)(b.Z,{severity:"info",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"https://openart.ai/fluxkontextbook",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Learn more"})," ","how to use Omni reference. To iteratively edit, use"," ",(0,a.jsx)("a",{href:"https://openart.ai/create?mode=chat_to_edit",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Chat to Edit"}),". For classic img2img, select"," ",(0,a.jsx)("a",{style:{textDecoration:"underline",cursor:"pointer"},onClick:S,children:"Flux dev"}),"."]})})]})})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:t,onClick:t=>i(e,t),title:"Output Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(aN,{}),(0,a.jsx)(a3,{})]})}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Advance Settings",content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(ay,{UpscaleAEnhanceProps:{showOutputSizeText:!1,enableEnhance:[]}})})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(a8,{})]})]})},[se.u.IMAGEN3]:()=>{let e="advanceSettings",[t,i]=(0,h.TS)((0,l.N)(t=>[t.getUiState(e,!1),t.setUiState])),n="outputSizeKey",r=(0,h.TS)(e=>e.getUiState(n,!1));return(0,w.useEffect)(()=>{i(n,!0)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Output Settings",content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(aN,{predefinedSizes:ri,sizeMappings:rn})})}),(0,a.jsx)(eO,{expanded:t,onClick:t=>i(e,t),title:"Advance Settings",content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(ay,{UpscaleAEnhanceProps:{showOutputSizeText:!1,enableEnhance:[]}})})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(rt,{})]})]})},[se.u.BYTEPLUS_SEEDREAM_3]:()=>{let e="advanceSettings",[t,i]=(0,h.TS)((0,l.N)(t=>[t.getUiState(e,!1),t.setUiState])),n="outputSizeKey",r=(0,h.TS)(e=>e.getUiState(n,!1));(0,w.useEffect)(()=>{i(n,!0)},[]);let s="image-guidance-accordion.expanded",d=(0,h.TS)(e=>e.getUiState(s,!0)),[c]=(0,x.y)({key:"create.config.imageGuidance"}),[p,m]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_urls"))),g=(0,h.TS)((0,l.N)(e=>e.getUiState("image_urls.expanded",!0))),f=(0,L.useRouter)(),v=(0,h.TS)(e=>e.updateActiveModel),S=async e=>{e.preventDefault();try{let e=await (0,ev.jE)("Flux_dev");if(e){let t=(0,W.J)({pageMode:u.V.CREATE,config:e});v(t)}setTimeout(()=>{f.replace({query:{...(0,H.Z)(f.query,"finetuned_model"),ai_model:"Flux_dev"}},void 0,{shallow:!0})},200)}catch(e){console.error("Failed to switch to Flux_dev model:",e)}},[,y]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[C,_]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("steps"))),k=(0,h.TS)((0,l.N)(e=>e.getUiState("image_urls.enable",!0)));(0,w.useEffect)(()=>{p.some(Boolean)&&k?(y("adaptive"),_(5.5)):(y("1024x1024"),_(2.5))},[p,k,y]);let P=(0,w.useMemo)(()=>p.some(Boolean)&&k?[{value:"adaptive",title:"Auto"}]:r$,[p,k]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:d,onClick:e=>i(s,e),title:"Image Guidance",tooltip:iR,content:c?(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(iz,{className:"image-to-image-accordion-item",startIcon:es.tPR,label:"Omni Reference",value:p,expend:g,onExpendChange:e=>i("image_urls.expanded",e),extra:(0,a.jsx)(af,{name:"image_urls",value:p}),sx:rH,children:(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(aW,{value:p,onChange:m,sx:{p:1}}),(0,a.jsx)(b.Z,{severity:"info",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"https://openart.ai/fluxkontextbook",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Learn more"})," ","how to use Omni reference. To iteratively edit, use"," ",(0,a.jsx)("a",{href:"https://openart.ai/create?mode=chat_to_edit",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Chat to Edit"}),". For classic img2img, select"," ",(0,a.jsx)("a",{style:{textDecoration:"underline",cursor:"pointer"},onClick:S,children:"Flux dev"}),"."]})})]})})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Output Settings",content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(aN,{predefinedSizes:P,sizeMappings:rq})})}),(0,a.jsx)(eO,{expanded:t,onClick:t=>i(e,t),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(tR,{value:C,onChange:_,stepProps:{max:10,min:1,label:"Guidance Scale",stepTipText:"Controls the influence of text descriptions versus input images on the generated result. Range: 1–10 (float). Higher values increase the effect of text descriptions and decrease the effect of input images."}}),(0,a.jsx)(ay,{})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(rK,{})]})]})},[se.u.DALLE3]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(d.Z,{showDalleCreditsInfo:!0,isDALL:!0}),(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(ad,{})]})]}),[se.u.FLUX]:()=>{let{isMobile:e}=(0,c.T)(),t=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),i=(0,h.TS)(e=>e.setSteps),n="output-size-accordion.expanded",r=(0,h.TS)(t=>t.getUiState(n,!e)),s="advance-settings-accordion.expanded",d=(0,h.TS)(e=>e.getUiState(s,!1)),u=(0,h.TS)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:r,onClick:e=>u(n,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:d,onClick:e=>u(s,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(tR,{min:1,max:20,value:t,onChange:i}),(0,a.jsx)(a5,{enableEnhance:[]})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(a1,{})]})]})},[se.u.FLUX_DEV]:()=>{let{isMobile:e}=(0,c.T)(),[t]=(0,x.y)({key:"create.config.imageGuidance"}),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),s=(0,h.TS)(e=>e.setSteps),d=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),u=(0,h.TS)(e=>e.setSeed),p=(0,h.TS)(e=>e.getParameterValue("base_model")),m=ak.GC.find(e=>e.key===p),g=(null==m?void 0:m.defaultValues.imageReference.length)>0,b=(0,h.TS)((0,l.N)(e=>e.getUiState("imageReference.subject.enable",!1))),v=(0,w.useMemo)(()=>({max:50,min:1}),[b]),S=(0,h.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),y=(0,h.TS)(e=>e.ensureUiState),C="image-guidance-accordion.expanded",_=(0,h.TS)(e=>e.getUiState(C,!0)),k="output-size-accordion.expanded",P=(0,h.TS)(t=>t.getUiState(k,!e)),T="advance-settings-accordion.expanded",E=(0,h.TS)(e=>e.getUiState(T,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(aC,{open:S,onClick:e=>y("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{value:i,onChange:n,min:1,max:20})})})})}),(0,a.jsx)(eO,{expanded:_,onClick:e=>y(C,e),title:"Image Guidance",tooltip:iR,content:t?(0,a.jsxs)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(av,{}),g?(0,a.jsx)(aj,{}):null]}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:P,onClick:e=>y(k,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:E,onClick:e=>y(T,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(ax,{value:d,onChange:u}),(0,a.jsx)(tR,{min:1,max:50,value:r,...v,onChange:s}),(0,a.jsx)(ay,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(a_,{})]})]})},[se.u.FLUX_REALISM]:()=>{let{isMobile:e}=(0,c.T)(),[t]=(0,x.y)({key:"create.config.imageGuidance"}),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),s=(0,h.TS)(e=>e.setSteps),d=(0,h.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),u=(0,h.TS)(e=>e.ensureUiState),p="image-guidance-accordion.expanded",m=(0,h.TS)(e=>e.getUiState(p,!0)),g="output-size-accordion.expanded",b=(0,h.TS)(t=>t.getUiState(g,!e)),v="advance-settings-accordion.expanded",S=(0,h.TS)(e=>e.getUiState(v,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(aC,{open:d,onClick:e=>u("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{value:i,onChange:n,min:0,max:20})})})})}),(0,a.jsx)(eO,{expanded:m,onClick:e=>u(p,e),title:"Image Guidance",tooltip:iR,content:t?(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(av,{})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:b,onClick:e=>u(g,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:S,onClick:e=>u(v,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(tR,{min:1,max:50,value:r,onChange:s}),(0,a.jsx)(ay,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(a1,{})]})]})},[se.u.FLUX_PRO]:()=>{let{isMobile:e}=(0,c.T)(),[t]=(0,a2.jC)(),i=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),n=(0,h.TS)(e=>e.setSeed),r=(0,h.TS)(e=>e.ensureUiState),s="advance-settings-accordion.expanded",d=(0,h.TS)(t=>t.getUiState(s,!e)),u="output-size-accordion.expanded",p=(0,h.TS)(e=>e.getUiState(u,!0));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(a0,{})}),(0,a.jsx)(eO,{expanded:d,onClick:e=>r(s,e),title:"Advance Settings",content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(ax,{value:i,onChange:n})})}),(0,a.jsx)(eO,{expanded:p,onClick:e=>r(u,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(Z.Z,{}),(0,a.jsxs)(b.Z,{severity:"info",sx:{m:1},children:["Want more control like img2img, composition/style/face reference? Try out"," ",(0,a.jsx)(ej.Z,{component:"a",onClick:()=>{t({base_model:"Flux_dev",parameters:{}})},sx:{cursor:"pointer",textDecoration:"underline"},children:"Flux dev"})," or ",(0,a.jsx)(ej.Z,{onClick:()=>{t({base_model:"openart/OpenArt_SDXL",parameters:{}})},sx:{cursor:"pointer",textDecoration:"underline"},children:"Openart SDXL"})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(a1,{})]})]})},[se.u.FLUX_KONTEXT]:aq,[se.u.FLUX_KONTEXT_MAX]:aq,[se.u.FLUX_KONTEXT_DEV]:()=>{let e="outputSizeKey",t=(0,h.TS)(t=>t.getUiState(e,!1)),i=(0,h.TS)(e=>e.ensureUiState),n="advance-settings-accordion.expanded",r=(0,h.TS)(e=>e.getUiState(n,!1)),s="image-guidance-accordion.expanded",d=(0,h.TS)(e=>e.getUiState(s,!0)),[,c]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[p,m]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("image_urls"))),g=(0,w.useMemo)(()=>p.some(Boolean)?[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"1:1",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"16:9",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"5:4",title:"Art Print (5:4)",subtitle:"5:4 ratio"},{value:"4:3",title:"Classic (4:3)",subtitle:"4:3 ratio"},{value:"3:2",title:"Photo (3:2)",subtitle:"3:2 ratio"},{value:"2:3",title:"Book (2:3)",subtitle:"2:3 ratio"},{value:"3:4",title:"Portrait (3:4)",subtitle:"3:4 ratio"},{value:"4:5",title:"Vertical (4:5)",subtitle:"4:5 ratio"},{value:"9:16",title:"Mobile (9:16)",subtitle:"9:16 ratio"},{value:"21:9",title:"Ultrawide (21:9)",subtitle:"21:9 ratio"}]:[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"square",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"square_hd",title:"Square HD (1:1)",subtitle:"16:9 ratio"},{value:"portrait_4_3",title:"Portrait (4:3)",subtitle:"4:3 ratio"},{value:"portrait_16_9",title:"Portrait (9:16)",subtitle:"16:9 ratio"},{value:"landscape_16_9",title:"Landscape (16:9)",subtitle:"16:9 ratio"}],[p]),f=(0,w.useMemo)(()=>({square:{width:1024,height:1024},square_hd:{width:1024,height:1024},portrait_4_3:{width:768,height:1024},portrait_16_9:{width:576,height:1024},landscape_16_9:{width:1024,height:576}}),[]);(0,w.useEffect)(()=>{i(e,!0)},[]),(0,w.useEffect)(()=>{p.some(Boolean),c("auto")},[p,c]);let[v]=(0,x.y)({key:"create.config.imageGuidance"}),S=(0,h.TS)((0,l.N)(e=>e.getUiState("image_urls.expanded",!0))),y=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),C=(0,h.TS)(e=>e.setSteps),_=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),k=(0,h.TS)(e=>e.setSeed),P=(0,L.useRouter)(),T=(0,h.TS)(e=>e.updateActiveModel),E=async e=>{e.preventDefault();try{let e=await (0,ev.jE)("Flux_dev");if(e){let t=(0,W.J)({pageMode:u.V.CREATE,config:e});T(t)}setTimeout(()=>{P.replace({query:{...(0,H.Z)(P.query,"finetuned_model"),ai_model:"Flux_dev"}},void 0,{shallow:!0})},200)}catch(e){console.error("Failed to switch to Flux_dev model:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:d,onClick:e=>i(s,e),title:"Image Guidance",tooltip:iR,content:v?(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(iz,{className:"image-to-image-accordion-item",startIcon:aL.Z,label:"Omni Reference",value:p,expend:S,onExpendChange:e=>i("image_urls.expanded",e),extra:(0,a.jsx)(af,{name:"image_urls",value:p}),sx:aG,children:(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(aW,{value:p,onChange:m,sx:{p:1}}),(0,a.jsx)(b.Z,{severity:"info",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"https://openart.ai/fluxkontextbook",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Learn more"})," ","how to use Omni reference. To iteratively edit, use"," ",(0,a.jsx)("a",{href:"https://openart.ai/create?mode=chat_to_edit",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Chat to Edit"}),". For classic img2img, select"," ",(0,a.jsx)("a",{style:{textDecoration:"underline",cursor:"pointer"},onClick:E,children:"Flux dev"}),"."]})})]})})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(aN,{delimiter:":",predefinedSizes:g,sizeMappings:f})}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(ax,{value:_,onChange:k}),(0,a.jsx)(tR,{min:1,max:150,value:y,onChange:C}),(0,a.jsx)(ay,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(aH,{})]})]})},[se.u.FLUX_KREA]:()=>{let e="outputSizeKey",t=(0,h.TS)(t=>t.getUiState(e,!1)),i=(0,h.TS)(e=>e.ensureUiState),n="advance-settings-accordion.expanded",r=(0,h.TS)(e=>e.getUiState(n,!1)),s="image-guidance-accordion.expanded",d=(0,h.TS)(e=>e.getUiState(s,!0)),[,c]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),u=(0,h.TS)((0,l.N)(e=>e.getParameterValue("imageReference"))),p=(0,h.TS)(e=>e.setFluxDevReference),m=(0,h.TS)((0,l.N)(e=>e.getParameterValue("type"))),g=(0,w.useMemo)(()=>{let e=u.getTypeValue("subject");return e&&e.image_url?[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"}]:[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"square",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"square_hd",title:"Square HD (1:1)",subtitle:"1:1 ratio"},{value:"portrait_4_3",title:"Portrait (3:4)",subtitle:"3:4 ratio"},{value:"portrait_16_9",title:"Portrait (9:16)",subtitle:"9:16 ratio"},{value:"landscape_16_9",title:"Landscape (16:9)",subtitle:"16:9 ratio"},{value:"landscape_4_3",title:"Landscape (4:3)",subtitle:"4:3 ratio"}]},[u]),f=(0,w.useMemo)(()=>({auto:{width:1024,height:1024},square:{width:1024,height:1024},square_hd:{width:1024,height:1024},portrait_4_3:{width:768,height:1024},portrait_16_9:{width:576,height:1024},landscape_16_9:{width:1024,height:576},landscape_4_3:{width:1024,height:768}}),[]);(0,w.useEffect)(()=>{i(e,!0)},[]),(0,w.useEffect)(()=>{let e=u.getTypeValue("subject");e&&e.image_url,c("auto")},[u,c]);let[b]=(0,x.y)({key:"create.config.imageGuidance"}),v=(0,h.TS)((0,l.N)(e=>e.getUiState("image_urls.expanded",!0))),S=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),y=(0,h.TS)(e=>e.setSteps),C=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),_=(0,h.TS)(e=>e.setSeed);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:d,onClick:e=>i(s,e),title:"Image Guidance",tooltip:iR,content:b?(0,a.jsx)(iz,{className:"image-reference-subject-accordion-item",startIcon:aL.Z,label:"Subject/Face Reference",isNew:!0,value:u.getTypeValue("subject"),expend:v,onExpendChange:e=>i("imageReference.subject.expanded",e),extra:(0,a.jsx)(am,{name:"imageReference.subject",value:u.getTypeValue("subject")}),sx:aX,children:(0,a.jsx)(nk,{hideInfluenceStrength:!0,banner:"Subject Reference",value:u.getTypeValue("subject"),onChange:e=>p({data:e,...e1.m[m]})})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(aN,{delimiter:":",predefinedSizes:g,sizeMappings:f})}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(ax,{value:C,onChange:_}),(0,a.jsx)(tR,{min:1,max:150,value:S,onChange:y}),(0,a.jsx)(ay,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(aY,{})]})]})},[se.u.QWEN_IMAGE]:()=>{let e="outputSizeKey",t=(0,h.TS)(t=>t.getUiState(e,!1)),i=(0,h.TS)(e=>e.ensureUiState);(0,w.useEffect)(()=>{i(e,!0)},[i]);let n="advance-settings-accordion.expanded",r=(0,h.TS)(e=>e.getUiState(n,!1)),[,s]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("width"))),[,d]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("height"))),[c]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),u=(0,w.useMemo)(()=>({square:{width:1024,height:1024},ultra_wide:{width:1536,height:640},wide:{width:1344,height:768},standard:{width:1152,height:896},classic:{width:1280,height:832},classic_portrait:{width:832,height:1280},standard_portrait:{width:896,height:1152},tall_portrait:{width:768,height:1344},ultra_tall:{width:640,height:1536}}),[]);(0,w.useEffect)(()=>{let e=u[c];e&&(s(e.width),d(e.height))},[c,s,d,u]);let p=(0,w.useMemo)(()=>[{value:"square",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"ultra_wide",title:"Ultra-Wide (21:9)",subtitle:"21:9 ratio"},{value:"wide",title:"Wide (16:9)",subtitle:"16:9 ratio"},{value:"standard",title:"Standard (4:3)",subtitle:"4:3 ratio"},{value:"classic",title:"Classic (3:2)",subtitle:"3:2 ratio"},{value:"classic_portrait",title:"Classic-Portrait (2:3)",subtitle:"2:3 ratio"},{value:"standard_portrait",title:"Standard-Portrait (3:4)",subtitle:"3:4 ratio"},{value:"tall_portrait",title:"Tall-Portrait (9:16)",subtitle:"9:16 ratio"},{value:"ultra_tall",title:"Ultra-Tall (9:21)",subtitle:"9:21 ratio"}],[]),x=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),m=(0,h.TS)(e=>e.setSteps),g=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),f=(0,h.TS)(e=>e.setSeed);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(aN,{delimiter:":",predefinedSizes:p,sizeMappings:u})}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(ax,{value:g,onChange:f}),(0,a.jsx)(tR,{min:1,max:150,value:x,onChange:m}),(0,a.jsx)(ay,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(ra,{})]})]})},[se.u.HI_DREAM_I1]:()=>{let e="outputSizeKey",t=(0,h.TS)(t=>t.getUiState(e,!1)),i=(0,h.TS)(e=>e.ensureUiState);(0,w.useEffect)(()=>{i(e,!0)},[i]);let n="advance-settings-accordion.expanded",r=(0,h.TS)(e=>e.getUiState(n,!1)),[,s]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("width"))),[,d]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("height"))),[c]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),u=(0,w.useMemo)(()=>({square:{width:1024,height:1024},ultra_wide:{width:1536,height:640},wide:{width:1344,height:768},standard:{width:1152,height:896},classic:{width:1280,height:832},classic_portrait:{width:832,height:1280},standard_portrait:{width:896,height:1152},tall_portrait:{width:768,height:1344},ultra_tall:{width:640,height:1536}}),[]);(0,w.useEffect)(()=>{let e=u[c];e&&(s(e.width),d(e.height))},[c,s,d,u]);let p=(0,w.useMemo)(()=>[{value:"square",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"ultra_wide",title:"Ultra-Wide (21:9)",subtitle:"21:9 ratio"},{value:"wide",title:"Wide (16:9)",subtitle:"16:9 ratio"},{value:"standard",title:"Standard (4:3)",subtitle:"4:3 ratio"},{value:"classic",title:"Classic (3:2)",subtitle:"3:2 ratio"},{value:"classic_portrait",title:"Classic-Portrait (2:3)",subtitle:"2:3 ratio"},{value:"standard_portrait",title:"Standard-Portrait (3:4)",subtitle:"3:4 ratio"},{value:"tall_portrait",title:"Tall-Portrait (9:16)",subtitle:"9:16 ratio"},{value:"ultra_tall",title:"Ultra-Tall (9:21)",subtitle:"9:21 ratio"}],[]),x=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),m=(0,h.TS)(e=>e.setSteps),g=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),f=(0,h.TS)(e=>e.setSeed);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{}),(0,a.jsx)(eO,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(aN,{delimiter:":",predefinedSizes:p,sizeMappings:u})}),(0,a.jsx)(eO,{expanded:r,onClick:e=>i(n,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(a9,{options:a7}),(0,a.jsx)(ax,{value:g,onChange:f}),(0,a.jsx)(tR,{min:1,max:150,value:x,onChange:m}),(0,a.jsx)(ay,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(re,{})]})]})},[se.u.KOLORS]:()=>{let{isMobile:e}=(0,c.T)(),[t]=(0,x.y)({key:"create.config.imageGuidance"}),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[r,s]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),d=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),u=(0,h.TS)(e=>e.setSteps),p=(0,h.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),m=(0,h.TS)(e=>e.ensureUiState),g="image-guidance-accordion.expanded",b=(0,h.TS)(e=>e.getUiState(g,!0)),v="output-size-accordion.expanded",S=(0,h.TS)(t=>t.getUiState(v,!e)),w="advance-settings-accordion.expanded",y=(0,h.TS)(e=>e.getUiState(w,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(aC,{open:p,onClick:e=>m("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(eH,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ac,{value:i,onChange:n}),children:(0,a.jsx)(au,{value:i,onChange:n})}),(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{value:r,onChange:s,min:2,max:10})})]})})}),(0,a.jsx)(eO,{expanded:b,onClick:e=>m(g,e),title:"Image Guidance",tooltip:iR,content:t?(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(av,{})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:y,onClick:e=>m(w,e),title:"Advance Settings",content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(tR,{max:70,min:10,value:d,onChange:u})})}),(0,a.jsx)(eO,{expanded:S,onClick:e=>m(v,e),title:"Output Size",content:(0,a.jsx)(aw,{})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(a_,{})]})]})},[se.u.SD3]:()=>{let{isMobile:e}=(0,c.T)(),[t]=(0,x.y)({key:"create.config.imageGuidance"}),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[r,s]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),d=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),u=(0,h.TS)(e=>e.setSteps),p=(0,h.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),m=(0,h.TS)(e=>e.ensureUiState),g="image-guidance-accordion.expanded",b=(0,h.TS)(e=>e.getUiState(g,!0)),v="output-size-accordion.expanded",S=(0,h.TS)(t=>t.getUiState(v,!e)),w="advance-settings-accordion.expanded",y=(0,h.TS)(e=>e.getUiState(w,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(aC,{open:p,onClick:e=>m("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(eH,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ac,{value:i,onChange:n}),children:(0,a.jsx)(au,{value:i,onChange:n})}),(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{value:r,onChange:s})})]})})}),(0,a.jsx)(eO,{expanded:b,onClick:e=>m(g,e),title:"Image Guidance",tooltip:iR,content:t?(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(av,{})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:S,onClick:e=>m(v,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:y,onClick:e=>m(w,e),title:"Advance Settings",content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(tR,{min:10,max:50,value:d,onChange:u})})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(rr,{})]})]})},[se.u.SD35]:()=>{let{isMobile:e}=(0,c.T)(),[t]=(0,x.y)({key:"create.config.imageGuidance"}),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),r=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),s=(0,h.TS)(e=>e.setSteps),d=(0,h.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),u=(0,h.TS)(e=>e.ensureUiState),p="image-guidance-accordion.expanded",m=(0,h.TS)(e=>e.getUiState(p,!0)),g="output-size-accordion.expanded",b=(0,h.TS)(t=>t.getUiState(g,!e)),v="advance-settings-accordion.expanded",S=(0,h.TS)(e=>e.getUiState(v,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(aC,{open:d,onClick:e=>u("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsx)(o.Z,{spacing:1,children:(0,a.jsx)(eH,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ac,{value:i,onChange:n}),children:(0,a.jsx)(au,{value:i,onChange:n})})})})}),(0,a.jsx)(eO,{expanded:m,onClick:e=>u(p,e),className:"image-guidance-accordion",title:"Image Guidance",tooltip:iR,content:t?(0,a.jsx)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(av,{})}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:b,onClick:e=>u(g,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:S,onClick:e=>u(v,e),title:"Advance Settings",content:(0,a.jsx)(o.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(tR,{min:1,max:12,value:r,onChange:s})})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(rr,{})]})]})},[se.u.FINETUNED]:()=>{let[e]=(0,x.y)({key:"create.config.imageGuidance"}),{isMobile:t}=(0,c.T)(),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("model_weight"))),[r,s]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("object_prompt"))),[d,u]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[p,m]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),g=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),b=(0,h.TS)(e=>e.setSteps),v=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),S=(0,h.TS)(e=>e.setSeed),w=(0,h.TS)(e=>"face"!==e.originalConfig.training_mode),y=(0,h.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),C=(0,h.TS)(e=>e.ensureUiState),_="image-guidance-accordion.expanded",k=(0,h.TS)(e=>e.getUiState(_,!0)),P="output-size-accordion.expanded",T=(0,h.TS)(e=>e.getUiState(P,!t)),E="advance-settings-accordion.expanded",N=(0,h.TS)(e=>e.getUiState(E,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{modelKey:"model_id",bottomElement:(0,a.jsxs)(o.Z,{spacing:2,children:[(0,a.jsx)(eH,{label:"Weight",showValue:!0,value:i,children:(0,a.jsx)(e0.A,{label:"Weight",value:i,onChange:n,min:0,max:1.5,step:.01,unit:"",disabled:!e})}),w?(0,a.jsx)(eH,{label:"Character description",tooltip:"This is the model’s guiding description. You may adjust it according to your needs. It’s usually best to keep it short and focused, like “impressionist painting,” or ”cyberpunk digital art.”",children:(0,a.jsx)(ah,{value:r,onChange:s})}):null]})}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(aC,{open:y,onClick:e=>C("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(eH,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ac,{value:d,onChange:u}),children:(0,a.jsx)(au,{value:d,onChange:u})}),(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{value:p,onChange:m,max:20,min:2,step:1})})]})})}),(0,a.jsx)(eO,{expanded:k,onClick:e=>C(_,e),title:"Image Guidance",tooltip:iR,content:e?(0,a.jsxs)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(av,{}),(0,a.jsx)(aj,{})]}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:T,onClick:e=>C(P,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:N,onClick:e=>C(E,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(ax,{value:v,onChange:S}),(0,a.jsx)(tR,{min:1,max:50,value:g,onChange:b}),(0,a.jsx)(ay,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(aZ,{})]})]})},[se.u.SDXL]:()=>{let[e]=(0,x.y)({key:"create.config.imageGuidance"}),{isMobile:t}=(0,c.T)(),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[r,s]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),[d,u]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("tiling"))),[p,m]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("sampler"))),g=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),b=(0,h.TS)(e=>e.setSteps),v=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),S=(0,h.TS)(e=>e.setSeed),w=(0,h.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),y="image-guidance-accordion.expanded",C=(0,h.TS)(e=>e.getUiState(y,!0)),_="output-size-accordion.expanded",k=(0,h.TS)(e=>e.getUiState(_,!t)),P="advance-settings-accordion.expanded",T=(0,h.TS)(e=>e.getUiState(P,!1)),E=(0,h.TS)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(aC,{open:w,onClick:e=>E("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(eH,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ac,{value:i,onChange:n}),children:(0,a.jsx)(au,{value:i,onChange:n})}),(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{value:r,onChange:s})})]})})}),(0,a.jsx)(eO,{expanded:C,onClick:e=>E(y,e),className:"image-guidance-accordion",title:"Image Guidance",tooltip:iR,content:e?(0,a.jsxs)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(av,{}),(0,a.jsx)(rN,{}),(0,a.jsx)(rk,{options:rC._4})]}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:k,onClick:e=>E(_,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:T,onClick:e=>E(P,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eH,{label:"Tiling",tooltip:"Enable seamless tiling for the generated image.",children:(0,a.jsx)(rl,{value:d,onChange:u})}),(0,a.jsx)(eH,{label:"Sampler",tooltip:"The denoising algorithm used to generate the image. Different samplers can be good at generating different images.",children:(0,a.jsx)(ro,{value:p,onChange:m,options:rB.l.map(e=>({value:e,label:e}))})}),(0,a.jsx)(ax,{value:v,onChange:S}),(0,a.jsx)(tR,{min:10,max:70,value:g,onChange:b}),(0,a.jsx)(ay,{})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(rG,{})]})]})},[se.u.SD15]:()=>{let[e]=(0,x.y)({key:"create.config.imageGuidance"}),{isMobile:t}=(0,c.T)(),[i,n]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[r,s]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),[d,u]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("tiling"))),[p,m]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("sampler"))),g=(0,h.TS)((0,l.N)(e=>e.getParameterValue("steps"))),b=(0,h.TS)(e=>e.setSteps),v=(0,h.TS)((0,l.N)(e=>e.getParameterValue("seed"))),S=(0,h.TS)(e=>e.setSeed),w=(0,h.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),y=(0,h.TS)(e=>e.ensureUiState),C="image-guidance-accordion.expanded",_=(0,h.TS)(e=>e.getUiState(C,!0)),k="output-size-accordion.expanded",P=(0,h.TS)(e=>e.getUiState(k,!t)),T="advance-settings-accordion.expanded",E=(0,h.TS)(e=>e.getUiState(T,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(ar,{openart_presets_list:al.vJ}),(0,a.jsx)(eD,{}),(0,a.jsx)(ao,{bottomElement:(0,a.jsx)(aC,{open:w,onClick:e=>y("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(f.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(eH,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ac,{value:i,onChange:n}),children:(0,a.jsx)(au,{value:i,onChange:n})}),(0,a.jsx)(eH,{children:(0,a.jsx)(tp,{value:r,onChange:s})})]})})}),(0,a.jsx)(eO,{expanded:_,onClick:e=>y(C,e),title:"Image Guidance",tooltip:iR,content:e?(0,a.jsxs)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(av,{}),(0,a.jsx)(rN,{}),(0,a.jsx)(rk,{options:rC.Ki})]}):(0,a.jsx)(eL.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO,{expanded:P,onClick:e=>y(k,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:E,onClick:e=>y(T,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eH,{children:(0,a.jsx)(rl,{value:d,onChange:u})}),(0,a.jsx)(eH,{label:"Sampler",tooltip:"The denoising algorithm used to generate the image. Different samplers can be good at generating different images.",children:(0,a.jsx)(ro,{value:p,onChange:m,options:rB.l.map(e=>({value:e,label:e}))})}),(0,a.jsx)(ax,{value:v,onChange:S}),(0,a.jsx)(tR,{min:10,max:70,value:g,onChange:b}),(0,a.jsx)(ay,{})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(rW,{})]})]})},[se.u.BULK_CREATE_UNSUPPORT]:()=>{let[e,t]=(0,x.y)({key:"bulkCreate",sx:{".feature-block-title-text":{fontSize:13},".feature-block-description":{fontSize:10}}});return(0,a.jsxs)(j,{children:[(0,a.jsx)(r.Z,{m:1,children:t()}),(0,a.jsx)(eD,{}),(0,a.jsx)(S,{children:(0,a.jsx)(v,{children:"This model is not supported."})})]})},[se.u.BULK_SDXL]:()=>{let{isMobile:e}=(0,c.T)(),[t,i]=(0,x.y)({key:"bulkCreate",sx:{".feature-block-title-text":{fontSize:13},".feature-block-description":{fontSize:10}}}),[n,r]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("tiling"))),[s,d]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("sampler"))),[u,p]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("steps"))),m=(0,h.TS)(e=>e.ensureUiState),g="image-of-number-accordion.expanded",f=(0,h.TS)(e=>e.getUiState(g,!1)),b="image-guidance-accordion.expanded",v=(0,h.TS)(e=>e.getUiState(b,!0)),S="output-size-accordion.expanded",w=(0,h.TS)(t=>t.getUiState(S,!e)),y="advance-settings-accordion.expanded",C=(0,h.TS)(e=>e.getUiState(y,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(o.Z,{m:1,children:i()}),(0,a.jsx)(eD,{}),(0,a.jsx)(rm,{}),(0,a.jsx)(eO,{expanded:f,onClick:e=>m(g,e),title:"Numbers of Images",content:(0,a.jsx)(ry,{})}),(0,a.jsx)(eO,{expanded:v,onClick:e=>m(b,e),className:"image-guidance-accordion",title:"Image Guidance",tooltip:iR,content:(0,a.jsxs)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(av,{}),(0,a.jsx)(rN,{}),(0,a.jsx)(rk,{options:rC._4})]})}),(0,a.jsx)(eO,{expanded:w,onClick:e=>m(S,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:C,onClick:e=>m(y,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eH,{label:"Tiling",tooltip:"Enable seamless tiling for the generated image.",children:(0,a.jsx)(rl,{value:n,onChange:r})}),(0,a.jsx)(eH,{label:"Sampler",tooltip:"The denoising algorithm used to generate the image. Different samplers can be good at generating different images.",children:(0,a.jsx)(ro,{options:rB.l.map(e=>({value:e,label:e})),value:s,onChange:d})}),(0,a.jsx)(eH,{label:"Steps",tooltip:"The number of denoising steps. More steps generally result in higher quality images but take longer to generate.",children:(0,a.jsx)(tU,{min:10,max:70,disabled:!t,value:u,onChange:p})})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(rL,{})]})]})},[se.u.BULK_SD15]:()=>{let{isMobile:e}=(0,c.T)(),[t,i]=(0,x.y)({key:"bulkCreate",sx:{".feature-block-title-text":{fontSize:13},".feature-block-description":{fontSize:10}}}),[n,r]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("tiling"))),[s,d]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("sampler"))),[u,p]=(0,h.TS)((0,l.N)(e=>e.getParameterValueAndSetter("steps"))),m=(0,h.TS)(e=>e.ensureUiState),g="image-of-number-accordion.expanded",f=(0,h.TS)(e=>e.getUiState(g,!1)),b="image-guidance-accordion.expanded",v=(0,h.TS)(e=>e.getUiState(b,!0)),S="output-size-accordion.expanded",w=(0,h.TS)(t=>t.getUiState(S,!e)),y="advance-settings-accordion.expanded",C=(0,h.TS)(e=>e.getUiState(y,!1));return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(o.Z,{m:1,children:i()}),(0,a.jsx)(eD,{}),(0,a.jsx)(rm,{}),(0,a.jsx)(eO,{expanded:f,onClick:e=>m(g,e),title:"Numbers of Images",content:(0,a.jsx)(ry,{})}),(0,a.jsx)(eO,{expanded:v,onClick:e=>m(b,e),title:"Image Guidance",tooltip:iR,content:(0,a.jsxs)(o.Z,{sx:{border:"1px solid #444",borderRadius:eS.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(av,{}),(0,a.jsx)(rN,{}),(0,a.jsx)(rk,{options:rC.Ki})]})}),(0,a.jsx)(eO,{expanded:w,onClick:e=>m(S,e),title:"Output Size",content:(0,a.jsx)(aw,{})}),(0,a.jsx)(eO,{expanded:C,onClick:e=>m(y,e),title:"Advance Settings",content:(0,a.jsxs)(o.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eH,{label:"Tiling",tooltip:"Enable seamless tiling for the generated image.",children:(0,a.jsx)(rl,{value:n,onChange:r})}),(0,a.jsx)(eH,{label:"Sampler",tooltip:"The denoising algorithm used to generate the image. Different samplers can be good at generating different images.",children:(0,a.jsx)(ro,{options:rB.l.map(e=>({value:e,label:e})),value:s,onChange:d})}),(0,a.jsx)(eH,{label:"Steps",tooltip:"The number of denoising steps. More steps generally result in higher quality images but take longer to generate.",children:(0,a.jsx)(tU,{min:10,max:70,disabled:!t,value:u,onChange:p})})]})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(rF,{})]})]}):(0,a.jsx)(o.Z,{m:1,children:i()})},[se.u.FINETUNED_UNSUPPORT]:()=>(0,a.jsxs)(j,{children:[(0,a.jsx)(eD,{modelKey:"model_id"}),(0,a.jsx)(S,{children:(0,a.jsx)(v,{children:"This model is not supported."})})]}),[se.u.CHARACTER_UNSUPPORTED]:()=>{let[e,t]=(0,x.y)({key:"character.create_image",sx:{".feature-block-title-text":{fontSize:13},".feature-block-description":{fontSize:10}}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tn,{page:"home",title:"Create Character Visual"}),(0,a.jsx)(Z.Z,{sx:{display:{xs:"none",md:"flex"}}}),(0,a.jsxs)(j,{children:[(0,a.jsx)(r.Z,{m:1,children:t()}),e?(0,a.jsx)(S,{children:(0,a.jsx)(v,{children:"This character is not supported."})}):null,(0,a.jsx)(nG,{disabled:!0,noFeatureAccess:!e})]})]})},[se.u.CHARACTER_NO_CREATION]:()=>{let[e,t]=(0,x.y)({key:"character.create_image",sx:{".feature-block-title-text":{fontSize:13},".feature-block-description":{fontSize:10}}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tn,{page:"home",title:"Create Character Visual"}),(0,a.jsx)(Z.Z,{sx:{display:{xs:"none",md:"flex"}}}),(0,a.jsxs)(j,{children:[(0,a.jsx)(o.Z,{m:1,children:t()}),e?(0,a.jsx)(ep,{sx:{mx:"10px"}}):null,(0,a.jsx)(nG,{disabled:!0,noFeatureAccess:!e})]})]})},[se.u.CHARACTER_MANIPULATION]:()=>{let[e,t]=(0,x.y)({key:"character.create_image",sx:{".feature-block-title-text":{fontSize:13},".feature-block-description":{fontSize:10}}}),i=["home"],n=(0,eF.aT)(),r=(0,h.UK)(e=>e.initUiState),d=(0,h.UK)((0,l.N)(e=>e.getUiState("pages",i))).at(-1),c=(0,h.UK)(e=>e.setCharacterManipulationPage),u=(0,h.UK)(e=>e.backCharacterManipulationPage),p=(0,h.UK)(e=>e.setCreationMode),m=(0,h.UK)(e=>e.characters),g=(0,h.UK)(e=>e.removeCharacter),f=(0,h.UK)((0,l.N)(e=>e.getParameterValue("creation_mode")));(0,w.useEffect)(()=>{r("pages",i)},[]);let b=e=>{c(e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tn,{page:d,onBack:()=>{"multipleCharacter"===f?n.confirm({title:"Are you sure you want to leave this page?",content:"You will exit multiple character mode. Changes to additional characters will be lost, but the first character will be preserved.",iconType:"info",onConfirm:()=>{if(u(),m.length>1){var e;g(null===(e=m.at(-1))||void 0===e?void 0:e.originalConfig)}}}):u()},title:(e=>{let t="Create Character Visual";if("home"===e)return t;if("create"===e){var i;return f&&(null===(i=ta.find(e=>e.mode===f))||void 0===i?void 0:i.title)||t}return"template"===e?"Character Template":"multipleCharacter"===e?"Multiple Character":t})(d)}),(0,a.jsx)(Z.Z,{sx:{display:{xs:"none",md:"flex"}}}),(0,a.jsxs)(j,{children:[e?null:(0,a.jsx)(s.Z,{mx:"10px",mt:"14px",children:t()}),(()=>{let t={initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:-100,opacity:0}};return(0,a.jsxs)(er.M,{mode:"popLayout",children:["home"===d&&(0,a.jsx)(eo.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:t,transition:{duration:.2,ease:"easeInOut"},children:(0,a.jsx)(nG,{disabled:!e,noFeatureAccess:!e,onSelectMode:e=>{p(e),b("create")},onChangePage:b})},"home"),"create"===d&&(0,a.jsx)(eo.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:t,transition:{duration:.2,ease:"easeInOut"},children:(0,a.jsx)(nL,{})},"create")]})})()]}),"home"!==d?(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(te,{})]}):null]})},[se.u.DEFAULT_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.DEFAULT_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]}),[se.u.KLING_VIDEO_IMAGE]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),i="negative-prompt-accordion.expanded",n=(0,h.Bf)(e=>e.getUiState(i,!1)),r=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oF,{showAspectRatio:!1}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.gjZ,{}),title:"Negative Prompt",expanded:n,onClick:e=>r(i,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.KLING_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode"))),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),r="negative-prompt-accordion.expanded",s=(0,h.Bf)(e=>e.getUiState(r,!1)),d=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oF,{showMode:!1}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.bBn,{}),title:"Negative Prompt",expanded:s,onClick:e=>d(r,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:i,onChange:e=>n(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.VIDEO_COMING_SOON]:()=>(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsxs)(tQ.Z,{sx:{p:3,textAlign:"center",justifyContent:"center",justifyItems:"center",maxWidth:"sm",alignItems:"center",height:"100%",width:"100%"},children:[(0,a.jsx)("img",{src:"https://cdn.openart.ai/assets/video-coming-soon.png",alt:"Coming Soon",height:100,width:100,style:{marginBottom:"16px"}}),(0,a.jsx)(f.Z,{fontSize:"16px",fontWeight:700,children:"Coming Soon"})]})})]}),[se.u.WAN_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]}),[se.u.WAN_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(o7,{}),canExpand:!1})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.WAN2_2_VIDEO_IMAGE]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),i="negative-prompt-accordion.expanded",n=(0,h.Bf)(e=>e.getUiState(i,!1)),o=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),placeholder:"[Required] Please provide a detailed description of the actions unfolding in the scene."}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(o8,{}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.bBn,{}),title:"Negative Prompt",expanded:n,onClick:e=>o(i,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.WAN2_2_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode"))),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),r="negative-prompt-accordion.expanded",s=(0,h.Bf)(e=>e.getUiState(r,!1)),d=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(o8,{showVideoMode:!0,showAspectRatio:!0}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.bBn,{}),title:"Negative Prompt",expanded:s,onClick:e=>d(r,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:i,onChange:e=>n(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.VIDU_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(o3,{showAspectRatio:!1}),canExpand:!1})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]}),[se.u.VIDU_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(o3,{}),canExpand:!1})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.VIDEO_AUDIO]:()=>{let e=(0,w.useRef)(null),t=(0,w.useRef)(null),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("enable_auto_sound"))),[o,s]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("enable_auto_speech"))),[d,c]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("enable_lip_sync"))),[u]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("audio_url"))),p=(0,h.Bf)((0,l.N)(e=>e.getParameterValue("speech_prompt"))),x="lip-sync-accordion.expanded",m=(0,h.Bf)(e=>e.getUiState(x,!1)),g="auto-sound-accordion.expanded",j=(0,h.Bf)(e=>e.getUiState(g,!1)),f="auto-speech-accordion.expanded",b=(0,h.Bf)(e=>e.getUiState(f,!1)),v=(0,h.Bf)(e=>e.ensureUiState),S=t=>{p?(s(t),c(!1)):e.current.setError()},y=e=>{u?(c(e),s(!1),n(!1),t.current.clearError()):(t.current.setError("Please upload an audio file first"),v(x,!0))},C=e=>{e?(n(e),c(!1)):n(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(os,{}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.$ij,{}),title:"Lip Sync",expanded:m,canExpand:!1,content:(0,a.jsx)(rJ,{ref:t,onUploadSuccess:()=>{c(!0),s(!1),n(!1),t.current.clearError(),v(x,!0)},onRemoveSuccess:()=>{y(!1)}}),onClick:()=>v(x,!m),rightContent:(0,a.jsx)(t0.r,{checked:d,onClick:e=>{e.stopPropagation()},onChange:(e,t)=>{y(t)}}),sx:{backgroundColor:aV.hb,borderRadius:aV.tO,mt:1}}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.id9,{}),title:"Auto Sound",content:(0,a.jsx)(r4,{}),canExpand:!1,expanded:j,onClick:()=>v(g,!j),rightContent:(0,a.jsx)(t0.r,{onClick:e=>{e.stopPropagation()},checked:i,onChange:(e,t)=>C(t)}),sx:{backgroundColor:aV.hb,borderRadius:aV.tO,mt:1}}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.GSb,{}),title:"Auto Speech",content:(0,a.jsx)(oe,{ref:e,onSpeechPromptChange:t=>{t&&(s(!0),c(!1),n(!1),e.current.clearError(),v(f,!0))}}),expanded:b,canExpand:!1,onClick:()=>v(f,!b),rightContent:(0,a.jsx)(t0.r,{onClick:e=>{e.stopPropagation()},checked:o,onChange:(e,t)=>S(t)}),sx:{backgroundColor:aV.hb,borderRadius:aV.tO,mt:1}})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.VEO_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(o5,{}),canExpand:!1})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.VEO_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(o5,{}),canExpand:!1})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]}),[se.u.KLING2_VIDEO_IMAGE]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),i="negative-prompt-accordion.expanded",n=(0,h.Bf)(e=>e.getUiState(i,!1)),r=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oN,{showAspectRatio:!1}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.gjZ,{}),title:"Negative Prompt",expanded:n,onClick:e=>r(i,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.KLING2_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode"))),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),r="negative-prompt-accordion.expanded",s=(0,h.Bf)(e=>e.getUiState(r,!1)),d=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oN,{}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.bBn,{}),title:"Negative Prompt",expanded:s,onClick:e=>d(r,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:i,onChange:e=>n(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.KLING_VIDEO_ELEMENTS]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),i="negative-prompt-accordion.expanded",n=(0,h.Bf)(e=>e.getUiState(i,!1)),r=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{Component:oR,bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),placeholder:"Please provide a detailed description of the actions unfolding in the scene."}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oU,{showAspectRatio:!1}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.gjZ,{}),title:"Negative Prompt",expanded:n,onClick:e=>r(i,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.PIXVERSE_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode"))),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),r="negative-prompt-accordion.expanded",s=(0,h.Bf)(e=>e.getUiState(r,!1)),d=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oL,{}),canExpand:!1})]}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.bBn,{}),title:"Negative Prompt",expanded:s,onClick:e=>d(r,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:i,onChange:e=>n(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.PIXVERSE_VIDEO_IMAGE]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),i=(0,h.Bf)((0,l.N)(e=>e.getParameterValue("end_frame_image_url"))),n="negative-prompt-accordion.expanded",o=(0,h.Bf)(e=>e.getUiState(n,!1)),s=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),placeholder:"[Required] Please provide a detailed description of the actions unfolding in the scene."}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oL,{showAspectRatio:!1}),canExpand:!1})]}),i?null:(0,a.jsx)(rY,{icon:(0,a.jsx)(es.gjZ,{}),title:"Negative Prompt",expanded:o,onClick:e=>s(n,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.KLING21_MASTER_VIDEO_IMAGE]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),i="negative-prompt-accordion.expanded",n=(0,h.Bf)(e=>e.getUiState(i,!1)),r=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oN,{showAspectRatio:!1}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.gjZ,{}),title:"Negative Prompt",expanded:n,onClick:e=>r(i,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.KLING21_MASTER_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode"))),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),r="negative-prompt-accordion.expanded",s=(0,h.Bf)(e=>e.getUiState(r,!1)),d=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oN,{}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.bBn,{}),title:"Negative Prompt",expanded:s,onClick:e=>d(r,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:i,onChange:e=>n(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.KLING21_VIDEO_IMAGE]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),i="negative-prompt-accordion.expanded",n=(0,h.Bf)(e=>e.getUiState(i,!1)),r=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oA,{showAspectRatio:!1}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.gjZ,{}),title:"Negative Prompt",expanded:n,onClick:e=>r(i,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.VEO3_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oJ,{showVideoMode:!0}),canExpand:!1})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.VEO3_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oJ,{showVideoMode:!0}),canExpand:!1})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]}),[se.u.MINIMAX_HAILUO_02_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oS,{type:"text2video"}),canExpand:!1})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.MINIMAX_HAILUO_02_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oS,{type:"image2video"}),canExpand:!1})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]}),[se.u.SEEDANCE_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oq,{}),canExpand:!1})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.SEEDANCE_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oq,{showResolution:!1}),canExpand:!1})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]}),[se.u.PIKA_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode"))),[i,n]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),r="negative-prompt-accordion.expanded",s=(0,h.Bf)(e=>e.getUiState(r,!1)),d=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oO,{showAspectRatio:!0}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.bBn,{}),title:"Negative Prompt",expanded:s,onClick:e=>d(r,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:i,onChange:e=>n(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.PIKA_VIDEO_IMAGE]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),i="negative-prompt-accordion.expanded",n=(0,h.Bf)(e=>e.getUiState(i,!1)),o=(0,h.Bf)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),placeholder:"[Required] Please provide a detailed description of the actions unfolding in the scene."}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oO,{}),canExpand:!1}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.bBn,{}),title:"Negative Prompt",expanded:n,onClick:e=>o(i,e),content:(0,a.jsx)(tB.Z,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the Sound, for example: the sound of waves hitting the shore.",value:e,onChange:e=>t(e.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:aV.P,color:"white"},"& .MuiInputBase-input":{fontWeight:{xs:400,md:500},fontSize:{xs:12}}}})})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.RUNWAY_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]})}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oH,{}),canExpand:!1})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]}),[se.u.HUNYUAN_VIDEO_TEXT]:()=>{let[e,t]=(0,h.Bf)((0,l.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(o.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(ok,{bottomElement:(0,a.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),autoEnhance:e,onAutoEnhanceChange:t}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oT,{showResolution:!0}),canExpand:!1})]})]}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})},[se.u.HUNYUAN_VIDEO_IMAGE]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(og,{children:[(0,a.jsx)(on,{}),(0,a.jsxs)(r.Z,{spacing:1.5,children:[(0,a.jsx)(ow,{}),(0,a.jsx)(o_,{bottomElement:(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,a.jsx)(oj,{}),(0,a.jsx)(ob,{})]}),placeholder:"[Required] Please provide a detailed description of the actions unfolding in the scene."}),(0,a.jsx)(rY,{icon:(0,a.jsx)(es.HoP,{}),title:"Settings",content:(0,a.jsx)(oT,{}),canExpand:!1})]})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(om,{})]})]})}},31274:function(e,t,i){i.d(t,{L:function(){return X}});var n=i(52676),a=i(75271),r=i(35019),o=i(41471),s=i(65893),l=i(73576),d=i(67365),c=i(84530),h=i(86694),u=i.n(h),p=i(24337),x=i(22234);let m=u()(()=>i.e(9913).then(i.bind(i,79913)).then(e=>e.OtherPageBanner),{loadableGenerated:{webpack:()=>[79913]},ssr:!1});function g(e){let{serverProps:t,renderMainContent:i}=e,o=(0,a.useRef)(null);return(0,x.S)(o,"back-to-top-video-page",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{orientation:"vertical",sx:{display:{xs:"none",md:"block"}}}),(0,n.jsxs)(r.Z,{ref:o,flex:1,sx:{width:{xs:"100%",md:"unset"},overflow:{xs:"unset",md:"auto"}},children:[(0,n.jsx)(m,{}),i(t)]})]})}var j=i(62935),f=i(71137),b=i(52889),v=i(73244),S=i(15349),w=i(79267);function y(e){let{title:t,serverProps:i,Sidebar:a}=e;return a?(0,n.jsxs)(v.b,{children:[(0,n.jsx)(p.Z,{orientation:"vertical",sx:{display:{xs:"none",md:"block"}}}),(0,n.jsxs)(r.Z,{component:"aside",sx:{width:{xs:"100%",md:S.Li},height:{md:"100%"}},children:[t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",px:"20px",width:"100%",alignItems:"center",height:{xs:"48px",md:"64px"},children:[(0,n.jsx)(j.Z,{sx:{display:"flex",justifyContent:{xs:"center",md:"flex-start"},alignItems:"center",height:S.n6,fontSize:{xs:"24px",md:"28px"},fontWeight:{xs:"700",md:"700"}},children:t}),(0,n.jsxs)(f.Z,{variant:"outlined",LinkComponent:b.Z,href:"https://www.youtube.com/watch?v=_MJ0s_A6BI8&t=114s",target:"_blank",sx:{height:{md:32}},children:[(0,n.jsx)(w.Zdg,{size:16,sx:{mr:1}}),"Tutorial"]})]}),(0,n.jsx)(p.Z,{sx:{display:{xs:"none",md:"flex"}}})]}):null,(0,n.jsx)(s.Z,{flex:1,sx:{overflow:"hidden"},children:(0,n.jsx)(a,{...i})})]})]}):null}var C=i(46974),Z=i(81578),_=i(12826),k=i(5600),P=i(355),T=i(94889),E=i(80924),N=i(22289);let I=e=>{let{sx:t,config:i,tabValue:a}=e,r=(0,C.useRouter)(),o=e=>{r.replace({query:{...r.query,tab:e}},void 0,{shallow:!0})};return(0,n.jsx)(s.Z,{sx:{borderBottom:1,borderColor:"divider",position:"sticky",top:0,zIndex:998,backgroundColor:T.L,...t},children:(0,n.jsx)(_.Y,{value:a,scrollButtons:"auto",variant:"scrollable",allowScrollButtonsMobile:!0,onChange:(e,t)=>o(t),sx:{height:S.n6,backgroundColor:T.L},children:i.map(e=>(0,n.jsx)(Z.i,{value:e.value,label:(0,n.jsx)(j.Z,{variant:"body1",sx:{px:2},children:e.label})},e.value))})})};function A(e){var t;let{getTabsConfig:i,tabSx:o,defaultTabValue:l,sx:d}=e,{data:c}=(0,N.$_)(),h=null===(t=c||{})||void 0===t?void 0:t.id,{isMobile:u}=(0,E.j)(),{query:p}=(0,C.useRouter)(),x=(i??function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[{label:"Generation",value:"generation",rendTabPanel:()=>(0,n.jsx)(P.default,{sign:"video",userId:e,filter:{resource_type:"video"},gridHeight:"100%",zoomMax:t?2:4})},{label:"Albums",value:"albums",rendTabPanel:()=>(0,n.jsx)(s.Z,{sx:{height:"100%",overflowY:"auto"},children:(0,n.jsx)(k.default,{userId:e})})}]})(h,u),m=(0,a.useMemo)(()=>p.tab&&x.some(e=>e.value===p.tab)?p.tab:l??x[0].value,[l,p.tab,x]),g=x.find(e=>e.value===m);return(0,n.jsxs)(r.Z,{direction:"column",height:"100%",sx:d,children:[(0,n.jsx)(v.b,{children:(0,n.jsx)(I,{sx:o,config:x,tabValue:m})}),(0,n.jsx)(s.Z,{flex:1,px:"8px",sx:{overflowY:"hidden"},children:g.rendTabPanel()})]})}var M=i(79574),U=i.n(M),R=i(88705),z=i(67373),D=i(11075);function V(e){let{isMobile:t}=e;return(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(v.b,{children:(0,n.jsx)(I,{sx:{},config:[{label:"Generation",value:"generation",rendTabPanel:()=>(0,n.jsx)(s.Z,{})},{label:"Albums",value:"albums",rendTabPanel:()=>(0,n.jsx)(s.Z,{})}],tabValue:""})}),(0,n.jsx)(r.Z,{children:(0,n.jsxs)(r.Z,{px:9,pt:5,spacing:1.5,children:[(0,n.jsx)(j.Z,{variant:"h3",fontSize:"36px",fontWeight:700,children:"Video Creation"}),(0,n.jsx)(j.Z,{fontSize:"16px",fontWeight:500,color:S.Gz,children:"✨ Bring your images to life by transforming them into dynamic videos, powered by multiple models. Add movement depth, and storytelling to your photos for social media, presentations, or personal projects-all with just a few clicks \uD83D\uDC47."}),(0,n.jsxs)(r.Z,{direction:"row",spacing:1,children:[(0,n.jsx)(f.Z,{startIcon:(0,n.jsx)(R.Z,{sx:{color:S.zP}}),sx:{color:S.zP,background:"#272727"},children:"Text to video"}),(0,n.jsx)(f.Z,{startIcon:(0,n.jsx)(R.Z,{sx:{color:S.FJ}}),sx:{color:S.FJ,background:"#272727"},children:"Image to video"}),(0,n.jsx)(f.Z,{startIcon:(0,n.jsx)(R.Z,{sx:{color:S.E9}}),sx:{color:S.E9,background:"#272727"},children:"Elements to video"}),(0,n.jsx)(f.Z,{startIcon:(0,n.jsx)(R.Z,{sx:{color:S.w9}}),sx:{color:S.w9,background:"#272727"},children:"Audio"})]}),(0,n.jsx)(r.Z,{direction:"row",justifyContent:"flex-start",sx:{py:4},children:(0,n.jsx)(D.Z,{GA_label:"AppHeader"})}),(0,n.jsxs)(r.Z,{sx:{width:"100%",position:"relative"},children:[(0,n.jsx)(z.Z,{style:{width:"100%",height:"auto"},width:1e3,height:250,src:"https://cdn.openart.ai/assets/video-tutorial-thumbnail-1440.mp4",controls:!1,muted:!0}),(0,n.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)"}}),(0,n.jsx)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1},children:(0,n.jsx)(U(),{width:187,height:45,src:"https://cdn.openart.ai/assets/home/openart_logo_20240529.svg",alt:"OpenArt Logo"})})]})]})})]})}let F=e=>{let{data:t}=(0,N.$_)();return t?(0,n.jsx)(A,{defaultTabValue:"generation"}):(0,n.jsx)(V,{isMobile:e.isSsrMobile})};var B=i(12484),O=i(75006);let W=()=>(0,n.jsx)(r.Z,{direction:"row",alignItems:{xs:"flex-start",md:"center"},justifyContent:"space-between",spacing:1,sx:{m:2,mb:0,p:2,borderRadius:"4px",background:"rgba(9, 41, 247, 0.30)"},children:(0,n.jsxs)(j.Z,{sx:{fontSize:{xs:12,md:15},fontStyle:"normal",fontWeight:500,lineHeight:{xs:1.5,md:1.09}},children:[(0,n.jsx)("span",{children:"\uD83C\uDF89 Veo 3 Fast is now live in Image to Video"})," "]})}),L=()=>{let e=(0,O.Bf)(e=>e.settingComponentType),t=B.x[e];return(0,n.jsxs)(r.Z,{sx:{height:"100%"},children:[(0,n.jsx)(W,{}),t?(0,n.jsx)(t,{}):null]})};var G=i(98043),H=i(55309),K=i(77135),$=i(46858),q=i(31526);function X(e){let{serverProps:t,sx:i}=e,h=(0,$.Z)(),u=(0,a.useRef)(null);return(0,x.S)(u,"back-to-top-video-page-workbench",t.isSsrMobile),(0,n.jsxs)(r.Z,{sx:(0,q.j)({height:{xs:`calc(${h.height} - ${H.J9.xs})`,md:`calc(${h.height} - ${H.gF}px)`},flexDirection:"row"}),bgcolor:T.L,children:[t.isSsrMobile?(0,n.jsx)(o.Z,{styles:{'body > div[id^="back-to-top-video-page-"]':{bottom:`${l.$7+4}px!important`}}}):null,(0,n.jsx)(K.Z,{title:"AI Video Generator - Create Videos from Text, Images & Elements",description:"Generate high-quality AI videos with Kling2.1, Veo3, Kling, Kling2.0, PixVerse, Veo2,  Vidu, Hailuo and WAN-2.1. Transform text to video, animate images, combine visual elements, or enhance with AI audio - all in one powerful video creation platform.",image:G.k,canonicalPath:"/video",sx:{position:"relative",flex:1,height:{md:"100%"}},children:(0,n.jsx)(s.Z,{ref:u,sx:{position:"absolute",display:"flex",flexDirection:{xs:"column",md:"row"},width:"100%",height:"100%",overflow:{xs:"auto",md:"hidden"}},children:(0,n.jsxs)(d.a,{value:c.V.Video,children:[(0,n.jsx)(y,{title:"Videos",serverProps:t,Sidebar:L}),(0,n.jsx)(g,{serverProps:t,renderMainContent:F})]})})})]})}}}]);