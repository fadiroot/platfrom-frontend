(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{52846:function(t,e,i){"use strict";var n,r,o,s;let a;i.d(e,{C:function(){return p}}),(o=n||(n={})).LOAD="LOAD",o.EXEC="EXEC",o.FFPROBE="FFPROBE",o.WRITE_FILE="WRITE_FILE",o.READ_FILE="READ_FILE",o.DELETE_FILE="DELETE_FILE",o.RENAME="RENAME",o.CREATE_DIR="CREATE_DIR",o.LIST_DIR="LIST_DIR",o.DELETE_DIR="DELETE_DIR",o.ERROR="ERROR",o.DOWNLOAD="DOWNLOAD",o.PROGRESS="PROGRESS",o.LOG="LOG",o.MOUNT="MOUNT",o.UNMOUNT="UNMOUNT";let l=(a=0,()=>a++);Error("unknown message type");let h=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),u=Error("called FFmpeg.terminate()");Error("failed to import ffmpeg-core.js");class p{#t=null;#e={};#i={};#n=[];#r=[];loaded=!1;#o=()=>{this.#t&&(this.#t.onmessage=({data:{id:t,type:e,data:i}})=>{switch(e){case n.LOAD:this.loaded=!0,this.#e[t](i);break;case n.MOUNT:case n.UNMOUNT:case n.EXEC:case n.FFPROBE:case n.WRITE_FILE:case n.READ_FILE:case n.DELETE_FILE:case n.RENAME:case n.CREATE_DIR:case n.LIST_DIR:case n.DELETE_DIR:this.#e[t](i);break;case n.LOG:this.#n.forEach(t=>t(i));break;case n.PROGRESS:this.#r.forEach(t=>t(i));break;case n.ERROR:this.#i[t](i)}delete this.#e[t],delete this.#i[t]})};#s=({type:t,data:e},i=[],n)=>this.#t?new Promise((r,o)=>{let s=l();this.#t&&this.#t.postMessage({id:s,type:t,data:e},i),this.#e[s]=r,this.#i[s]=o,n?.addEventListener("abort",()=>{o(new DOMException(`Message # ${s} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(h);on(t,e){"log"===t?this.#n.push(e):"progress"===t&&this.#r.push(e)}off(t,e){"log"===t?this.#n=this.#n.filter(t=>t!==e):"progress"===t&&(this.#r=this.#r.filter(t=>t!==e))}load=({classWorkerURL:t,...e}={},{signal:r}={})=>(this.#t||(this.#t=t?new Worker(new URL(t,"file:///home/runner/actions-runner/_work/OpenArt/OpenArt/web/node_modules/.pnpm/@ffmpeg+ffmpeg@0.12.15/node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js"),{type:"module"}):new Worker(i.tu(new URL(i.p+i.u(7403),i.b)),{type:void 0}),this.#o()),this.#s({type:n.LOAD,data:e},void 0,r));exec=(t,e=-1,{signal:i}={})=>this.#s({type:n.EXEC,data:{args:t,timeout:e}},void 0,i);ffprobe=(t,e=-1,{signal:i}={})=>this.#s({type:n.FFPROBE,data:{args:t,timeout:e}},void 0,i);terminate=()=>{for(let t of Object.keys(this.#i))this.#i[t](u),delete this.#i[t],delete this.#e[t];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(t,e,{signal:i}={})=>{let r=[];return e instanceof Uint8Array&&r.push(e.buffer),this.#s({type:n.WRITE_FILE,data:{path:t,data:e}},r,i)};mount=(t,e,i)=>this.#s({type:n.MOUNT,data:{fsType:t,options:e,mountPoint:i}},[]);unmount=t=>this.#s({type:n.UNMOUNT,data:{mountPoint:t}},[]);readFile=(t,e="binary",{signal:i}={})=>this.#s({type:n.READ_FILE,data:{path:t,encoding:e}},void 0,i);deleteFile=(t,{signal:e}={})=>this.#s({type:n.DELETE_FILE,data:{path:t}},void 0,e);rename=(t,e,{signal:i}={})=>this.#s({type:n.RENAME,data:{oldPath:t,newPath:e}},void 0,i);createDir=(t,{signal:e}={})=>this.#s({type:n.CREATE_DIR,data:{path:t}},void 0,e);listDir=(t,{signal:e}={})=>this.#s({type:n.LIST_DIR,data:{path:t}},void 0,e);deleteDir=(t,{signal:e}={})=>this.#s({type:n.DELETE_DIR,data:{path:t}},void 0,e)}(s=r||(r={})).MEMFS="MEMFS",s.NODEFS="NODEFS",s.NODERAWFS="NODERAWFS",s.IDBFS="IDBFS",s.WORKERFS="WORKERFS",s.PROXYFS="PROXYFS"},13855:function(t,e,i){"use strict";i.d(e,{Y:function(){return j}});var n=i(2053),r=i(97963),o=i(75271),s=i(18364);let a="base";function l(t,e){let i=s._v[e];return i?`${a}--${i}`:`${a}-${t}-${e}`}let h="NumberInput";function u(t){return l(h,t)}!function(t,e){let i={};e.forEach(e=>{i[e]=l(t,e)})}(h,["root","formControl","focused","disabled","readOnly","error","input","incrementButton","decrementButton","adornedStart","adornedEnd"]);var p=i(79822),c=i(90156),d=i(62545);function f(t,e=[]){if(void 0===t)return{};let i={};return Object.keys(t).filter(i=>i.match(/^on[A-Z]/)&&"function"==typeof t[i]&&!e.includes(i)).forEach(e=>{i[e]=t[e]}),i}function g(t,e){return t===e}let m={},y=()=>{};function v(t,e){let i=(0,n.Z)({},t);return Object.keys(e).forEach(t=>{void 0!==e[t]&&(i[t]=e[t])}),i}let b=o.createContext(void 0),w={clamp:"numberInput:clamp",inputChange:"numberInput:inputChange",increment:"numberInput:increment",decrement:"numberInput:decrement",decrementToMin:"numberInput:decrementToMin",incrementToMax:"numberInput:incrementToMax",resetInputValue:"numberInput:resetInputValue"};var x=i(58676);function _(t){return"number"==typeof t&&!Number.isNaN(t)&&Number.isFinite(t)}function S(t,e){let{min:i,max:n,step:r}=e,o=null===t?null:function(t,e=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,n=NaN){if(Number.isNaN(n))return(0,x.Z)(t,e,i);let r=n||1,o=t%r,s=Math.sign(o);return Math.abs(o)>r/2?(0,x.Z)(t+s*(r-Math.abs(o)),e,i):(0,x.Z)(t-s*Math.abs(o),e,i)}(t,i,n,r),s=null===o?"":String(o);return{value:o,inputValue:s}}function E(t,e,i,r){let o=i?e.shiftMultiplier:1,s=S(function(t,e,i,n){let{value:r}=t,{step:o=1,min:s,max:a}=e;return _(r)?({up:r+(null!=o?o:1)*n,down:r-(null!=o?o:1)*n})[i]:({up:null!=s?s:1,down:null!=a?a:-1})[i]}(t,e,r,o),e);return(0,n.Z)({},t,s)}function P(t,e,i){let r=e[i];return _(r)?(0,n.Z)({},t,{value:r,inputValue:String(r)}):t}function M(t,e){let{type:i,context:r}=e;switch(i){case w.clamp:return function(t,e,i){let{getInputValueAsString:r}=e,o=r(i),s=S(""===o||"-"===o?null:parseInt(o,10),e);return(0,n.Z)({},t,s)}(t,r,e.inputValue);case w.inputChange:return function(t,e,i){let{getInputValueAsString:r}=e,o=r(i);return o.match(/^-?\d+?$/)||""===o||"-"===o?(0,n.Z)({},t,{inputValue:o}):t}(t,r,e.inputValue);case w.increment:return E(t,r,e.applyMultiplier,"up");case w.decrement:return E(t,r,e.applyMultiplier,"down");case w.incrementToMax:return P(t,r,"max");case w.decrementToMin:return P(t,r,"min");case w.resetInputValue:return(0,n.Z)({},t,{inputValue:String(t.value)});default:return t}}let D=["ArrowUp","ArrowDown","PageUp","PageDown","Home","End"];function I(t){return t?String(t.trim()):String(t)}var R=i(93828),T=i(4814);function k(t){if(void 0===t)return{};let e={};return Object.keys(t).filter(e=>!(e.match(/^on[A-Z]/)&&"function"==typeof t[e])).forEach(i=>{e[i]=t[i]}),e}let z=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function N(t){var e,i;let{elementType:o,externalSlotProps:s,ownerState:a,skipResolvingSlotProps:l=!1}=t,h=(0,r.Z)(t,z),u=l?{}:"function"==typeof s?s(a,void 0):s,{props:p,internalRef:d}=function(t){let{getSlotProps:e,additionalProps:i,externalSlotProps:r,externalForwardedProps:o,className:s}=t;if(!e){let t=(0,T.Z)(null==i?void 0:i.className,s,null==o?void 0:o.className,null==r?void 0:r.className),e=(0,n.Z)({},null==i?void 0:i.style,null==o?void 0:o.style,null==r?void 0:r.style),a=(0,n.Z)({},i,o,r);return t.length>0&&(a.className=t),Object.keys(e).length>0&&(a.style=e),{props:a,internalRef:void 0}}let a=f((0,n.Z)({},o,r)),l=k(r),h=k(o),u=e(a),p=(0,T.Z)(null==u?void 0:u.className,null==i?void 0:i.className,s,null==o?void 0:o.className,null==r?void 0:r.className),c=(0,n.Z)({},null==u?void 0:u.style,null==i?void 0:i.style,null==o?void 0:o.style,null==r?void 0:r.style),d=(0,n.Z)({},u,i,h,l);return p.length>0&&(d.className=p),Object.keys(c).length>0&&(d.style=c),{props:d,internalRef:u.ref}}((0,n.Z)({},h,{externalSlotProps:u})),g=(0,c.Z)(d,null==u?void 0:u.ref,null==(e=t.additionalProps)?void 0:e.ref);return i=(0,n.Z)({},p,{ref:g}),void 0===o||"string"==typeof o?i:(0,n.Z)({},i,{ownerState:(0,n.Z)({},i.ownerState,a)})}var O=i(52676);let A=o.createContext({disableDefaultClasses:!1}),C=["className","defaultValue","disabled","endAdornment","error","id","max","min","onBlur","onInputChange","onFocus","onChange","placeholder","required","readOnly","shiftMultiplier","startAdornment","step","value","slotProps","slots"],L=t=>{let{disabled:e,error:i,focused:n,readOnly:r,formControlContext:s,isIncrementDisabled:a,isDecrementDisabled:l,startAdornment:h,endAdornment:p}=t;return(0,R.Z)({root:["root",e&&"disabled",i&&"error",n&&"focused",r&&"readOnly",!!s&&"formControl",!!h&&"adornedStart",!!p&&"adornedEnd"],input:["input",e&&"disabled",r&&"readOnly"],incrementButton:["incrementButton",a&&"disabled"],decrementButton:["decrementButton",l&&"disabled"]},function(t){let{disableDefaultClasses:e}=o.useContext(A);return i=>e?"":t(i)}(u))},j=o.forwardRef(function(t,e){var i,s,a,l;let{className:h,defaultValue:u,disabled:x,endAdornment:S,error:E,id:P,max:R,min:T,onBlur:k,onInputChange:z,onFocus:A,onChange:j,placeholder:F,required:W,readOnly:H=!1,shiftMultiplier:X,startAdornment:U,step:Z,value:B,slotProps:Y={},slots:K={}}=t,G=(0,r.Z)(t,C),{getRootProps:V,getInputProps:Q,getIncrementButtonProps:q,getDecrementButtonProps:$,focused:J,error:tt,disabled:te,formControlContext:ti,isIncrementDisabled:tn,isDecrementDisabled:tr}=function(t){var e;let{min:i,max:r,step:s,shiftMultiplier:a=10,defaultValue:l,disabled:h=!1,error:u=!1,onBlur:x,onInputChange:S,onFocus:E,onChange:P,required:R=!1,readOnly:T=!1,value:k,inputRef:z,inputId:N,componentName:O="useNumberInput"}=t,A=o.useContext(b),{current:C}=o.useRef(null!=k),L=o.useCallback(t=>{},[]),j=o.useRef(null),F=(0,c.Z)(j,z,L),W=(0,d.Z)(N),[H,X]=o.useState(!1),U=o.useCallback((t,e,i,n)=>{if("value"===e&&"string"!=typeof i)switch(n){case"numberInput:clamp":case"numberInput:increment":case"numberInput:decrement":case"numberInput:incrementToMax":case"numberInput:decrementToMin":null==P||P(t,i)}},[P]),Z=o.useMemo(()=>({min:i,max:r,step:s,shiftMultiplier:a,getInputValueAsString:I}),[i,r,s,a]),B=null!=(e=null!=k?k:l)?e:null,Y={value:B,inputValue:B?String(B):""},[K,G]=function(t){let e=o.useRef(null),{reducer:i,initialState:r,controlledProps:s=m,stateComparers:a=m,onStateChange:l=y,actionContext:h,componentName:u=""}=t;o.useRef(s);let p=o.useCallback((t,n)=>(e.current=n,i(v(t,s),n)),[s,i]),[c,d]=o.useReducer(p,r),f=o.useCallback(t=>{d((0,n.Z)({},t,{context:h}))},[h]);return!function(t){let{nextState:e,initialState:i,stateComparers:n,onStateChange:r,controlledProps:s,lastActionRef:a}=t,l=o.useRef(i);o.useEffect(()=>{if(null===a.current)return;let t=v(l.current,s);Object.keys(e).forEach(i=>{var o,s,l;let h=null!=(o=n[i])?o:g,u=e[i],p=t[i];(null!=p||null==u)&&(null==p||null!=u)&&(null==p||null==u||h(u,p))||null==r||r(null!=(s=a.current.event)?s:null,i,u,null!=(l=a.current.type)?l:"",e)}),l.current=e,a.current=null},[l,e,a,r,n,s])}({nextState:c,initialState:r,stateComparers:null!=a?a:m,onStateChange:null!=l?l:y,controlledProps:s,lastActionRef:e}),[v(c,s),f]}({reducer:M,controlledProps:o.useMemo(()=>({value:k}),[k]),initialState:Y,onStateChange:U,actionContext:o.useMemo(()=>Z,[Z]),componentName:O}),{value:V,inputValue:Q}=K;o.useEffect(()=>{!A&&h&&H&&(X(!1),null==x||x())},[A,h,H,x]),o.useEffect(()=>{C&&_(V)&&G({type:w.resetInputValue})},[V,G,C]);let q=t=>e=>{var i,n;null==(i=t.onFocus)||i.call(t,e),e.defaultMuiPrevented||e.defaultPrevented||(A&&A.onFocus&&(null==A||null==(n=A.onFocus)||n.call(A)),X(!0))},$=t=>e=>{var i,n;if(!C&&null===e.target)throw Error((0,p.Z)(17));null==A||null==(i=A.onChange)||i.call(A,e),null==(n=t.onInputChange)||n.call(t,e),e.defaultMuiPrevented||e.defaultPrevented||G({type:w.inputChange,event:e,inputValue:e.currentTarget.value})},J=t=>e=>{var i;null==A||A.onBlur(),null==(i=t.onBlur)||i.call(t,e),e.defaultMuiPrevented||e.defaultPrevented||(G({type:w.clamp,event:e,inputValue:e.currentTarget.value}),X(!1))},tt=t=>e=>{var i;null==(i=t.onClick)||i.call(t,e),e.defaultMuiPrevented||e.defaultPrevented||!j.current||e.currentTarget!==e.target||j.current.focus()},te=t=>e=>{let i=!!e.shiftKey;G({type:{up:w.increment,down:w.decrement}[t],event:e,applyMultiplier:i})},ti=t=>e=>{var i;if(null==(i=t.onKeyDown)||i.call(t,e),!e.defaultMuiPrevented&&!e.defaultPrevented)switch(D.includes(e.key)&&e.preventDefault(),e.key){case"ArrowUp":G({type:w.increment,event:e,applyMultiplier:!!e.shiftKey});break;case"ArrowDown":G({type:w.decrement,event:e,applyMultiplier:!!e.shiftKey});break;case"PageUp":G({type:w.increment,event:e,applyMultiplier:!0});break;case"PageDown":G({type:w.decrement,event:e,applyMultiplier:!0});break;case"Home":G({type:w.incrementToMax,event:e});break;case"End":G({type:w.decrementToMin,event:e})}},tn=t=>{t.preventDefault(),j.current&&j.current.focus()},tr={"aria-controls":W,tabIndex:-1},to=h||!!_(V)&&V>=(null!=r?r:Number.MAX_SAFE_INTEGER),ts=h||!!_(V)&&V<=(null!=i?i:Number.MIN_SAFE_INTEGER);return{disabled:h,error:u,focused:H,formControlContext:A,getInputProps:(t={})=>{var e;let o=(0,n.Z)({},{onBlur:x,onFocus:E,onChange:S},f(t,["onClick"])),s=(0,n.Z)({},o,{onFocus:q(o),onChange:$((0,n.Z)({},o,{onInputChange:o.onChange})),onBlur:J(o),onKeyDown:ti(o)}),a=null!=(e=H?Q:V)?e:"";return delete t.onInputChange,(0,n.Z)({type:"text",id:W,"aria-invalid":u||void 0,defaultValue:void 0,value:a,"aria-valuenow":a,"aria-valuetext":String(a),"aria-valuemin":i,"aria-valuemax":r,autoComplete:"off",autoCorrect:"off",spellCheck:"false",required:R,readOnly:T,"aria-disabled":h,disabled:h},t,{ref:F},s)},getIncrementButtonProps:(t={})=>(0,n.Z)({},t,tr,{disabled:to,"aria-disabled":to,onMouseDown:tn,onClick:te("up")}),getDecrementButtonProps:(t={})=>(0,n.Z)({},t,tr,{disabled:ts,"aria-disabled":ts,onMouseDown:tn,onClick:te("down")}),getRootProps:(e={})=>{let i=f(t,["onBlur","onInputChange","onFocus","onChange"]),r=(0,n.Z)({},i,f(e));return(0,n.Z)({},e,r,{onClick:tt(r)})},required:R,value:V,inputValue:Q,isIncrementDisabled:to,isDecrementDisabled:ts}}({min:T,max:R,step:Z,shiftMultiplier:X,defaultValue:u,disabled:x,error:E,onFocus:A,onInputChange:z,onBlur:k,onChange:j,required:W,readOnly:H,value:B,inputId:P,componentName:"NumberInput"}),to=(0,n.Z)({},t,{disabled:te,error:tt,focused:J,readOnly:H,formControlContext:ti,isIncrementDisabled:tn,isDecrementDisabled:tr}),ts=L(to),ta={placeholder:F},tl=null!=(i=K.root)?i:"div",th=N({elementType:tl,getSlotProps:V,externalSlotProps:Y.root,externalForwardedProps:G,additionalProps:{ref:e},ownerState:to,className:[ts.root,h]}),tu=null!=(s=K.input)?s:"input",tp=N({elementType:tu,getSlotProps:t=>Q((0,n.Z)({},ta,t)),externalSlotProps:Y.input,ownerState:to,className:ts.input}),tc=null!=(a=K.incrementButton)?a:"button",td=N({elementType:tc,getSlotProps:q,externalSlotProps:Y.incrementButton,ownerState:to,className:ts.incrementButton}),tf=null!=(l=K.decrementButton)?l:"button",tg=N({elementType:tf,getSlotProps:$,externalSlotProps:Y.decrementButton,ownerState:to,className:ts.decrementButton});return(0,O.jsxs)(tl,(0,n.Z)({},th,{children:[(0,O.jsx)(tf,(0,n.Z)({},tg)),(0,O.jsx)(tc,(0,n.Z)({},td)),U,(0,O.jsx)(tu,(0,n.Z)({},tp)),S]}))})},75449:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(e,i);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(61905),e)},61905:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MiniSignal=void 0;let i=Symbol("SIGNAL");class n{constructor(){this._symbol=Symbol("MiniSignal"),this._refMap=new WeakMap,this._head=void 0,this._tail=void 0,this._dispatching=!1}hasListeners(){return null!=this._head}dispatch(...t){if(this._dispatching)throw Error("MiniSignal#dispatch(): Signal already dispatching.");let e=this._head;if(null==e)return!1;for(this._dispatching=!0;null!=e;)e.fn(...t),e=e.next;return this._dispatching=!1,!0}add(t){if("function"!=typeof t)throw Error("MiniSignal#add(): First arg must be a Function.");return this._createRef(this._addNode({fn:t}))}detach(t){if(!("object"==typeof t&&i in t))throw Error("MiniSignal#detach(): First arg must be a MiniSignal listener reference.");if(t[i]!==this._symbol)throw Error("MiniSignal#detach(): MiniSignal listener does not belong to this MiniSignal.");let e=this._refMap.get(t);return e&&(this._refMap.delete(t),this._disconnectNode(e),this._destroyNode(e)),this}detachAll(){let t=this._head;if(null==t)return this;for(this._head=this._tail=void 0,this._refMap=new WeakMap;null!=t;)this._destroyNode(t),t=t.next;return this}_destroyNode(t){t.fn=void 0,t.prev=void 0}_disconnectNode(t){t===this._head?(this._head=t.next,null==t.next&&(this._tail=void 0)):t===this._tail&&(this._tail=t.prev,null!=this._tail&&(this._tail.next=void 0)),null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev)}_addNode(t){return null==this._head?this._head=t:(this._tail.next=t,t.prev=this._tail),this._tail=t,t}_createRef(t){let e={[i]:this._symbol};return this._refMap.set(e,t),e}_getRef(t){return this._refMap.get(t)}}e.MiniSignal=n},70361:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M2 12c0 5.52 4.48 10 10 10s10-4.48 10-10S17.52 2 12 2 2 6.48 2 12m10-1h4v2h-4v3l-4-4 4-4z"}),"ArrowCircleLeft")},31750:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward")},38616:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"}),"AutoFixHigh")},52580:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"}),"Bolt")},5521:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")},45285:function(t,e,i){"use strict";var n=i(26538);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i(64842)),o=i(52676);e.default=(0,r.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},86180:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},19523:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20m6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9"}),"DoDisturbTwoTone")},50574:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M10 17H5v-2h5zm0-4H5v-2h5zm0-4H5V7h5zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42z"}),"FactCheck")},6499:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M10 9h4V6h3l-5-5-5 5h3zm-1 1H6V7l-5 5 5 5v-3h3zm14 2-5-5v3h-3v4h3v3zm-9 3h-4v3H7l5 5 5-5h-3z"}),"OpenWith")},39674:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M20 4v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"}),"PhotoLibraryOutlined")},88705:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PlayCircleOutline")},75318:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"}),"RotateRight")},79365:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var r=n(i(64842)),o=i(52676);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune")},20091:function(t,e,i){"use strict";var n=i(40201),r=i(52676);e.Z=(0,n.Z)((0,r.jsx)("path",{d:"M16 9v10H8V9zm-1.5-6h-5l-1 1H5v2h14V4h-3.5zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2z"}),"DeleteOutlined")},41696:function(t,e,i){"use strict";var n=i(40201),r=i(52676);e.Z=(0,n.Z)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20m6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9"}),"DoDisturbAlt")},3170:function(t,e,i){"use strict";var n=i(40201),r=i(52676);e.Z=(0,n.Z)((0,r.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5z"}),"FileUploadOutlined")},41227:function(t,e,i){var n,r=i(14224);n=function(){"use strict";var t=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function e(t,e){return t>e?1:t<e?-1:0}function i(e,i,n){for(var r=new t(null,null),o=r,s=r;;){var a=n(e,i.key);if(a<0){if(null===i.left)break;if(0>n(e,i.left.key)){var l=i.left;if(i.left=l.right,l.right=i,null===(i=l).left)break}s.left=i,s=i,i=i.left}else if(a>0){if(null===i.right)break;if(n(e,i.right.key)>0){var l=i.right;if(i.right=l.left,l.left=i,null===(i=l).right)break}o.right=i,o=i,i=i.right}else break}return o.right=i.left,s.left=i.right,i.left=r.right,i.right=r.left,i}function n(e,n,r,o){var s=new t(e,n);if(null===r)return s.left=s.right=null,s;r=i(e,r,o);var a=o(e,r.key);return a<0?(s.left=r.left,s.right=r,r.left=null):a>=0&&(s.right=r.right,s.left=r,r.right=null),s}function o(t,e,n){var r=null,o=null;if(e){e=i(t,e,n);var s=n(e.key,t);0===s?(r=e.left,o=e.right):s<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}var s=function(){function r(t){void 0===t&&(t=e),this._root=null,this._size=0,this._comparator=t}return r.prototype.insert=function(t,e){return this._size++,this._root=n(t,e,this._root,this._comparator)},r.prototype.add=function(e,n){var r=new t(e,n);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var o=this._comparator,s=i(e,this._root,o),a=o(e,s.key);return 0===a?this._root=s:(a<0?(r.left=s.left,r.right=s,s.left=null):a>0&&(r.right=s.right,r.left=s,s.right=null),this._size++,this._root=r),this._root},r.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},r.prototype._remove=function(t,e,n){var r;return null===e?null:(e=i(t,e,n),0===n(t,e.key))?(null===e.left?r=e.right:(r=i(t,e.left,n)).right=e.right,this._size--,r):e},r.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=i(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},r.prototype.findStatic=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},r.prototype.find=function(t){return this._root&&(this._root=i(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},r.prototype.contains=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},r.prototype.forEach=function(t,e){for(var i=this._root,n=[],r=!1;!r;)null!==i?(n.push(i),i=i.left):0!==n.length?(i=n.pop(),t.call(e,i),i=i.right):r=!0;return this},r.prototype.range=function(t,e,i,n){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&i.call(n,s))return this;s=s.right}return this},r.prototype.keys=function(){var t=[];return this.forEach(function(e){var i=e.key;return t.push(i)}),t},r.prototype.values=function(){var t=[];return this.forEach(function(e){var i=e.data;return t.push(i)}),t},r.prototype.min=function(){return this._root?this.minNode(this._root).key:null},r.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},r.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},r.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},r.prototype.at=function(t){for(var e=this._root,i=!1,n=0,r=[];!i;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null},r.prototype.next=function(t){var e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;r<0?(i=e,e=e.left):e=e.right}return i},r.prototype.prev=function(t){var e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;r<0?e=e.left:(i=e,e=e.right)}return i},r.prototype.clear=function(){return this._root=null,this._size=0,this},r.prototype.toList=function(){return function(e){for(var i=e,n=[],r=!1,o=new t(null,null),s=o;!r;)i?(n.push(i),i=i.left):n.length>0?i=(i=s=s.next=n.pop()).right:r=!0;return s.next=null,o.next}(this._root)},r.prototype.load=function(e,i,n){void 0===i&&(i=[]),void 0===n&&(n=!1);var r=e.length,o=this._comparator;if(n&&function t(e,i,n,r,o){if(!(n>=r)){for(var s=e[n+r>>1],a=n-1,l=r+1;;){do a++;while(0>o(e[a],s));do l--;while(o(e[l],s)>0);if(a>=l)break;var h=e[a];e[a]=e[l],e[l]=h,h=i[a],i[a]=i[l],i[l]=h}t(e,i,n,l,o),t(e,i,l+1,r,o)}}(e,i,0,r-1,o),null===this._root)this._root=function e(i,n,r,o){var s=o-r;if(s>0){var a=r+Math.floor(s/2),l=new t(i[a],n[a]);return l.left=e(i,n,r,a),l.right=e(i,n,a+1,o),l}return null}(e,i,0,r),this._size=r;else{var s=function(e,i,n){for(var r=new t(null,null),o=r,s=e,a=i;null!==s&&null!==a;)0>n(s.key,a.key)?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}(this.toList(),function(e,i){for(var n=new t(null,null),r=n,o=0;o<e.length;o++)r=r.next=new t(e[o],i[o]);return r.next=null,n.next}(e,i),o);r=this._size+r,this._root=function t(e,i,n){var r=n-i;if(r>0){var o=i+Math.floor(r/2),s=t(e,i,o),a=e.head;return a.left=s,e.head=e.head.next,a.right=t(e,o+1,n),a}return null}({head:s},0,r)}return this},r.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),r.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return function t(e,i,n,r,o){if(e){r(""+i+(n?"└── ":"├── ")+o(e)+"\n");var s=i+(n?"    ":"│   ");e.left&&t(e.left,s,!1,r,o),e.right&&t(e.right,s,!0,r,o)}}(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},r.prototype.update=function(t,e,r){var s,a,l=this._comparator,h=o(t,this._root,l),u=h.left,p=h.right;0>l(t,e)?p=n(e,r,p,l):u=n(e,r,u,l),this._root=(s=u,null===(a=p)?s:(null===s||((a=i(s.key,a,l)).left=s),a))},r.prototype.split=function(t){return o(t,this._root,this._comparator)},r.prototype[Symbol.iterator]=function(){var t,e,i;return function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(n){switch(n.label){case 0:t=this._root,e=[],i=!1,n.label=1;case 1:if(i)return[3,6];if(!(null!==t))return[3,2];return e.push(t),t=t.left,[3,5];case 2:if(!(0!==e.length))return[3,4];return[4,t=e.pop()];case 3:return n.sent(),t=t.right,[3,5];case 4:i=!0,n.label=5;case 5:return[3,1];case 6:return[2]}})},r}();let a=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,l=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;let i=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:i,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},h=Number.EPSILON;void 0===h&&(h=2220446049250313e-31);let u=h*h,p=(t,e)=>{if(-h<t&&t<h&&-h<e&&e<h)return 0;let i=t-e;return i*i<u*t*e?0:t<e?-1:1};class c{constructor(){this.reset()}reset(){this.xRounder=new d,this.yRounder=new d}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}class d{constructor(){this.tree=new s,this.round(0)}round(t){let e=this.tree.add(t),i=this.tree.prev(e);if(null!==i&&0===p(e.key,i.key))return this.tree.remove(t),i.key;let n=this.tree.next(e);return null!==n&&0===p(e.key,n.key)?(this.tree.remove(t),n.key):t}}let f=new c,g=(3+8881784197001252e-31)*11102230246251565e-32;function m(t,e,i,n,r){let o,s,a,l;let h=e[0],u=n[0],p=0,c=0;u>h==u>-h?(o=h,h=e[++p]):(o=u,u=n[++c]);let d=0;if(p<t&&c<i)for(u>h==u>-h?(s=h+o,a=o-(s-h),h=e[++p]):(s=u+o,a=o-(s-u),u=n[++c]),o=s,0!==a&&(r[d++]=a);p<t&&c<i;)u>h==u>-h?(l=(s=o+h)-o,a=o-(s-l)+(h-l),h=e[++p]):(l=(s=o+u)-o,a=o-(s-l)+(u-l),u=n[++c]),o=s,0!==a&&(r[d++]=a);for(;p<t;)l=(s=o+h)-o,a=o-(s-l)+(h-l),h=e[++p],o=s,0!==a&&(r[d++]=a);for(;c<i;)l=(s=o+u)-o,a=o-(s-l)+(u-l),u=n[++c],o=s,0!==a&&(r[d++]=a);return(0!==o||0===d)&&(r[d++]=o),d}function y(t){return new Float64Array(t)}let v=(3+17763568394002505e-31)*11102230246251565e-32,b=(2+13322676295501878e-31)*11102230246251565e-32,w=(9+7105427357601002e-30)*11102230246251565e-32*11102230246251565e-32,x=y(4),_=y(8),S=y(12),E=y(16),P=y(4),M=(t,e)=>t.x*e.y-t.y*e.x,D=(t,e)=>t.x*e.x+t.y*e.y,I=(t,e,i)=>{let n=function(t,e,i,n,r,o){let s=(e-o)*(i-r),a=(t-r)*(n-o),l=s-a,h=Math.abs(s+a);return Math.abs(l)>=v*h?l:-function(t,e,i,n,r,o,s){let a,l,h,u,p,c,d,f,y,v,M,D,I,R,T,k,z,N;let O=t-r,A=i-r,C=e-o,L=n-o;R=O*L,d=(c=134217729*O)-(c-O),f=O-d,y=(c=134217729*L)-(c-L),T=f*(v=L-y)-(R-d*y-f*y-d*v),k=C*A,d=(c=134217729*C)-(c-C),f=C-d,y=(c=134217729*A)-(c-A),M=T-(z=f*(v=A-y)-(k-d*y-f*y-d*v)),p=T-M,x[0]=T-(M+p)+(p-z),p=(D=R+M)-R,M=(I=R-(D-p)+(M-p))-k,p=I-M,x[1]=I-(M+p)+(p-k),p=(N=D+M)-D,x[2]=D-(N-p)+(M-p),x[3]=N;let j=function(t,e){let i=e[0];for(let t=1;t<4;t++)i+=e[t];return i}(0,x),F=b*s;if(j>=F||-j>=F||(p=t-O,a=t-(O+p)+(p-r),p=i-A,h=i-(A+p)+(p-r),p=e-C,l=e-(C+p)+(p-o),p=n-L,u=n-(L+p)+(p-o),0===a&&0===l&&0===h&&0===u)||(F=w*s+g*Math.abs(j),(j+=O*u+L*a-(C*h+A*l))>=F||-j>=F))return j;R=a*L,d=(c=134217729*a)-(c-a),f=a-d,y=(c=134217729*L)-(c-L),T=f*(v=L-y)-(R-d*y-f*y-d*v),k=l*A,d=(c=134217729*l)-(c-l),f=l-d,y=(c=134217729*A)-(c-A),M=T-(z=f*(v=A-y)-(k-d*y-f*y-d*v)),p=T-M,P[0]=T-(M+p)+(p-z),p=(D=R+M)-R,M=(I=R-(D-p)+(M-p))-k,p=I-M,P[1]=I-(M+p)+(p-k),p=(N=D+M)-D,P[2]=D-(N-p)+(M-p),P[3]=N;let W=m(4,x,4,P,_);R=O*u,d=(c=134217729*O)-(c-O),f=O-d,y=(c=134217729*u)-(c-u),T=f*(v=u-y)-(R-d*y-f*y-d*v),k=C*h,d=(c=134217729*C)-(c-C),f=C-d,y=(c=134217729*h)-(c-h),M=T-(z=f*(v=h-y)-(k-d*y-f*y-d*v)),p=T-M,P[0]=T-(M+p)+(p-z),p=(D=R+M)-R,M=(I=R-(D-p)+(M-p))-k,p=I-M,P[1]=I-(M+p)+(p-k),p=(N=D+M)-D,P[2]=D-(N-p)+(M-p),P[3]=N;let H=m(W,_,4,P,S);R=a*u,d=(c=134217729*a)-(c-a),f=a-d,y=(c=134217729*u)-(c-u),T=f*(v=u-y)-(R-d*y-f*y-d*v),k=l*h,d=(c=134217729*l)-(c-l),f=l-d,y=(c=134217729*h)-(c-h),M=T-(z=f*(v=h-y)-(k-d*y-f*y-d*v)),p=T-M,P[0]=T-(M+p)+(p-z),p=(D=R+M)-R,M=(I=R-(D-p)+(M-p))-k,p=I-M,P[1]=I-(M+p)+(p-k),p=(N=D+M)-D,P[2]=D-(N-p)+(M-p),P[3]=N;let X=m(H,S,4,P,E);return E[X-1]}(t,e,i,n,r,o,h)}(t.x,t.y,e.x,e.y,i.x,i.y);return n>0?-1:n<0?1:0},R=t=>Math.sqrt(D(t,t)),T=(t,e,i)=>{let n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y};return M(r,n)/R(r)/R(n)},k=(t,e,i)=>{let n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y};return D(r,n)/R(r)/R(n)},z=(t,e,i)=>0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i},N=(t,e,i)=>0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)},O=(t,e,i,n)=>{if(0===e.x)return N(i,n,t.x);if(0===n.x)return N(t,e,i.x);if(0===e.y)return z(i,n,t.y);if(0===n.y)return z(t,e,i.y);let r=M(e,n);if(0==r)return null;let o={x:i.x-t.x,y:i.y-t.y},s=M(o,e)/r,a=M(o,n)/r,l=t.x+a*e.x,h=i.x+s*n.x;return{x:(l+h)/2,y:(t.y+a*e.y+(i.y+s*n.y))/2}};class A{static compare(t,e){let i=A.comparePoints(t.point,e.point);return 0!==i?i:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft)?t.isLeft?1:-1:L.compare(t.segment,e.segment)}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw Error("Tried to link already linked events");let e=t.point.events;for(let t=0,i=e.length;t<i;t++){let i=e[t];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}checkForConsuming(){let t=this.point.events.length;for(let e=0;e<t;e++){let i=this.point.events[e];if(void 0===i.segment.consumedBy)for(let n=e+1;n<t;n++){let t=this.point.events[n];void 0===t.consumedBy&&i.otherSE.point.events===t.otherSE.point.events&&i.segment.consume(t.segment)}}}getAvailableLinkedEvents(){let t=[];for(let e=0,i=this.point.events.length;e<i;e++){let i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){let e=new Map,i=i=>{let n=i.otherSE;e.set(i,{sine:T(this.point,t.point,n.point),cosine:k(this.point,t.point,n.point)})};return(t,n)=>{e.has(t)||i(t),e.has(n)||i(n);let{sine:r,cosine:o}=e.get(t),{sine:s,cosine:a}=e.get(n);return r>=0&&s>=0?o<a?1:o>a?-1:0:r<0&&s<0?o<a?-1:o>a?1:0:s<r?-1:s>r?1:0}}}let C=0;class L{static compare(t,e){let i=t.leftSE.point.x,n=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<i)return 1;if(r<n)return -1;let s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,h=e.rightSE.point.y;if(i<n){if(a<s&&a<l)return 1;if(a>s&&a>l)return -1;let i=t.comparePoint(e.leftSE.point);if(i<0)return 1;if(i>0)return -1;let n=e.comparePoint(t.rightSE.point);return 0!==n?n:-1}if(i>n){if(s<a&&s<h)return -1;if(s>a&&s>h)return 1;let i=e.comparePoint(t.leftSE.point);if(0!==i)return i;let n=t.comparePoint(e.rightSE.point);return n<0?1:n>0?-1:1}if(s<a)return -1;if(s>a)return 1;if(r<o){let i=e.comparePoint(t.rightSE.point);if(0!==i)return i}if(r>o){let i=t.comparePoint(e.rightSE.point);if(i<0)return 1;if(i>0)return -1}if(r!==o){let t=l-s,e=r-i,u=h-a,p=o-n;if(t>e&&u<p)return 1;if(t<e&&u>p)return -1}return r>o?1:r<o||l<h?-1:l>h?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,i,n){this.id=++C,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=i,this.windings=n}static fromRing(t,e,i){let n,r,o;let s=A.comparePoints(t,e);if(s<0)n=t,r=e,o=1;else if(s>0)n=e,r=t,o=-1;else throw Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);return new L(new A(n,!0),new A(r,!1),[i],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;let e=this.leftSE.point,i=this.rightSE.point,n=this.vector();if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1;let r=(t.y-e.y)/n.y,o=e.x+r*n.x;if(t.x===o)return 0;let s=(t.x-e.x)/n.x,a=e.y+s*n.y;return t.y===a?0:t.y<a?-1:1}getIntersection(t){let e=this.bbox(),i=t.bbox(),n=l(e,i);if(null===n)return null;let r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,h=t.rightSE.point,u=a(e,s)&&0===this.comparePoint(s),p=a(i,r)&&0===t.comparePoint(r),c=a(e,h)&&0===this.comparePoint(h),d=a(i,o)&&0===t.comparePoint(o);if(p&&u)return d&&!c?o:!d&&c?h:null;if(p)return c&&r.x===h.x&&r.y===h.y?null:r;if(u)return d&&o.x===s.x&&o.y===s.y?null:s;if(d&&c)return null;if(d)return o;if(c)return h;let g=O(r,this.vector(),s,t.vector());return null!==g&&a(n,g)?f.round(g.x,g.y):null}split(t){let e=[],i=void 0!==t.events,n=new A(t,!0),r=new A(t,!1),o=this.rightSE;this.replaceRightSE(r),e.push(r),e.push(n);let s=new L(n,o,this.rings.slice(),this.windings.slice());return A.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),A.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(n.checkForConsuming(),r.checkForConsuming()),e}swapEvents(){let t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,e=this.windings.length;t<e;t++)this.windings[t]*=-1}consume(t){let e=this,i=t;for(;e.consumedBy;)e=e.consumedBy;for(;i.consumedBy;)i=i.consumedBy;let n=L.compare(e,i);if(0!==n){if(n>0){let t=e;e=i,i=t}if(e.prev===i){let t=e;e=i,i=t}for(let t=0,n=i.rings.length;t<n;t++){let n=i.rings[t],r=i.windings[t],o=e.rings.indexOf(n);-1===o?(e.rings.push(n),e.windings.push(r)):e.windings[o]+=r}i.rings=null,i.windings=null,i.consumedBy=e,i.leftSE.consumedBy=e.leftSE,i.rightSE.consumedBy=e.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){let t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState;let t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};let e=this._afterState.rings,i=this._afterState.windings,n=this._afterState.multiPolys;for(let t=0,n=this.rings.length;t<n;t++){let n=this.rings[t],r=this.windings[t],o=e.indexOf(n);-1===o?(e.push(n),i.push(r)):i[o]+=r}let r=[],o=[];for(let t=0,n=e.length;t<n;t++){if(0===i[t])continue;let n=e[t],s=n.poly;if(-1===o.indexOf(s)){if(n.isExterior)r.push(s);else{-1===o.indexOf(s)&&o.push(s);let t=r.indexOf(n.poly);-1!==t&&r.splice(t,1)}}}for(let t=0,e=r.length;t<e;t++){let e=r[t].multiPoly;-1===n.indexOf(e)&&n.push(e)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;let t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(G.type){case"union":{let i=0===t.length,n=0===e.length;this._isInResult=i!==n;break}case"intersection":{let i,n;t.length<e.length?(i=t.length,n=e.length):(i=e.length,n=t.length),this._isInResult=n===G.numMultiPolys&&i<n;break}case"xor":{let i=Math.abs(t.length-e.length);this._isInResult=i%2==1;break}case"difference":this._isInResult=(1===t.length&&t[0].isSubject)!==(1===e.length&&e[0].isSubject);break;default:throw Error(`Unrecognized operation type found ${G.type}`)}return this._isInResult}}class j{constructor(t,e,i){if(!Array.isArray(t)||0===t.length||(this.poly=e,this.isExterior=i,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1]))throw Error("Input geometry is not a valid Polygon or MultiPolygon");let n=f.round(t[0][0],t[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};let r=n;for(let e=1,i=t.length;e<i;e++){if("number"!=typeof t[e][0]||"number"!=typeof t[e][1])throw Error("Input geometry is not a valid Polygon or MultiPolygon");let i=f.round(t[e][0],t[e][1]);(i.x!==r.x||i.y!==r.y)&&(this.segments.push(L.fromRing(r,i,this)),i.x<this.bbox.ll.x&&(this.bbox.ll.x=i.x),i.y<this.bbox.ll.y&&(this.bbox.ll.y=i.y),i.x>this.bbox.ur.x&&(this.bbox.ur.x=i.x),i.y>this.bbox.ur.y&&(this.bbox.ur.y=i.y),r=i)}(n.x!==r.x||n.y!==r.y)&&this.segments.push(L.fromRing(r,n,this))}getSweepEvents(){let t=[];for(let e=0,i=this.segments.length;e<i;e++){let i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}class F{constructor(t,e){if(!Array.isArray(t))throw Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new j(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let e=1,i=t.length;e<i;e++){let i=new j(t[e],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){let t=this.exteriorRing.getSweepEvents();for(let e=0,i=this.interiorRings.length;e<i;e++){let i=this.interiorRings[e].getSweepEvents();for(let e=0,n=i.length;e<n;e++)t.push(i[e])}return t}}class W{constructor(t,e){if(!Array.isArray(t))throw Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let e=0,i=t.length;e<i;e++){let i=new F(t[e],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){let t=[];for(let e=0,i=this.polys.length;e<i;e++){let i=this.polys[e].getSweepEvents();for(let e=0,n=i.length;e<n;e++)t.push(i[e])}return t}}class H{static factory(t){let e=[];for(let i=0,n=t.length;i<n;i++){let n=t[i];if(!n.isInResult()||n.ringOut)continue;let r=null,o=n.leftSE,s=n.rightSE,a=[o],l=o.point,h=[];for(;r=o,o=s,a.push(o),o.point!==l;)for(;;){let t=o.getAvailableLinkedEvents();if(0===t.length){let t=a[0].point,e=a[a.length-1].point;throw Error(`Unable to complete output ring starting at [${t.x}, ${t.y}]. Last matching segment found ends at [${e.x}, ${e.y}].`)}if(1===t.length){s=t[0].otherSE;break}let i=null;for(let t=0,e=h.length;t<e;t++)if(h[t].point===o.point){i=t;break}if(null!==i){let t=h.splice(i)[0],n=a.splice(t.index);n.unshift(n[0].otherSE),e.push(new H(n.reverse()));continue}h.push({index:a.length,point:o.point});let n=o.getLeftmostComparator(r);s=t.sort(n)[0].otherSE;break}e.push(new H(a))}return e}constructor(t){this.events=t;for(let e=0,i=t.length;e<i;e++)t[e].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point,e=[t];for(let i=1,n=this.events.length-1;i<n;i++){let n=this.events[i].point;0!==I(n,t,this.events[i+1].point)&&(e.push(n),t=n)}if(1===e.length)return null;0===I(e[0],t,e[1])&&e.shift(),e.push(e[0]);let i=this.isExteriorRing()?1:-1,n=this.isExteriorRing()?0:e.length-1,r=this.isExteriorRing()?e.length:-1,o=[];for(let t=n;t!=r;t+=i)o.push([e[t].x,e[t].y]);return o}isExteriorRing(){if(void 0===this._isExteriorRing){let t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let e=1,i=this.events.length;e<i;e++){let i=this.events[e];A.compare(t,i)>0&&(t=i)}let e=t.segment.prevInResult(),i=e?e.prevInResult():null;for(;;){if(!e)return null;if(!i)return e.ringOut;if(i.ringOut!==e.ringOut){if(i.ringOut.enclosingRing()!==e.ringOut)return e.ringOut;return e.ringOut.enclosingRing()}i=(e=i.prevInResult())?e.prevInResult():null}}}class X{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){let t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(let e=0,i=this.interiorRings.length;e<i;e++){let i=this.interiorRings[e].getGeom();null!==i&&t.push(i)}return t}}class U{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){let t=[];for(let e=0,i=this.polys.length;e<i;e++){let i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}_composePolys(t){let e=[];for(let i=0,n=t.length;i<n;i++){let n=t[i];if(!n.poly){if(n.isExteriorRing())e.push(new X(n));else{let t=n.enclosingRing();t.poly||e.push(new X(t)),t.poly.addInterior(n)}}}return e}}class Z{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.compare;this.queue=t,this.tree=new s(e),this.segments=[]}process(t){let e,i;let n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;let o=t.isLeft?this.tree.add(n):this.tree.find(n);if(!o)throw Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let s=o,a=o;for(;void 0===e;)null===(s=this.tree.prev(s))?e=null:void 0===s.key.consumedBy&&(e=s.key);for(;void 0===i;)null===(a=this.tree.next(a))?i=null:void 0===a.key.consumedBy&&(i=a.key);if(t.isLeft){let o=null;if(e){let t=e.getIntersection(n);if(null!==t&&(n.isAnEndpoint(t)||(o=t),!e.isAnEndpoint(t))){let i=this._splitSafely(e,t);for(let t=0,e=i.length;t<e;t++)r.push(i[t])}}let s=null;if(i){let t=i.getIntersection(n);if(null!==t&&(n.isAnEndpoint(t)||(s=t),!i.isAnEndpoint(t))){let e=this._splitSafely(i,t);for(let t=0,i=e.length;t<i;t++)r.push(e[t])}}if(null!==o||null!==s){let t=null;t=null===o?s:null===s?o:0>=A.comparePoints(o,s)?o:s,this.queue.remove(n.rightSE),r.push(n.rightSE);let e=n.split(t);for(let t=0,i=e.length;t<i;t++)r.push(e[t])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=e)}else{if(e&&i){let t=e.getIntersection(i);if(null!==t){if(!e.isAnEndpoint(t)){let i=this._splitSafely(e,t);for(let t=0,e=i.length;t<e;t++)r.push(i[t])}if(!i.isAnEndpoint(t)){let e=this._splitSafely(i,t);for(let t=0,i=e.length;t<i;t++)r.push(e[t])}}}this.tree.remove(n)}return r}_splitSafely(t,e){this.tree.remove(t);let i=t.rightSE;this.queue.remove(i);let n=t.split(e);return n.push(i),void 0===t.consumedBy&&this.tree.add(t),n}}let B=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Y=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class K{run(t,e,i){G.type=t,f.reset();let n=[new W(e,!0)];for(let t=0,e=i.length;t<e;t++)n.push(new W(i[t],!1));if(G.numMultiPolys=n.length,"difference"===G.type){let t=n[0],e=1;for(;e<n.length;)null!==l(n[e].bbox,t.bbox)?e++:n.splice(e,1)}if("intersection"===G.type)for(let t=0,e=n.length;t<e;t++){let e=n[t];for(let i=t+1,r=n.length;i<r;i++)if(null===l(e.bbox,n[i].bbox))return[]}let r=new s(A.compare);for(let t=0,e=n.length;t<e;t++){let e=n[t].getSweepEvents();for(let t=0,i=e.length;t<i;t++)if(r.insert(e[t]),r.size>B)throw Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}let o=new Z(r),a=r.size,h=r.pop();for(;h;){let t=h.key;if(r.size===a){let e=t.segment;throw Error(`Unable to pop() ${t.isLeft?"left":"right"} SweepEvent [${t.point.x}, ${t.point.y}] from segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] from queue.`)}if(r.size>B)throw Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>Y)throw Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");let e=o.process(t);for(let t=0,i=e.length;t<i;t++){let i=e[t];void 0===i.consumedBy&&r.insert(i)}a=r.size,h=r.pop()}return f.reset(),new U(H.factory(o.segments)).getGeom()}}let G=new K;return{union:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return G.run("union",t,i)},intersection:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return G.run("intersection",t,i)},xor:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return G.run("xor",t,i)},difference:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return G.run("difference",t,i)}}},t.exports=n()},99661:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var n=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=d(void 0);if(i&&i.has(t))return i.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,i&&i.set(t,n),n}(i(75271)),r=c(i(40507)),o=c(i(30967)),s=c(i(45924)),a=i(22153),l=i(32356),h=i(59035),u=c(i(17322)),p=c(i(63544));function c(t){return t&&t.__esModule?t:{default:t}}function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(d=function(t){return t?i:e})(t)}function f(){return(f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function g(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class m extends n.Component{static getDerivedStateFromProps(t,e){let{position:i}=t,{prevPropsPosition:n}=e;return i&&(!n||i.x!==n.x||i.y!==n.y)?((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:i,prevPropsPosition:n}),{x:i.x,y:i.y,prevPropsPosition:{...i}}):null}constructor(t){super(t),g(this,"onDragStart",(t,e)=>{if((0,p.default)("Draggable: onDragStart: %j",e),!1===this.props.onStart(t,(0,l.createDraggableData)(this,e)))return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(t,e)=>{if(!this.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",e);let i=(0,l.createDraggableData)(this,e),n={x:i.x,y:i.y,slackX:0,slackY:0};if(this.props.bounds){let{x:t,y:e}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;let[r,o]=(0,l.getBoundPosition)(this,n.x,n.y);n.x=r,n.y=o,n.slackX=this.state.slackX+(t-n.x),n.slackY=this.state.slackY+(e-n.y),i.x=n.x,i.y=n.y,i.deltaX=n.x-this.state.x,i.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(t,i))return!1;this.setState(n)}),g(this,"onDragStop",(t,e)=>{if(!this.state.dragging||!1===this.props.onStop(t,(0,l.createDraggableData)(this,e)))return!1;(0,p.default)("Draggable: onDragStop: %j",e);let i={dragging:!1,slackX:0,slackY:0};if(this.props.position){let{x:t,y:e}=this.props.position;i.x=t,i.y=e}this.setState(i)}),this.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,prevPropsPosition:{...t.position},slackX:0,slackY:0,isElementSVG:!1},t.position&&!(t.onDrag||t.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode() instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var t,e;return null!==(t=null===(e=this.props)||void 0===e||null===(e=e.nodeRef)||void 0===e?void 0:e.current)&&void 0!==t?t:o.default.findDOMNode(this)}render(){let{axis:t,bounds:e,children:i,defaultPosition:r,defaultClassName:o,defaultClassNameDragging:h,defaultClassNameDragged:p,position:c,positionOffset:d,scale:g,...m}=this.props,y={},v=null,b=!c||this.state.dragging,w=c||r,x={x:(0,l.canDragX)(this)&&b?this.state.x:w.x,y:(0,l.canDragY)(this)&&b?this.state.y:w.y};this.state.isElementSVG?v=(0,a.createSVGTransform)(x,d):y=(0,a.createCSSTransform)(x,d);let _=(0,s.default)(i.props.className||"",o,{[h]:this.state.dragging,[p]:this.state.dragged});return n.createElement(u.default,f({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(i),{className:_,style:{...i.props.style,...y},transform:v}))}}e.default=m,g(m,"displayName","Draggable"),g(m,"propTypes",{...u.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),g(m,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},17322:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=p(void 0);if(i&&i.has(t))return i.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,i&&i.set(t,n),n}(i(75271)),r=u(i(40507)),o=u(i(30967)),s=i(22153),a=i(32356),l=i(59035),h=u(i(63544));function u(t){return t&&t.__esModule?t:{default:t}}function p(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(p=function(t){return t?i:e})(t)}function c(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let d={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},f=d.mouse;class g extends n.Component{constructor(){super(...arguments),c(this,"dragging",!1),c(this,"lastX",NaN),c(this,"lastY",NaN),c(this,"touchIdentifier",null),c(this,"mounted",!1),c(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;let e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body)throw Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:i}=e;if(this.props.disabled||!(t.target instanceof i.defaultView.Node)||this.props.handle&&!(0,s.matchesSelectorAndParentsTo)(t.target,this.props.handle,e)||this.props.cancel&&(0,s.matchesSelectorAndParentsTo)(t.target,this.props.cancel,e))return;"touchstart"===t.type&&t.preventDefault();let n=(0,s.getTouchIdentifier)(t);this.touchIdentifier=n;let r=(0,a.getControlPosition)(t,n,this);if(null==r)return;let{x:o,y:l}=r,u=(0,a.createCoreData)(this,o,l);(0,h.default)("DraggableCore: handleDragStart: %j",u),(0,h.default)("calling",this.props.onStart),!1!==this.props.onStart(t,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(i),this.dragging=!0,this.lastX=o,this.lastY=l,(0,s.addEvent)(i,f.move,this.handleDrag),(0,s.addEvent)(i,f.stop,this.handleDragStop))}),c(this,"handleDrag",t=>{let e=(0,a.getControlPosition)(t,this.touchIdentifier,this);if(null==e)return;let{x:i,y:n}=e;if(Array.isArray(this.props.grid)){let t=i-this.lastX,e=n-this.lastY;if([t,e]=(0,a.snapToGrid)(this.props.grid,t,e),!t&&!e)return;i=this.lastX+t,n=this.lastY+e}let r=(0,a.createCoreData)(this,i,n);if((0,h.default)("DraggableCore: handleDrag: %j",r),!1===this.props.onDrag(t,r)||!1===this.mounted){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){let t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}return}this.lastX=i,this.lastY=n}),c(this,"handleDragStop",t=>{if(!this.dragging)return;let e=(0,a.getControlPosition)(t,this.touchIdentifier,this);if(null==e)return;let{x:i,y:n}=e;if(Array.isArray(this.props.grid)){let t=i-this.lastX||0,e=n-this.lastY||0;[t,e]=(0,a.snapToGrid)(this.props.grid,t,e),i=this.lastX+t,n=this.lastY+e}let r=(0,a.createCoreData)(this,i,n);if(!1===this.props.onStop(t,r)||!1===this.mounted)return!1;let o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(o.ownerDocument),(0,h.default)("DraggableCore: handleDragStop: %j",r),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,h.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(o.ownerDocument,f.move,this.handleDrag),(0,s.removeEvent)(o.ownerDocument,f.stop,this.handleDragStop))}),c(this,"onMouseDown",t=>(f=d.mouse,this.handleDragStart(t))),c(this,"onMouseUp",t=>(f=d.mouse,this.handleDragStop(t))),c(this,"onTouchStart",t=>(f=d.touch,this.handleDragStart(t))),c(this,"onTouchEnd",t=>(f=d.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;let t=this.findDOMNode();t&&(0,s.addEvent)(t,d.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;let t=this.findDOMNode();if(t){let{ownerDocument:e}=t;(0,s.removeEvent)(e,d.mouse.move,this.handleDrag),(0,s.removeEvent)(e,d.touch.move,this.handleDrag),(0,s.removeEvent)(e,d.mouse.stop,this.handleDragStop),(0,s.removeEvent)(e,d.touch.stop,this.handleDragStop),(0,s.removeEvent)(t,d.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(e)}}findDOMNode(){var t,e;return null!==(t=this.props)&&void 0!==t&&t.nodeRef?null===(e=this.props)||void 0===e||null===(e=e.nodeRef)||void 0===e?void 0:e.current:o.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}e.default=g,c(g,"displayName","DraggableCore"),c(g,"propTypes",{allowAnyClick:r.default.bool,children:r.default.node.isRequired,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(t,e){if(t[e]&&1!==t[e].nodeType)throw Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),c(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},84569:function(t,e,i){"use strict";let{default:n,DraggableCore:r}=i(99661);t.exports=n,t.exports.default=n,t.exports.DraggableCore=r},22153:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addClassName=h,e.addEvent=function(t,e,i,n){if(!t)return;let r={capture:!0,...n};t.addEventListener?t.addEventListener(e,i,r):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},e.addUserSelectStyles=function(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||((e=t.createElement("style")).type="text/css",e.id="react-draggable-style-el",e.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",e.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",t.getElementsByTagName("head")[0].appendChild(e)),t.body&&h(t.body,"react-draggable-transparent-selection")},e.createCSSTransform=function(t,e){let i=l(t,e,"px");return{[(0,r.browserPrefixToKey)("transform",r.default)]:i}},e.createSVGTransform=function(t,e){return l(t,e,"")},e.getTouch=function(t,e){return t.targetTouches&&(0,n.findInArray)(t.targetTouches,t=>e===t.identifier)||t.changedTouches&&(0,n.findInArray)(t.changedTouches,t=>e===t.identifier)},e.getTouchIdentifier=function(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:void 0},e.getTranslation=l,e.innerHeight=function(t){let e=t.clientHeight,i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,n.int)(i.paddingTop),e-=(0,n.int)(i.paddingBottom)},e.innerWidth=function(t){let e=t.clientWidth,i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,n.int)(i.paddingLeft),e-=(0,n.int)(i.paddingRight)},e.matchesSelector=a,e.matchesSelectorAndParentsTo=function(t,e,i){let n=t;do{if(a(n,e))return!0;if(n===i)break;n=n.parentNode}while(n);return!1},e.offsetXYFromParent=function(t,e,i){let n=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect();return{x:(t.clientX+e.scrollLeft-n.left)/i,y:(t.clientY+e.scrollTop-n.top)/i}},e.outerHeight=function(t){let e=t.clientHeight,i=t.ownerDocument.defaultView.getComputedStyle(t);return e+((0,n.int)(i.borderTopWidth)+(0,n.int)(i.borderBottomWidth))},e.outerWidth=function(t){let e=t.clientWidth,i=t.ownerDocument.defaultView.getComputedStyle(t);return e+((0,n.int)(i.borderLeftWidth)+(0,n.int)(i.borderRightWidth))},e.removeClassName=u,e.removeEvent=function(t,e,i,n){if(!t)return;let r={capture:!0,...n};t.removeEventListener?t.removeEventListener(e,i,r):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null},e.removeUserSelectStyles=function(t){if(t)try{if(t.body&&u(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{let e=(t.defaultView||window).getSelection();e&&"Caret"!==e.type&&e.removeAllRanges()}}catch(t){}};var n=i(59035),r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=o(void 0);if(i&&i.has(t))return i.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=t[s]}return n.default=t,i&&i.set(t,n),n}(i(68596));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(o=function(t){return t?i:e})(t)}let s="";function a(t,e){return s||(s=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(e){return(0,n.isFunction)(t[e])})),!!(0,n.isFunction)(t[s])&&t[s](e)}function l(t,e,i){let{x:n,y:r}=t,o="translate(".concat(n).concat(i,",").concat(r).concat(i,")");if(e){let t="".concat("string"==typeof e.x?e.x:e.x+i),n="".concat("string"==typeof e.y?e.y:e.y+i);o="translate(".concat(t,", ").concat(n,")")+o}return o}function h(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function u(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}},68596:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.browserPrefixToKey=r,e.browserPrefixToStyle=function(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t},e.default=void 0,e.getPrefix=n;let i=["Moz","Webkit","O","ms"];function n(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";let n=null===(t=window.document)||void 0===t||null===(t=t.documentElement)||void 0===t?void 0:t.style;if(!n||e in n)return"";for(let t=0;t<i.length;t++)if(r(e,i[t]) in n)return i[t];return""}function r(t,e){return e?"".concat(e).concat(function(t){let e="",i=!0;for(let n=0;n<t.length;n++)i?(e+=t[n].toUpperCase(),i=!1):"-"===t[n]?i=!0:e+=t[n];return e}(t)):t}e.default=n()},63544:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},32356:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canDragX=function(t){return"both"===t.props.axis||"x"===t.props.axis},e.canDragY=function(t){return"both"===t.props.axis||"y"===t.props.axis},e.createCoreData=function(t,e,i){let r=!(0,n.isNum)(t.lastX),s=o(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:i,x:e,y:i}:{node:s,deltaX:e-t.lastX,deltaY:i-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:i}},e.createDraggableData=function(t,e){let i=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/i,y:t.state.y+e.deltaY/i,deltaX:e.deltaX/i,deltaY:e.deltaY/i,lastX:t.state.x,lastY:t.state.y}},e.getBoundPosition=function(t,e,i){var s;if(!t.props.bounds)return[e,i];let{bounds:a}=t.props;a="string"==typeof a?a:{left:(s=a).left,top:s.top,right:s.right,bottom:s.bottom};let l=o(t);if("string"==typeof a){let t;let{ownerDocument:e}=l,i=e.defaultView;if(!((t="parent"===a?l.parentNode:e.querySelector(a))instanceof i.HTMLElement))throw Error('Bounds selector "'+a+'" could not find an element.');let o=i.getComputedStyle(l),s=i.getComputedStyle(t);a={left:-l.offsetLeft+(0,n.int)(s.paddingLeft)+(0,n.int)(o.marginLeft),top:-l.offsetTop+(0,n.int)(s.paddingTop)+(0,n.int)(o.marginTop),right:(0,r.innerWidth)(t)-(0,r.outerWidth)(l)-l.offsetLeft+(0,n.int)(s.paddingRight)-(0,n.int)(o.marginRight),bottom:(0,r.innerHeight)(t)-(0,r.outerHeight)(l)-l.offsetTop+(0,n.int)(s.paddingBottom)-(0,n.int)(o.marginBottom)}}return(0,n.isNum)(a.right)&&(e=Math.min(e,a.right)),(0,n.isNum)(a.bottom)&&(i=Math.min(i,a.bottom)),(0,n.isNum)(a.left)&&(e=Math.max(e,a.left)),(0,n.isNum)(a.top)&&(i=Math.max(i,a.top)),[e,i]},e.getControlPosition=function(t,e,i){let n="number"==typeof e?(0,r.getTouch)(t,e):null;if("number"==typeof e&&!n)return null;let s=o(i),a=i.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,r.offsetXYFromParent)(n||t,a,i.props.scale)},e.snapToGrid=function(t,e,i){return[Math.round(e/t[0])*t[0],Math.round(i/t[1])*t[1]]};var n=i(59035),r=i(22153);function o(t){let e=t.findDOMNode();if(!e)throw Error("<DraggableCore>: Unmounted during event!");return e}},59035:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dontSetMe=function(t,e,i){if(t[e])return Error("Invalid prop ".concat(e," passed to ").concat(i," - do not set this, set it on the child."))},e.findInArray=function(t,e){for(let i=0,n=t.length;i<n;i++)if(e.apply(e,[t[i],i,t]))return t[i]},e.int=function(t){return parseInt(t,10)},e.isFunction=function(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)},e.isNum=function(t){return"number"==typeof t&&!isNaN(t)}},39413:function(t,e,i){"use strict";i.d(e,{s:function(){return z}});var n,r,o=i(75271),s=i(84569),a=i.n(s),l=i(30967),h=(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(){return(u=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},p={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},c={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},d={width:"20px",height:"20px",position:"absolute"},f={top:u(u({},p),{top:"-5px"}),right:u(u({},c),{left:void 0,right:"-5px"}),bottom:u(u({},p),{top:void 0,bottom:"-5px"}),left:u(u({},c),{left:"-5px"}),topRight:u(u({},d),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:u(u({},d),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:u(u({},d),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:u(u({},d),{left:"-10px",top:"-10px",cursor:"nw-resize"})},g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onMouseDown=function(t){e.props.onResizeStart(t,e.props.direction)},e.onTouchStart=function(t){e.props.onResizeStart(t,e.props.direction)},e}return h(e,t),e.prototype.render=function(){return o.createElement("div",{className:this.props.className||"",style:u(u({position:"absolute",userSelect:"none"},f[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},e}(o.PureComponent),m=(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),y=function(){return(y=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},v={width:"auto",height:"auto"},b=function(t,e,i){return Math.max(Math.min(t,i),e)},w=function(t,e,i){var n=Math.round(t/e);return n*e+i*(n-1)},x=function(t,e){return RegExp(t,"i").test(e)},_=function(t){return!!(t.touches&&t.touches.length)},S=function(t,e,i){void 0===i&&(i=0);var n=e.reduce(function(i,n,r){return Math.abs(n-t)<Math.abs(e[i]-t)?r:i},0),r=Math.abs(e[n]-t);return 0===i||r<i?e[n]:t},E=function(t){return"auto"===(t=t.toString())||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:t+"px"},P=function(t,e,i,n){if(t&&"string"==typeof t){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var r=Number(t.replace("%",""))/100;return e*r}if(t.endsWith("vw")){var r=Number(t.replace("vw",""))/100;return i*r}if(t.endsWith("vh")){var r=Number(t.replace("vh",""))/100;return n*r}}return t},M=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],D="__resizable_base__",I=function(t){function e(e){var i,n,r,o,s=t.call(this,e)||this;return s.ratio=1,s.resizable=null,s.parentLeft=0,s.parentTop=0,s.resizableLeft=0,s.resizableRight=0,s.resizableTop=0,s.resizableBottom=0,s.targetLeft=0,s.targetTop=0,s.appendBase=function(){if(!s.resizable||!s.window)return null;var t=s.parentNode;if(!t)return null;var e=s.window.document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.transform="scale(0, 0)",e.style.left="0",e.style.flex="0 0 100%",e.classList?e.classList.add(D):e.className+=D,t.appendChild(e),e},s.removeBase=function(t){var e=s.parentNode;e&&e.removeChild(t)},s.state={isResizing:!1,width:null!==(n=null===(i=s.propsSize)||void 0===i?void 0:i.width)&&void 0!==n?n:"auto",height:null!==(o=null===(r=s.propsSize)||void 0===r?void 0:r.height)&&void 0!==o?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},s.onResizeStart=s.onResizeStart.bind(s),s.onMouseMove=s.onMouseMove.bind(s),s.onMouseUp=s.onMouseUp.bind(s),s}return m(e,t),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,e=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,n=this.resizable.offsetHeight,r=this.resizable.style.position;"relative"!==r&&(this.resizable.style.position="relative"),t="auto"!==this.resizable.style.width?this.resizable.offsetWidth:i,e="auto"!==this.resizable.style.height?this.resizable.offsetHeight:n,this.resizable.style.position=r}return{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,e=this.props.size,i=function(e){var i;if(void 0===t.state[e]||"auto"===t.state[e])return"auto";if(t.propsSize&&t.propsSize[e]&&(null===(i=t.propsSize[e])||void 0===i?void 0:i.toString().endsWith("%"))){if(t.state[e].toString().endsWith("%"))return t.state[e].toString();var n=t.getParentSize();return Number(t.state[e].toString().replace("px",""))/n[e]*100+"%"}return E(t.state[e])};return{width:e&&void 0!==e.width&&!this.state.isResizing?E(e.width):i("width"),height:e&&void 0!==e.height&&!this.state.isResizing?E(e.height):i("height")}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var e=!1,i=this.parentNode.style.flexWrap;"wrap"!==i&&(e=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var n={width:t.offsetWidth,height:t.offsetHeight};return e&&(this.parentNode.style.flexWrap=i),this.removeBase(t),n},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(this.resizable&&this.window){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==t.flexBasis?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,e){var i=this.propsSize&&this.propsSize[e];return"auto"===this.state[e]&&this.state.original[e]===t&&(void 0===i||"auto"===i)?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,e){var i,n,r=this.props.boundsByDirection,o=this.state.direction,s=r&&x("left",o),a=r&&x("top",o);if("parent"===this.props.bounds){var l=this.parentNode;l&&(i=s?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),n=a?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(i=s?this.resizableRight:this.window.innerWidth-this.resizableLeft,n=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(i=s?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),n=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return i&&Number.isFinite(i)&&(t=t&&t<i?t:i),n&&Number.isFinite(n)&&(e=e&&e<n?e:n),{maxWidth:t,maxHeight:e}},e.prototype.calculateNewSizeFromDirection=function(t,e){var i,n=this.props.scale||1,r=Array.isArray(i=this.props.resizeRatio||1)?i:[i,i],o=r[0],s=r[1],a=this.state,l=a.direction,h=a.original,u=this.props,p=u.lockAspectRatio,c=u.lockAspectRatioExtraHeight,d=u.lockAspectRatioExtraWidth,f=h.width,g=h.height,m=c||0,y=d||0;return x("right",l)&&(f=h.width+(t-h.x)*o/n,p&&(g=(f-y)/this.ratio+m)),x("left",l)&&(f=h.width-(t-h.x)*o/n,p&&(g=(f-y)/this.ratio+m)),x("bottom",l)&&(g=h.height+(e-h.y)*s/n,p&&(f=(g-m)*this.ratio+y)),x("top",l)&&(g=h.height-(e-h.y)*s/n,p&&(f=(g-m)*this.ratio+y)),{newWidth:f,newHeight:g}},e.prototype.calculateNewSizeFromAspectRatio=function(t,e,i,n){var r=this.props,o=r.lockAspectRatio,s=r.lockAspectRatioExtraHeight,a=r.lockAspectRatioExtraWidth,l=void 0===n.width?10:n.width,h=void 0===i.width||i.width<0?t:i.width,u=void 0===n.height?10:n.height,p=void 0===i.height||i.height<0?e:i.height,c=s||0,d=a||0;if(o){var f=(u-c)*this.ratio+d,g=(p-c)*this.ratio+d,m=(l-d)/this.ratio+c,y=(h-d)/this.ratio+c;t=b(t,Math.max(l,f),Math.min(h,g)),e=b(e,Math.max(u,m),Math.min(p,y))}else t=b(t,l,h),e=b(e,u,p);return{newWidth:t,newHeight:e}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if("parent"===this.props.bounds){var e=this.parentNode;if(e){var i=e.getBoundingClientRect();this.parentLeft=i.left*t,this.parentTop=i.top*t}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left*t,this.targetTop=n.top*t}if(this.resizable){var r=this.resizable.getBoundingClientRect(),o=r.left,s=r.top,a=r.right,l=r.bottom;this.resizableLeft=o*t,this.resizableRight=a*t,this.resizableTop=s*t,this.resizableBottom=l*t}},e.prototype.onResizeStart=function(t,e){if(this.resizable&&this.window){var i,n,r=0,o=0;if(t.nativeEvent&&((i=t.nativeEvent).clientX||0===i.clientX)&&(i.clientY||0===i.clientY)?(r=t.nativeEvent.clientX,o=t.nativeEvent.clientY):t.nativeEvent&&_(t.nativeEvent)&&(r=t.nativeEvent.touches[0].clientX,o=t.nativeEvent.touches[0].clientY),!this.props.onResizeStart||!this.resizable||!1!==this.props.onResizeStart(t,e,this.resizable)){this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var s=this.window.getComputedStyle(this.resizable);if("auto"!==s.flexBasis){var a=this.parentNode;if(a){var l=this.window.getComputedStyle(a).flexDirection;this.flexDir=l.startsWith("row")?"row":"column",n=s.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var h={original:{x:r,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:y(y({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:e,flexBasis:n};this.setState(h)}}},e.prototype.onMouseMove=function(t){var e,i,n,r,o,s,a=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&_(t))try{t.preventDefault(),t.stopPropagation()}catch(t){}var h=this.props,u=h.maxWidth,p=h.maxHeight,c=h.minWidth,d=h.minHeight,f=_(t)?t.touches[0].clientX:t.clientX,g=_(t)?t.touches[0].clientY:t.clientY,m=this.state,y=m.direction,v=m.original,b=m.width,x=m.height,E=this.getParentSize(),M=(e=this.window.innerWidth,i=this.window.innerHeight,n=u,r=p,o=c,s=d,n=P(n,E.width,e,i),r=P(r,E.height,e,i),o=P(o,E.width,e,i),s=P(s,E.height,e,i),{maxWidth:void 0===n?void 0:Number(n),maxHeight:void 0===r?void 0:Number(r),minWidth:void 0===o?void 0:Number(o),minHeight:void 0===s?void 0:Number(s)});u=M.maxWidth,p=M.maxHeight,c=M.minWidth,d=M.minHeight;var D=this.calculateNewSizeFromDirection(f,g),I=D.newHeight,R=D.newWidth,T=this.calculateNewMaxFromBoundary(u,p);this.props.snap&&this.props.snap.x&&(R=S(R,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(I=S(I,this.props.snap.y,this.props.snapGap));var k=this.calculateNewSizeFromAspectRatio(R,I,{width:T.maxWidth,height:T.maxHeight},{width:c,height:d});if(R=k.newWidth,I=k.newHeight,this.props.grid){var z=w(R,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),N=w(I,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),O=this.props.snapGap||0,A=0===O||Math.abs(z-R)<=O?z:R,C=0===O||Math.abs(N-I)<=O?N:I;R=A,I=C}var L={width:R-v.width,height:I-v.height};if(b&&"string"==typeof b){if(b.endsWith("%")){var j=R/E.width*100;R=j+"%"}else if(b.endsWith("vw")){var F=R/this.window.innerWidth*100;R=F+"vw"}else if(b.endsWith("vh")){var W=R/this.window.innerHeight*100;R=W+"vh"}}if(x&&"string"==typeof x){if(x.endsWith("%")){var j=I/E.height*100;I=j+"%"}else if(x.endsWith("vw")){var F=I/this.window.innerWidth*100;I=F+"vw"}else if(x.endsWith("vh")){var W=I/this.window.innerHeight*100;I=W+"vh"}}var H={width:this.createSizeForCssProperty(R,"width"),height:this.createSizeForCssProperty(I,"height")};"row"===this.flexDir?H.flexBasis=H.width:"column"===this.flexDir&&(H.flexBasis=H.height);var X=this.state.width!==H.width,U=this.state.height!==H.height,Z=this.state.flexBasis!==H.flexBasis,B=X||U||Z;B&&(0,l.flushSync)(function(){a.setState(H)}),this.props.onResize&&B&&this.props.onResize(t,y,this.resizable,L)}},e.prototype.onMouseUp=function(t){var e,i,n=this.state,r=n.isResizing,o=n.direction,s=n.original;if(r&&this.resizable){var a={width:this.size.width-s.width,height:this.size.height-s.height};this.props.onResizeStop&&this.props.onResizeStop(t,o,this.resizable,a),this.props.size&&this.setState({width:null!==(e=this.props.size.width)&&void 0!==e?e:"auto",height:null!==(i=this.props.size.height)&&void 0!==i?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:y(y({},this.state.backgroundStyle),{cursor:"auto"})})}},e.prototype.updateSize=function(t){var e,i;this.setState({width:null!==(e=t.width)&&void 0!==e?e:"auto",height:null!==(i=t.height)&&void 0!==i?i:"auto"})},e.prototype.renderResizer=function(){var t=this,e=this.props,i=e.enable,n=e.handleStyles,r=e.handleClasses,s=e.handleWrapperStyle,a=e.handleWrapperClass,l=e.handleComponent;if(!i)return null;var h=Object.keys(i).map(function(e){return!1!==i[e]?o.createElement(g,{key:e,direction:e,onResizeStart:t.onResizeStart,replaceStyles:n&&n[e],className:r&&r[e]},l&&l[e]?l[e]:null):null});return o.createElement("div",{className:a,style:s},h)},e.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce(function(e,i){return -1!==M.indexOf(i)||(e[i]=t.props[i]),e},{}),i=y(y(y({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var n=this.props.as||"div";return o.createElement(n,y({style:i,className:this.props.className},e,{ref:function(e){e&&(t.resizable=e)}}),this.state.isResizing&&o.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(o.PureComponent),R=function(t,e){return(R=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},T=function(){return(T=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},k={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},z=function(t){function e(e){var i=t.call(this,e)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:e.maxWidth,maxHeight:e.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return!function(t,e){function i(){this.constructor=t}R(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,e=t.left,i=t.top,n=this.getDraggablePosition(),r=n.x,o=n.y;this.draggable.setState({x:r-e,y:o-i}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state;return{x:t.x,y:t.y}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){return{maxWidth:void 0===this.props.maxWidth?Number.MAX_SAFE_INTEGER:this.props.maxWidth,maxHeight:void 0===this.props.maxHeight?Number.MAX_SAFE_INTEGER:this.props.maxHeight}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/e;case"body":return document.body.offsetHeight/e;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/e;case"body":return document.body.offsetWidth/e;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,e){this.props.onDragStart&&this.props.onDragStart(t,e);var i,n=this.getDraggablePosition();if(this.originalPosition=n,this.props.bounds){var r=this.getParent(),o=this.props.scale;if("parent"===this.props.bounds)i=r;else if("body"===this.props.bounds){var s=r.getBoundingClientRect(),a=s.left,l=s.top,h=document.body.getBoundingClientRect(),u=-(a-r.offsetLeft*o-h.left)/o,p=-(l-r.offsetTop*o-h.top)/o,c=(document.body.offsetWidth-this.resizable.size.width*o)/o+u,d=(document.body.offsetHeight-this.resizable.size.height*o)/o+p;return this.setState({bounds:{top:p,right:c,bottom:d,left:u}})}else if("window"===this.props.bounds){if(!this.resizable)return;var f=r.getBoundingClientRect(),g=f.left,m=f.top,y=-(g-r.offsetLeft*o)/o,v=-(m-r.offsetTop*o)/o,c=(window.innerWidth-this.resizable.size.width*o)/o+y,d=(window.innerHeight-this.resizable.size.height*o)/o+v;return this.setState({bounds:{top:v,right:c,bottom:d,left:y}})}else"string"==typeof this.props.bounds?i=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(i=this.props.bounds);if(i instanceof HTMLElement&&r instanceof HTMLElement){var b=i.getBoundingClientRect(),w=b.left,x=b.top,_=r.getBoundingClientRect(),S=_.left,E=_.top,P=(w-S)/o,M=x-E;if(this.resizable){this.updateOffsetFromParent();var D=this.offsetFromParent;this.setState({bounds:{top:M-D.top,right:P+(i.offsetWidth-this.resizable.size.width)-D.left/o,bottom:M+(i.offsetHeight-this.resizable.size.height)-D.top,left:P-D.left/o}})}}}},e.prototype.onDrag=function(t,e){if(this.props.onDrag){var i=this.offsetFromParent,n=i.left,r=i.top;if(!this.props.dragAxis||"both"===this.props.dragAxis)return this.props.onDrag(t,T(T({},e),{x:e.x+n,y:e.y+r}));if("x"===this.props.dragAxis)return this.props.onDrag(t,T(T({},e),{x:e.x+n,y:this.originalPosition.y+r,deltaY:0}));if("y"===this.props.dragAxis)return this.props.onDrag(t,T(T({},e),{x:this.originalPosition.x+n,y:e.y+r,deltaX:0}))}},e.prototype.onDragStop=function(t,e){if(this.props.onDragStop){var i=this.offsetFromParent,n=i.left,r=i.top;if(!this.props.dragAxis||"both"===this.props.dragAxis)return this.props.onDragStop(t,T(T({},e),{x:e.x+n,y:e.y+r}));if("x"===this.props.dragAxis)return this.props.onDragStop(t,T(T({},e),{x:e.x+n,y:this.originalPosition.y+r,deltaY:0}));if("y"===this.props.dragAxis)return this.props.onDragStop(t,T(T({},e),{x:this.originalPosition.x+n,y:e.y+r,deltaX:0}))}},e.prototype.onResizeStart=function(t,e,i){t.stopPropagation(),this.setState({resizing:!0});var n=this.props.scale,r=this.offsetFromParent,o=this.getDraggablePosition();if(this.resizingPosition={x:o.x+r.left,y:o.y+r.top},this.originalPosition=o,this.props.bounds){var s=this.getParent(),a=void 0;"parent"===this.props.bounds?a=s:"body"===this.props.bounds?a=document.body:"window"===this.props.bounds?a=window:"string"==typeof this.props.bounds?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);var l=this.getSelfElement();if(l instanceof Element&&(a instanceof HTMLElement||a===window)&&s instanceof HTMLElement){var h=this.getMaxSizesFromProps(),u=h.maxWidth,p=h.maxHeight,c=this.getParentSize();if(u&&"string"==typeof u){if(u.endsWith("%")){var d=Number(u.replace("%",""))/100;u=c.width*d}else u.endsWith("px")&&(u=Number(u.replace("px","")))}if(p&&"string"==typeof p){if(p.endsWith("%")){var d=Number(p.replace("%",""))/100;p=c.height*d}else p.endsWith("px")&&(p=Number(p.replace("px","")))}var f=l.getBoundingClientRect(),g=f.left,m=f.top,y="window"===this.props.bounds?{left:0,top:0}:a.getBoundingClientRect(),v=y.left,b=y.top,w=this.getOffsetWidth(a),x=this.getOffsetHeight(a),_=e.toLowerCase().endsWith("left"),S=e.toLowerCase().endsWith("right"),E=e.startsWith("top"),P=e.startsWith("bottom");if((_||E)&&this.resizable){var M=(g-v)/n+this.resizable.size.width;this.setState({maxWidth:M>Number(u)?u:M})}if(S||this.props.lockAspectRatio&&!_&&!E){var M=w+(v-g)/n;this.setState({maxWidth:M>Number(u)?u:M})}if((E||_)&&this.resizable){var M=(m-b)/n+this.resizable.size.height;this.setState({maxHeight:M>Number(p)?p:M})}if(P||this.props.lockAspectRatio&&!E&&!_){var M=x+(b-m)/n;this.setState({maxHeight:M>Number(p)?p:M})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,e,i)},e.prototype.onResize=function(t,e,i,n){var r=this,o={x:this.originalPosition.x,y:this.originalPosition.y},s=-n.width,a=-n.height;["top","left","topLeft","bottomLeft","topRight"].includes(e)&&("bottomLeft"===e?o.x+=s:("topRight"===e||(o.x+=s),o.y+=a));var h=this.draggable.state;(o.x!==h.x||o.y!==h.y)&&(0,l.flushSync)(function(){r.draggable.setState(o)}),this.updateOffsetFromParent();var u=this.offsetFromParent,p=this.getDraggablePosition().x+u.left,c=this.getDraggablePosition().y+u.top;this.resizingPosition={x:p,y:c},this.props.onResize&&this.props.onResize(t,e,i,n,{x:p,y:c})},e.prototype.onResizeStop=function(t,e,i,n){this.setState({resizing:!1});var r=this.getMaxSizesFromProps(),o=r.maxWidth,s=r.maxHeight;this.setState({maxWidth:o,maxHeight:s}),this.props.onResizeStop&&this.props.onResizeStop(t,e,i,n,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,e=this.getParent(),i=this.getSelfElement();if(!e||null===i)return{top:0,left:0};var n=e.getBoundingClientRect(),r=n.left,o=n.top,s=i.getBoundingClientRect(),a=this.getDraggablePosition(),l=e.scrollLeft,h=e.scrollTop;this.offsetFromParent={left:s.left-r+l-a.x*t,top:s.top-o+h-a.y*t}},e.prototype.render=function(){var t,e=this,i=this.props,n=i.disableDragging,r=i.style,s=i.dragHandleClassName,l=i.position,h=i.onMouseDown,u=i.onMouseUp,p=i.dragAxis,c=i.dragGrid,d=i.bounds,f=i.enableUserSelectHack,g=i.cancel,m=i.children,y=(i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop,i.resizeHandleStyles),v=i.resizeHandleClasses,b=i.resizeHandleComponent,w=i.enableResizing,x=i.resizeGrid,_=i.resizeHandleWrapperClass,S=i.resizeHandleWrapperStyle,E=i.scale,P=i.allowAnyClick,M=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)0>e.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i}(i,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),D=this.props.default?T({},this.props.default):void 0;delete M.default;var R=T(T(T({},k),n||s?{cursor:"auto"}:{cursor:"move"}),r),z=this.offsetFromParent,N=z.left,O=z.top;l&&(t={x:l.x-N,y:l.y-O});var A=this.state.resizing?void 0:t,C=this.state.resizing?"both":p;return(0,o.createElement)(a(),{ref:function(t){t&&(e.draggable=t)},handle:s?".".concat(s):void 0,defaultPosition:D,onMouseDown:h,onMouseUp:u,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:C,disabled:n,grid:c,bounds:d?this.state.bounds:void 0,position:A,enableUserSelectHack:f,cancel:g,scale:E,allowAnyClick:P,nodeRef:this.resizableElement},(0,o.createElement)(I,T({},M,{ref:function(t){t&&(e.resizable=t,e.resizableElement.current=t.resizable)},defaultSize:D,size:this.props.size,enable:"boolean"==typeof w?{bottom:w,bottomLeft:w,bottomRight:w,left:w,right:w,top:w,topLeft:w,topRight:w}:w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:R,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:x,handleWrapperClass:_,handleWrapperStyle:S,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:y,handleClasses:v,handleComponent:b,scale:this.props.scale}),m))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(o.PureComponent)},59739:function(t,e,i){"use strict";i.d(e,{Z:function(){return l}});for(var n,r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},o=new Uint8Array(16),s=[],a=0;a<256;++a)s.push((a+256).toString(16).slice(1));var l=function(t,e,i){if(r.randomUUID&&!e&&!t)return r.randomUUID();var a=(t=t||{}).random||(t.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){i=i||0;for(var l=0;l<16;++l)e[i+l]=a[l];return e}return function(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}(a)}},33715:function(t,e,i){"use strict";i.d(e,{z:function(){return d}});var n=i(54028);let r={type:"change"},o={type:"start"},s={type:"end"},a=new n.zHn,l=new n.JOQ,h=Math.cos(70*n.M8C.DEG2RAD),u=new n.Pa4,p=2*Math.PI,c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};class d extends n.ZXd{constructor(t,e=null){super(t,e),this.state=c.NONE,this.enabled=!0,this.target=new n.Pa4,this.cursor=new n.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:n.RsA.ROTATE,MIDDLE:n.RsA.DOLLY,RIGHT:n.RsA.PAN},this.touches={ONE:n.QmN.ROTATE,TWO:n.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new n.Pa4,this._lastQuaternion=new n._fP,this._lastTargetPosition=new n.Pa4,this._quat=new n._fP().setFromUnitVectors(t.up,new n.Pa4(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new n.$V,this._sphericalDelta=new n.$V,this._scale=1,this._panOffset=new n.Pa4,this._rotateStart=new n.FM8,this._rotateEnd=new n.FM8,this._rotateDelta=new n.FM8,this._panStart=new n.FM8,this._panEnd=new n.FM8,this._panDelta=new n.FM8,this._dollyStart=new n.FM8,this._dollyEnd=new n.FM8,this._dollyDelta=new n.FM8,this._dollyDirection=new n.Pa4,this._mouse=new n.FM8,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=g.bind(this),this._onPointerDown=f.bind(this),this._onPointerUp=m.bind(this),this._onContextMenu=S.bind(this),this._onMouseWheel=b.bind(this),this._onKeyDown=w.bind(this),this._onTouchStart=x.bind(this),this._onTouchMove=_.bind(this),this._onMouseDown=y.bind(this),this._onMouseMove=v.bind(this),this._interceptControlDown=E.bind(this),this._interceptControlUp=P.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(r),this.update(),this.state=c.NONE}update(t=null){let e=this.object.position;u.copy(e).sub(this.target),u.applyQuaternion(this._quat),this._spherical.setFromVector3(u),this.autoRotate&&this.state===c.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(i)&&isFinite(o)&&(i<-Math.PI?i+=p:i>Math.PI&&(i-=p),o<-Math.PI?o+=p:o>Math.PI&&(o-=p),i<=o?this._spherical.theta=Math.max(i,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+o)/2?Math.max(i,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let t=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=t!=this._spherical.radius}if(u.setFromSpherical(this._spherical),u.applyQuaternion(this._quatInverse),e.copy(this.target).add(u),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let t=null;if(this.object.isPerspectiveCamera){let e=u.length();t=this._clampDistance(e*this._scale);let i=e-t;this.object.position.addScaledVector(this._dollyDirection,i),this.object.updateMatrixWorld(),s=!!i}else if(this.object.isOrthographicCamera){let e=new n.Pa4(this._mouse.x,this._mouse.y,0);e.unproject(this.object);let i=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=i!==this.object.zoom;let r=new n.Pa4(this._mouse.x,this._mouse.y,0);r.unproject(this.object),this.object.position.sub(r).add(e),this.object.updateMatrixWorld(),t=u.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==t&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(t).add(this.object.position):(a.origin.copy(this.object.position),a.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(a.direction))<h?this.object.lookAt(this.target):(l.setFromNormalAndCoplanarPoint(this.object.up,this.target),a.intersectPlane(l,this.target))))}else if(this.object.isOrthographicCamera){let t=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),t!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,!!(s||this._lastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this._lastQuaternion.dot(this.object.quaternion))>1e-6||this._lastTargetPosition.distanceToSquared(this.target)>1e-6)&&(this.dispatchEvent(r),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?p/60*this.autoRotateSpeed*t:p/60/60*this.autoRotateSpeed}_getZoomScale(t){return Math.pow(.95,this.zoomSpeed*Math.abs(.01*t))}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){u.setFromMatrixColumn(e,0),u.multiplyScalar(-t),this._panOffset.add(u)}_panUp(t,e){!0===this.screenSpacePanning?u.setFromMatrixColumn(e,1):(u.setFromMatrixColumn(e,0),u.crossVectors(this.object.up,u)),u.multiplyScalar(t),this._panOffset.add(u)}_pan(t,e){let i=this.domElement;if(this.object.isPerspectiveCamera){let n=this.object.position;u.copy(n).sub(this.target);let r=u.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*r/i.clientHeight,this.object.matrix),this._panUp(2*e*r/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),n=t-i.left,r=e-i.top,o=i.width,s=i.height;this._mouse.x=n/o*2-1,this._mouse.y=-(r/s*2)+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(p*this._rotateDelta.x/e.clientHeight),this._rotateUp(p*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(p*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-p*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(p*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-p*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateStart.set(i,n)}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panStart.set(i,n)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y;this._dollyStart.set(0,Math.sqrt(i*i+n*n))}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateEnd.set(i,n)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(p*this._rotateDelta.x/e.clientHeight),this._rotateUp(p*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panEnd.set(i,n)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y;this._dollyEnd.set(0,Math.sqrt(i*i+n*n)),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let r=(t.pageX+e.x)*.5,o=(t.pageY+e.y)*.5;this._updateZoomParameters(r,o)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];void 0===e&&(e=new n.FM8,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function f(t){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(t)||(this._addPointer(t),"touch"===t.pointerType?this._onTouchStart(t):this._onMouseDown(t)))}function g(t){!1!==this.enabled&&("touch"===t.pointerType?this._onTouchMove(t):this._onMouseMove(t))}function m(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(s),this.state=c.NONE;break;case 1:let e=this._pointers[0],i=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:i.x,pageY:i.y})}}function y(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case n.RsA.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(t),this.state=c.DOLLY;break;case n.RsA.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=c.PAN}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=c.ROTATE}break;case n.RsA.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=c.ROTATE}else{if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=c.PAN}break;default:this.state=c.NONE}this.state!==c.NONE&&this.dispatchEvent(o)}function v(t){switch(this.state){case c.ROTATE:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(t);break;case c.DOLLY:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(t);break;case c.PAN:if(!1===this.enablePan)return;this._handleMouseMovePan(t)}}function b(t){!1!==this.enabled&&!1!==this.enableZoom&&this.state===c.NONE&&(t.preventDefault(),this.dispatchEvent(o),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(s))}function w(t){!1!==this.enabled&&this._handleKeyDown(t)}function x(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case n.QmN.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(t),this.state=c.TOUCH_ROTATE;break;case n.QmN.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(t),this.state=c.TOUCH_PAN;break;default:this.state=c.NONE}break;case 2:switch(this.touches.TWO){case n.QmN.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(t),this.state=c.TOUCH_DOLLY_PAN;break;case n.QmN.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(t),this.state=c.TOUCH_DOLLY_ROTATE;break;default:this.state=c.NONE}break;default:this.state=c.NONE}this.state!==c.NONE&&this.dispatchEvent(o)}function _(t){switch(this._trackPointer(t),this.state){case c.TOUCH_ROTATE:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(t),this.update();break;case c.TOUCH_PAN:if(!1===this.enablePan)return;this._handleTouchMovePan(t),this.update();break;case c.TOUCH_DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(t),this.update();break;case c.TOUCH_DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=c.NONE}}function S(t){!1!==this.enabled&&t.preventDefault()}function E(t){"Control"===t.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function P(t){"Control"===t.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}},87970:function(t,e,i){"use strict";i.d(e,{Ys:function(){return d}});var n=i(54028);let r=new n.iMs,o=new n.Pa4,s=new n.Pa4,a=new n._fP,l={X:new n.Pa4(1,0,0),Y:new n.Pa4(0,1,0),Z:new n.Pa4(0,0,1)},h={type:"change"},u={type:"mouseDown",mode:null},p={type:"mouseUp",mode:null},c={type:"objectChange"};class d extends n.ZXd{constructor(t,e=null){super(void 0,e);let i=new O(this);this._root=i;let r=new A;this._gizmo=r,i.add(r);let o=new C;this._plane=o,i.add(o);let s=this;function a(t,e){let i=e;Object.defineProperty(s,t,{get:function(){return void 0!==i?i:e},set:function(e){i!==e&&(i=e,o[t]=e,r[t]=e,s.dispatchEvent({type:t+"-changed",value:e}),s.dispatchEvent(h))}}),s[t]=e,o[t]=e,r[t]=e}a("camera",t),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0),a("minX",-1/0),a("maxX",1/0),a("minY",-1/0),a("maxY",1/0),a("minZ",-1/0),a("maxZ",1/0);let l=new n.Pa4,u=new n.Pa4,p=new n._fP,c=new n._fP,d=new n.Pa4,b=new n._fP,w=new n.Pa4,x=new n.Pa4,_=new n.Pa4,S=new n.Pa4;a("worldPosition",l),a("worldPositionStart",u),a("worldQuaternion",p),a("worldQuaternionStart",c),a("cameraPosition",d),a("cameraQuaternion",b),a("pointStart",w),a("pointEnd",x),a("rotationAxis",_),a("rotationAngle",0),a("eye",S),this._offset=new n.Pa4,this._startNorm=new n.Pa4,this._endNorm=new n.Pa4,this._cameraScale=new n.Pa4,this._parentPosition=new n.Pa4,this._parentQuaternion=new n._fP,this._parentQuaternionInv=new n._fP,this._parentScale=new n.Pa4,this._worldScaleStart=new n.Pa4,this._worldQuaternionInv=new n._fP,this._worldScale=new n.Pa4,this._positionStart=new n.Pa4,this._quaternionStart=new n._fP,this._scaleStart=new n.Pa4,this._getPointer=f.bind(this),this._onPointerDown=m.bind(this),this._onPointerHover=g.bind(this),this._onPointerMove=y.bind(this),this._onPointerUp=v.bind(this),null!==e&&this.connect()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="auto"}getHelper(){return this._root}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;null!==t&&r.setFromCamera(t,this.camera);let e=b(this._gizmo.picker[this.mode],r);e?this.axis=e.object.name:this.axis=null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&(null==t||0===t.button)&&null!==this.axis){null!==t&&r.setFromCamera(t,this.camera);let e=b(this._plane,r,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,u.mode=this.mode,this.dispatchEvent(u)}}pointerMove(t){let e=this.axis,i=this.mode,n=this.object,u=this.space;if("scale"===i?u="local":("E"===e||"XYZE"===e||"XYZ"===e)&&(u="world"),void 0===n||null===e||!1===this.dragging||null!==t&&-1!==t.button)return;null!==t&&r.setFromCamera(t,this.camera);let p=b(this._plane,r,!0);if(p){if(this.pointEnd.copy(p.point).sub(this.worldPositionStart),"translate"===i)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===u&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===u&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),n.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===u&&(n.position.applyQuaternion(a.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(this._quaternionStart)),"world"===u&&(n.parent&&n.position.add(o.setFromMatrixPosition(n.parent.matrixWorld)),-1!==e.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(o.setFromMatrixPosition(n.parent.matrixWorld)))),n.position.x=Math.max(this.minX,Math.min(this.maxX,n.position.x)),n.position.y=Math.max(this.minY,Math.min(this.maxY,n.position.y)),n.position.z=Math.max(this.minZ,Math.min(this.maxZ,n.position.z));else if("scale"===i){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();0>this.pointEnd.dot(this.pointStart)&&(t*=-1),s.set(t,t,t)}else o.copy(this.pointStart),s.copy(this.pointEnd),o.applyQuaternion(this._worldQuaternionInv),s.applyQuaternion(this._worldQuaternionInv),s.divide(o),-1===e.search("X")&&(s.x=1),-1===e.search("Y")&&(s.y=1),-1===e.search("Z")&&(s.z=1);n.scale.copy(this._scaleStart).multiply(s),this.scaleSnap&&(-1!==e.search("X")&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===i){this._offset.copy(this.pointEnd).sub(this.pointStart);let t=20/this.worldPosition.distanceTo(o.setFromMatrixPosition(this.camera.matrixWorld)),i=!1;"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(o.copy(this.rotationAxis).cross(this.eye))*t):("X"===e||"Y"===e||"Z"===e)&&(this.rotationAxis.copy(l[e]),o.copy(l[e]),"local"===u&&o.applyQuaternion(this.worldQuaternion),o.cross(this.eye),0===o.length()?i=!0:this.rotationAngle=this._offset.dot(o.normalize())*t),("E"===e||i)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=0>this._endNorm.cross(this._startNorm).dot(this.eye)?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===u&&"E"!==e&&"XYZE"!==e?(n.quaternion.copy(this._quaternionStart),n.quaternion.multiply(a.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),n.quaternion.copy(a.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),n.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(h),this.dispatchEvent(c)}}pointerUp(t){(null===t||0===t.button)&&(this.dragging&&null!==this.axis&&(p.mode=this.mode,this.dispatchEvent(p)),this.dragging=!1,this.axis=null)}dispose(){this.disconnect(),this._root.dispose()}attach(t){return this.object=t,this._root.visible=!0,this}detach(){return this.object=void 0,this.axis=null,this._root.visible=!1,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(h),this.dispatchEvent(c),this.pointStart.copy(this.pointEnd))}getRaycaster(){return r}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}}function f(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{let e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function g(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function m(t){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function y(t){this.enabled&&this.pointerMove(this._getPointer(t))}function v(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function b(t,e,i){let n=e.intersectObject(t,!0);for(let t=0;t<n.length;t++)if(n[t].object.visible||i)return n[t];return!1}let w=new n.USm,x=new n.Pa4(0,1,0),_=new n.Pa4(0,0,0),S=new n.yGw,E=new n._fP,P=new n._fP,M=new n.Pa4,D=new n.yGw,I=new n.Pa4(1,0,0),R=new n.Pa4(0,1,0),T=new n.Pa4(0,0,1),k=new n.Pa4,z=new n.Pa4,N=new n.Pa4;class O extends n.Tme{constructor(t){super(),this.isTransformControlsRoot=!0,this.controls=t,this.visible=!1}updateMatrixWorld(t){let e=this.controls;void 0!==e.object&&(e.object.updateMatrixWorld(),null===e.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):e.object.parent.matrixWorld.decompose(e._parentPosition,e._parentQuaternion,e._parentScale),e.object.matrixWorld.decompose(e.worldPosition,e.worldQuaternion,e._worldScale),e._parentQuaternionInv.copy(e._parentQuaternion).invert(),e._worldQuaternionInv.copy(e.worldQuaternion).invert()),e.camera.updateMatrixWorld(),e.camera.matrixWorld.decompose(e.cameraPosition,e.cameraQuaternion,e._cameraScale),e.camera.isOrthographicCamera?e.camera.getWorldDirection(e.eye).negate():e.eye.copy(e.cameraPosition).sub(e.worldPosition).normalize(),super.updateMatrixWorld(t)}dispose(){this.traverse(function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})}}class A extends n.Tme{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";let t=new n.vBJ({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new n.nls({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=t.clone();i.opacity=.15;let r=e.clone();r.opacity=.5;let o=t.clone();o.color.setHex(16711680);let s=t.clone();s.color.setHex(65280);let a=t.clone();a.color.setHex(255);let l=t.clone();l.color.setHex(16711680),l.opacity=.5;let h=t.clone();h.color.setHex(65280),h.opacity=.5;let u=t.clone();u.color.setHex(255),u.opacity=.5;let p=t.clone();p.opacity=.25;let c=t.clone();c.color.setHex(16776960),c.opacity=.25,t.clone().color.setHex(16776960);let d=t.clone();d.color.setHex(7895160);let f=new n.fHI(0,.04,.1,12);f.translate(0,.05,0);let g=new n.DvJ(.08,.08,.08);g.translate(0,.04,0);let m=new n.u9r;m.setAttribute("position",new n.a$l([0,0,0,1,0,0],3));let y=new n.fHI(.0075,.0075,.5,3);function v(t,e){let i=new n.XvJ(t,.0075,3,64,e*Math.PI*2);return i.rotateY(Math.PI/2),i.rotateX(Math.PI/2),i}y.translate(0,.25,0);let b={X:[[new n.Kj0(f,o),[.5,0,0],[0,0,-Math.PI/2]],[new n.Kj0(f,o),[-.5,0,0],[0,0,Math.PI/2]],[new n.Kj0(y,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new n.Kj0(f,s),[0,.5,0]],[new n.Kj0(f,s),[0,-.5,0],[Math.PI,0,0]],[new n.Kj0(y,s)]],Z:[[new n.Kj0(f,a),[0,0,.5],[Math.PI/2,0,0]],[new n.Kj0(f,a),[0,0,-.5],[-Math.PI/2,0,0]],[new n.Kj0(y,a),null,[Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.pQR(.1,0),p.clone()),[0,0,0]]],XY:[[new n.Kj0(new n.DvJ(.15,.15,.01),u.clone()),[.15,.15,0]]],YZ:[[new n.Kj0(new n.DvJ(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n.DvJ(.15,.15,.01),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},w={X:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,.3,0]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.pQR(.2,0),i)]],XY:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},x={START:[[new n.Kj0(new n.pQR(.01,2),r),null,null,null,"helper"]],END:[[new n.Kj0(new n.pQR(.01,2),r),null,null,null,"helper"]],DELTA:[[new n.x12(function(){let t=new n.u9r;return t.setAttribute("position",new n.a$l([0,0,0,1,1,1],3)),t}(),r),null,null,null,"helper"]],X:[[new n.x12(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.x12(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.x12(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},_={XYZE:[[new n.Kj0(v(.5,1),d),null,[0,Math.PI/2,0]]],X:[[new n.Kj0(v(.5,.5),o)]],Y:[[new n.Kj0(v(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new n.Kj0(v(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new n.Kj0(v(.75,1),c),null,[0,Math.PI/2,0]]]},S={AXIS:[[new n.x12(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},E={XYZE:[[new n.Kj0(new n.xo$(.25,10,8),i)]],X:[[new n.Kj0(new n.XvJ(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new n.Kj0(new n.XvJ(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new n.Kj0(new n.XvJ(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new n.Kj0(new n.XvJ(.75,.1,2,24),i)]]},P={X:[[new n.Kj0(g,o),[.5,0,0],[0,0,-Math.PI/2]],[new n.Kj0(y,o),[0,0,0],[0,0,-Math.PI/2]],[new n.Kj0(g,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new n.Kj0(g,s),[0,.5,0]],[new n.Kj0(y,s)],[new n.Kj0(g,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new n.Kj0(g,a),[0,0,.5],[Math.PI/2,0,0]],[new n.Kj0(y,a),[0,0,0],[Math.PI/2,0,0]],[new n.Kj0(g,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new n.Kj0(new n.DvJ(.15,.15,.01),u),[.15,.15,0]]],YZ:[[new n.Kj0(new n.DvJ(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n.DvJ(.15,.15,.01),h),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.DvJ(.1,.1,.1),p.clone())]]},M={X:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,.3,0]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.DvJ(.2,.2,.2),i),[0,0,0]]]},D={X:[[new n.x12(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.x12(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.x12(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function I(t){let e=new n.Tme;for(let i in t)for(let n=t[i].length;n--;){let r=t[i][n][0].clone(),o=t[i][n][1],s=t[i][n][2],a=t[i][n][3],l=t[i][n][4];r.name=i,r.tag=l,o&&r.position.set(o[0],o[1],o[2]),s&&r.rotation.set(s[0],s[1],s[2]),a&&r.scale.set(a[0],a[1],a[2]),r.updateMatrix();let h=r.geometry.clone();h.applyMatrix4(r.matrix),r.geometry=h,r.renderOrder=1/0,r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),e.add(r)}return e}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=I(b)),this.add(this.gizmo.rotate=I(_)),this.add(this.gizmo.scale=I(P)),this.add(this.picker.translate=I(w)),this.add(this.picker.rotate=I(E)),this.add(this.picker.scale=I(M)),this.add(this.helper.translate=I(x)),this.add(this.helper.rotate=I(S)),this.add(this.helper.scale=I(D)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){let e="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:P;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let i=[];i=(i=(i=i.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(let t=0;t<i.length;t++){let n;let r=i[t];if(r.visible=!0,r.rotation.set(0,0,0),r.position.copy(this.worldPosition),n=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),r.scale.set(1,1,1).multiplyScalar(n*this.size/4),"helper"===r.tag){r.visible=!1,"AXIS"===r.name?(r.visible=!!this.axis,"X"===this.axis&&(a.setFromEuler(w.set(0,0,0)),r.quaternion.copy(e).multiply(a),Math.abs(x.copy(I).applyQuaternion(e).dot(this.eye))>.9&&(r.visible=!1)),"Y"===this.axis&&(a.setFromEuler(w.set(0,0,Math.PI/2)),r.quaternion.copy(e).multiply(a),Math.abs(x.copy(R).applyQuaternion(e).dot(this.eye))>.9&&(r.visible=!1)),"Z"===this.axis&&(a.setFromEuler(w.set(0,Math.PI/2,0)),r.quaternion.copy(e).multiply(a),Math.abs(x.copy(T).applyQuaternion(e).dot(this.eye))>.9&&(r.visible=!1)),"XYZE"===this.axis&&(a.setFromEuler(w.set(0,Math.PI/2,0)),x.copy(this.rotationAxis),r.quaternion.setFromRotationMatrix(S.lookAt(_,x,R)),r.quaternion.multiply(a),r.visible=this.dragging),"E"===this.axis&&(r.visible=!1)):"START"===r.name?(r.position.copy(this.worldPositionStart),r.visible=this.dragging):"END"===r.name?(r.position.copy(this.worldPosition),r.visible=this.dragging):"DELTA"===r.name?(r.position.copy(this.worldPositionStart),r.quaternion.copy(this.worldQuaternionStart),o.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),o.applyQuaternion(this.worldQuaternionStart.clone().invert()),r.scale.copy(o),r.visible=this.dragging):(r.quaternion.copy(e),this.dragging?r.position.copy(this.worldPositionStart):r.position.copy(this.worldPosition),this.axis&&(r.visible=-1!==this.axis.search(r.name)));continue}r.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode?("X"===r.name&&Math.abs(x.copy(I).applyQuaternion(e).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"Y"===r.name&&Math.abs(x.copy(R).applyQuaternion(e).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"Z"===r.name&&Math.abs(x.copy(T).applyQuaternion(e).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"XY"===r.name&&.2>Math.abs(x.copy(T).applyQuaternion(e).dot(this.eye))&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"YZ"===r.name&&.2>Math.abs(x.copy(I).applyQuaternion(e).dot(this.eye))&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"XZ"===r.name&&.2>Math.abs(x.copy(R).applyQuaternion(e).dot(this.eye))&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1)):"rotate"===this.mode&&(E.copy(e),x.copy(this.eye).applyQuaternion(a.copy(e).invert()),-1!==r.name.search("E")&&r.quaternion.setFromRotationMatrix(S.lookAt(this.eye,_,R)),"X"===r.name&&(a.setFromAxisAngle(I,Math.atan2(-x.y,x.z)),a.multiplyQuaternions(E,a),r.quaternion.copy(a)),"Y"===r.name&&(a.setFromAxisAngle(R,Math.atan2(x.x,x.z)),a.multiplyQuaternions(E,a),r.quaternion.copy(a)),"Z"===r.name&&(a.setFromAxisAngle(T,Math.atan2(x.y,x.x)),a.multiplyQuaternions(E,a),r.quaternion.copy(a))),r.visible=r.visible&&(-1===r.name.indexOf("X")||this.showX),r.visible=r.visible&&(-1===r.name.indexOf("Y")||this.showY),r.visible=r.visible&&(-1===r.name.indexOf("Z")||this.showZ),r.visible=r.visible&&(-1===r.name.indexOf("E")||this.showX&&this.showY&&this.showZ),r.material._color=r.material._color||r.material.color.clone(),r.material._opacity=r.material._opacity||r.material.opacity,r.material.color.copy(r.material._color),r.material.opacity=r.material._opacity,this.enabled&&this.axis&&(r.name===this.axis?(r.material.color.setHex(16776960),r.material.opacity=1):this.axis.split("").some(function(t){return r.name===t})&&(r.material.color.setHex(16776960),r.material.opacity=1))}super.updateMatrixWorld(t)}}class C extends n.Kj0{constructor(){super(new n._12(1e5,1e5,2,2),new n.vBJ({visible:!1,wireframe:!0,side:n.ehD,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),k.copy(I).applyQuaternion("local"===e?this.worldQuaternion:P),z.copy(R).applyQuaternion("local"===e?this.worldQuaternion:P),N.copy(T).applyQuaternion("local"===e?this.worldQuaternion:P),x.copy(z),this.mode){case"translate":case"scale":switch(this.axis){case"X":x.copy(this.eye).cross(k),M.copy(k).cross(x);break;case"Y":x.copy(this.eye).cross(z),M.copy(z).cross(x);break;case"Z":x.copy(this.eye).cross(N),M.copy(N).cross(x);break;case"XY":M.copy(N);break;case"YZ":M.copy(k);break;case"XZ":x.copy(N),M.copy(z);break;case"XYZ":case"E":M.set(0,0,0)}break;default:M.set(0,0,0)}0===M.length()?this.quaternion.copy(this.cameraQuaternion):(D.lookAt(o.set(0,0,0),M,x),this.quaternion.setFromRotationMatrix(D)),super.updateMatrixWorld(t)}}},36674:function(t,e,i){"use strict";let n,r,o;i.d(e,{y:function(){return q}});var s=i(54028),a={},l=Uint8Array,h=Uint16Array,u=Int32Array,p=new l([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),c=new l([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d=new l([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(t,e){for(var i=new h(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];for(var r=new u(i[30]),n=1;n<30;++n)for(var o=i[n];o<i[n+1];++o)r[o]=o-i[n]<<5|n;return{b:i,r:r}},g=f(p,2),m=g.b,y=g.r;m[28]=258,y[258]=28;for(var v=f(c,0),b=v.b,w=v.r,x=new h(32768),_=0;_<32768;++_){var S=(43690&_)>>1|(21845&_)<<1;S=(61680&(S=(52428&S)>>2|(13107&S)<<2))>>4|(3855&S)<<4,x[_]=((65280&S)>>8|(255&S)<<8)>>1}for(var E=function(t,e,i){for(var n,r=t.length,o=0,s=new h(e);o<r;++o)t[o]&&++s[t[o]-1];var a=new h(e);for(o=1;o<e;++o)a[o]=a[o-1]+s[o-1]<<1;if(i){n=new h(1<<e);var l=15-e;for(o=0;o<r;++o)if(t[o])for(var u=o<<4|t[o],p=e-t[o],c=a[t[o]-1]++<<p,d=c|(1<<p)-1;c<=d;++c)n[x[c]>>l]=u}else for(o=0,n=new h(r);o<r;++o)t[o]&&(n[o]=x[a[t[o]-1]++]>>15-t[o]);return n},P=new l(288),_=0;_<144;++_)P[_]=8;for(var _=144;_<256;++_)P[_]=9;for(var _=256;_<280;++_)P[_]=7;for(var _=280;_<288;++_)P[_]=8;for(var M=new l(32),_=0;_<32;++_)M[_]=5;var D=E(P,9,1),I=E(M,5,1),R=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},T=function(t,e,i){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(7&e)&i},k=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},z=function(t){return(t+7)/8|0},N=function(t,e,i){return(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length),new l(t.subarray(e,i))},O=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],A=function(t,e,i){var n=Error(e||O[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,A),!i)throw n;return n},C=function(t,e,i,n){var r=t.length,o=n?n.length:0;if(!r||e.f&&!e.l)return i||new l(0);var s=!i,a=s||2!=e.i,h=e.i;s&&(i=new l(3*r));var u=function(t){var e=i.length;if(t>e){var n=new l(Math.max(2*e,t));n.set(i),i=n}},f=e.f||0,g=e.p||0,y=e.b||0,v=e.l,w=e.d,x=e.m,_=e.n,S=8*r;do{if(!v){f=T(t,g,1);var P=T(t,g+1,3);if(g+=3,P){if(1==P)v=D,w=I,x=9,_=5;else if(2==P){var M=T(t,g,31)+257,O=T(t,g+10,15)+4,C=M+T(t,g+5,31)+1;g+=14;for(var L=new l(C),j=new l(19),F=0;F<O;++F)j[d[F]]=T(t,g+3*F,7);g+=3*O;for(var W=R(j),H=(1<<W)-1,X=E(j,W,1),F=0;F<C;){var U=X[T(t,g,H)];g+=15&U;var Z=U>>4;if(Z<16)L[F++]=Z;else{var B=0,Y=0;for(16==Z?(Y=3+T(t,g,3),g+=2,B=L[F-1]):17==Z?(Y=3+T(t,g,7),g+=3):18==Z&&(Y=11+T(t,g,127),g+=7);Y--;)L[F++]=B}}var K=L.subarray(0,M),G=L.subarray(M);x=R(K),_=R(G),v=E(K,x,1),w=E(G,_,1)}else A(1)}else{var Z=z(g)+4,V=t[Z-4]|t[Z-3]<<8,Q=Z+V;if(Q>r){h&&A(0);break}a&&u(y+V),i.set(t.subarray(Z,Q),y),e.b=y+=V,e.p=g=8*Q,e.f=f;continue}if(g>S){h&&A(0);break}}a&&u(y+131072);for(var q=(1<<x)-1,$=(1<<_)-1,J=g;;J=g){var B=v[k(t,g)&q],tt=B>>4;if((g+=15&B)>S){h&&A(0);break}if(B||A(2),tt<256)i[y++]=tt;else if(256==tt){J=g,v=null;break}else{var te=tt-254;if(tt>264){var F=tt-257,ti=p[F];te=T(t,g,(1<<ti)-1)+m[F],g+=ti}var tn=w[k(t,g)&$],tr=tn>>4;tn||A(3),g+=15&tn;var G=b[tr];if(tr>3){var ti=c[tr];G+=k(t,g)&(1<<ti)-1,g+=ti}if(g>S){h&&A(0);break}a&&u(y+131072);var to=y+te;if(y<G){var ts=o-G,ta=Math.min(G,to);for(ts+y<0&&A(3);y<ta;++y)i[y]=n[ts+y]}for(;y<to;++y)i[y]=i[y-G]}}e.l=v,e.p=J,e.b=y,e.f=f,v&&(f=1,e.m=x,e.d=w,e.n=_)}while(!f);return y!=i.length&&s?N(i,0,y):i.subarray(0,y)},L=function(t,e,i){i<<=7&e;var n=e/8|0;t[n]|=i,t[n+1]|=i>>8},j=function(t,e,i){i<<=7&e;var n=e/8|0;t[n]|=i,t[n+1]|=i>>8,t[n+2]|=i>>16},F=function(t,e){for(var i=[],n=0;n<t.length;++n)t[n]&&i.push({s:n,f:t[n]});var r=i.length,o=i.slice();if(!r)return{t:Y,l:0};if(1==r){var s=new l(i[0].s+1);return s[i[0].s]=1,{t:s,l:1}}i.sort(function(t,e){return t.f-e.f}),i.push({s:-1,f:25001});var a=i[0],u=i[1],p=0,c=1,d=2;for(i[0]={s:-1,f:a.f+u.f,l:a,r:u};c!=r-1;)a=i[i[p].f<i[d].f?p++:d++],u=i[p!=c&&i[p].f<i[d].f?p++:d++],i[c++]={s:-1,f:a.f+u.f,l:a,r:u};for(var f=o[0].s,n=1;n<r;++n)o[n].s>f&&(f=o[n].s);var g=new h(f+1),m=W(i[c-1],g,0);if(m>e){var n=0,y=0,v=m-e,b=1<<v;for(o.sort(function(t,e){return g[e.s]-g[t.s]||t.f-e.f});n<r;++n){var w=o[n].s;if(g[w]>e)y+=b-(1<<m-g[w]),g[w]=e;else break}for(y>>=v;y>0;){var x=o[n].s;g[x]<e?y-=1<<e-g[x]++-1:++n}for(;n>=0&&y;--n){var _=o[n].s;g[_]==e&&(--g[_],++y)}m=e}return{t:new l(g),l:m}},W=function(t,e,i){return -1==t.s?Math.max(W(t.l,e,i+1),W(t.r,e,i+1)):e[t.s]=i},H=function(t){for(var e=t.length;e&&!t[--e];);for(var i=new h(++e),n=0,r=t[0],o=1,s=function(t){i[n++]=t},a=1;a<=e;++a)if(t[a]==r&&a!=e)++o;else{if(!r&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(r),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(r);o=1,r=t[a]}return{c:i.subarray(0,n),n:e}},X=function(t,e){for(var i=0,n=0;n<e.length;++n)i+=t[n]*e[n];return i},U=function(t,e,i){var n=i.length,r=z(e+2);t[r]=255&n,t[r+1]=n>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var o=0;o<n;++o)t[r+o+4]=i[o];return(r+4+n)*8},Z=function(t,e,i,n,r,o,s,a,l,u,f){L(e,f++,i),++r[256];for(var g,m,y,v,b=F(r,15),w=b.t,x=b.l,_=F(o,15),S=_.t,D=_.l,I=H(w),R=I.c,T=I.n,k=H(S),z=k.c,N=k.n,O=new h(19),A=0;A<R.length;++A)++O[31&R[A]];for(var A=0;A<z.length;++A)++O[31&z[A]];for(var C=F(O,7),W=C.t,Z=C.l,B=19;B>4&&!W[d[B-1]];--B);var Y=u+5<<3,K=X(r,P)+X(o,M)+s,G=X(r,w)+X(o,S)+s+14+3*B+X(O,W)+2*O[16]+3*O[17]+7*O[18];if(l>=0&&Y<=K&&Y<=G)return U(e,f,t.subarray(l,l+u));if(L(e,f,1+(G<K)),f+=2,G<K){g=E(w,x,0),m=w,y=E(S,D,0),v=S;var V=E(W,Z,0);L(e,f,T-257),L(e,f+5,N-1),L(e,f+10,B-4),f+=14;for(var A=0;A<B;++A)L(e,f+3*A,W[d[A]]);f+=3*B;for(var Q=[R,z],q=0;q<2;++q)for(var $=Q[q],A=0;A<$.length;++A){var J=31&$[A];L(e,f,V[J]),f+=W[J],J>15&&(L(e,f,$[A]>>5&127),f+=$[A]>>12)}}else g=null,m=P,y=null,v=M;for(var A=0;A<a;++A){var tt=n[A];if(tt>255){var J=tt>>18&31;j(e,f,g[J+257]),f+=m[J+257],J>7&&(L(e,f,tt>>23&31),f+=p[J]);var te=31&tt;j(e,f,y[te]),f+=v[te],te>3&&(j(e,f,tt>>5&8191),f+=c[te])}else j(e,f,g[tt]),f+=m[tt]}return j(e,f,g[256]),f+m[256]},B=new u([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y=new l(0),K=function(t,e,i,n,r,o){var s=o.z||t.length,a=new l(n+s+5*(1+Math.ceil(s/7e3))+r),d=a.subarray(n,a.length-r),f=o.l,g=7&(o.r||0);if(e){g&&(d[0]=o.r>>3);for(var m=B[e-1],v=m>>13,b=8191&m,x=(1<<i)-1,_=o.p||new h(32768),S=o.h||new h(x+1),E=Math.ceil(i/3),P=2*E,M=function(e){return(t[e]^t[e+1]<<E^t[e+2]<<P)&x},D=new u(25e3),I=new h(288),R=new h(32),T=0,k=0,O=o.i||0,A=0,C=o.w||0,L=0;O+2<s;++O){var j=M(O),F=32767&O,W=S[j];if(_[F]=W,S[j]=F,C<=O){var H=s-O;if((T>7e3||A>24576)&&(H>423||!f)){g=Z(t,d,0,D,I,R,k,A,L,O-L,g),A=T=k=0,L=O;for(var X=0;X<286;++X)I[X]=0;for(var X=0;X<30;++X)R[X]=0}var Y=2,K=0,G=b,V=F-W&32767;if(H>2&&j==M(O-V))for(var Q=Math.min(v,H)-1,q=Math.min(32767,O),$=Math.min(258,H);V<=q&&--G&&F!=W;){if(t[O+Y]==t[O+Y-V]){for(var J=0;J<$&&t[O+J]==t[O+J-V];++J);if(J>Y){if(Y=J,K=V,J>Q)break;for(var tt=Math.min(V,J-2),te=0,X=0;X<tt;++X){var ti=O-V+X&32767,tn=_[ti],tr=ti-tn&32767;tr>te&&(te=tr,W=ti)}}}W=_[F=W],V+=F-W&32767}if(K){D[A++]=268435456|y[Y]<<18|w[K];var to=31&y[Y],ts=31&w[K];k+=p[to]+c[ts],++I[257+to],++R[ts],C=O+Y,++T}else D[A++]=t[O],++I[t[O]]}}for(O=Math.max(O,C);O<s;++O)D[A++]=t[O],++I[t[O]];g=Z(t,d,f,D,I,R,k,A,L,O-L,g),f||(o.r=7&g|d[g/8|0]<<3,g-=7,o.h=S,o.p=_,o.i=O,o.w=C)}else{for(var O=o.w||0;O<s+f;O+=65535){var ta=O+65535;ta>=s&&(d[g/8|0]=f,ta=s),g=U(d,g+1,t.subarray(O,ta))}o.i=s}return N(a,0,n+z(g)+r)},G="undefined"!=typeof TextDecoder&&new TextDecoder;try{G.decode(Y,{stream:!0})}catch(t){}function V(t,e,i){let n=i.length-t-1;if(e>=i[n])return n-1;if(e<=i[t])return t;let r=t,o=n,s=Math.floor((r+o)/2);for(;e<i[s]||e>=i[s+1];)e<i[s]?o=s:r=s,s=Math.floor((r+o)/2);return s}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;class Q extends s.Hyl{constructor(t,e,i,n,r){super();let o=e?e.length-1:0,a=i?i.length:0;this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=n||0,this.endKnot=r||o;for(let t=0;t<a;++t){let e=i[t];this.controlPoints[t]=new s.Ltg(e.x,e.y,e.z,e.w)}}getPoint(t,e=new s.Pa4){let i=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),n=function(t,e,i,n){let r=V(t,n,e),o=function(t,e,i,n){let r=[],o=[],s=[];r[0]=1;for(let a=1;a<=i;++a){o[a]=e-n[t+1-a],s[a]=n[t+a]-e;let i=0;for(let t=0;t<a;++t){let e=s[t+1],n=o[a-t],l=r[t]/(e+n);r[t]=i+e*l,i=n*l}r[a]=i}return r}(r,n,t,e),a=new s.Ltg(0,0,0,0);for(let e=0;e<=t;++e){let n=i[r-t+e],s=o[e],l=n.w*s;a.x+=n.x*l,a.y+=n.y*l,a.z+=n.z*l,a.w+=n.w*s}return a}(this.degree,this.knots,this.controlPoints,i);return 1!==n.w&&n.divideScalar(n.w),e.set(n.x,n.y,n.z)}getTangent(t,e=new s.Pa4){var i;let n=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),r=(i=this.degree,function(t){let e=t.length,i=[],n=[];for(let r=0;r<e;++r){let e=t[r];i[r]=new s.Pa4(e.x,e.y,e.z),n[r]=e.w}let r=[];for(let t=0;t<e;++t){let e=i[t].clone();for(let i=1;i<=t;++i)e.sub(r[t-i].clone().multiplyScalar(function(t,e){let i=1;for(let e=2;e<=t;++e)i*=e;let n=1;for(let t=2;t<=e;++t)n*=t;for(let i=2;i<=t-e;++i)n*=i;return i/n}(t,i)*n[i]));r[t]=e.divideScalar(n[0])}return r}(function(t,e,i,n,r){let o=1<t?1:t,a=[],l=V(t,n,e),h=function(t,e,i,n,r){let o=[];for(let t=0;t<=i;++t)o[t]=0;let s=[];for(let t=0;t<=n;++t)s[t]=o.slice(0);let a=[];for(let t=0;t<=i;++t)a[t]=o.slice(0);a[0][0]=1;let l=o.slice(0),h=o.slice(0);for(let n=1;n<=i;++n){l[n]=e-r[t+1-n],h[n]=r[t+n]-e;let i=0;for(let t=0;t<n;++t){let e=h[t+1],r=l[n-t];a[n][t]=e+r;let o=a[t][n-1]/a[n][t];a[t][n]=i+e*o,i=r*o}a[n][n]=i}for(let t=0;t<=i;++t)s[0][t]=a[t][i];for(let t=0;t<=i;++t){let e=0,r=1,l=[];for(let t=0;t<=i;++t)l[t]=o.slice(0);l[0][0]=1;for(let o=1;o<=n;++o){let n=0,h=t-o,u=i-o;t>=o&&(l[r][0]=l[e][0]/a[u+1][h],n=l[r][0]*a[h][u]);let p=h>=-1?1:-h,c=t-1<=u?o-1:i-t;for(let t=p;t<=c;++t)l[r][t]=(l[e][t]-l[e][t-1])/a[u+1][h+t],n+=l[r][t]*a[h+t][u];t<=u&&(l[r][o]=-l[e][o-1]/a[u+1][t],n+=l[r][o]*a[t][u]),s[o][t]=n;let d=e;e=r,r=d}}let u=i;for(let t=1;t<=n;++t){for(let e=0;e<=i;++e)s[t][e]*=u;u*=i-t}return s}(l,n,t,o,e),u=[];for(let t=0;t<i.length;++t){let e=i[t].clone(),n=e.w;e.x*=n,e.y*=n,e.z*=n,u[t]=e}for(let e=0;e<=o;++e){let i=u[l-t].clone().multiplyScalar(h[e][0]);for(let n=1;n<=t;++n)i.add(u[l-t+n].clone().multiplyScalar(h[e][n]));a[e]=i}for(let t=o+1;t<=r+1;++t)a[t]=new s.Ltg(0,0,0);return a}(i,this.knots,this.controlPoints,n,1)));return e.copy(r[1]).normalize(),e}toJSON(){let t=super.toJSON();return t.degree=this.degree,t.knots=[...this.knots],t.controlPoints=this.controlPoints.map(t=>t.toArray()),t.startKnot=this.startKnot,t.endKnot=this.endKnot,t}fromJSON(t){return super.fromJSON(t),this.degree=t.degree,this.knots=[...t.knots],this.controlPoints=t.controlPoints.map(t=>new s.Ltg(t[0],t[1],t[2],t[3])),this.startKnot=t.startKnot,this.endKnot=t.endKnot,this}}class q extends s.aNw{constructor(t){super(t)}load(t,e,i,n){let r=this,o=""===r.path?s.Zp0.extractUrlBase(t):r.path,a=new s.hH6(this.manager);a.setPath(r.path),a.setResponseType("arraybuffer"),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(i){try{e(r.parse(i,o))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},i,n)}parse(t,e){if(function(t){let e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===tf(t,0,e.length)}(t))n=new ti().parse(t);else{let e=tf(t);if(!function(t){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],i=0;for(let n=0;n<e.length;++n)if(function(e){let n=t[0];return t=t.slice(i+1),i++,n}(0)===e[n])return!1;return!0}(e))throw Error("THREE.FBXLoader: Unknown format.");if(7e3>to(e))throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+to(e));n=new te().parse(e)}return new $(new s.dpR(this.manager).setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin),this.manager).parse(n)}}class ${constructor(t,e){this.textureLoader=t,this.manager=e}parse(){r=this.parseConnections();let t=this.parseImages(),e=this.parseTextures(t),i=this.parseMaterials(e),n=this.parseDeformers(),s=new J().parse(n);return this.parseScene(n,s,i),o}parseConnections(){let t=new Map;return"Connections"in n&&n.Connections.connections.forEach(function(e){let i=e[0],n=e[1],r=e[2];t.has(i)||t.set(i,{parents:[],children:[]}),t.get(i).parents.push({ID:n,relationship:r}),t.has(n)||t.set(n,{parents:[],children:[]}),t.get(n).children.push({ID:i,relationship:r})}),t}parseImages(){let t={},e={};if("Video"in n.Objects){let i=n.Objects.Video;for(let n in i){let r=i[n];if(t[parseInt(n)]=r.RelativeFilename||r.Filename,"Content"in r){let t=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,o="string"==typeof r.Content&&""!==r.Content;if(t||o){let t=this.parseImage(i[n]);e[r.RelativeFilename||r.Filename]=t}}}}for(let i in t){let n=t[i];void 0!==e[n]?t[i]=e[n]:t[i]=t[i].split("\\").pop()}return t}parseImage(t){let e;let i=t.Content,n=t.RelativeFilename||t.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(r){case"bmp":e="image/bmp";break;case"jpg":case"jpeg":e="image/jpeg";break;case"png":e="image/png";break;case"tif":e="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),e="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if("string"==typeof i)return"data:"+e+";base64,"+i;{let t=new Uint8Array(i);return window.URL.createObjectURL(new Blob([t],{type:e}))}}parseTextures(t){let e=new Map;if("Texture"in n.Objects){let i=n.Objects.Texture;for(let n in i){let r=this.parseTexture(i[n],t);e.set(parseInt(n),r)}}return e}parseTexture(t,e){let i=this.loadTexture(t,e);i.ID=t.id,i.name=t.attrName;let n=t.WrapModeU,r=t.WrapModeV,o=void 0!==n?n.value:0,a=void 0!==r?r.value:0;if(i.wrapS=0===o?s.rpg:s.uWy,i.wrapT=0===a?s.rpg:s.uWy,"Scaling"in t){let e=t.Scaling.value;i.repeat.x=e[0],i.repeat.y=e[1]}if("Translation"in t){let e=t.Translation.value;i.offset.x=e[0],i.offset.y=e[1]}return i}loadTexture(t,e){let i;let n=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),o=t.FileName.split(".").pop().toLowerCase(),a=n.has(o)?this.manager.getHandler(`.${o}`):this.textureLoader;if(!a)return console.warn(`FBXLoader: ${o.toUpperCase()} loader not found, creating placeholder texture for`,t.RelativeFilename),new s.xEZ;let l=a.path;l||a.setPath(this.textureLoader.path);let h=r.get(t.id).children;void 0!==h&&h.length>0&&void 0!==e[h[0].ID]&&(0===(i=e[h[0].ID]).indexOf("blob:")||0===i.indexOf("data:"))&&a.setPath(void 0);let u=a.load(i);return a.setPath(l),u}parseMaterials(t){let e=new Map;if("Material"in n.Objects){let i=n.Objects.Material;for(let n in i){let r=this.parseMaterial(i[n],t);null!==r&&e.set(parseInt(n),r)}}return e}parseMaterial(t,e){let i;let n=t.id,o=t.attrName,a=t.ShadingModel;if("object"==typeof a&&(a=a.value),!r.has(n))return null;let l=this.parseParameters(t,e,n);switch(a.toLowerCase()){case"phong":i=new s.xoR;break;case"lambert":i=new s.YBo;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),i=new s.xoR}return i.setValues(l),i.name=o,i}parseParameters(t,e,i){let n={};t.BumpFactor&&(n.bumpScale=t.BumpFactor.value),t.Diffuse?n.color=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.Diffuse.value),s.KI_):t.DiffuseColor&&("Color"===t.DiffuseColor.type||"ColorRGB"===t.DiffuseColor.type)&&(n.color=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.DiffuseColor.value),s.KI_)),t.DisplacementFactor&&(n.displacementScale=t.DisplacementFactor.value),t.Emissive?n.emissive=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.Emissive.value),s.KI_):t.EmissiveColor&&("Color"===t.EmissiveColor.type||"ColorRGB"===t.EmissiveColor.type)&&(n.emissive=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.EmissiveColor.value),s.KI_)),t.EmissiveFactor&&(n.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),n.opacity=1-(t.TransparencyFactor?parseFloat(t.TransparencyFactor.value):0),(1===n.opacity||0===n.opacity)&&(n.opacity=t.Opacity?parseFloat(t.Opacity.value):null,null===n.opacity&&(n.opacity=1-(t.TransparentColor?parseFloat(t.TransparentColor.value[0]):0))),n.opacity<1&&(n.transparent=!0),t.ReflectionFactor&&(n.reflectivity=t.ReflectionFactor.value),t.Shininess&&(n.shininess=t.Shininess.value),t.Specular?n.specular=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.Specular.value),s.KI_):t.SpecularColor&&"Color"===t.SpecularColor.type&&(n.specular=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.SpecularColor.value),s.KI_));let o=this;return r.get(i).children.forEach(function(t){let i=t.relationship;switch(i){case"Bump":n.bumpMap=o.getTexture(e,t.ID);break;case"Maya|TEX_ao_map":n.aoMap=o.getTexture(e,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":n.map=o.getTexture(e,t.ID),void 0!==n.map&&(n.map.colorSpace=s.KI_);break;case"DisplacementColor":n.displacementMap=o.getTexture(e,t.ID);break;case"EmissiveColor":n.emissiveMap=o.getTexture(e,t.ID),void 0!==n.emissiveMap&&(n.emissiveMap.colorSpace=s.KI_);break;case"NormalMap":case"Maya|TEX_normal_map":n.normalMap=o.getTexture(e,t.ID);break;case"ReflectionColor":n.envMap=o.getTexture(e,t.ID),void 0!==n.envMap&&(n.envMap.mapping=s.dSO,n.envMap.colorSpace=s.KI_);break;case"SpecularColor":n.specularMap=o.getTexture(e,t.ID),void 0!==n.specularMap&&(n.specularMap.colorSpace=s.KI_);break;case"TransparentColor":case"TransparencyFactor":n.alphaMap=o.getTexture(e,t.ID),n.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",i)}}),n}getTexture(t,e){return"LayeredTexture"in n.Objects&&e in n.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),e=r.get(e).children[0].ID),t.get(e)}parseDeformers(){let t={},e={};if("Deformer"in n.Objects){let i=n.Objects.Deformer;for(let n in i){let o=i[n],s=r.get(parseInt(n));if("Skin"===o.attrType){let e=this.parseSkeleton(s,i);e.ID=n,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),e.geometryID=s.parents[0].ID,t[n]=e}else if("BlendShape"===o.attrType){let t={id:n};t.rawTargets=this.parseMorphTargets(s,i),t.id=n,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),e[n]=t}}}return{skeletons:t,morphTargets:e}}parseSkeleton(t,e){let i=[];return t.children.forEach(function(t){let n=e[t.ID];if("Cluster"!==n.attrType)return;let r={ID:t.ID,indices:[],weights:[],transformLink:new s.yGw().fromArray(n.TransformLink.a)};"Indexes"in n&&(r.indices=n.Indexes.a,r.weights=n.Weights.a),i.push(r)}),{rawBones:i,bones:[]}}parseMorphTargets(t,e){let i=[];for(let n=0;n<t.children.length;n++){let o=t.children[n],s=e[o.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;a.geoID=r.get(parseInt(o.ID)).children.filter(function(t){return void 0===t.relationship})[0].ID,i.push(a)}return i}parseScene(t,e,i){o=new s.ZAu;let a=this.parseModels(t.skeletons,e,i),l=n.Objects.Model,h=this;a.forEach(function(t){let e=l[t.ID];h.setLookAtProperties(t,e),r.get(t.ID).parents.forEach(function(e){let i=a.get(e.ID);void 0!==i&&i.add(t)}),null===t.parent&&o.add(t)}),this.bindSkeleton(t.skeletons,e,a),this.addGlobalSceneSettings(),o.traverse(function(t){if(t.userData.transformData){t.parent&&(t.userData.transformData.parentMatrix=t.parent.matrix,t.userData.transformData.parentMatrixWorld=t.parent.matrixWorld);let e=tp(t.userData.transformData);t.applyMatrix4(e),t.updateWorldMatrix()}});let u=new tt().parse();1===o.children.length&&o.children[0].isGroup&&(o.children[0].animations=u,o=o.children[0]),o.animations=u}parseModels(t,e,i){let o=new Map,a=n.Objects.Model;for(let n in a){let l=parseInt(n),h=a[n],u=r.get(l),p=this.buildSkeleton(u,t,l,h.attrName);if(!p){switch(h.attrType){case"Camera":p=this.createCamera(u);break;case"Light":p=this.createLight(u);break;case"Mesh":p=this.createMesh(u,e,i);break;case"NurbsCurve":p=this.createCurve(u,e);break;case"LimbNode":case"Root":p=new s.N$j;break;default:p=new s.ZAu}p.name=h.attrName?s.iUV.sanitizeNodeName(h.attrName):"",p.userData.originalName=h.attrName,p.ID=l}this.getTransformData(p,h),o.set(l,p)}return o}buildSkeleton(t,e,i,n){let r=null;return t.parents.forEach(function(t){for(let o in e){let a=e[o];a.rawBones.forEach(function(e,o){if(e.ID===t.ID){let t=r;(r=new s.N$j).matrixWorld.copy(e.transformLink),r.name=n?s.iUV.sanitizeNodeName(n):"",r.userData.originalName=n,r.ID=i,a.bones[o]=r,null!==t&&r.add(t)}})}}),r}createCamera(t){let e,i;if(t.children.forEach(function(t){let e=n.Objects.NodeAttribute[t.ID];void 0!==e&&(i=e)}),void 0===i)e=new s.Tme;else{let t=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(t=1);let n=1;void 0!==i.NearPlane&&(n=i.NearPlane.value/1e3);let r=1e3;void 0!==i.FarPlane&&(r=i.FarPlane.value/1e3);let o=window.innerWidth,a=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(o=i.AspectWidth.value,a=i.AspectHeight.value);let l=o/a,h=45;void 0!==i.FieldOfView&&(h=i.FieldOfView.value);let u=i.FocalLength?i.FocalLength.value:null;switch(t){case 0:e=new s.cPb(h,l,n,r),null!==u&&e.setFocalLength(u);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),e=new s.Tme;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+t+"."),e=new s.Tme}}return e}createLight(t){let e,i;if(t.children.forEach(function(t){let e=n.Objects.NodeAttribute[t.ID];void 0!==e&&(i=e)}),void 0===i)e=new s.Tme;else{let t;t=void 0===i.LightType?0:i.LightType.value;let n=16777215;void 0!==i.Color&&(n=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(i.Color.value),s.KI_));let r=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(r=0);let o=0;switch(void 0!==i.FarAttenuationEnd&&(o=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value),t){case 0:e=new s.cek(n,r,o,1);break;case 1:e=new s.Ox3(n,r);break;case 2:let a=Math.PI/3;void 0!==i.InnerAngle&&(a=s.M8C.degToRad(i.InnerAngle.value));let l=0;void 0!==i.OuterAngle&&(l=Math.max(l=s.M8C.degToRad(i.OuterAngle.value),1)),e=new s.PMe(n,r,o,a,l,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),e=new s.cek(n,r)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(e.castShadow=!0)}return e}createMesh(t,e,i){let n;let r=null,o=null,a=[];return t.children.forEach(function(t){e.has(t.ID)&&(r=e.get(t.ID)),i.has(t.ID)&&a.push(i.get(t.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new s.xoR({name:s.aNw.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(o)),"color"in r.attributes&&a.forEach(function(t){t.vertexColors=!0}),r.FBX_Deformer?(n=new s.TUv(r,o)).normalizeSkinWeights():n=new s.Kj0(r,o),n}createCurve(t,e){let i=t.children.reduce(function(t,i){return e.has(i.ID)&&(t=e.get(i.ID)),t},null),n=new s.nls({name:s.aNw.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new s.x12(i,n)}getTransformData(t,e){let i={};"InheritType"in e&&(i.inheritType=parseInt(e.InheritType.value)),"RotationOrder"in e?i.eulerOrder=tc(e.RotationOrder.value):i.eulerOrder=tc(0),"Lcl_Translation"in e&&(i.translation=e.Lcl_Translation.value),"PreRotation"in e&&(i.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(i.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(i.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(i.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(i.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(i.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(i.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(i.rotationPivot=e.RotationPivot.value),t.userData.transformData=i}setLookAtProperties(t,e){"LookAtProperty"in e&&r.get(t.ID).children.forEach(function(e){if("LookAtProperty"===e.relationship){let i=n.Objects.Model[e.ID];if("Lcl_Translation"in i){let e=i.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(e),o.add(t.target)):t.lookAt(new s.Pa4().fromArray(e))}}})}bindSkeleton(t,e,i){let n=this.parsePoseNodes();for(let o in t){let a=t[o];r.get(parseInt(a.ID)).parents.forEach(function(t){if(e.has(t.ID)){let e=t.ID;r.get(e).parents.forEach(function(t){i.has(t.ID)&&i.get(t.ID).bind(new s.OdW(a.bones),n[t.ID])})}})}}parsePoseNodes(){let t={};if("Pose"in n.Objects){let e=n.Objects.Pose;for(let i in e)if("BindPose"===e[i].attrType&&e[i].NbPoseNodes>0){let n=e[i].PoseNode;Array.isArray(n)?n.forEach(function(e){t[e.Node]=new s.yGw().fromArray(e.Matrix.a)}):t[n.Node]=new s.yGw().fromArray(n.Matrix.a)}}return t}addGlobalSceneSettings(){if("GlobalSettings"in n){if("AmbientColor"in n.GlobalSettings){let t=n.GlobalSettings.AmbientColor.value,e=t[0],i=t[1],r=t[2];if(0!==e||0!==i||0!==r){let t=new s.Ilk().setRGB(e,i,r,s.KI_);o.add(new s.Mig(t,1))}}"UnitScaleFactor"in n.GlobalSettings&&(o.userData.unitScaleFactor=n.GlobalSettings.UnitScaleFactor.value)}}}class J{constructor(){this.negativeMaterialIndices=!1}parse(t){let e=new Map;if("Geometry"in n.Objects){let i=n.Objects.Geometry;for(let n in i){let o=r.get(parseInt(n)),s=this.parseGeometry(o,i[n],t);e.set(parseInt(n),s)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),e}parseGeometry(t,e,i){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,i);case"NurbsCurve":return this.parseNurbsGeometry(e)}}parseMeshGeometry(t,e,i){let r=i.skeletons,o=[],s=t.parents.map(function(t){return n.Objects.Model[t.ID]});if(0===s.length)return;let a=t.children.reduce(function(t,e){return void 0!==r[e.ID]&&(t=r[e.ID]),t},null);t.children.forEach(function(t){void 0!==i.morphTargets[t.ID]&&o.push(i.morphTargets[t.ID])});let l=s[0],h={};"RotationOrder"in l&&(h.eulerOrder=tc(l.RotationOrder.value)),"InheritType"in l&&(h.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(h.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(h.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(h.scale=l.GeometricScaling.value);let u=tp(h);return this.genGeometry(e,a,o,u)}genGeometry(t,e,i,n){let r=new s.u9r;t.attrName&&(r.name=t.attrName);let o=this.parseGeoNode(t,e),a=this.genBuffers(o),l=new s.a$l(a.vertex,3);if(l.applyMatrix4(n),r.setAttribute("position",l),a.colors.length>0&&r.setAttribute("color",new s.a$l(a.colors,3)),e&&(r.setAttribute("skinIndex",new s.qlB(a.weightsIndices,4)),r.setAttribute("skinWeight",new s.a$l(a.vertexWeights,4)),r.FBX_Deformer=e),a.normal.length>0){let t=new s.Vkp().getNormalMatrix(n),e=new s.a$l(a.normal,3);e.applyNormalMatrix(t),r.setAttribute("normal",e)}if(a.uvs.forEach(function(t,e){let i=0===e?"uv":`uv${e}`;r.setAttribute(i,new s.a$l(a.uvs[e],2))}),o.material&&"AllSame"!==o.material.mappingType){let t=a.materialIndex[0],e=0;if(a.materialIndex.forEach(function(i,n){i!==t&&(r.addGroup(e,n-e,t),t=i,e=n)}),r.groups.length>0){let e=r.groups[r.groups.length-1],i=e.start+e.count;i!==a.materialIndex.length&&r.addGroup(i,a.materialIndex.length-i,t)}0===r.groups.length&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,t,i,n),r}parseGeoNode(t,e){let i={};if(i.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],i.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(i.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(i.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(i.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){i.uv=[];let e=0;for(;t.LayerElementUV[e];)t.LayerElementUV[e].UV&&i.uv.push(this.parseUVs(t.LayerElementUV[e])),e++}return i.weightTable={},null!==e&&(i.skeleton=e,e.rawBones.forEach(function(t,e){t.indices.forEach(function(n,r){void 0===i.weightTable[n]&&(i.weightTable[n]=[]),i.weightTable[n].push({id:e,weight:t.weights[r]})})})),i}genBuffers(t){let e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,n=0,r=!1,o=[],s=[],a=[],l=[],h=[],u=[],p=this;return t.vertexIndices.forEach(function(c,d){let f;let g=!1;c<0&&(c^=-1,g=!0);let m=[],y=[];if(o.push(3*c,3*c+1,3*c+2),t.color){let e=tl(d,i,c,t.color);a.push(e[0],e[1],e[2])}if(t.skeleton){if(void 0!==t.weightTable[c]&&t.weightTable[c].forEach(function(t){y.push(t.weight),m.push(t.id)}),y.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);let t=[0,0,0,0],e=[0,0,0,0];y.forEach(function(i,n){let r=i,o=m[n];e.forEach(function(e,i,n){if(r>e){n[i]=r,r=e;let s=t[i];t[i]=o,o=s}})}),m=t,y=e}for(;y.length<4;)y.push(0),m.push(0);for(let t=0;t<4;++t)h.push(y[t]),u.push(m[t])}if(t.normal){let e=tl(d,i,c,t.normal);s.push(e[0],e[1],e[2])}t.material&&"AllSame"!==t.material.mappingType&&(f=tl(d,i,c,t.material)[0])<0&&(p.negativeMaterialIndices=!0,f=0),t.uv&&t.uv.forEach(function(t,e){let n=tl(d,i,c,t);void 0===l[e]&&(l[e]=[]),l[e].push(n[0]),l[e].push(n[1])}),n++,g&&(p.genFace(e,t,o,f,s,a,l,h,u,n),i++,n=0,o=[],s=[],a=[],l=[],h=[],u=[])}),e}getNormalNewell(t){let e=new s.Pa4(0,0,0);for(let i=0;i<t.length;i++){let n=t[i],r=t[(i+1)%t.length];e.x+=(n.y-r.y)*(n.z+r.z),e.y+=(n.z-r.z)*(n.x+r.x),e.z+=(n.x-r.x)*(n.y+r.y)}return e.normalize(),e}getNormalTangentAndBitangent(t){let e=this.getNormalNewell(t),i=(Math.abs(e.z)>.5?new s.Pa4(0,1,0):new s.Pa4(0,0,1)).cross(e).normalize(),n=e.clone().cross(i).normalize();return{normal:e,tangent:i,bitangent:n}}flattenVertex(t,e,i){return new s.FM8(t.dot(e),t.dot(i))}genFace(t,e,i,n,r,o,a,l,h,u){let p;if(u>3){let t=[],n=e.baseVertexPositions||e.vertexPositions;for(let e=0;e<i.length;e+=3)t.push(new s.Pa4(n[i[e]],n[i[e+1]],n[i[e+2]]));let{tangent:r,bitangent:o}=this.getNormalTangentAndBitangent(t),a=[];for(let e of t)a.push(this.flattenVertex(e,r,o));p=s.iDF.triangulateShape(a,[])}else p=[[0,1,2]];for(let[s,u,c]of p)t.vertex.push(e.vertexPositions[i[3*s]]),t.vertex.push(e.vertexPositions[i[3*s+1]]),t.vertex.push(e.vertexPositions[i[3*s+2]]),t.vertex.push(e.vertexPositions[i[3*u]]),t.vertex.push(e.vertexPositions[i[3*u+1]]),t.vertex.push(e.vertexPositions[i[3*u+2]]),t.vertex.push(e.vertexPositions[i[3*c]]),t.vertex.push(e.vertexPositions[i[3*c+1]]),t.vertex.push(e.vertexPositions[i[3*c+2]]),e.skeleton&&(t.vertexWeights.push(l[4*s]),t.vertexWeights.push(l[4*s+1]),t.vertexWeights.push(l[4*s+2]),t.vertexWeights.push(l[4*s+3]),t.vertexWeights.push(l[4*u]),t.vertexWeights.push(l[4*u+1]),t.vertexWeights.push(l[4*u+2]),t.vertexWeights.push(l[4*u+3]),t.vertexWeights.push(l[4*c]),t.vertexWeights.push(l[4*c+1]),t.vertexWeights.push(l[4*c+2]),t.vertexWeights.push(l[4*c+3]),t.weightsIndices.push(h[4*s]),t.weightsIndices.push(h[4*s+1]),t.weightsIndices.push(h[4*s+2]),t.weightsIndices.push(h[4*s+3]),t.weightsIndices.push(h[4*u]),t.weightsIndices.push(h[4*u+1]),t.weightsIndices.push(h[4*u+2]),t.weightsIndices.push(h[4*u+3]),t.weightsIndices.push(h[4*c]),t.weightsIndices.push(h[4*c+1]),t.weightsIndices.push(h[4*c+2]),t.weightsIndices.push(h[4*c+3])),e.color&&(t.colors.push(o[3*s]),t.colors.push(o[3*s+1]),t.colors.push(o[3*s+2]),t.colors.push(o[3*u]),t.colors.push(o[3*u+1]),t.colors.push(o[3*u+2]),t.colors.push(o[3*c]),t.colors.push(o[3*c+1]),t.colors.push(o[3*c+2])),e.material&&"AllSame"!==e.material.mappingType&&(t.materialIndex.push(n),t.materialIndex.push(n),t.materialIndex.push(n)),e.normal&&(t.normal.push(r[3*s]),t.normal.push(r[3*s+1]),t.normal.push(r[3*s+2]),t.normal.push(r[3*u]),t.normal.push(r[3*u+1]),t.normal.push(r[3*u+2]),t.normal.push(r[3*c]),t.normal.push(r[3*c+1]),t.normal.push(r[3*c+2])),e.uv&&e.uv.forEach(function(e,i){void 0===t.uvs[i]&&(t.uvs[i]=[]),t.uvs[i].push(a[i][2*s]),t.uvs[i].push(a[i][2*s+1]),t.uvs[i].push(a[i][2*u]),t.uvs[i].push(a[i][2*u+1]),t.uvs[i].push(a[i][2*c]),t.uvs[i].push(a[i][2*c+1])})}addMorphTargets(t,e,i,r){if(0===i.length)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];let o=this;i.forEach(function(i){i.rawTargets.forEach(function(i){let s=n.Objects.Geometry[i.geoID];void 0!==s&&o.genMorphGeometry(t,e,s,r,i.name)})})}genMorphGeometry(t,e,i,n,r){let o=void 0!==e.Vertices?e.Vertices.a:[],a=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],l=void 0!==i.Vertices?i.Vertices.a:[],h=void 0!==i.Indexes?i.Indexes.a:[],u=new Float32Array(3*t.attributes.position.count);for(let t=0;t<h.length;t++){let e=3*h[t];u[e]=l[3*t],u[e+1]=l[3*t+1],u[e+2]=l[3*t+2]}let p=this.genBuffers({vertexIndices:a,vertexPositions:u,baseVertexPositions:o}),c=new s.a$l(p.vertex,3);c.name=r||i.attrName,c.applyMatrix4(n),t.morphAttributes.position.push(c)}parseNormals(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.Normals.a,r=[];return"IndexToDirect"===i&&("NormalIndex"in t?r=t.NormalIndex.a:"NormalsIndex"in t&&(r=t.NormalsIndex.a)),{dataSize:3,buffer:n,indices:r,mappingType:e,referenceType:i}}parseUVs(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.UV.a,r=[];return"IndexToDirect"===i&&(r=t.UVIndex.a),{dataSize:2,buffer:n,indices:r,mappingType:e,referenceType:i}}parseVertexColors(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.Colors.a,r=[];"IndexToDirect"===i&&(r=t.ColorIndex.a);for(let t=0,e=new s.Ilk;t<n.length;t+=4)e.fromArray(n,t),s.epp.toWorkingColorSpace(e,s.KI_),e.toArray(n,t);return{dataSize:4,buffer:n,indices:r,mappingType:e,referenceType:i}}parseMaterialIndices(t){let e=t.MappingInformationType,i=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};let n=t.Materials.a,r=[];for(let t=0;t<n.length;++t)r.push(t);return{dataSize:1,buffer:n,indices:r,mappingType:e,referenceType:i}}parseNurbsGeometry(t){let e,i;let n=parseInt(t.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new s.u9r;let r=n-1,o=t.KnotVector.a,a=[],l=t.Points.a;for(let t=0,e=l.length;t<e;t+=4)a.push(new s.Ltg().fromArray(l,t));if("Closed"===t.Form)a.push(a[0]);else if("Periodic"===t.Form){e=r,i=o.length-1-e;for(let t=0;t<r;++t)a.push(a[t])}let h=new Q(r,o,a,e,i).getPoints(12*a.length);return new s.u9r().setFromPoints(h)}}class tt{parse(){let t=[],e=this.parseClips();if(void 0!==e)for(let i in e){let n=e[i],r=this.addClip(n);t.push(r)}return t}parseClips(){if(void 0===n.Objects.AnimationCurve)return;let t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);let e=this.parseAnimationLayers(t);return this.parseAnimStacks(e)}parseAnimationCurveNodes(){let t=n.Objects.AnimationCurveNode,e=new Map;for(let i in t){let n=t[i];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){let t={id:n.id,attr:n.attrName,curves:{}};e.set(t.id,t)}}return e}parseAnimationCurves(t){let e=n.Objects.AnimationCurve;for(let i in e){let n={id:e[i].id,times:e[i].KeyTime.a.map(ts),values:e[i].KeyValueFloat.a},o=r.get(n.id);if(void 0!==o){let e=o.parents[0].ID,i=o.parents[0].relationship;i.match(/X/)?t.get(e).curves.x=n:i.match(/Y/)?t.get(e).curves.y=n:i.match(/Z/)?t.get(e).curves.z=n:i.match(/DeformPercent/)&&t.has(e)&&(t.get(e).curves.morph=n)}}}parseAnimationLayers(t){let e=n.Objects.AnimationLayer,i=new Map;for(let a in e){let e=[],l=r.get(parseInt(a));void 0!==l&&(l.children.forEach(function(i,a){if(t.has(i.ID)){let l=t.get(i.ID);if(void 0!==l.curves.x||void 0!==l.curves.y||void 0!==l.curves.z){if(void 0===e[a]){let t=r.get(i.ID).parents.filter(function(t){return void 0!==t.relationship})[0].ID;if(void 0!==t){let r=n.Objects.Model[t.toString()];if(void 0===r){console.warn("THREE.FBXLoader: Encountered a unused curve.",i);return}let l={modelName:r.attrName?s.iUV.sanitizeNodeName(r.attrName):"",ID:r.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};o.traverse(function(t){t.ID===r.id&&(l.transform=t.matrix,t.userData.transformData&&(l.eulerOrder=t.userData.transformData.eulerOrder))}),l.transform||(l.transform=new s.yGw),"PreRotation"in r&&(l.preRotation=r.PreRotation.value),"PostRotation"in r&&(l.postRotation=r.PostRotation.value),e[a]=l}}e[a]&&(e[a][l.attr]=l)}else if(void 0!==l.curves.morph){if(void 0===e[a]){let t=r.get(i.ID).parents.filter(function(t){return void 0!==t.relationship})[0].ID,o=r.get(t).parents[0].ID,l=r.get(o).parents[0].ID,h=r.get(l).parents[0].ID,u=n.Objects.Model[h],p={modelName:u.attrName?s.iUV.sanitizeNodeName(u.attrName):"",morphName:n.Objects.Deformer[t].attrName};e[a]=p}e[a][l.attr]=l}}}),i.set(parseInt(a),e))}return i}parseAnimStacks(t){let e=n.Objects.AnimationStack,i={};for(let n in e){let o=r.get(parseInt(n)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=t.get(o[0].ID);i[n]={name:e[n].attrName,layer:s}}return i}addClip(t){let e=[],i=this;return t.layer.forEach(function(t){e=e.concat(i.generateTracks(t))}),new s.m7l(t.name,-1,e)}generateTracks(t){let e=[],i=new s.Pa4,n=new s.Pa4;if(t.transform&&t.transform.decompose(i,new s._fP,n),i=i.toArray(),n=n.toArray(),void 0!==t.T&&Object.keys(t.T.curves).length>0){let n=this.generateVectorTrack(t.modelName,t.T.curves,i,"position");void 0!==n&&e.push(n)}if(void 0!==t.R&&Object.keys(t.R.curves).length>0){let i=this.generateRotationTrack(t.modelName,t.R.curves,t.preRotation,t.postRotation,t.eulerOrder);void 0!==i&&e.push(i)}if(void 0!==t.S&&Object.keys(t.S.curves).length>0){let i=this.generateVectorTrack(t.modelName,t.S.curves,n,"scale");void 0!==i&&e.push(i)}if(void 0!==t.DeformPercent){let i=this.generateMorphTrack(t);void 0!==i&&e.push(i)}return e}generateVectorTrack(t,e,i,n){let r=this.getTimesForAllAxes(e),o=this.getKeyframeTrackValues(r,e,i);return new s.yC1(t+"."+n,r,o)}generateRotationTrack(t,e,i,n,r){let o,a;if(void 0!==e.x&&void 0!==e.y&&void 0!==e.z){let t=this.interpolateRotations(e.x,e.y,e.z,r);o=t[0],a=t[1]}let l=tc(0);void 0!==i&&((i=i.map(s.M8C.degToRad)).push(l),i=new s.USm().fromArray(i),i=new s._fP().setFromEuler(i)),void 0!==n&&((n=n.map(s.M8C.degToRad)).push(l),n=new s.USm().fromArray(n),n=new s._fP().setFromEuler(n).invert());let h=new s._fP,u=new s.USm,p=[];if(!a||!o)return new s.iLg(t+".quaternion",[0],[0]);for(let t=0;t<a.length;t+=3)u.set(a[t],a[t+1],a[t+2],r),h.setFromEuler(u),void 0!==i&&h.premultiply(i),void 0!==n&&h.multiply(n),t>2&&0>new s._fP().fromArray(p,(t-3)/3*4).dot(h)&&h.set(-h.x,-h.y,-h.z,-h.w),h.toArray(p,t/3*4);return new s.iLg(t+".quaternion",o,p)}generateMorphTrack(t){let e=t.DeformPercent.curves.morph,i=e.values.map(function(t){return t/100}),n=o.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new s.dUE(t.modelName+".morphTargetInfluences["+n+"]",e.times,i)}getTimesForAllAxes(t){let e=[];if(void 0!==t.x&&(e=e.concat(t.x.times)),void 0!==t.y&&(e=e.concat(t.y.times)),void 0!==t.z&&(e=e.concat(t.z.times)),(e=e.sort(function(t,e){return t-e})).length>1){let t=1,i=e[0];for(let n=1;n<e.length;n++){let r=e[n];r!==i&&(e[t]=r,i=r,t++)}e=e.slice(0,t)}return e}getKeyframeTrackValues(t,e,i){let n=[],r=-1,o=-1,s=-1;return t.forEach(function(t){if(e.x&&(r=e.x.times.indexOf(t)),e.y&&(o=e.y.times.indexOf(t)),e.z&&(s=e.z.times.indexOf(t)),-1!==r){let t=e.x.values[r];n.push(t),i[0]=t}else n.push(i[0]);if(-1!==o){let t=e.y.values[o];n.push(t),i[1]=t}else n.push(i[1]);if(-1!==s){let t=e.z.values[s];n.push(t),i[2]=t}else n.push(i[2])}),n}interpolateRotations(t,e,i,n){let r=[],o=[];r.push(t.times[0]),o.push(s.M8C.degToRad(t.values[0])),o.push(s.M8C.degToRad(e.values[0])),o.push(s.M8C.degToRad(i.values[0]));for(let a=1;a<t.values.length;a++){let l=[t.values[a-1],e.values[a-1],i.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let h=l.map(s.M8C.degToRad),u=[t.values[a],e.values[a],i.values[a]];if(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))continue;let p=u.map(s.M8C.degToRad),c=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],d=[Math.abs(c[0]),Math.abs(c[1]),Math.abs(c[2])];if(d[0]>=180||d[1]>=180||d[2]>=180){let e=Math.max(...d)/180,i=new s.USm(...h,n),l=new s.USm(...p,n),u=new s._fP().setFromEuler(i),c=new s._fP().setFromEuler(l);u.dot(c)&&c.set(-c.x,-c.y,-c.z,-c.w);let f=t.times[a-1],g=t.times[a]-f,m=new s._fP,y=new s.USm;for(let t=0;t<1;t+=1/e)m.copy(u.clone().slerp(c.clone(),t)),r.push(f+t*g),y.setFromQuaternion(m,n),o.push(y.x),o.push(y.y),o.push(y.z)}else r.push(t.times[a]),o.push(s.M8C.degToRad(t.values[a])),o.push(s.M8C.degToRad(e.values[a])),o.push(s.M8C.degToRad(i.values[a]))}return[r,o]}}class te{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e}parse(t){this.currentIndent=0,this.allNodes=new tr,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let e=this,i=t.split(/[\r\n]+/);return i.forEach(function(t,n){let r=t.match(/^[\s\t]*;/),o=t.match(/^[\s\t]*$/);if(r||o)return;let s=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),a=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=t.match("^\\t{"+(e.currentIndent-1)+"}}");s?e.parseNodeBegin(t,s):a?e.parseNodeProperty(t,a,i[++n]):l?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)}),this.allNodes}parseNodeBegin(t,e){let i=e[1].trim().replace(/^"/,"").replace(/"$/,""),n=e[2].split(",").map(function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")}),r={name:i},o=this.parseNodeAttr(n),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,r):i in s?("PoseNode"===i?s.PoseNode.push(r):void 0!==s[i].id&&(s[i]={},s[i][s[i].id]=s[i]),""!==o.id&&(s[i][o.id]=r)):"number"==typeof o.id?(s[i]={},s[i][o.id]=r):"Properties70"!==i&&("PoseNode"===i?s[i]=[r]:s[i]=r),"number"==typeof o.id&&(r.id=o.id),""!==o.name&&(r.attrName=o.name),""!==o.type&&(r.attrType=o.type),this.pushStack(r)}parseNodeAttr(t){let e=t[0];""!==t[0]&&isNaN(e=parseInt(t[0]))&&(e=t[0]);let i="",n="";return t.length>1&&(i=t[1].replace(/^(\w+)::/,""),n=t[2]),{id:e,name:i,type:n}}parseNodeProperty(t,e,i){let n=e[1].replace(/^"/,"").replace(/"$/,"").trim(),r=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===r&&(r=i.replace(/"/g,"").replace(/,$/,"").trim());let o=this.getCurrentNode();if("Properties70"===o.name){this.parseNodeSpecialProperty(t,n,r);return}if("C"===n){let t=r.split(",").slice(1),e=parseInt(t[0]),i=parseInt(t[1]),s=r.split(",").slice(3);s=s.map(function(t){return t.trim().replace(/^"/,"")}),n="connections",function(t,e){for(let i=0,n=t.length,r=e.length;i<r;i++,n++)t[n]=e[i]}(r=[e,i],s),void 0===o[n]&&(o[n]=[])}"Node"===n&&(o.id=r),n in o&&Array.isArray(o[n])?o[n].push(r):"a"!==n?o[n]=r:o.a=r,this.setCurrentProp(o,n),"a"===n&&","!==r.slice(-1)&&(o.a=td(r))}parseNodePropertyContinued(t){let e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=td(e.a))}parseNodeSpecialProperty(t,e,i){let n=i.split('",').map(function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")}),r=n[0],o=n[1],s=n[2],a=n[3],l=n[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=td(l)}this.getPrevNode()[r]={type:o,type2:s,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),r)}}class ti{parse(t){let e=new tn(t);e.skip(23);let i=e.getUint32();if(i<6400)throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);let n=new tr;for(;!this.endOfContent(e);){let t=this.parseNode(e,i);null!==t&&n.add(t.name,t)}return n}endOfContent(t){return t.size()%16==0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,e){let i={},n=e>=7500?t.getUint64():t.getUint32(),r=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();let o=t.getUint8(),s=t.getString(o);if(0===n)return null;let a=[];for(let e=0;e<r;e++)a.push(this.parseProperty(t));let l=a.length>0?a[0]:"",h=a.length>1?a[1]:"",u=a.length>2?a[2]:"";for(i.singleProperty=1===r&&t.getOffset()===n;n>t.getOffset();){let n=this.parseNode(t,e);null!==n&&this.parseSubNode(s,i,n)}return i.propertyList=a,"number"==typeof l&&(i.id=l),""!==h&&(i.attrName=h),""!==u&&(i.attrType=u),""!==s&&(i.name=s),i}parseSubNode(t,e,i){if(!0===i.singleProperty){let t=i.propertyList[0];Array.isArray(t)?(e[i.name]=i,i.a=t):e[i.name]=t}else if("Connections"===t&&"C"===i.name){let t=[];i.propertyList.forEach(function(e,i){0!==i&&t.push(e)}),void 0===e.connections&&(e.connections=[]),e.connections.push(t)}else if("Properties70"===i.name)Object.keys(i).forEach(function(t){e[t]=i[t]});else if("Properties70"===t&&"P"===i.name){let t,n=i.propertyList[0],r=i.propertyList[1],o=i.propertyList[2],s=i.propertyList[3];0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),t="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],e[n]={type:r,type2:o,flag:s,value:t}}else void 0===e[i.name]?"number"==typeof i.id?(e[i.name]={},e[i.name][i.id]=i):e[i.name]=i:"PoseNode"===i.name?(Array.isArray(e[i.name])||(e[i.name]=[e[i.name]]),e[i.name].push(i)):void 0===e[i.name][i.id]&&(e[i.name][i.id]=i)}parseProperty(t){let e;let i=t.getString(1);switch(i){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return e=t.getUint32(),t.getArrayBuffer(e);case"S":return e=t.getUint32(),t.getString(e);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n,r,o;let s=t.getUint32(),a=t.getUint32(),l=t.getUint32();if(0===a)switch(i){case"b":case"c":return t.getBooleanArray(s);case"d":return t.getFloat64Array(s);case"f":return t.getFloat32Array(s);case"i":return t.getInt32Array(s);case"l":return t.getInt64Array(s)}let h=new tn(C((n=new Uint8Array(t.getArrayBuffer(l))).subarray((o=void 0,((15&n[0])!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&A(6,"invalid zlib data"),(n[1]>>5&1)==+!o&&A(6,"invalid zlib data: "+(32&n[1]?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2),-4),{i:2},r&&r.out,r&&r.dictionary).buffer);switch(i){case"b":case"c":return h.getBooleanArray(s);case"d":return h.getFloat64Array(s);case"f":return h.getFloat32Array(s);case"i":return h.getInt32Array(s);case"l":return h.getInt64Array(s)}break;default:throw Error("THREE.FBXLoader: Unknown property type "+i)}}}class tn{constructor(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(1&this.getUint8())==1}getBooleanArray(t){let e=[];for(let i=0;i<t;i++)e.push(this.getBoolean());return e}getUint8(){let t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){let t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){let t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getInt32());return e}getUint32(){let t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,e;return(this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e)?(e=4294967295&~e,4294967295==(t=4294967295&~t)&&(e=e+1&4294967295),-(4294967296*e+(t=t+1&4294967295))):4294967296*e+t}getInt64Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getInt64());return e}getUint64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t}getFloat32(){let t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getFloat32());return e}getFloat64(){let t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getFloat64());return e}getArrayBuffer(t){let e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}getString(t){let e=this.offset,i=new Uint8Array(this.dv.buffer,e,t);this.skip(t);let n=i.indexOf(0);return n>=0&&(i=new Uint8Array(this.dv.buffer,e,n)),this._textDecoder.decode(i)}}class tr{add(t,e){this[t]=e}}function to(t){let e=t.match(/FBXVersion: (\d+)/);if(e)return parseInt(e[1]);throw Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function ts(t){return t/46186158e3}let ta=[];function tl(t,e,i,n){let r;switch(n.mappingType){case"ByPolygonVertex":r=t;break;case"ByPolygon":r=e;break;case"ByVertice":r=i;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(r=n.indices[r]);let o=r*n.dataSize,s=o+n.dataSize;return function(t,e,i,n){for(let r=i,o=0;r<n;r++,o++)t[o]=e[r];return t}(ta,n.buffer,o,s)}let th=new s.USm,tu=new s.Pa4;function tp(t){let e=new s.yGw,i=new s.yGw,n=new s.yGw,r=new s.yGw,o=new s.yGw,a=new s.yGw,l=new s.yGw,h=new s.yGw,u=new s.yGw,p=new s.yGw,c=new s.yGw,d=new s.yGw,f=t.inheritType?t.inheritType:0;t.translation&&e.setPosition(tu.fromArray(t.translation));let g=tc(0);if(t.preRotation){let e=t.preRotation.map(s.M8C.degToRad);e.push(g),i.makeRotationFromEuler(th.fromArray(e))}if(t.rotation){let e=t.rotation.map(s.M8C.degToRad);e.push(t.eulerOrder||g),n.makeRotationFromEuler(th.fromArray(e))}if(t.postRotation){let e=t.postRotation.map(s.M8C.degToRad);e.push(g),r.makeRotationFromEuler(th.fromArray(e)),r.invert()}t.scale&&o.scale(tu.fromArray(t.scale)),t.scalingOffset&&l.setPosition(tu.fromArray(t.scalingOffset)),t.scalingPivot&&a.setPosition(tu.fromArray(t.scalingPivot)),t.rotationOffset&&h.setPosition(tu.fromArray(t.rotationOffset)),t.rotationPivot&&u.setPosition(tu.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(c.copy(t.parentMatrix),p.copy(t.parentMatrixWorld));let m=i.clone().multiply(n).multiply(r),y=new s.yGw;y.extractRotation(p);let v=new s.yGw;v.copyPosition(p);let b=v.clone().invert().multiply(p),w=y.clone().invert().multiply(b),x=new s.yGw;if(0===f)x.copy(y).multiply(m).multiply(w).multiply(o);else if(1===f)x.copy(y).multiply(w).multiply(m).multiply(o);else{let t=new s.yGw().scale(new s.Pa4().setFromMatrixScale(c)).clone().invert(),e=w.clone().multiply(t);x.copy(y).multiply(m).multiply(e).multiply(o)}let _=u.clone().invert(),S=a.clone().invert(),E=e.clone().multiply(h).multiply(u).multiply(i).multiply(n).multiply(r).multiply(_).multiply(l).multiply(a).multiply(o).multiply(S),P=new s.yGw().copyPosition(E),M=p.clone().multiply(P);return d.copyPosition(M),(E=d.clone().multiply(x)).premultiply(p.invert()),E}function tc(t){return 6===(t=t||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),"ZYX"):["ZYX","YZX","XZY","ZXY","YXZ","XYZ"][t]}function td(t){return t.split(",").map(function(t){return parseFloat(t)})}function tf(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new TextDecoder().decode(new Uint8Array(t,e,i))}}}]);