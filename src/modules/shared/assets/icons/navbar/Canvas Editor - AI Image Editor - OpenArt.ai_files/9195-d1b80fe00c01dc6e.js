"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9195],{83132:function(e,t,i){i.d(t,{D:function(){return l}});var r=i(52676),o=i(62935),n=i(52889);let l=e=>{let{text:t,clickableText:i,onClick:l,color:a,variant:s="caption",linkSx:d,typographySx:c,renderLink:p}=e,u=t.split(i);if(u.length<2)return(0,r.jsx)(o.Z,{variant:s,sx:c,children:t});let g=(0,r.jsx)(n.Z,{component:"button",sx:{color:a,fontWeight:"bold",textDecoration:"underline",cursor:"pointer",border:"none",background:"none",padding:0,...d},onClick:l,children:i});return(0,r.jsxs)(o.Z,{variant:s,sx:c,children:[u[0],p?p(i):g,u[1]]})}},32757:function(e,t,i){var r=i(52676),o=i(75271),n=i(3170),l=i(86180),a=i(50272),s=i(43682),d=i(65893),c=i(62935),p=i(44754),u=i(71137),g=i(12073),h=i(25110),x=i(84625),m=i(93001),f=i(79267),b=i(31526);let v="upload-image-button",j=(0,o.forwardRef)((e,t)=>{let{error:i,file:j,isUploading:w,caption:Z,sx:C,dropZoneSx:y,bordered:k,title:I="Click or drag a photo to upload",zoomable:E,deletable:z,onDelete:U,onDrop:W,onChange:F,multiple:R,disabled:S=!1,accept:D,showIcon:N=!0,buttonVariant:$,onAreaClick:P,maxFiles:_,fallbackWhenNoFile:H,...M}=e,L=(0,g.Z)(),{getRootProps:O,getInputProps:T,isDragActive:A,isDragReject:V,fileRejections:G,inputRef:q}=(0,x.uI)({multiple:R,maxFiles:_,accept:D??{"image/png":[],"image/jpeg":[],"image/webp":[],"image/gif":[],"image/svg+xml":[],"image/apng":[],"image/avif":[],"image/bmp":[]},onDrop:e=>{e.length>0?null==F||F(R?e:e[0]):null==F||F(null),null==W||W(e)},disabled:S,noClick:!!P,...M}),B=O(),J=()=>{q.current&&q.current.click()};(0,o.useImperativeHandle)(t,()=>({triggerInputClick:J}));let[Q,Y]=(0,o.useState)(!1),K=e=>{Y(e)},X=e=>{if(!P)return;let t=e.target,i=!1;for(;t&&t!==e.currentTarget;){if(t.classList.contains(v)){i=!0;break}t=t.parentElement}i||P(e)},ee=j&&(j.preview||(j.file?URL.createObjectURL(j.file):"")),et={display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",color:L.palette.text.secondary,backgroundColor:$?null:L.palette.background.neutral,transition:L.transitions.create("opacity",{duration:L.transitions.duration.shorter}),overflow:"auto",msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},"&:hover":{opacity:$&&!j?1:.72},...j&&{opacity:0,color:"common.white",bgcolor:"grey.900","&:hover":{opacity:.72}}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.Z,{sx:(0,b.j)({width:144,height:144,margin:"auto",borderRadius:"50%",padding:L.spacing(1),position:"relative",border:!1===k?"none":`1px dashed ${L.palette.grey[50032]}`,scrollbarWidth:"none !important"},C),children:[w?(0,r.jsx)(d.Z,{sx:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:9999,color:"white"},children:(0,r.jsx)(p.Z,{})}):null,(0,r.jsxs)(d.Z,{...B,onClick:P?X:B.onClick,onContextMenu:P?X:void 0,sx:{zIndex:0,width:"100%",height:"100%",outline:"none",display:"flex",overflow:"hidden",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center","&::-webkit-scrollbar":{display:"none !important"},"&":{msOverflowStyle:"none !important",scrollbarWidth:"none !important"},[`& > *:not(.${v})`]:{width:"100%",height:"100%"},"&:hover":{cursor:"pointer","& .placeholder":{zIndex:9}},...A&&{opacity:.72},...(V||i)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"},...y},children:[(0,r.jsx)("input",{...T()}),ee?E?(0,r.jsx)(d.Z,{onClick:e=>e.stopPropagation(),sx:{"&>div, &>div>div, & img":{height:"100%",width:"100%"}},children:(0,r.jsx)(m.f,{zoomMargin:20,isZoomed:Q,onZoomChange:K,children:(0,r.jsx)(d.Z,{component:"img",alt:"avatar",src:ee,sx:{zIndex:8,objectFit:"contain"}})})}):(0,r.jsx)(d.Z,{component:"img",alt:"avatar",src:ee,sx:{zIndex:8,objectFit:"cover"}}):H??null,(0,r.jsx)(d.Z,{className:"placeholder",sx:et,children:$?(0,r.jsxs)(u.Z,{variant:"outlined",sx:{position:"absolute",height:"30px !important",width:"fit-content !important",display:"flex",gap:.5,backgroundColor:"#292929",borderColor:"#444444",textTransform:"none",fontSize:12,px:1,color:"white","&:hover":{backgroundColor:"#ffffff3d",borderColor:"#ffffff3d"}},disabled:S,children:[(0,r.jsx)(n.Z,{}),"Click or drag to upload"]}):(0,r.jsxs)(r.Fragment,{children:[N?(0,r.jsx)(f.JGh,{size:{xs:32,md:24},sx:{mb:1}}):null,(0,r.jsx)(c.Z,{variant:"caption",textAlign:"center",children:I||"Click or drag a photo to upload"})]})}),j&&E?(0,r.jsx)(d.Z,{className:v,sx:{position:"absolute",top:4,right:4,zIndex:1e3,background:"rgba(0,0,0,0.5)",width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:1},onClick:e=>{e.stopPropagation(),K(!0)},children:(0,r.jsx)(a.Z,{})}):null,j&&z?(0,r.jsx)(d.Z,{className:v,sx:{position:"absolute",top:4,right:40,zIndex:1e3,background:"rgba(0,0,0,0.5)",width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:1},onClick:e=>{e.stopPropagation(),null==U||U(),null==F||F(null)},children:(0,r.jsx)(l.Z,{})}):null]})]}),Z,G.length>0&&(0,r.jsx)(s.Z,{variant:"outlined",sx:{py:1,px:2,my:2,borderColor:"error.light",bgcolor:e=>(0,h.Fq)(e.palette.error.main,.08)},children:G.map(e=>{let{file:t,errors:i}=e,{name:o}=t;return(0,r.jsxs)(d.Z,{sx:{my:1},children:[(0,r.jsx)(c.Z,{variant:"subtitle2",noWrap:!0,children:o}),i.map(e=>(0,r.jsxs)(c.Z,{variant:"caption",component:"p",children:["- ",e.message]},e.code))]},o)})})]})});j.displayName="UploadAvatar",t.Z=j},49195:function(e,t,i){i.d(t,{Z:function(){return Z}});var r=i(52676),o=i(75271),n=i(35019),l=i(62935),a=i(65893),s=i(66686),d=i(8765),c=i(83132),p=i(93001),u=i(32757),g=i(36412),h=i(22018),x=i(89259),m=i(22289),f=i(10659),b=i(75787),v=i(42232),j=i(28337);let w={"image/png":[],"image/jpeg":[],"image/webp":[]};function Z(e){let{value:t,onChange:i,maxFiles:Z=64,successText:C='Click "Upload" below to proceed.',showUpgradeHintForMaxFiles:y=!0,showStatusAt:k="top",sx:I,containerSx:E,allowChooseFromHistory:z=!0}=e,[U,W]=(0,o.useState)(!1),[F,R]=(0,o.useState)(t),{showModal:S}=(0,d.dd)(),D=(0,o.useRef)(null),N=e=>{i((F||[]).filter(t=>t.imageUrl!==e.imageUrl)),R((F||[]).filter(t=>t.imageUrl!==e.imageUrl))},{data:$}=(0,m.$_)(),P=(0,b.fE)($),_=async e=>{W(!0);let t=async e=>{try{let t=new FormData;return t.append("file",e),await j.ZP.post("/media/upload_raw_image_nsfw",t,{headers:{"Content-Type":"multipart/form-data"}}).then(async e=>{if(200===e.status&&e.data){let{imageUrl:t,isNSFW:i}=e.data,r=await V(t);return{imageUrl:t,isNSFW:i,error:r}}})}catch{return null}};if(e&&e.length>0){let r=[...F||[],...(await Promise.allSettled(e.map(t))).map(e=>{let{status:t,value:i}=e;return"fulfilled"===t?i:null}).filter(Boolean)].reduce((e,t)=>(e.some(e=>e.imageUrl===t.imageUrl)||e.push(t),e),[]);i(r),R(r)}W(!1)},{UploadContextMenu:H,handleMenuOpen:M}=(0,g.w)({onChange:e=>{e&&e.length>0&&L(e)},onClickUpload:()=>{var e;return null===(e=D.current)||void 0===e?void 0:e.triggerInputClick()},maxSelectionCount:Z}),L=async e=>{if(e&&e.length>0){W(!0);let t=[...F||[],...await Promise.all(e.map(async e=>{let t=await V(e);return{imageUrl:e,isNSFW:!1,error:t}}))].reduce((e,t)=>(e.some(e=>e.imageUrl===t.imageUrl)||e.push(t),e),[]);i(t),R(t),W(!1)}},O=()=>(0,r.jsxs)(n.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(v.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"#EC681E"}}),(0,r.jsx)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"#EC681E",ml:1},children:"We've detected one or more NSFW images. Please remove them before proceeding with model training."})]}),T=()=>(0,r.jsxs)(n.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(v.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"#EC681E"}}),(0,r.jsx)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"#EC681E",ml:1},children:"Please upload at least 4 images."})]}),A=e=>(0,r.jsxs)(n.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(v.Z,{icon:"ic:round-check-circle",sx:{width:25,height:25,color:"#16D866"}}),(0,r.jsxs)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"#16D866",ml:1},children:[e," images ready to go. ",C]})]}),V=async e=>{let[t,i]=await (0,x.G1)(e);if(t<384||i<384)return`Image size is ${i}x${t} pixels. Each dimension must be at least 384 pixels.`;if(t>2048||i>2048){let e=Math.min(2048/i,2048/t),r=i*e,o=t*e;if(o<384||r<384)return`Image size is ${i}x${t} pixels. After resizing to ${r.toFixed(0)}x${o.toFixed(0)}, each dimension must be at least 384 pixels.`}},G=e=>(0,r.jsxs)(n.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(v.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"red"}}),(0,r.jsx)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"red",ml:1},children:e})]}),q=e=>{let t=y&&P!==f.Qe.Infinite?(0,r.jsx)(c.D,{text:`Limit exceeded. Please Upgrade to Infinite to upload up to ${e} images.`,clickableText:"Upgrade to Infinite",onClick:()=>{S(h.Z,{type:"openart_subscription"})},color:"#EC681E"}):`Maximum upload limit is ${e} images.`;return(0,r.jsxs)(n.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(v.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"#EC681E"}}),(0,r.jsx)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"#EC681E",ml:1},children:t})]})},B=e=>{if(null==e?void 0:e.some(e=>e.isNSFW))return O();if((null==e?void 0:e.length)<4)return T();if((null==e?void 0:e.length)>Z)return q(Z);if((null==e?void 0:e.length)>=4&&!(null==e?void 0:e.some(e=>e.isNSFW||e.error)))return A(null==e?void 0:e.length);if(null==e?void 0:e.some(e=>e.error)){var t;return G(null==e?void 0:null===(t=e.find(e=>e.error))||void 0===t?void 0:t.error)}return null};return(0,r.jsxs)(n.Z,{direction:"column",spacing:1,sx:{...E},children:["top"===k&&B(F),(0,r.jsx)(n.Z,{spacing:1,sx:{border:"1px dashed rgba(255, 255, 255, 0.50)",borderRadius:"10px",position:"relative",width:"100%",height:"230px",overflow:"auto",...I},children:(0,r.jsx)(a.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:100,overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"3px"}},children:(0,r.jsxs)(n.Z,{sx:{display:"grid",padding:"10px",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(3, 1fr)",md:"repeat(4, 1fr)",lg:"repeat(5, 1fr)"},gap:"10px",minHeight:"100%"},children:[(0,r.jsx)(a.Z,{sx:{pointerEvents:"auto",scrollbarWidth:"none !important"},children:(0,r.jsx)(u.Z,{ref:D,isUploading:U,sx:{borderRadius:"10px",m:0,width:"100%",height:"auto",aspectRatio:"1/1",background:"rgba(0, 0, 0, 0.3)"},dropZoneSx:{borderRadius:0},onChange:_,onAreaClick:z?e=>{z&&(e.preventDefault(),M(e))}:void 0,zoomable:!0,deletable:!0,multiple:!0,accept:w,maxFiles:Z,title:z?"Drag and drop, upload / history":void 0})},"upload"),F?F.map(e=>(0,r.jsx)(p.Z,{children:(0,r.jsxs)(a.Z,{sx:{position:"relative",pointerEvents:"auto",aspectRatio:"1/1",width:"100%",border:e.isNSFW?"3px solid #EC681E":e.error?"3px solid red":"",borderRadius:"20px",maxHeight:"unset",cursor:"pointer"},children:[(0,r.jsx)(s.Z,{color:"primary",component:"span",onClick:()=>N(e),sx:{position:"absolute",top:6,right:10,zIndex:1,background:"rgba(0,0,0,0.6)",cursor:"pointer"},children:(0,r.jsx)(v.Z,{icon:"ic:round-delete-outline",sx:{width:20,height:20}})}),(0,r.jsx)("img",{width:"100%",height:"100%",alt:"",src:e.imageUrl,style:{objectFit:"cover",width:"100%",height:"100%",borderRadius:"20px"}})]})},e.imageUrl)):null]})})}),z?H:null,"bottom"===k&&B(F)]})}},86180:function(e,t,i){var r=i(26538);t.Z=void 0;var o=r(i(64842)),n=i(52676);t.Z=(0,o.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},3170:function(e,t,i){var r=i(40201),o=i(52676);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5z"}),"FileUploadOutlined")}}]);