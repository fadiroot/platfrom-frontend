(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1379],{17562:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/characters",function(){return r(87126)}])},64437:function(e,t,r){"use strict";var i=r(52676),a=r(75271),n=r(76392),o=r(65893),s=r(35019),l=r(62935),c=r(24337),d=r(77403),u=r(46406),h=r(32757),p=r(36412),g=r(80924),x=r(28337);let m=(0,u.ZP)(o.Z,{shouldForwardProp:e=>"expand"!==e})(e=>{let{theme:t,expand:r}=e;return{transform:r?"rotate(0deg)":"rotate(180deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}),f=(0,a.memo)(function(e){let{value:t,onChange:r,samples:u,allowChooseFromHistory:f=!0,title:b=f?"Drag and drop, upload, or select from history":"Click or drop image to upload",setImgLoading:v,extendFiledValues:y,url:w="/media/upload_image",accept:j,slot:C,disabled:A,checked:Z,sx:S,uploadAvatarSx:k,..._}=e,[I,M]=(0,a.useState)(!1),[R,F]=(0,a.useState)(),{isMobile:T,isDesktop:E}=(0,g.j)(),P=(0,a.useRef)(null),[B,D]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&(!R||R.preview!==t)&&F({preview:t})},[t]);let z=async e=>{if(e&&(!Z||await Z(e))){F({file:e});let t=new FormData;t.append("file",e),M(!0),null==v||v(!0),await x.ZP.post(w,t,{headers:{"Content-Type":"multipart/form-data"}}).then(async e=>{if(200===e.status&&e.data){let{imageUrl:t}=e.data;r(t)}}).finally(()=>{M(!1),null==v||v(!1)})}else F(void 0),r()},U=e=>{F({preview:e}),r(e)},{UploadContextMenu:W,handleMenuOpen:H}=(0,p.w)({onChange:e=>{if(e&&e.length>0){let t=e[0];F({preview:t}),r(t)}},onClickUpload:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.triggerInputClick()},maxSelectionCount:1});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{sx:{borderRadius:1,p:T?0:1,...S},..._,children:(0,i.jsxs)(s.Z,{alignItems:"center",spacing:1,children:[(0,i.jsx)(h.Z,{ref:P,isUploading:I,file:R,bordered:!1,title:b,sx:{borderRadius:0,margin:0,width:"100%",...k},dropZoneSx:{borderRadius:0},onChange:z,onAreaClick:f?H:void 0,zoomable:!0,deletable:!0,accept:j,disabled:A}),f?W:null,u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{sx:{width:"100%"},children:(0,i.jsx)(l.Z,{variant:"body2",children:"Or try with one of ours"})}),(0,i.jsx)(s.Z,{direction:"row",flexWrap:"wrap",justifyContent:"space-around",alignItems:"start",sx:{width:"100%",minWidth:E?"340px":""},children:u.slice(0,B?void 0:3).map(e=>{let{url:t}=e;return(0,i.jsx)(o.Z,{sx:{p:"8px 4px"},children:(0,i.jsx)(d.Z,{onClick:()=>U(t),sx:{cursor:"pointer"},children:(0,i.jsx)("img",{src:t,alt:"Sample",style:{objectFit:"cover",height:100,width:100}})})},t)})}),u.length<=3?null:(0,i.jsxs)(s.Z,{direction:"row",spacing:2,sx:{textAlign:"center",mt:1,padding:"4px",borderRadius:"4px",cursor:"pointer",width:"100%"},justifyContent:"center",alignItems:"center",onClick:()=>{D(!B)},children:[(0,i.jsx)(l.Z,{variant:"caption",children:B?"Less examples":"More examples"}),(0,i.jsx)(m,{expand:!B,sx:{display:"flex",alignItems:"center"},children:(0,i.jsx)(n.Z,{})})]})]}):null]})}),C]})}),b=(0,u.ZP)(e=>(0,i.jsx)(f,{...e}))(e=>{let{theme:t}=e;return{border:`1px dashed ${t.palette.grey[50032]}`}});t.Z=b},81015:function(e,t,r){"use strict";r.d(t,{H:function(){return g}});var i=r(52676),a=r(78657),n=r(65893),o=r(61271),s=r(77742),l=r(66686),c=r(57598),d=r(35019),u=r(44754),h=r(80924),p=r(27928);let g=e=>{var t;let{model:r,model_id:g,onClose:x,...m}=e,{isMobile:f}=(0,h.j)(),{data:b,isFetching:v}=(0,p.VA)(g),y=(null===(t=r??b)||void 0===t?void 0:t.sample_images)??[];return(0,i.jsxs)(o.Z,{...m,onClose:x,maxWidth:!1,"aria-describedby":"model_training_publish","aria-labelledby":"model_training_publish",children:[(0,i.jsx)(s.Z,{component:"h2",variant:"h4",children:"Training Images"}),(0,i.jsx)(l.Z,{"aria-label":"close",onClick:x,sx:{position:"absolute",right:8,top:16,color:e=>e.palette.grey[500]},children:(0,i.jsx)(a.default,{})}),(0,i.jsx)(c.Z,{sx:{width:f?"100%":650,boxSizing:"border-box"},children:v?(0,i.jsx)(d.Z,{justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,i.jsx)(u.Z,{})}):(0,i.jsx)(n.Z,{sx:{display:"grid",gridTemplateColumns:`repeat(${f?2:4}, 1fr)`,gap:2},children:null==y?void 0:y.map((e,t)=>(0,i.jsx)(n.Z,{children:(0,i.jsx)("img",{loading:"lazy",height:"120",width:"100%",src:e,alt:`train sample ${t+1}`,style:{borderRadius:"10px",objectFit:"cover"}})},e))})})]})}},58835:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});var i=r(83539),a=r(11555);function n(){return(0,i.s)(a.jn)?void 0:"_blank"}},83539:function(e,t,r){"use strict";r.d(t,{s:function(){return a}});var i=r(46974);function a(e){let{pathname:t}=(0,i.useRouter)();return t!==e}},38616:function(e,t,r){"use strict";var i=r(26538);t.Z=void 0;var a=i(r(64842)),n=r(52676);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"}),"AutoFixHigh")},82239:function(e,t,r){"use strict";var i=r(26538);t.Z=void 0;var a=i(r(64842)),n=r(52676);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Create")},30139:function(e,t,r){"use strict";var i=r(26538);t.Z=void 0;var a=i(r(64842)),n=r(52676);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline")},88565:function(e,t,r){"use strict";var i=r(26538);t.Z=void 0;var a=i(r(64842)),n=r(52676);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz")},73626:function(e,t,r){"use strict";var i=r(15767),a=r(75271);t.Z=function(){var e=(0,i.__read)((0,a.useState)({}),2)[1];return(0,a.useCallback)(function(){return e({})},[])}},87126:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return tU},default:function(){return tW}});var i=r(52676),a=r(75271),n=r(82338),o=r(62935),s=r(35019),l=r(71137),c=r(44595),d=r(55309),u=r(30076),h=r(79267),p=r(45137);let g=[{title:"Start with 4+ Images",description:"Have 4+ high-quality images? Skip previews and create character directly.",mode:"four_more_images",imageUrl:"/_next/static/media/create_from_four_more_images.8b021e2e.svg"},{title:"Start with One Image",description:"Upload one image to guide the design.",mode:"image",imageUrl:"/_next/static/media/create_from_one_image.4d84e41d.svg"},{title:"Start with Description",description:"Describe your character. You'll preview visuals before finalizing.",mode:"description",imageUrl:"/_next/static/media/create_from_description.091bba99.svg"}],x=e=>{let{onDialogOpen:t}=e,r=(0,u.B)(),a=eM(e=>e.setCreateCharacterMode),n=e=>{a(e),t(),p.B("character_creation_started",{creation_method:e})};return(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(o.Z,{variant:"h3",component:"h1",sx:{display:"flex",flexWrap:"wrap",fontWeight:700},children:"Create Your Character"}),(0,i.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",pb:1,children:[(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",fontSize:16,fontWeight:500,children:"Start building characters to use in your future image creation!"}),(0,i.jsx)(l.Z,{size:"small",variant:"outlined",component:"a",href:"https://www.youtube.com/watch?v=k4dZBQ5d5Lo",target:"_blank",rel:"noopener noreferrer",startIcon:(0,i.jsx)(h.Zdg,{}),sx:{flexShrink:0,p:"4px 12px",borderColor:d.UX,borderRadius:d.E0},children:"Tutorial"})]}),(0,i.jsx)(s.Z,{sx:{flexDirection:{xs:"column",md:"row"},alignItems:"stretch",gap:2,mt:1},children:g.map((e,t)=>(0,i.jsx)(s.Z,{sx:{flex:1},children:(0,i.jsx)(c.Z,{in:!0,timeout:300+100*t,style:{flex:1,display:"flex",alignItems:"stretch"},children:(0,i.jsx)(s.Z,{sx:{height:"100%"},children:(0,i.jsx)(tD,{title:e.title,description:e.description,imageUrl:e.imageUrl,onClick:()=>{r({onAuthenticated:()=>n(e.mode)})}})})})},e.title))})]})},m=e=>{let{characterModel:t}=e;return(0,i.jsx)(s.Z,{spacing:2,children:(0,i.jsx)(tT,{character:t})})};var f=r(92598),b=r(19242),v=r(56209),y=r(11555),w=r(38118),j=r(61011),C=r(44941),A=r(31289),Z=r(22289),S=r(10659),k=r(75787);let _=e=>{let{hasTestingFeatures:t,onDeleteCharacter:r}=e,{data:n}=(0,Z.$_)(),u=(0,k.fE)(n)===S.Qe.Team,[p,g]=(0,a.useState)(!1),[x,m]=(0,a.useState)(!1),{ref:_,inView:I}=(0,b.YD)();(0,a.useEffect)(()=>{if(I){let e=setTimeout(()=>{m(!0)},200);return()=>clearTimeout(e)}},[I]);let M=(0,w.k)(),{data:R=[],isLoading:F}=(0,j.Wr)(),T=(0,C.Z)("up","sm"),E=(0,C.Z)("up","md"),P=(0,C.Z)("up","lg"),B=(0,C.Z)("up","xl"),D=Object.values({xs:{match:(0,C.Z)("down","sm"),displayCount:2},sm:{match:T&&!E,displayCount:2},md:{match:E&&!P,displayCount:3},lg:{match:P&&!B,displayCount:5},xl:{match:B,displayCount:6}}).find(e=>e.match),z=R.length>D.displayCount,U=z&&!p?R.slice(0,D.displayCount):R;return(0,i.jsxs)(s.Z,{spacing:2,children:[(0,i.jsx)(o.Z,{variant:"h4",component:"h2",sx:{fontSize:{xs:32}},children:u?"Shared Team Characters":"My Characters"}),u&&(0,i.jsx)(f.Z,{severity:"info",children:"All characters created by team members are automatically shared with your teamâ€”but remain private to everyone outside your team."}),M?F?(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:"Loading..."}):0===R.length?(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:"You haven't created any characters yet. Create your first character above!"}):(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(s.Z,{ref:_,sx:{display:"grid",gap:{xs:1,md:2},gridTemplateColumns:`repeat(${D.displayCount}, 1fr)`},children:U.map((e,a)=>(0,i.jsx)("div",{children:(0,i.jsx)(c.Z,{in:x,timeout:300+100*a,children:(0,i.jsx)("div",{children:(0,i.jsx)(eu,{character:e,hasTestingFeatures:t,onDelete:()=>r(e.id)})})})},e.id))}),z&&!p?(0,i.jsxs)(l.Z,{variant:"contained",fullWidth:!0,onClick:()=>g(!p),sx:{mt:2,bgcolor:"rgba(182, 182, 182, 0.06)",color:"#B5B5B5","&:hover":{bgcolor:"#2A2A2A"}},children:["Show All Characters ",(0,i.jsx)(h.X3R,{})]}):null]}):(0,i.jsxs)(o.Z,{variant:"body2",color:"text.secondary",children:["Please"," ",(0,i.jsx)(v.r,{href:(0,A.uX)(y.eb),color:d.MK,underline:"always",children:"sign in"})," ","to view your characters."]})]})},I=()=>(0,i.jsxs)(s.Z,{spacing:1,children:[(0,i.jsx)(o.Z,{variant:"h4",component:"h2",sx:{fontSize:{xs:32}},children:"Character Library"}),(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",fontSize:16,fontWeight:500,pb:1,children:"Use these characters to get started quickly!"}),(0,i.jsx)(ev,{})]});var M=r(99058),R=r(88565),F=r(58684),T=r(65893),E=r(44754),P=r(77403),B=r(66462),D=r(2656),z=r(68096),U=r(70565),W=r(54865),H=r(16483),L=r.n(H),O=r(8765),V=r(61271),N=r(77742),Y=r(57598),X=r(21461),G=r(79481),J=r(65089),Q=r(28357),K=r.n(Q),q=r(83954),$=r(25238),ee=r(64647),et=r(30754);let er=".png,.jpg,.jpeg,.webp";function ei(e){let{value:t,onAvatarChange:r,isUploadFirst:n=!1,...c}=e,[u,h]=(0,a.useState)(1),[p,g]=(0,a.useState)(0),x=(0,a.useRef)(null),m=(0,a.useRef)(null),[f,b]=(0,a.useState)(!1),[v,y]=(0,ee.i3)(),[w,j]=(0,a.useState)(""),C=w||t;(0,a.useEffect)(()=>{if(n&&c.open&&!w){var e;null===(e=m.current)||void 0===e||e.click()}},[n,c.open,w]);let A=async()=>{try{var e,t;if(!x.current)return;if(!f){null==r||r(C),null===(t=c.onClose)||void 0===t||t.call(c,{},"backdropClick");return}let i=x.current.getImage(),a=await new Promise((e,t)=>{i.toBlob(r=>{r?e(r):t(Error("Failed to convert canvas to blob"))},"image/webp",1)}),n=new File([a],"avatar.webp",{type:"image/webp"}),o=await v({file:n});null==r||r(o.imageUrl),null===(e=c.onClose)||void 0===e||e.call(c,{},"backdropClick")}catch(e){console.error("Failed to save avatar:",e),(0,et.cB)(e)}},[Z,S]=(0,a.useState)(!1),k=async e=>{var t,r,i;try{S(!0);let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!i){n&&(null===(r=c.onClose)||void 0===r||r.call(c,{},"backdropClick"));return}let a=await v({file:i});j(a.imageUrl),b(!1)}catch(e){(0,et.cB)(e),n&&(null===(i=c.onClose)||void 0===i||i.call(c,{},"backdropClick"))}finally{S(!1),m.current&&(m.current.value="")}};return n&&!w?(0,i.jsx)("input",{ref:m,type:"file",multiple:!1,accept:er,onChange:k,style:{display:"none"}}):(0,i.jsxs)(V.Z,{...c,sx:{"& .MuiDialog-paper":{maxWidth:{xs:"100%",md:800},width:"100%"}},children:[(0,i.jsxs)(N.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:["Edit Avatar",(0,i.jsx)(q.h,{dark:!1,onClick:e=>{var t;null===(t=c.onClose)||void 0===t||t.call(c,e,"backdropClick")},sx:{ml:"auto"}})]}),(0,i.jsx)(Y.Z,{children:(0,i.jsxs)(s.Z,{spacing:4,direction:{xs:"column",md:"row"},children:[(0,i.jsx)(T.Z,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:d.E0},children:(0,i.jsx)(K(),{ref:x,image:C,width:250,height:250,border:50,borderRadius:125,color:[0,0,0,.6],scale:u,rotate:p,crossOrigin:"anonymous",onImageChange:()=>b(!0)})}),(0,i.jsxs)(s.Z,{spacing:{xs:2,md:4},sx:{flex:1},children:[(0,i.jsxs)(s.Z,{spacing:{xs:1,md:2},children:[(0,i.jsx)(o.Z,{variant:"subtitle1",children:"Zoom"}),(0,i.jsx)(J.ZP,{value:u,min:1,max:3,step:.1,onChange:(e,t)=>h(t),valueLabelDisplay:"auto"})]}),(0,i.jsxs)(s.Z,{spacing:{xs:1,md:2},children:[(0,i.jsx)(o.Z,{variant:"subtitle1",children:"Rotate"}),(0,i.jsx)(J.ZP,{value:p,min:0,max:360,step:1,onChange:(e,t)=>g(t),valueLabelDisplay:"auto"})]}),(0,i.jsx)("input",{ref:m,type:"file",multiple:!1,accept:er,onChange:k,style:{display:"none"}}),(0,i.jsxs)(s.Z,{spacing:1,children:[(0,i.jsxs)($.X2,{spacing:2,children:[(0,i.jsx)(l.Z,{variant:"outlined",onClick:()=>{h(1),g(0)},sx:{flex:1},children:"Reset"}),(0,i.jsx)(F.Z,{fullWidth:!0,loading:Z,variant:"outlined",onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},sx:{flex:1},children:"Upload"})]}),(0,i.jsx)(F.Z,{loading:y&&!Z,disabled:Z,variant:"primary",onClick:A,sx:{flex:1,height:44},children:"Save"})]})]})]})})]})}var ea=r(28382);function en(e){let{character:t,onSave:r,...n}=e,[c,u]=(0,a.useState)(t.character_name??""),[p,g]=(0,a.useState)(t.thumbnail),[x,m]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[v,y]=(0,j.c6)(),w=(0,a.useCallback)(()=>{var e;null===(e=n.onClose)||void 0===e||e.call(n,{},"backdropClick")},[n.onClose]),C=async()=>{try{if(!c)throw Error("Please enter character name");let e={id:t.id,character_name:c,thumbnail:p};await v(e),null==r||r(e),w()}catch(e){(0,et.cB)(e)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(V.Z,{...n,sx:{"& .MuiDialog-paper":{width:"100%",maxWidth:680,bgcolor:"rgba(41, 41, 41, 1)"}},children:[(0,i.jsxs)(N.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:["Edit Character",(0,i.jsx)(q.h,{dark:!1,onClick:w})]}),(0,i.jsx)(Y.Z,{children:(0,i.jsxs)(s.Z,{direction:{xs:"column",md:"row"},spacing:"18px",alignItems:"flex-start",children:[(0,i.jsxs)(s.Z,{spacing:2,alignItems:"center",alignSelf:"stretch",p:2,bgcolor:"rgba(29, 29, 29, 1)",borderRadius:"8px",children:[(0,i.jsx)(T.Z,{sx:{borderRadius:"50%",border:`1px solid ${d.tv}`},children:p?(0,i.jsx)(ea.L6,{src:p,alt:"Character Avatar",sx:{borderRadius:"50%",width:"248px",height:"248px",objectFit:"cover"}}):null}),(0,i.jsxs)($.X2,{spacing:1,sx:{button:{padding:"8px 16px",fontSize:"16px",fontWeight:400,bgcolor:"black",color:"white"}},children:[(0,i.jsx)(l.Z,{variant:"contained",startIcon:(0,i.jsx)(h.f91,{size:16}),onClick:()=>{m(!1),setTimeout(()=>{b(!0),m(!0)},100)},sx:{borderRadius:d.E0},children:"Upload New"}),(0,i.jsx)(l.Z,{variant:"contained",startIcon:(0,i.jsx)(h.Mz5,{size:16}),onClick:()=>{m(!1),setTimeout(()=>{b(!1),m(!0)},100)},sx:{borderRadius:d.E0},children:"Adjust"})]})]}),(0,i.jsxs)(s.Z,{spacing:3,flexGrow:1,width:{xs:"100%",md:"auto"},children:[(0,i.jsxs)(s.Z,{spacing:1,children:[(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:"Character Name"}),(0,i.jsx)(X.Z,{value:c,onChange:e=>u(e.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:d.E0}}})]}),t.short_description?(0,i.jsxs)(s.Z,{spacing:1,children:[(0,i.jsxs)(o.Z,{variant:"body2",color:"text.secondary",display:"flex",flexDirection:"row",alignItems:"center",gap:1,children:["Short Description ",(0,i.jsx)(h.jTg,{size:16})]}),(0,i.jsx)(X.Z,{value:t.short_description,disabled:!0,multiline:!0,minRows:8,sx:{"& .MuiOutlinedInput-root":{borderRadius:d.E0}}})]}):null]})]})}),(0,i.jsxs)(G.Z,{children:[(0,i.jsx)(l.Z,{onClick:w,variant:"outlined",sx:{borderRadius:d.E0,height:44},children:"Cancel"}),(0,i.jsx)(F.Z,{onClick:C,loading:y,variant:"contained",className:"oa-button-primary",startIcon:(0,i.jsx)(h.KCC,{}),sx:{borderRadius:d.E0,height:44},children:"Save Changes"})]})]}),(0,i.jsx)(ei,{open:x,value:p,onAvatarChange:e=>{g(e)},onClose:()=>m(!1),isUploadFirst:f},x?"open":"closed")]})}var eo=r(89717),es=r(81015),el=r(9094),ec=r(84530),ed=r(80924);function eu(e){let{character:t,onDelete:r,onEdit:n,hasTestingFeatures:l}=e,{confirm:c}=(0,eo.aT)(),u=(0,a.useRef)(null),[h,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[m,f]=(0,el.jC)(),{showModal:b}=(0,O.dd)(),{isMobile:v,isDesktop:y}=(0,ed.j)(),{progress:w,finalized:C}=(0,j.hF)(t.id,!j.tK.has(t.status),t.created_at._seconds);(0,a.useEffect)(()=>{if(j.tK.has(t.status)||C)return;let e=setInterval(()=>{Z(e=>!e)},6e3);return()=>clearInterval(e)},[t.status,C]);let[A,Z]=(0,a.useState)(!1),S=e=>{e.stopPropagation(),e.preventDefault(),m({base_model:t.model_id,parameters:{},clickEvent:e},ec.V.CHARACTER)},k=()=>{c({title:"Delete Character",content:"Are you sure you want to delete this character? This action cannot be undone.",iconType:"warning",confirmText:"Delete",confirmProps:{variant:"contained",color:"error",sx:{backgroundColor:"error.main","&:hover":{backgroundColor:"error.dark"}}},onConfirm:async()=>{await (null==r?void 0:r())}})},_=async e=>{await (null==n?void 0:n(e))},I="completed"!==t.status&&"failed"!==t.status,H="failed"===t.status,V="completed"===t.status,N=()=>(0,i.jsx)(F.Z,{variant:v?"secondary":"primary",onClick:S,loading:f,sx:{minWidth:"auto",px:3,width:{xs:"100%",md:"auto"}},children:"Create"});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(P.Z,{onClick:S,sx:{position:"relative",width:"100%",p:2,bgcolor:"#222",borderRadius:d.E0,"& > *":{p:"0!important"},display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",cursor:"pointer","&:hover":{".character-image-wrapper":V&&y?{borderRadius:1,"& .image-overlay":{opacity:1}}:{}}},children:[(0,i.jsx)(R.Z,{ref:u,sx:{position:"absolute",top:"0px",right:"8px",cursor:"pointer",opacity:{xs:1,md:0},transition:"opacity 0.2s ease-in-out",zIndex:1,".MuiCard-root:hover &":{opacity:.7},"&:hover":{opacity:"1!important"}},onClick:e=>{e.stopPropagation(),p(!0)}}),(0,i.jsxs)(B.Z,{open:h,anchorEl:u.current,onClose:()=>p(!1),onClick:e=>e.stopPropagation(),children:[(0,i.jsx)(D.Z,{onClick:()=>{x(!0),p(!1)},disabled:I||H,children:"Edit"}),l?(0,i.jsx)(D.Z,{onClick:()=>{b(es.H,{model_id:t.model_id}),p(!1)},children:"Show Training Images"}):null,(0,i.jsx)(D.Z,{onClick:()=>{k(),p(!1)},sx:{color:"error.main"},children:"Delete"})]}),(0,i.jsxs)(T.Z,{sx:{position:"relative",width:128,height:128},children:[(0,i.jsxs)(T.Z,{className:"character-image-wrapper",sx:{width:"100%",height:"100%",position:"relative",borderRadius:"50%",overflow:"hidden",transition:"border-radius 0.2s ease-in-out"},children:[(0,i.jsx)(z.Z,{component:"img",image:t.thumbnail,sx:{width:"100%",height:"100%",p:"0!important",objectFit:"cover",filter:I?"blur(2px)":"none",transition:"all 0.3s ease-in-out"}}),V?(0,i.jsx)(T.Z,{className:"image-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s ease-in-out",borderRadius:"inherit"},children:N()}):null,H?(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"center",gap:"4px",sx:{zIndex:10,position:"absolute",height:"100%",width:"100%",top:0,backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"inherit"},children:[(0,i.jsx)(o.Z,{variant:"body1",fontWeight:"bold",color:"error",children:"Failed"}),(0,i.jsx)(U.Z,{title:"Sorry, there was a minor issue with the character creation. Credits have already been returned.",placement:"top",children:(0,i.jsx)(M.Z,{fontSize:"small",color:"error"})})]}):null]}),I&&w?(e=>{let t="rgba(74, 13, 255, 1)";return(0,i.jsx)(T.Z,{sx:{position:"absolute",top:"-2px",left:"-2px",display:"flex",alignItems:"center",justifyContent:"center",width:136,height:136,"&::after":{content:`"${e}%"`,position:"absolute",bottom:4,bgcolor:t,borderRadius:"45px",px:"10px",fontSize:"16px",fontWeight:600,color:"white"}},children:(0,i.jsx)(E.Z,{variant:"determinate",thickness:2,value:e,size:136,sx:{color:t,"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}})})})(w):null]}),(0,i.jsxs)(W.Z,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",width:"100%"},children:[(0,i.jsx)(o.Z,{variant:"body1",fontSize:16,fontWeight:700,color:"white",textAlign:"center",sx:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.character_name}),(0,i.jsxs)(o.Z,{variant:"caption",color:"text.secondary",fontSize:12,fontWeight:500,textAlign:"center",lineHeight:1.2,sx:{mb:{xs:.5,md:0}},children:["Created at ",L()(1e3*t.created_at._seconds).fromNow()]}),V&&v?N():null]})]}),(0,i.jsx)(en,{open:g,character:t,onClose:()=>x(!1),onSave:_})]})}var eh=r(96262),ep=r(58835),eg=r(52972);let ex={xs:"5px",md:"9px"};function em(e){let{name:t,image:r,modelId:a,sx:n,createdBy:l}=e,[c,d]=(0,el.jC)(),u=(0,ep.R)(),{isMobile:h}=(0,ed.j)(),p=e=>{e.stopPropagation(),e.preventDefault(),c({base_model:a,parameters:{},clickEvent:e},ec.V.CHARACTER)},g=()=>(0,i.jsx)(F.Z,{variant:h?"secondary":"primary",loading:d,component:v.Z,to:(0,eg.nt)(a,{finetuned_model_name:t}),target:u,onClick:p,sx:{minWidth:120},children:"Create"});return(0,i.jsx)(eh.Z,{component:"div",onClick:p,sx:{width:"100%",flexShrink:0,borderRadius:ex,transition:"all 0.2s ease-in-out",background:"#222",p:"12px",position:"relative","&:hover":{"& .overlay":{opacity:{md:1}}},...n},children:(0,i.jsxs)(s.Z,{width:"100%",spacing:1,children:[(0,i.jsxs)(s.Z,{position:"relative",children:[(0,i.jsx)(ea.L6,{src:r,alt:t,sx:{width:"100%",aspectRatio:"1/1",objectFit:"cover",display:"block",borderTopLeftRadius:ex,borderTopRightRadius:ex}}),(0,i.jsx)(s.Z,{className:"overlay",position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",sx:{opacity:0,transition:"opacity 0.2s ease-in-out",background:"rgba(0, 0, 0, 0.5)",borderTopLeftRadius:ex,borderTopRightRadius:ex},children:g()})]}),(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(o.Z,{variant:"body1",color:"white",fontSize:16,fontWeight:700,children:t}),h?null:(0,i.jsx)(o.Z,{variant:"body2",color:"text.secondary",fontSize:12,fontWeight:400,sx:{mb:{xs:.5,md:0}},children:l?`Created by ${l}`:""}),h?g():null]})]})})}var ef=r(40174),eb=r(56535);function ev(e){let{sx:t}=e,[r,n]=(0,a.useState)(!1),[o,s]=(0,a.useState)(!1),{ref:d,inView:u}=(0,b.YD)(),p=(0,C.Z)("up","sm"),g=(0,C.Z)("up","md"),x=(0,C.Z)("up","lg"),m=(0,C.Z)("up","xl"),f=Object.values({xs:{match:(0,C.Z)("down","sm"),displayCount:4},sm:{match:p&&!g,displayCount:4},md:{match:g&&!x,displayCount:6},lg:{match:x&&!m,displayCount:8},xl:{match:m,displayCount:10}}).find(e=>e.match),v=eb.M.length>f.displayCount,y=v&&!o?eb.M.slice(0,f.displayCount):eb.M;return(0,a.useEffect)(()=>{if(u){let e=setTimeout(()=>{n(!0)},200);return()=>clearTimeout(e)}},[u]),(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(ef.ZP,{ref:d,container:!0,spacing:{xs:1,md:2},sx:{...t},children:y.map((e,t)=>(0,i.jsx)(ef.ZP,{item:!0,xs:6,md:4,lg:3,xl:2.4,children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Z,{in:r,timeout:Math.min(200+100*t,1e3),children:(0,i.jsx)("div",{children:(0,i.jsx)(em,{name:e.character_name,image:e.thumbnail,modelId:e.model_id,createdBy:e.username,sx:{flexShrink:0}},e.model_id)})})})},e.model_id))}),v&&!o?(0,i.jsxs)(l.Z,{variant:"contained",fullWidth:!0,onClick:()=>s(!0),sx:{mt:2,bgcolor:"rgba(182, 182, 182, 0.06)",color:"#B5B5B5","&:hover":{bgcolor:"#2A2A2A"}},children:["Show All Characters ",(0,i.jsx)(h.X3R,{})]}):null]})}function ey(e){let{title:t,image:r,sx:n,loading:l,onClick:c,isVideo:d,videoUrl:u}=e,{isMobile:p}=(0,ed.j)(),[g,x]=(0,a.useState)(!1),m=(0,a.useRef)(null);return(0,a.useEffect)(()=>{g&&m.current?m.current.play():!g&&m.current&&(m.current.pause(),m.current.currentTime=0)},[g]),(0,i.jsxs)(T.Z,{onClick:e=>{p&&c&&c(e)},sx:{position:"relative",flex:1,borderRadius:2,overflow:"hidden",bgcolor:"rgba(255, 255, 255, 0.08)","&:hover .template-overlay":{opacity:1},"&:hover .template-button":{opacity:1},pb:1},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[d?(0,i.jsx)(T.Z,{sx:{position:"absolute",top:10,right:10,zIndex:2,color:"white",backgroundColor:"rgba(1, 1, 1, 0.2)",border:"1px solid rgba(255, 255, 255, 0.13)",borderRadius:"50%",padding:"4px",height:"20px",width:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(h.Mld,{})}):null,d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.Z,{component:"img",src:r,alt:t,sx:{width:"100%",height:{xs:98,md:136},display:g?"none":"block",...n}}),(0,i.jsx)(T.Z,{component:"video",ref:m,src:u,loop:!0,muted:!0,playsInline:!0,autoPlay:g,sx:{width:"100%",height:{xs:98,md:136},objectFit:"cover",objectPosition:"top",zIndex:1,display:g?"block":"none",borderRadius:"6px",...n}})]}):(0,i.jsx)(T.Z,{component:"img",src:r,alt:t,sx:{width:"100%",height:{xs:98,md:136},...n}}),p?null:(0,i.jsx)(T.Z,{className:"template-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.5)",opacity:0,transition:"opacity 0.2s",width:"100%",height:{xs:200,md:136}},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1)}),p?(0,i.jsxs)(s.Z,{alignItems:"center",children:[(0,i.jsx)(o.Z,{sx:{p:1.5,color:"white"},fontWeight:700,fontSize:14,children:t}),(0,i.jsx)(F.Z,{variant:"secondary",onClick:c,loading:l,sx:{minWidth:"auto",px:3,width:"106px"},children:"Use it ->"})]}):(0,i.jsx)(o.Z,{sx:{p:1.5,color:"white"},fontWeight:700,fontSize:16,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:t}),!p&&(0,i.jsx)(F.Z,{loading:l,className:"template-button",variant:"primary",onClick:c,sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.2s",whiteSpace:"nowrap"},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:"Use this template ->"})]})}function ew(e){let{onCloseAnyway:t,...r}=e,a=()=>{var e;null===(e=r.onClose)||void 0===e||e.call(r,{},"backdropClick")};return(0,i.jsxs)(V.Z,{...r,children:[(0,i.jsxs)(N.Z,{sx:{mb:1.5},children:[(0,i.jsx)(o.Z,{variant:"h4",color:"white",fontWeight:700,children:"Are you sure you want to exit?"}),(0,i.jsx)(q.h,{dark:!1,onClick:a,sx:{position:"absolute",top:10,right:10}})]}),(0,i.jsx)(Y.Z,{children:(0,i.jsx)(o.Z,{variant:"body1",color:"white",fontSize:16,fontWeight:500,children:"You haven't started creating your character yet. If you close now, your progress will not be saved. You can come back later and start again later."})}),(0,i.jsxs)(G.Z,{sx:{borderTop:`1px solid ${d.UX}`},children:[(0,i.jsx)(l.Z,{variant:"text",onClick:a,sx:{textDecoration:"underline",textTransform:"none"},children:"Go back"}),(0,i.jsx)(l.Z,{variant:"contained",onClick:()=>{a(),t()},sx:{borderRadius:d.E0,textTransform:"none",bgcolor:"rgba(255, 0, 0, 0.7)",color:"white","&:hover":{bgcolor:"red"}},children:"Close anyway"})]})]})}var ej=r(49141);let eC={color:"white",borderRadius:d.E0,p:"8px 20px",textTransform:"none"},eA=new Set([ej.fp.Default,ej.fp.Architecture,ej.fp.Interior,ej.fp.Minecraft]),eZ=[{name:"Custom",value:"Custom",thumbnail_url:""},...ej.x1.filter(e=>!eA.has(e.name))];var eS=r(2345),ek=r(52973),e_=r(62283);let eI={creationFlowType:"description",currentStep:0,params:{character_name:"",short_description:"",style:"",generated_visuals:[],selected_visual:"",source_image_url:"",sample_images:[],settings:{expand_expression_count:13,character_clone_count:16,custom_training_steps:1e3,custom_learning_rate:615e-6}},isCreatingPreviewVisuals:!1,isCreatingCharacter:!1,previewVisualsHistoryId:"",previewVisualsMediaResourceIds:[],characterId:""},eM=(0,eS.U)()((0,ek.mW)((e,t)=>({...eI,reset:()=>e(eI,!1,{type:"character/reset",initStore:eI}),setCreateCharacterMode:t=>e({creationFlowType:t},!1,{type:"character/setCreateCharacterMode",mode:t}),setCurrentStep:t=>e({currentStep:t},!1,{type:"character/setCurrentStep",step:t}),setParams:r=>e({params:"function"==typeof r?r(t().params):r},!1,{type:"character/setParams",params:r}),setIsCreatingPreviewVisuals:t=>e({isCreatingPreviewVisuals:t},!1,{type:"character/setLoadingPreviews",loading:t}),setIsCreatingCharacter:t=>e({isCreatingCharacter:t},!1,{type:"character/setIsCreatingCharacter",isCreating:t}),setPreviewVisualsHistoryId:t=>e({previewVisualsHistoryId:t},!1,{type:"character/setPreviewVisualsHistoryId",id:t}),setPreviewVisualsMediaResourceIds:t=>e({previewVisualsMediaResourceIds:t},!1,{type:"character/setPreviewVisualsMediaResourceIds",ids:t}),setCharacterId:t=>e({characterId:t},!1,{type:"character/setCharacterId",id:t})}),{name:"character",enabled:!1,trace:!0})),eR=(0,e_.N)(eM),eF=e=>{let{currentStepConfig:t,handleBack:r,handleActionButtonClick:n,actionButtonLoading:s}=e,c=eR.use.currentStep(),u=eR.use.creationFlowType(),{isMobile:p}=(0,ed.j)(),g=p&&"Create Character"===t.actionButtonText,x=a.useCallback(()=>{var e;return(0,i.jsxs)(F.Z,{variant:"primary",loading:s,disabled:null===(e=t.actionButtonDisabled)||void 0===e?void 0:e.call(t),onClick:n,sx:{...eC,display:"flex",height:"44px",padding:"14px 36px !important",justifyContent:"center",alignItems:"center",gap:"8px !important",alignSelf:"stretch","&.Mui-disabled":{background:"#3C3C3C",color:"#ffffff30",cursor:"not-allowed"}},children:[(0,i.jsx)(o.Z,{component:"span",fontSize:16,fontWeight:600,children:null==t?void 0:t.actionButtonText}),(0,i.jsxs)(T.Z,{component:"span",display:"flex",alignItems:"center",gap:.5,children:[(0,i.jsx)(h.GhS,{size:20}),(0,i.jsx)(o.Z,{component:"span",fontSize:16,fontWeight:600,children:null==t?void 0:t.actionButtonCreditsCost()})]})]},null==t?void 0:t.label)},[s,t,n]),m=a.useCallback(()=>(0,i.jsxs)(G.Z,{sx:{p:"12px!important",justifyContent:(null==t?void 0:t.backButtonText)?"space-between":"flex-end",alignItems:"center",borderTop:`1px solid ${d.UX}`,...g&&{flexDirection:"column",gap:1,alignItems:"center"}},children:[(null==t?void 0:t.backButtonText)&&!g?(0,i.jsx)(l.Z,{variant:"outlined",onClick:r,sx:{...eC},children:(0,i.jsx)(o.Z,{component:"span",fontSize:16,fontWeight:600,children:null==t?void 0:t.backButtonText})}):null,x(),g?(0,i.jsx)(l.Z,{variant:"text",onClick:r,sx:{...eC},children:(0,i.jsx)(o.Z,{component:"span",fontSize:16,fontWeight:600,color:"text.secondary",sx:{textDecoration:"underline"},children:null==t?void 0:t.backButtonText})}):null]}),[null==t?void 0:t.backButtonText,r,g,x]);switch(c){case 0:return(0,i.jsx)(T.Z,{display:"flex",justifyContent:"center",sx:{pb:{xs:"40px",md:"66px"},pt:{xs:"4px",md:"4px"},"& > button":{borderRadius:"5px",background:"#0929F7",height:"44px",padding:"10px 20px",gap:"10px",alignSelf:"stretch"},..."description"!==u&&{width:{xs:"100%",md:"44%"},px:{xs:3,md:0},maxWidth:"500px",margin:"0 auto","& > button":{width:"100%"}}},children:x()});case 1:return"description"===u?m():null;default:return null}};var eT=r(10068),eE=r(57660),eP=r(83887),eB=r(75452);let eD=e=>{let{currentStep:t,steps:r,handleClose:a}=e,{isMobile:n}=(0,ed.j)(),o=eR.use.creationFlowType(),s=()=>(0,i.jsx)(eT.Z,{activeStep:t,sx:{"& .MuiStepConnector-line":{maxWidth:"20px"},"& .MuiStepConnector-root":{width:"20px"}},children:r.map((e,r)=>{let{label:a}=e;return(0,i.jsx)(eE.Z,{children:(0,i.jsx)(eP.Z,{sx:{"& .MuiStepLabel-label":{color:"#808080",fontSize:12,fontWeight:500,userSelect:"none",transition:"all 0.2s",textAlign:"center",fontFamily:"Inter",fontStyle:"normal",lineHeight:"normal"},"& .MuiStepLabel-label.Mui-active":{color:"#FFF"},"& .MuiStepIcon-root":{width:"16px",height:"16px"},"& .MuiStepIcon-root.Mui-active, & .MuiStepIcon-root.Mui-completed":{color:"#0D99FF",backgroundColor:"#fff",borderRadius:"50%"},"& .MuiStepIcon-root:not(.Mui-active, .Mui-completed)":{color:"transparent",outline:"1px solid #0D99FF",borderRadius:"50%",boxSizing:"border-box",transform:"scale(0.95)"},"& .MuiStepIcon-text":{fill:t===r?"white":"#0D99FF",fontSize:"16px"}},children:a})},a)})}),l=()=>(0,i.jsx)(eB.Z,{variant:"text",steps:r.length,position:"static",activeStep:t,sx:{background:"transparent","& .MuiMobileStepper-dots":{display:"none"},"& .MuiMobileStepper-positionStatic":{padding:0}},nextButton:null,backButton:null});return(0,i.jsxs)(N.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",pt:"30px"},children:[(()=>{switch(o){case"description":return t<2?n?l():s():null;case"image":case"four_more_images":return null;default:return l()}})(),(0,i.jsx)(q.h,{dark:!1,onClick:a,sx:{position:"absolute",top:22,right:22,width:30,height:30,"& svg":{color:"#FFF",opacity:1,transform:"scale(2.2)"}}})]})};var ez=r(38616),eU=r(82239),eW=r(30139),eH=r(53785),eL=r(73626),eO=r(68836),eV=r(11342),eN=r(64437);function eY(e){let{className:t,title:r,children:a,sx:n,rightTopComponent:l}=e;return(0,i.jsxs)(s.Z,{className:t,spacing:.5,sx:n,children:[(0,i.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(o.Z,{variant:"subtitle1",sx:{color:"#FFF",fontFamily:"Inter",fontSize:16,fontStyle:"normal",fontWeight:600,lineHeight:"24px",letterSpacing:"-0.24px",display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:r}),l]}),a]})}var eX=r(18002),eG=r(59437),eJ=r(43682),eQ={src:"/_next/static/media/blurry-face.9a0cda13.png",height:200,width:160,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAQlBMVEURc5cFcJcTXYEedJYGa44mdJMDX4U0epkEVnwDVnlZZ3BFe50OZZIkgq9afI+MorUzZYB2obxXjK1keIg8cZFWjq4wzyfFAAAACnRSTlP+/////////v75gbZWPwAAAAlwSFlzAAALEwAACxMBAJqcGAAAADZJREFUeJwFwYkBgCAMBMFNuAQEFN/+W3UGIrxWjBIRSMcqQtY7Iu18dqEcl4uc9zeTrb3D2w8fgwFjbPxp3QAAAABJRU5ErkJggg==",blurWidth:6,blurHeight:8},eK={src:"/_next/static/media/check-icon.3a61af25.svg"},eq={src:"/_next/static/media/close-icon.76b6e357.svg"},e$={src:"/_next/static/media/full-body.c2e08ae5.png",height:200,width:176,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAAMFBMVEX8/Pz9/f3////49vTu6+lnaWzPyMWRh4JUU1jZ0tDBq6B1dni0k4J/cmpJSku5urswqSc7AAAAAnRSTlP+9TF7B5gAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAzSURBVHicHcZJEsAwCASxoQHbibf//zZFTpJE7MAk+rhI6Iz8zZwlrT9UYjkI/C0NNcc+HKEA06pjWgoAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},e0={src:"/_next/static/media/half-body-1.83d250ff.png",height:200,width:160,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAYFBMVEVIMkjEiSBLP1leSETGiyWzhDeXd0rKkSiJa1bOnTyjiGZlUEvZozHVnCzfqTSimKKddlF0Y3NzVSHGlC+hdiePZijVrGNbOjnFq4SnhlCzlmm5jEBfTGV/bWq9l1JtUD0BIvNwAAAAEXRSTlP+4eLi++Di/v7+/eL//////pAcCiMAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA6SURBVHicBcEHAoAgDACxcwLaFnBv/v9LE1pdJudQW/dZEduSCXLFeAjyPjl/BA9p4D4LPtD1TT1WP09eAp/qXtmCAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8},e1={src:"/_next/static/media/half-body-2.17fd49cd.png",height:200,width:162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAZlBMVEUoNjRue2tNQjU5RDHR19Bia16IklhTXD9OSkI/UkCfgHyslYdyhnx3YVHc6uikpV5FNTN0UUSMZ1guHRdnY19YTEBvhEulsax2ZVlORFAfHiiAjGaAVjuij2tGKR6GeVwcKykvSmIUgk+yAAAAEHRSTlP7+f7x+v77/f7+/v72/vX50ZR+NgAAAAlwSFlzAAALEwAACxMBAJqcGAAAADtJREFUeJwFwYcBgCAQALFDqTYesHf3X9IElB66GsKiTaDq2yY5Ul5l8/hR9s/gpiwo5uMsr8Ved3niDzxYArBMPCcVAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8},e2={src:"/_next/static/media/multi-character.26709a77.png",height:200,width:160,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAYFBMVEWfgWeho5+YgnOam4yvy926y9uoiHB4sriwkiOkyNyzqZ6ScFCleVK7o5WPgF+dfGWlp6vm1tDGycJ/pYige2V+glqLjXbBk2uXkHhNRQ6FZTTBsaeeiXDRoRBfW0m/mIT6CkTnAAAACnRSTlP9/////////P79bmj9SwAAAAlwSFlzAAALEwAACxMBAJqcGAAAADtJREFUeJwFwQcCwBAQAMHFOYJEei///2VmwIhIQ2+994IZ3L0vdO1ZtoOaV9UXOye+izG5XJQQpvjEHzjPAkmPFtpFAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8},e5={src:"/_next/static/media/smiling-face.6b32bc67.png",height:34,width:34,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAASFBMVEX/1zPXfQb8vzfdhQjskw1tAAD/sBpMaXHRdAT3ph/73HPztiv16mneqCzt4WfRpR///8r/AAD24l38pxT/+pb/41L/xCbmyCzmEYPaAAAAE3RSTlP+l5WemgL+AFBPnPz6+vz7/QL+MoNpGgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEBJREFUeJwFwYcRwCAMBLAHDG/Tc7T9N40ERsvZPoJ+z7k9YafX2o9BMN4bEMgFgCvQVVorSUG3UlqOYNQQNPIHXdMCZgaHBxMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},e3={src:"/_next/static/media/too-wide.7e75be76.png",height:200,width:162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAKlBMVEX9/f3///8IChMiHyNHRkrU1NX////e3t3x8PCvrq5FIwmRe2C7urpTVV559TNsAAAABnRSTlP+9f39/vw2zvwoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAALUlEQVR4nDXFURIAEAhAwSepFPe/rmHG/iztwS5+GPGa02C5ewy6Vm2lS6bIARYqAO428PNsAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8},e4={src:"/_next/static/media/upside-down-face.c8c30e5b.png",height:40,width:40,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAUVBMVEVMaXH0tSz0mxL0kwfSdQTmjAj/uB7Yfgb+2DDLcgb5wjfQnSH7wDfy52n/33D//8T4ujTbxlHaxlD1tzHjhAb+qhT/zCn/5FLluSj//JX+6jmXWC2vAAAAFXRSTlMA+5lPT5n9mv1P+/uV/Jv9Tvr6Tk+Oq5NSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQElEQVR4nBXLxw3AIAAAsaN3SBF1/0Gj+G/grfUCyLu1nUHNcj9lKqT353gvMSOtlYZBdxGj6Bpct7a7vwXnAnxmLgKZRHZm+AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},e6=()=>{let[e,t]=(0,a.useState)(null);return(0,i.jsx)(eX.d,{onClickAway:()=>{t(null)},children:(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(o.Z,{variant:"body2",onClick:r=>{t(e?null:r.currentTarget)},sx:{cursor:"pointer",color:"#3551FF",display:"inline-block",fontWeight:400},children:"Example"}),(0,i.jsx)(eG.Z,{open:!!e,anchorEl:e,placement:"bottom-start",sx:{zIndex:1300},children:(0,i.jsx)(eJ.Z,{elevation:3,sx:{p:"22px 14px",mt:.5,bgcolor:"#2B2B2B",border:"1px solid #3F3F3F",borderRadius:"12px",width:"286.8px",boxSizing:"content-box"},children:(0,i.jsxs)(s.Z,{spacing:1.75,sx:{width:"100%"},children:[(0,i.jsxs)(s.Z,{spacing:.5,sx:{width:"100%"},children:[(0,i.jsx)(e7,{title:"Recommended inputs",isRecommended:!0,emoji:e5}),(0,i.jsx)(ef.ZP,{container:!0,sx:{width:"100%",margin:0},children:(0,i.jsxs)(T.Z,{sx:{display:"flex",width:"100%",gap:"13.4px",justifyContent:"space-between"},children:[(0,i.jsx)(e9,{image:(0,i.jsx)(e8,{src:e$,alt:"Full body"}),text:"Full-body",isRecommended:!0}),(0,i.jsx)(e9,{image:(0,i.jsx)(e8,{src:e0,alt:"Half body 1"}),text:"Half-body",isRecommended:!0}),(0,i.jsx)(e9,{image:(0,i.jsx)(e8,{src:e1,alt:"Half body 2"}),text:"Half-body",isRecommended:!0})]})})]}),(0,i.jsxs)(s.Z,{spacing:.5,sx:{width:"100%"},children:[(0,i.jsx)(e7,{title:"Not recommended inputs",isRecommended:!1,emoji:e4}),(0,i.jsx)(ef.ZP,{container:!0,sx:{width:"100%",margin:0},children:(0,i.jsxs)(T.Z,{sx:{display:"flex",width:"100%",gap:"13.4px",justifyContent:"space-between"},children:[(0,i.jsx)(e9,{image:(0,i.jsx)(e8,{src:eQ,alt:"Blurry face"}),text:"Blurry face",isRecommended:!1}),(0,i.jsx)(e9,{image:(0,i.jsx)(e8,{src:e2,alt:"Multi character"}),text:"Multi-character",isRecommended:!1}),(0,i.jsx)(e9,{image:(0,i.jsx)(e8,{src:e3,alt:"Too wide"}),text:"Too wide",isRecommended:!1})]})})]})]})})})]})})};let e8=e=>{let{src:t,alt:r}=e;return(0,i.jsx)(T.Z,{component:"img",src:t.src,alt:r,sx:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},e9=e=>{let{image:t,text:r,isRecommended:a,width:n=80}=e;return(0,i.jsxs)(T.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"3px",minWidth:n},children:[(0,i.jsx)(T.Z,{sx:{width:n,height:100,borderRadius:"4px",overflow:"hidden",backgroundColor:"#404042"},children:t}),(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:.5,sx:{maxWidth:"100px"},children:[(0,i.jsx)(T.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"transparent",width:8,height:8,flexShrink:0},children:(0,i.jsx)(T.Z,{component:"img",src:(a?eK:eq).src,alt:a?"Check":"Close",sx:{width:8,height:8,objectFit:"contain",maxWidth:"8px",maxHeight:"8px"}})}),(0,i.jsx)(o.Z,{variant:"caption",sx:{color:a?"#16D866":"#FF6363",fontWeight:500,fontSize:12,letterSpacing:"-0.02em",lineHeight:"1.33em",whiteSpace:"nowrap"},children:r})]})]})},e7=e=>{let{title:t,isRecommended:r,emoji:a}=e;return(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:.5,justifyContent:"flex-start",width:"100%",children:[(0,i.jsx)(T.Z,{component:"img",src:a.src,alt:"Emoji",sx:{width:16,height:16,objectFit:"contain"}}),(0,i.jsx)(o.Z,{variant:"caption",sx:{color:r?"#16D866":"#FF6363",fontWeight:500,fontSize:12,letterSpacing:"-0.02em",lineHeight:"1.33em"},children:t})]})};var te=r(31526);function tt(e){let{children:t,startIcon:r,sx:a,disabled:n,...o}=e;return(0,i.jsx)(F.Z,{variant:"outlined",size:"small",startIcon:r,disabled:n,sx:(0,te.j)({p:.5,borderRadius:.5,minWidth:"auto",height:"24px",fontSize:"12px",color:"white",gap:.5,"& .MuiLoadingButton-loadingIndicator":{color:"white"},"& .MuiLoadingButton-loadingIndicator > .MuiCircularProgress-root":{width:"12px !important",height:"12px !important"},"& > .MuiButton-icon,& svg":{width:"12px",height:"12px",margin:0},...a}),...o,children:t})}function tr(e){let{url:t,label:r,selected:a,onClick:n}=e;return(0,i.jsx)(s.Z,{spacing:1,alignItems:"center",children:(0,i.jsx)(T.Z,{onClick:n,sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",aspectRatio:"1/1",position:"relative",cursor:"pointer",boxSizing:"border-box",outline:"none",borderRadius:"6px",overflow:"hidden",backgroundColor:"#303537",...a?{background:"linear-gradient(to bottom right, #0D99FF, #0D99FF)",padding:"2px","&::before":{content:'""',position:"absolute",inset:"2px",borderRadius:"4px",backgroundColor:"#303537",zIndex:0}}:{padding:"2px","&::before":{content:'""',position:"absolute",inset:"0",borderRadius:"6px",backgroundColor:"#303537",zIndex:0}},"&:hover":{"& .image-container":{opacity:1},"& .label-text":{opacity:1}},...a&&{"& .image-container":{opacity:1},"& .label-text":{opacity:1}}},children:(0,i.jsxs)(T.Z,{className:"image-container",sx:{width:"100%",height:"100%",position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"3.6px",overflow:"hidden",opacity:.5,transition:"opacity 0.2s ease"},children:["Custom"!==r?(0,i.jsx)("img",{src:t,alt:r,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,i.jsx)(h.Ivn,{size:48}),(0,i.jsx)(T.Z,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"30%",background:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(3,3,3,1) 100%)",zIndex:2}}),(0,i.jsx)(o.Z,{variant:"body2",className:"label-text",sx:{position:"absolute",bottom:"10px",left:0,right:0,textAlign:"center",fontFamily:"Inter",fontWeight:600,fontSize:"12px",lineHeight:1.6,color:"white",zIndex:4,opacity:.7,transition:"opacity 0.2s ease"},children:r})]})})})}var ti=r(28337);let ta={width:960,height:1216},tn=async e=>{var t,r;let i;let{data:a}=await ti.ZP.post("create",{base_model:"character_preview_visuals",model:"character_preview_visuals",prompt:(t=e.style,r=e.short_description,i=t,t.includes("art style")||(i=`${t} art style`),`full body shot front view of ${i} ${r} face to viewer, background is a suitable beautiful scene`),negative_prompt:"nude, naked, NSFW, nudity, explicit content, adult content, sexual content, gore, violence, blood, disturbing content, inappropriate content",prompt_assistant_mode:"off",tiling:!1,isGeneratedPrompt:!1,cfg_scale:3.5,steps:25,image_num:3,width:ta.width,height:ta.height});return a.generation_history_id},to=(0,ti.py)(tn),ts=async e=>{let{data:t}=await ti.ZP.post("character/enhance_short_description",e);return t.prompt};var tl=(0,ti.py)(ts);let tc=new(r(72100)).EventEmitter;var td=r(49195),tu=r(42232);function th(e){let{hasTestingFeatures:t}=e,n=eM(e=>e.params),l=eM(e=>e.setParams),c=eM(e=>e.creationFlowType),u=eM(e=>e.setCurrentStep),{isMobile:g}=(0,ed.j)(),{control:x,handleSubmit:m,setValue:f,getFieldState:b,clearErrors:v}=(0,eV.cI)({defaultValues:n}),[y,w]=(0,a.useState)(!1),[C,A]=(0,a.useState)(!1),[Z,S]=(0,a.useState)(!1),k=(0,eL.Z)(),[_,I]=(0,a.useState)(eZ.every(e=>e.name!==n.style)),M=eM(e=>e.setIsCreatingCharacter),R=eM(e=>e.setCharacterId),[F,E]=(0,j.HT)({onSuccess:e=>{R(e.id),p.B("character_creation_completed",{creation_method:c,character_name:n.character_name,character_description:n.short_description,character_style:n.style})}}),P=eM(e=>e.setIsCreatingPreviewVisuals),[B,D]=to(),z=eM(e=>e.setPreviewVisualsHistoryId),U=(0,a.useRef)(),W=(0,a.useRef)();(0,a.useEffect)(()=>(M(E),P(D),()=>{M(!1),P(!1)}),[E,D,M,P]);let H=(0,a.useCallback)(()=>{let e,t=!1;"image"===c&&!n.source_image_url||"four_more_images"===c&&(n.sample_images.length<4||C)?(S(!0),t=!1):(S(!1),t=!0);let r=new Promise(t=>{e=t});return m(async()=>{if(!t){e(!1);return}setTimeout(()=>{e(!0)},10)},e=>{})(),U.current=window.setTimeout(()=>{k()}),W.current=window.setTimeout(()=>{var e;null===(e=document.querySelector("div.Mui-error"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},100),r},[c,n,C,m,k]),L=(0,a.useCallback)(async()=>{let e,t;let{default:i}=await r.e(2373).then(r.t.bind(r,42373,19));do e=Math.floor(Math.random()*i.length),t=i[e];while(t===n.short_description&&i.length>1);l(e=>({...e,short_description:t})),f("short_description",t)},[l,n.short_description,f]),[O,V]=tl(),N=(0,a.useCallback)(async()=>{if(n.short_description){w(!0);try{let e=await O({prompt:n.short_description,model:"gpt-3.5-turbo-0125"});l(t=>({...t,short_description:e})),f("short_description",e)}catch(e){e instanceof eO.AxiosError||(console.error("Failed to enhance description:",e),(0,et.cB)("Failed to enhance description"))}finally{w(!1)}}},[l,n.short_description,f,O]);(0,a.useEffect)(()=>{let e=async()=>{await H()&&("image"===c?await F({creation_flow:"image",character_name:n.character_name,source_image_url:n.source_image_url,thumbnail:n.source_image_url,...t?{settings:n.settings}:{}}):"four_more_images"===c&&await F({creation_flow:"four_more_images",character_name:n.character_name,image_urls:[...n.sample_images.slice(1),n.sample_images[0]],thumbnail:n.sample_images[0]}),u(1))};return tc.on("createCharacter",e),()=>{tc.off("createCharacter",e),clearTimeout(U.current),clearTimeout(W.current)}},[F,c,t,n,n.character_name,n.sample_images,n.sample_images.length,n.settings,n.source_image_url,u,H]),(0,a.useEffect)(()=>{let e=async()=>{if(!await H())return;let e=await B({short_description:n.short_description,style:n.style});p.B("character_previewed",{creation_method:"description",preview:"initial",character_name:n.character_name,character_description:n.short_description,character_style:n.style}),z(e),u(1)};return tc.on("createPreviewVisuals",e),()=>{tc.off("createPreviewVisuals",e)}},[B,n,z,u,H]);let Y=(0,a.useMemo)(()=>b("short_description").error?{bottom:36}:{},[b]),X=(0,a.useCallback)(()=>(0,i.jsx)(tt,{startIcon:(0,i.jsx)(h.DNk,{}),sx:{bgcolor:"rgba(9, 41, 247, 0.30)",borderColor:"transparent","&:hover":{bgcolor:"rgba(9, 41, 247, 0.45)",borderColor:"transparent"}},onClick:L,children:"Random"}),[L]),G=(0,a.useCallback)(()=>{let e=!n.short_description;return(0,i.jsx)(tt,{disabled:e,loading:y||V,startIcon:(0,i.jsx)(ez.Z,{}),onClick:N,sx:{bgcolor:"transparent",borderColor:"#6D6D6D","&:hover":{bgcolor:"rgba(109, 109, 109, 0.1)",borderColor:"#6D6D6D"}},children:"Enhance"})},[N,V,y,n.short_description]),J=(0,a.useCallback)(()=>(0,i.jsx)(eY,{title:"Describe your character",sx:{flexGrow:1,alignItems:"stretch"},children:(0,i.jsxs)(T.Z,{position:"relative",sx:{flexGrow:1,backgroundColor:"#2B2B2B",border:"1px solid #3F3F3F",borderRadius:"8px",p:0,display:"flex",flexDirection:"column",minHeight:g?"200px":"150px",maxHeight:g?"300px":"250px",overscrollBehavior:"contain","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{borderRadius:"6px",background:"#404040"}},children:[(0,i.jsx)(eV.SF,{name:"short_description",control:x,fullWidth:!0,multiline:!0,minRows:g?6:3,onChange:e=>{l(t=>({...t,short_description:e.target.value})),setTimeout(()=>{k()})},required:!0,autoComplete:"off",placeholder:"Describe the defining traits of your character that need to stay consistent across all visuals. This includes physical attributes, outfits, accessories, or specific characteristics like 'a tall pirate with a scar.' ",sx:{flex:1,maxHeight:"calc(100% - 30px)",padding:"12px",overflowY:"auto",overscrollBehavior:"contain","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{borderRadius:"6px",background:"#404040"},"& .MuiOutlinedInput-root":{height:"100%",padding:0,"& textarea":{fontFamily:"Inter",fontSize:"14px",lineHeight:"1.57",letterSpacing:"-0.01em",color:"primary",padding:"0 !important",height:"100% !important",overflowY:"auto !important",overscrollBehavior:"contain","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{borderRadius:"6px",background:"#404040"},"&::placeholder":{color:"#636363"}},"& fieldset":{border:"none"},"&:hover":{borderColor:"#3F3F3F"},"&.Mui-focused":{borderColor:"#3F3F3F"}},"& .MuiInputBase-inputMultiline":{pb:3}}}),(0,i.jsxs)(s.Z,{direction:"row",spacing:1,sx:{position:"absolute",right:8,bottom:8,...Y},children:[X(),G()]})]})}),[x,g,Y,X,G,l,k]),Q=(0,a.useCallback)(()=>(0,i.jsx)(eY,{title:"Style",sx:{height:"100%"},children:(0,i.jsxs)(s.Z,{sx:{borderRadius:1,border:"1px solid #3F3F3F",background:"#2B2B2B",padding:"12px 8px 12px 12px",height:{md:"300px",sx:"100%"},display:"flex",gap:1,alignItems:"stretch",flexDirection:"column"},children:[(0,i.jsx)(eV.SF,{name:"style",control:x,fullWidth:!0,disabled:!_,onChange:e=>{l(t=>({...t,style:e.target.value}))},placeholder:"Type your own style here or choose from the preset styles below.",required:!0,autoComplete:"off",InputProps:{startAdornment:(0,i.jsx)(eH.Z,{position:"start",sx:{m:1.5,mr:.5,height:"14px",width:"14px","& svg":{height:"14px",width:"14px"}},children:(0,i.jsx)(eU.Z,{})})},sx:{flex:"0 0 auto",width:"calc(100% - 8px)","& .MuiOutlinedInput-root":{backgroundColor:"#3C3C3C",border:"none",borderRadius:"5px",padding:0,"& input":{fontWeight:500,fontSize:"14px !important",lineHeight:1.71,letterSpacing:"-0.01em",color:"#FFFFFF",padding:"0 12px 0 0 !important","&::placeholder":{color:"#636363"}},"& fieldset":{border:"none",fontSize:"14px !important"},"&:hover":{"& input":{backgroundColor:"#3C3C3C"}},"&.Mui-focused":{"& input":{backgroundColor:"#3C3C3C"}},"&.Mui-disabled":{"& input":{backgroundColor:"#3C3C3C",opacity:.5}}}}}),(0,i.jsx)(T.Z,{sx:{overflowY:"auto",flex:1,minHeight:0,pr:.5,overscrollBehavior:"contain","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{borderRadius:"6px",background:"#404040"}},children:(0,i.jsx)(ef.ZP,{container:!0,spacing:.5,children:eZ.map(e=>(0,i.jsx)(ef.ZP,{item:!0,xs:4,children:(0,i.jsx)(tr,{url:e.thumbnail_url,label:e.name,selected:_?"Custom"===e.name:n.style===e.value,onClick:()=>{if("Custom"===e.name){I(!0);return}I(!1),f("style",e.value),l(t=>({...t,style:e.value})),v("style")}})},e.value))})})]})}),[v,x,_,n.style,l,f]),K=(0,a.useCallback)(()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eY,{className:Z?"Mui-error":"",title:"Image",rightTopComponent:(0,i.jsx)(e6,{}),sx:{gap:1.5,flex:1,maxHeight:"calc(100% - 90px)",position:"relative"},children:(0,i.jsxs)(s.Z,{sx:{flex:1,maxHeight:"calc(100% - 40px)",position:"relative",borderRadius:1.5},children:[(0,i.jsx)(eN.Z,{title:"Upload one reference image or choose from history to guide your character's design.",allowChooseFromHistory:!0,value:n.source_image_url,onChange:e=>{l(t=>({...t,source_image_url:e})),e&&S(!1)},sx:{flex:1,p:0,display:"flex",alignSelf:"stretch",justifyContent:"stretch",borderRadius:1.5,border:"2px dashed #474747",maxHeight:"100%",position:"relative","&>.MuiStack-root":{flex:1,maxHeight:"100%",position:"relative"}},uploadAvatarSx:{flex:1,p:0,background:"#242424",borderRadius:1.5,alignItems:"center",justifyContent:"center","&>.MuiBox-root":{p:0}}}),!!Z&&(0,i.jsx)(tg,{message:"Please upload an image!"})]})}),t?(0,i.jsx)(tp,{control:x,setParams:l}):null]}),[x,t,Z,n.source_image_url,l]),q=(0,a.useCallback)(()=>(0,i.jsxs)(eY,{className:Z?"Mui-error":"",title:"Image",rightTopComponent:(0,i.jsx)(e6,{}),sx:{},children:[(0,i.jsx)(td.Z,{allowChooseFromHistory:!0,value:n.sample_images,successText:"",maxFiles:50,showUpgradeHintForMaxFiles:!1,showStatusAt:"bottom",sx:{borderRadius:1.5,border:"2px dashed #474747","&>.MuiBox-root":{overflowY:"scroll !important"},"& .MuiStack-root":{gap:1,"&>div, &>div>div, &>div>div img":{borderRadius:.75}}},onChange:e=>{l(t=>({...t,sample_images:e.map(e=>e.imageUrl)})),A(e.some(e=>e.isNSFW))}}),(0,i.jsxs)(s.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,i.jsx)(tu.Z,{icon:"mdi:lightbulb",sx:{width:25,height:25,color:d.MK}}),(0,i.jsx)(o.Z,{variant:"body2",fontWeight:500,sx:{color:d.MK,ml:1},children:"The first image is crucial. Select a image that showcases your character's key features."})]}),n.sample_images.length>0&&n.sample_images.length<=10&&(0,i.jsxs)(s.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,i.jsx)(tu.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"#EC681E"}}),(0,i.jsx)(o.Z,{variant:"body2",fontWeight:500,sx:{color:"#EC681E",ml:1},children:"Warning: It could lead to superior results with more than 10 images."})]})]}),[Z,n.sample_images,l]),$=(0,a.useCallback)(()=>(0,i.jsx)(eY,{title:"Name",children:(0,i.jsx)(eV.SF,{name:"character_name",control:x,fullWidth:!0,onChange:e=>{l(t=>({...t,character_name:e.target.value}))},required:!0,inputProps:{maxLength:50},rules:{validate:e=>/[!@#$%^&*(),.?":{}|<>]/.test(e)?"Name cannot contain special characters except single quote":/\s\s/.test(e)?"Name cannot contain consecutive spaces":!!/^[\p{L}\p{N}\s'-]+$/u.test(e)||"Name can only contain letters, numbers, spaces, hyphens and single quotes"},autoComplete:"off",placeholder:"You'll use this name in prompts later, like '@Amy is dancing.'",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#2B2B2B",border:"1px solid #3F3F3F",borderRadius:"8px","& input":{fontSize:"14px",lineHeight:"1.57",letterSpacing:"-0.01em",color:"primary",padding:"12px","&::placeholder":{color:"#636363"}},"& fieldset":{border:"none"},"&:hover":{borderColor:"#3F3F3F"},"&.Mui-focused":{borderColor:"#3F3F3F"}}}})}),[x,l]),ee=(0,a.useCallback)(()=>{switch(c){case"description":return(0,i.jsxs)(s.Z,{spacing:3,direction:{xs:"column",md:"row"},justifyContent:"stretch",children:[(0,i.jsxs)(s.Z,{spacing:1.5,alignItems:"stretch",sx:{flex:"1 1 50%"},children:[$(),J()]}),(0,i.jsx)(s.Z,{alignItems:"stretch",sx:{flex:"1 1 50%"},children:Q()})]});case"image":return(0,i.jsxs)(T.Z,{sx:{flex:1,display:"flex",flexDirection:"column",maxHeight:"100%",position:"relative",gap:1.5,px:0,alignItems:"stretch"},children:[$(),K()]});case"four_more_images":return(0,i.jsxs)(T.Z,{sx:{flex:1,display:"flex",flexDirection:"column",maxHeight:"100%",position:"relative",gap:1.5,px:0,alignItems:"stretch"},children:[$(),q()]})}},[c,J,q,$,K,Q]);return(0,i.jsx)(eV.Yb,{children:(0,i.jsxs)(s.Z,{spacing:{xs:3,md:5},width:"100%",maxWidth:"876px",py:4,justifyContent:"stretch",overflow:"auto",sx:{flex:"1 1 100%"},children:[(()=>{let e={description:"Tell us about your character",image:"Transform one image into a Character",four_more_images:"Turn 4+ images into a character"}[c];return(0,i.jsx)(o.Z,{variant:"h4",component:"h3",sx:{color:"#FFF",textAlign:"center",fontFamily:"Inter",fontStyle:"normal",fontWeight:600,letterSpacing:"-0.24px",fontSize:"description"===c?"28px !important":"24px !important",lineHeight:"description"===c?"normal":"24px"},children:e})})(),ee()]})})}function tp(e){let{control:t,setParams:r}=e;return(0,i.jsx)(eY,{title:"Internal Testing Config",sx:{flex:0,mt:1},children:(0,i.jsxs)(ef.ZP,{container:!0,spacing:2,sx:{width:"100% !important"},children:[(0,i.jsx)(ef.ZP,{item:!0,xs:4,children:(0,i.jsx)(eV.SF,{name:"settings.custom_training_steps",control:t,label:"Training Steps",placeholder:"# steps",type:"number",fullWidth:!0,size:"small",onChange:e=>{r(t=>({...t,settings:{...t.settings,custom_training_steps:Number(e.target.value)}}))}})}),(0,i.jsx)(ef.ZP,{item:!0,xs:4,children:(0,i.jsx)(eV.SF,{name:"settings.custom_learning_rate",control:t,label:"Learning Rate",placeholder:"0.0001-0.009",type:"number",fullWidth:!0,size:"small",onChange:e=>{r(t=>({...t,settings:{...t.settings,custom_learning_rate:Number(e.target.value)}}))}})})]})})}function tg(e){let{message:t}=e;return t?(0,i.jsxs)(o.Z,{variant:"body2",color:"error",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(eW.Z,{})," ",t]}):null}var tx=r(31993),tm=r(81138);function tf(e){let{}=e,t=eM(e=>e.params.generated_visuals),r=eM(e=>e.params.selected_visual),n=eM(e=>e.params),c=eM(e=>e.setParams),u=eM(e=>e.previewVisualsHistoryId),g=eM(e=>e.setPreviewVisualsHistoryId),{data:x}=(0,tm.My)(u),[m,f]=to(),b=eM(e=>e.setCharacterId),[v,y]=(0,j.HT)({onSuccess:e=>{p.B("character_creation_completed",{creation_method:"description",character_name:n.character_name,character_description:n.short_description,character_style:n.style}),b(e.id)}}),w=eM(e=>e.setIsCreatingCharacter);(0,a.useEffect)(()=>(w(y),()=>{w(!1)}),[y,w]);let C=eM(e=>e.setCurrentStep);(0,a.useEffect)(()=>{let e=async()=>{await v({character_name:n.character_name,short_description:n.short_description,thumbnail:n.selected_visual,creation_flow:"description",generated_visuals:t,selected_visual:n.selected_visual}),C(2)};return tc.on("createCharacter",e),()=>{tc.off("createCharacter",e)}},[v,n,t,C]),(0,a.useEffect)(()=>{if(x){let e=x.map(e=>e.url),r=[...t],i=!1;for(let[a,n]of e.entries())n&&n!==t[a]&&(r[a]=n,i=!0);i&&c({...n,generated_visuals:r})}},[x,n,t,c]);let A=e=>{c({...n,selected_visual:t[e]})},Z=async()=>{let e=await m({style:n.style,short_description:n.short_description});p.B("character_previewed",{creation_method:"description",preview:"regenerate",character_name:n.character_name,character_description:n.short_description,character_style:n.style}),g(e),c({...n,selected_visual:""})},S=(e,t)=>{let a=r===t,n=null==x?void 0:x[e],o=(null==n?void 0:n.status)==="pending";return(0,i.jsxs)(l.Z,{onClick:()=>A(e),sx:{p:0,flex:"1 1 auto",height:"auto",borderRadius:d.E0,overflow:"hidden",position:"relative",border:e=>a&&!o?`2px solid ${e.palette.primary.main}`:"2px solid transparent","&:hover":{border:e=>`2px solid ${e.palette.primary.main}`}},children:[t?(0,i.jsx)("img",{src:t,alt:`Character preview ${e+1}`,style:{width:"100%",aspectRatio:`${ta.width}/${ta.height}`,objectFit:"cover"}}):null,a&&!o?(0,i.jsx)(T.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,i.jsx)(h.KCC,{size:64,color:"white"})}):null,o?(0,i.jsx)(s.Z,{justifyContent:"center",alignItems:"center",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,i.jsx)(tx._,{title:"",size:80})}):null]},e)};return(0,i.jsxs)($.sg,{spacing:3,maxHeight:"100%",width:"100%",children:[(0,i.jsxs)($.sg,{flex:0,spacing:1,children:[(0,i.jsx)(o.Z,{component:"h3",sx:{color:"#FFF",textAlign:"center",fontSize:"28px",fontStyle:"normal",fontWeight:600,lineHeight:"normal",letterSpacing:"-0.24px"},children:"Meet Your Character!"}),(0,i.jsx)(o.Z,{sx:{color:"#808080",textAlign:"center",fontSize:"12px",fontStyle:"normal",fontWeight:500,lineHeight:"normal",letterSpacing:"-0.24px"},children:"We've generated three character visuals based on your details."})]}),(0,i.jsx)($.X2,{flex:1,spacing:2,sx:{justifyContent:"stretch",overflowY:"hidden",overflowX:"auto","& > button":{aspectRatio:`${ta.width}/${ta.height}`}},children:Array.from({length:3}).map((e,r)=>S(r,t[r]))}),(0,i.jsx)(s.Z,{flex:0,alignItems:"center",alignSelf:"stretch",spacing:2,children:(0,i.jsxs)(F.Z,{variant:"outlined",loading:f,disabled:f,startIcon:(0,i.jsx)(h.kNl,{}),onClick:Z,sx:(0,te.j)(eC,{fontSize:"16px",fontWeight:600}),children:["Regenerate for",(0,i.jsxs)(T.Z,{component:"span",display:"flex",alignItems:"center",gap:1,sx:{ml:1},children:[(0,i.jsx)(h.GhS,{size:20}),3*(0,k.Xd)("create.model.character_preview_visuals")]})]})})]})}var tb=(0,r(40201).Z)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");let tv=.1*j.Ck,ty=j.Ck-tv,tw=20/tv,tj=79/ty;function tC(e){let{imageUrl:t}=e,[r,n]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=Date.now(),t=setInterval(()=>{let t=Math.floor((Date.now()-e)/1e3);t>=j.Ck?n(99):t<=tv?n(Math.min(t*tw,20)):n(Math.min(20+(t-tv)*tj,99))},1e3);return()=>clearInterval(t)},[]),(0,i.jsx)(s.Z,{px:4,maxWidth:540,width:"100%",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(tA,{variant:"determinate",value:r,imageUrl:t,thickness:2,size:160,sx:{color:d.MK,borderRadius:"50%",background:"transparent","& .MuiCircularProgress-circle":{backgroundColor:"primaryGreen",strokeLinecap:"round"}}})})}function tA(e){return(0,i.jsxs)(T.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,i.jsx)(T.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",background:"rgba(255, 255, 255, 0.24)"}}),(0,i.jsx)(T.Z,{sx:{position:"absolute",top:"8px",left:"8px",right:"8px",bottom:"8px",display:"flex",alignItems:"center",borderRadius:"50%",justifyContent:"center",...e.imageUrl?{backgroundImage:`url(${e.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"}:{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:!e.imageUrl&&(0,i.jsx)(tb,{sx:{width:"100%",height:"100%",color:"rgba(255,255,255,0.3)"}})}),(0,i.jsx)(T.Z,{sx:{top:"8px",left:"8px",bottom:"8px",right:"8px",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",fill:"rgba(0, 0, 0, 0.24)",backdropFilter:"blur(5.5px)"},children:(0,i.jsx)(o.Z,{component:"span",sx:{color:"#FFF",fontFamily:"Inter",fontSize:"20.707px",fontStyle:"normal",fontWeight:600,lineHeight:"20.127px",letterSpacing:"-0.201px"},children:`${Math.round(e.value)}%`})}),(0,i.jsx)(E.Z,{variant:"determinate",...e})]})}function tZ(){let e=eM(e=>e.params.character_name),t=eM(e=>e.characterId),r=eM(e=>e.creationFlowType),n=eM(e=>e.params),{finalized:l}=(0,j.hF)(t,!0);l&&tc.emit("closeCreateCharacterDialog");let c=(0,a.useMemo)(()=>{switch(r){case"description":return n.selected_visual;case"four_more_images":return n.sample_images[0];case"image":return n.source_image_url}},[r,n.selected_visual,n.sample_images,n.source_image_url]);return(0,i.jsxs)($.sg,{spacing:3,maxWidth:700,alignItems:"center",children:[(0,i.jsx)(s.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:(0,i.jsx)(o.Z,{component:"h2",sx:{color:"#FFF",textAlign:"center",fontFamily:"Inter",fontSize:"28px",fontStyle:"normal",fontWeight:600,lineHeight:"normal",letterSpacing:"-0.24px"},children:"Creating Your Model! \uD83D\uDE80"})}),(0,i.jsx)(tC,{imageUrl:c}),(0,i.jsxs)(o.Z,{variant:"body1",sx:{color:"rgba(255, 255, 255, 0.36)",textAlign:"center",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:500,lineHeight:"18px",letterSpacing:"-0.24px",maxWidth:"60%"},children:["It'll take about ",(0,i.jsx)("b",{style:{color:"#FFF"},children:"3 minutes"})," to complete. ",(0,i.jsx)("b",{children:e})," will be ready shortly. You can close this and check back later in the Characters tab."]}),(0,i.jsxs)($.sg,{spacing:2,width:"100%",children:[(0,i.jsx)("iframe",{width:"100%",style:{maxWidth:"100%",aspectRatio:"525/268",borderRadius:17,background:"rgba(70, 70, 70, 0.55)"},src:"https://www.youtube.com/embed/PscYg-XSY1k?si=BlqNQEwWxiHdDsf1&autoplay=1&mute=1",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),(0,i.jsx)(o.Z,{variant:"body1",sx:{color:"rgba(255, 255, 255, 0.44)",textAlign:"center",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:600,lineHeight:"16.35px"},children:"Quick Tips: Making the Most of Your Character"})]})]})}var tS=r(61415),tk=r(79017);let t_=3*(0,k.Xd)("create.model.character_preview_visuals");function tI(e){let{hasTestingFeatures:t,onClose:r,onContinue:n,...o}=e,s=eM(e=>e.reset),l=eR.use.creationFlowType(),c=eR.use.currentStep(),u=eR.use.setCurrentStep(),h=eR.use.params(),p=eR.use.setParams(),g=eR.use.isCreatingCharacter(),x=eR.use.isCreatingPreviewVisuals(),{showModal:m}=(0,O.dd)(),{isDesktop:f}=(0,ed.j)(),{data:b}=(0,j.CW)();(0,tk.Z)(o.open);let{data:v}=(0,tm.Gr)(),[y]=(0,k.Bw)("character.create",v),w=(0,tS.Vi)(),C=(0,a.useMemo)(()=>"description"!==l&&0===c,[l,c]),A=(0,k.Xd)("character.create",w),Z=b||!y?A:0,S="description"===l,_={label:"All Set!",actionButtonText:"Done",actionButtonCreditsCost:()=>0,render:()=>(0,i.jsx)(tZ,{})},I=[{label:"Character Details",backButtonText:"Cancel",actionButtonText:S?"Create Previews":"Create Character",actionButtonCreditsCost:()=>S?t_:Z,render:()=>(0,i.jsx)(th,{hasTestingFeatures:t}),actionButtonDisabled:()=>"four_more_images"===l?h.sample_images.length<4||h.sample_images.length>50||!h.character_name:"image"===l?!h.source_image_url||!h.character_name:"description"===l&&(!h.character_name||!h.short_description||!h.style)},...S?[{label:"Preview Visuals",backButtonText:"<- Back",actionButtonText:"Create Character",actionButtonCreditsCost:()=>Z,render:()=>(0,i.jsx)(tf,{}),actionButtonDisabled:()=>!h.selected_visual},_]:[_]],M=I[c],R=(0,a.useCallback)(()=>{r(),setTimeout(()=>{s()},200)},[r,s]),F=e=>{var t,r;null!==(r=e.target)&&void 0!==r&&null!==(t=r.id)&&void 0!==t&&t.match(/rmiz-modal-.*/)||("Preview Visuals"===M.label?m(ew,{onCloseAnyway:()=>{R()}}):R())},T=e=>{n(h),F(e)};return(0,a.useEffect)(()=>(tc.on("closeCreateCharacterDialog",R),()=>{tc.off("closeCreateCharacterDialog",R)}),[R]),(0,i.jsxs)(V.Z,{...o,onClose:F,maxWidth:"md",fullWidth:!0,disableScrollLock:!1,sx:{"& .MuiDialog-paper":{height:{xs:"100%",md:"820px"},maxWidth:"876px",bgcolor:d.LS}},children:[(0,i.jsx)(eD,{currentStep:c,steps:I.map(e=>({label:e.label})),handleClose:F}),(0,i.jsx)(Y.Z,{sx:{width:{xs:"90%",md:C?"75%":"80%"},display:"flex",justifyContent:"center",mx:"auto",p:"0 !important",pt:"32px !important",boxSizing:"border-box","& > form":{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"& > div, & > form > div":f&&{overflowY:"auto",pr:1,msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},children:M.render()}),(0,i.jsx)(eF,{currentStepConfig:M,handleBack:()=>{0===c?r():("Preview Visuals"===M.label&&p({...h,selected_visual:""}),u(c-1))},handleActionButtonClick:e=>{let{actionButtonText:t}=M;switch(t){case"Create Character":tc.emit("createCharacter");break;case"Create Previews":tc.emit("createPreviewVisuals");break;case"Done":T(e)}},actionButtonLoading:g||x})]})}var tM=r(66686),tR=r(43495);let tF=e=>{let{direction:t,onClick:r,visible:a}=e;return(0,i.jsx)(s.Z,{sx:{["left"===t?"left":"right"]:0,position:"absolute",width:"85px",height:"100%",zIndex:99,background:"left"===t?"linear-gradient(271deg, rgba(26, 26, 26, 0.00) 0.9%, #1A1A1A 98.97%)":"linear-gradient(89deg, rgba(26, 26, 26, 0.00) 0.9%, #1A1A1A 98.97%)",display:a?"inline-flex":"none"},children:"left"===t?(0,i.jsx)(tM.Z,{onClick:r,sx:{fontSize:28,position:"absolute",zIndex:1,transition:"transform 0.2s ease-in-out",color:"white",left:0,transform:"translateY(-50%)",top:"50%",p:"4px",backgroundColor:"rgba(255,255,255, 0.16)",border:"1px solid rgba(255,255,255, 0.2)"},children:(0,i.jsx)(h.Xg$,{})}):(0,i.jsx)(tM.Z,{onClick:r,sx:{fontSize:28,position:"absolute",zIndex:1,transition:"transform 0.2s ease-in-out",color:"white",right:0,transform:"translateY(-50%)",top:"50%",p:"4px",backgroundColor:"rgba(255,255,255, 0.16)",border:"1px solid rgba(255,255,255, 0.2)"},children:(0,i.jsx)(h.D0R,{})})})},tT=e=>{let{character:t}=e,{isMobile:r}=(0,ed.j)(),n=(0,a.useRef)(null),[l,c]=(0,a.useState)({left:!1,right:!1}),[d,u]=(0,el.jC)(),h=()=>{if(n.current){let{scrollWidth:e,clientWidth:t,scrollLeft:r}=n.current,i=e>t;c({left:i&&r>0,right:i&&r+t<e})}};(0,a.useEffect)(()=>{let e=n.current;if(!e)return;let t=new ResizeObserver(h);return t.observe(e),()=>t.disconnect()},[]);let p=e=>{n.current&&(n.current.scrollLeft+="right"===e?300:-300,setTimeout(h,300))},g=async(e,r)=>{var i;await d({parameters:{active_template:e.value,active_template_type:"essentials",creation_mode:"template",image_num:(null===(i=tR.z4.find(t=>t.value===e.value))||void 0===i?void 0:i.constructor)==="VideoTemplate"?1:2},uiState:{pages:["home","create"]},initActionState:{creation_mode:"modifyByUser"},clickEvent:r,modelConfig:t},ec.V.CHARACTER)};return(0,i.jsxs)(s.Z,{spacing:1,children:[(0,i.jsx)(o.Z,{variant:"h4",component:"h2",children:"Quick Template"}),(0,i.jsxs)(T.Z,{position:"relative",children:[!r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tF,{direction:"left",onClick:()=>p("left"),visible:l.left}),(0,i.jsx)(tF,{direction:"right",onClick:()=>p("right"),visible:l.right})]}),(0,i.jsx)(s.Z,{ref:n,onScroll:r?void 0:h,sx:{display:"grid",gap:2,...r?{gridTemplateColumns:{xs:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},mt:1}:{overflowX:"auto",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"},py:1,gridTemplateColumns:"none",gridAutoFlow:"column",gridAutoColumns:"minmax(250px, 1fr)"}},children:tR.ZP.map(e=>(0,i.jsx)(ey,{title:e.title,image:e.image,sx:e.sx,loading:u,isVideo:!!e.videoUrl,videoUrl:e.videoUrl,onClick:t=>g(e,t)},e.title))})]})]})};var tE=r(14930),tP=r(23638),tB=r(39204);function tD(e){let{title:t,description:r,sx:n,onClick:c,imageUrl:d}=e,[u,h]=(0,a.useState)(!1),p=(0,tE.Z)(e=>e.breakpoints.up("lg"));return(0,i.jsx)(eh.Z,{component:"div",onClick:c,onMouseEnter:()=>{p&&h(!0)},onMouseLeave:()=>{p&&h(!1)},sx:{flex:1,borderRadius:2,overflow:"hidden",bgcolor:"#2A2A2A",boxShadow:1,position:"relative",...n},children:(0,i.jsxs)(s.Z,{alignItems:"center",gap:2.5,sx:{width:"100%",height:"100%",py:4,px:2,textAlign:"center"},children:[(0,i.jsx)(tB.E.div,{animate:{y:p&&u?-38:0},transition:{duration:.2,ease:"easeInOut"},children:(0,i.jsxs)(s.Z,{alignItems:"center",sx:{maxWidth:232},children:[(0,i.jsx)(ea.L6,{src:d,alt:t,fetchPriority:"high",sx:{width:"100%",aspectRatio:"232/164"}}),(0,i.jsx)(l.Z,{variant:"primary",fullWidth:!0,sx:{py:1,fontSize:"16px",fontWeight:600,textAlign:"center"},children:t})]})}),r?p?(0,i.jsx)(tP.M,{children:u?(0,i.jsx)(tB.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},style:{position:"absolute",bottom:16,left:0,right:0,padding:"0 16px"},children:(0,i.jsx)(o.Z,{variant:"body2",color:"white",fontSize:14,fontWeight:500,children:r})}):null}):(0,i.jsx)(o.Z,{variant:"body2",color:"white",fontSize:14,fontWeight:500,children:r}):null]})})}var tz=r(77135),tU=!0;function tW(e){let{hasTestingFeatures:t,defaultMyCharacterModel:r}=e,[s,l]=(0,a.useState)(!1),[c]=(0,j.Js)({onSuccess:()=>{(0,et.t5)("Character deleted successfully")}}),d=()=>{l(!1)},u=async e=>{await c(e)};return(0,i.jsx)(tz.Z,{title:"Characters",sx:{py:4,pb:{xs:8,md:4}},children:(0,i.jsxs)(n.Z,{sx:{maxWidth:1056},children:[(0,i.jsx)(o.Z,{component:"h1",display:"none",children:"Character Library"}),(0,i.jsxs)($.sg,{spacing:4,children:[(0,i.jsx)(x,{onDialogOpen:()=>{l(!0)}}),(0,i.jsx)(_,{hasTestingFeatures:t,onDeleteCharacter:u}),(0,i.jsx)(I,{}),(0,i.jsx)(m,{characterModel:r})]}),(0,i.jsx)(tI,{open:s,onClose:d,onContinue:d,hasTestingFeatures:t})]})})}},28357:function(e,t,r){var i;i=function(e,t){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(e),a=r(t);function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function l(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)),i}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,a=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw n}}return r}}(e,t)||g(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function m(e,t){return new Promise(function(r,i){var a=new Image;a.onload=function(){return r(a)},a.onerror=i,!1==(null!==e&&!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&t&&(a.crossOrigin=t),a.src=e})}var f,b=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),v="undefined"!=typeof File,y={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},w=b?y.touch:y.desktop,j="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,C={x:.5,y:.5},A=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,a.default.Component);var e,t,r,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var t,r=d(l);return t=e?Reflect.construct(r,arguments,d(this).constructor):r.apply(this,arguments),t&&("object"==typeof t||"function"==typeof t)?t:h(this)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l),o(h(t=i.call(this,e)),"state",{drag:!1,my:null,mx:null,image:C}),o(h(t),"handleImageReady",function(e){var r=t.getInitialSize(e.width,e.height);r.resource=e,r.x=.5,r.y=.5,r.backgroundColor=t.props.backgroundColor,t.setState({drag:!1,image:r},t.props.onImageReady),t.props.onLoadSuccess(r)}),o(h(t),"clearImage",function(){t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.setState({image:C})}),o(h(t),"handleMouseDown",function(e){(e=e||window.event).preventDefault(),t.setState({drag:!0,mx:null,my:null})}),o(h(t),"handleMouseUp",function(){t.state.drag&&(t.setState({drag:!1}),t.props.onMouseUp())}),o(h(t),"handleMouseMove",function(e){var r,i,a,n,o,s,l,d,u,h,p,g,x,m,f,b;e=e||window.event,!1!==t.state.drag&&(e.preventDefault(),a={mx:r=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:i=e.targetTouches?e.targetTouches[0].pageY:e.clientY},b=(b=t.props.rotate%360)<0?b+360:b,t.state.mx&&t.state.my&&(n=t.state.mx-r,o=t.state.my-i,s=t.state.image.width*t.props.scale,l=t.state.image.height*t.props.scale,u=(d=t.getCroppingRect()).x,h=d.y,u*=s,h*=l,g=Math.cos((p=function(e){return Math.PI/180*e})(b)),m=h+-n*(x=Math.sin(p(b)))+o*g,f={x:(u+n*g+o*x)/s+1/t.props.scale*t.getXScale()/2,y:m/l+1/t.props.scale*t.getYScale()/2},t.props.onPositionChange(f),a.image=c(c({},t.state.image),f)),t.setState(a),t.props.onMouseMove(e))}),o(h(t),"setCanvas",function(e){t.canvas=e}),t.canvas=null,t}return t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(j=1);var e,t,r=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(r),document&&(e=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},t=w.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),b&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===C||this.clearImage();var r=this.canvas.getContext("2d");r.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(r),this.paintImage(r,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=w.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),b&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,r=e.height,i=e.rotate,a=e.border,n={},o=p(this.getBorders(a),2),s=o[0],l=o[1];return this.isVertical()?(n.width=r,n.height=t):(n.width=t,n.height=r),n.width+=2*s,n.height+=2*l,{canvas:n,rotate:i,width:t,height:r,border:a}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var r=document.createElement("canvas");this.isVertical()?(r.width=e.height,r.height=e.width):(r.width=e.width,r.height=e.height);var i=r.getContext("2d");return i.translate(r.width/2,r.height/2),i.rotate(this.props.rotate*Math.PI/180),i.translate(-r.width/2,-r.height/2),this.isVertical()&&i.translate((r.width-r.height)/2,(r.height-r.width)/2),t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),i.drawImage(t.resource,-e.x,-e.y),r}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,r=e.height,i=document.createElement("canvas");return this.isVertical()?(i.width=r,i.height=t):(i.width=t,i.height=r),this.paintImage(i.getContext("2d"),this.state.image,0,1),i}},{key:"getXScale",value:function(){return Math.min(1,this.props.width/this.props.height/(this.state.image.width/this.state.image.height))}},{key:"getYScale",value:function(){return Math.min(1,this.props.height/this.props.width/(this.state.image.height/this.state.image.width))}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),r=1/this.props.scale*this.getYScale(),i={x:e.x-t/2,y:e.y-r/2,width:t,height:r},a=0,n=1-i.width,o=0,s=1-i.height;return(this.props.disableBoundaryChecks||1<t||1<r)&&(a=-i.width,o=-i.height,s=n=1),c(c({},i),{},{x:Math.max(a,Math.min(i.x,n)),y:Math.max(o,Math.min(i.y,s))})}},{key:"loadImage",value:function(e){v&&e instanceof File?this.loadingImage=new Promise(function(t,r){var i=new FileReader;i.onload=function(e){try{var i=m(e.target.result);t(i)}catch(e){r(e)}},i.readAsDataURL(e)}).then(this.handleImageReady).catch(this.props.onLoadFailure):"string"==typeof e&&(this.loadingImage=m(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var r,i,a=this.getDimensions();return t/e<a.height/a.width?i=(r=this.getDimensions().height)/t*e:r=(i=this.getDimensions().width)/e*t,{height:r,width:i}}},{key:"paintImage",value:function(e,t,r,i){var a,n=3<arguments.length&&void 0!==i?i:j;t.resource&&(a=this.calculatePosition(t,r),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(n,n),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,a.x,a.y,a.width,a.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(a.x,a.y,a.width,a.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var r=p(this.getBorders(t),2),i=r[0],a=r[1],n=this.getCroppingRect(),o=e.width*this.props.scale,s=e.height*this.props.scale,l=-n.x*o,c=-n.y*s;return this.isVertical()?(l+=a,c+=i):(l+=i,c+=a),{x:l,y:c,height:s,width:o}}},{key:"paint",value:function(e){e.save(),e.scale(j,j),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,r,i,a,n,o=this.props.borderRadius,s=this.getDimensions(),l=p(this.getBorders(s.border),2),c=l[0],d=l[1],u=s.canvas.height,h=s.canvas.width,o=Math.max(o,0);o=Math.min(o,h/2-c,u/2-d),e.beginPath(),t=h-2*c,r=u-2*d,0===(i=o)?e.rect(c,d,t,r):(a=t-i,n=r-i,e.translate(c,d),e.arc(i,i,i,Math.PI,1.5*Math.PI),e.lineTo(a,0),e.arc(a,i,i,1.5*Math.PI,2*Math.PI),e.lineTo(t,n),e.arc(a,n,i,2*Math.PI,.5*Math.PI),e.lineTo(i,r),e.arc(i,n,i,.5*Math.PI,Math.PI),e.translate(-c,-d)),e.rect(h,0,-h,u),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),r=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,function(e,t){if(null==e)return{};var r,i=function(e,t){if(null==e)return{};for(var r,i={},a=Object.keys(e),n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r]);return i}(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),i=this.getDimensions(),n={width:i.canvas.width,height:i.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},o={width:i.canvas.width*j,height:i.canvas.height*j,style:c(c({},n),t)};return o[w.react.down]=this.handleMouseDown,b&&(o[w.react.mouseDown]=this.handleMouseDown),a.default.createElement("canvas",s({ref:this.setCanvas},o,r))}}],n(l.prototype,t),r&&n(l,r),l}();return o(A,"propTypes",{scale:i.default.number,rotate:i.default.number,image:i.default.oneOfType([i.default.string].concat(function(e){if(Array.isArray(e))return x(e)}(f=v?[i.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(f)||g(f)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:i.default.oneOfType([i.default.number,i.default.arrayOf(i.default.number)]),borderRadius:i.default.number,width:i.default.number,height:i.default.number,position:i.default.shape({x:i.default.number,y:i.default.number}),color:i.default.arrayOf(i.default.number),backgroundColor:i.default.string,crossOrigin:i.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:i.default.func,onLoadSuccess:i.default.func,onImageReady:i.default.func,onImageChange:i.default.func,onMouseUp:i.default.func,onMouseMove:i.default.func,onPositionChange:i.default.func,disableBoundaryChecks:i.default.bool,disableHiDPIScaling:i.default.bool,disableCanvasRotation:i.default.bool}),o(A,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),A},e.exports=i(r(40507),r(75271))}},function(e){e.O(0,[4625,1686,1342,9544,9259,9195,2888,9774,179],function(){return e(e.s=17562)}),_N_E=e.O()}]);