"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7269],{43837:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(52676),i=n(75271),o=n(65893),l=n(52889),s=n(25110),a=n(35663),c=n(44761);let d=n.n(c)()()(a.Z);function u(e){let{children:t,onClickMore:n,onReflow:a,maxLine:c=2,ellipsis:u="...",fontSize:h,style:x,linkStyle:p,wrapStyle:f,component:m="p",enableExpand:g=!1,moreText:j="more",lessText:w="less"}=e,[b,v]=(0,i.useState)(!1),[Z,y]=(0,i.useState)(!1);return(0,r.jsxs)(o.Z,{sx:{position:"relative",...f},children:[t?(0,r.jsx)(d,{text:t,maxLine:g&&Z?Number.POSITIVE_INFINITY:c,ellipsis:u,trimRight:!0,basedOn:"letters",component:m,onReflow:e=>{let{clamped:t,text:n}=e;v(t),null==a||a({clamped:t,text:n})},style:{fontSize:h,...x}}):null,b||g&&Z?(0,r.jsx)(l.Z,{sx:{position:"absolute",pl:3,right:0,bottom:0,color:"#379FFF",background:e=>`linear-gradient(90deg, ${(0,s.Fq)(e.palette.background.default,0)} 0, ${e.palette.background.default} 20px)`,userSelect:"none",fontSize:h,...p},onClick:()=>{null==n||n(),g&&y(!Z)},children:Z?w:j}):null]})}},50235:function(e,t,n){n.d(t,{P:function(){return l}});var r=n(52676),i=n(75271),o=n(65893);let l=e=>{let{content:t,isMobile:n,setIsMobile:l,children:s,round:a="round",min:c=2,max:d=5,elementMinWidth:u=250,sx:h}=e,x=(0,i.useRef)(null),[p,f]=(0,i.useState)(n?c:d),m=(0,i.useCallback)(()=>{var e;let t=null===(e=x.current)||void 0===e?void 0:e.clientWidth;if(t){let e=Math[a]((t-100)/u);e<=1?f(c):f(Math.min(e,d)),null==l||l()}},[u,d,c,a,l]),g=s??t;return(0,i.useEffect)(()=>{let e=new ResizeObserver(()=>{m()});return e.observe(x.current),()=>{e.disconnect()}},[m]),(0,r.jsx)(o.Z,{ref:x,sx:h,children:null==g?void 0:g(p)})}},20014:function(e,t,n){n.d(t,{M:function(){return l}});var r=n(52676),i=n(75271),o=n(31289);function l(e){let{url:t,alt:n="",mimetype:l,style:s,controls:a=!1,autoPlay:c=!1,muted:d=!0,hoverPlay:u=!0,...h}=e,x=l??(0,o.EE)(t),p=(0,i.useRef)(null);return x.startsWith("video")?(0,r.jsx)("video",{ref:p,src:t,style:s,controls:a,autoPlay:c,muted:d,onMouseEnter:()=>{!c&&u&&p.current.play()},onMouseLeave:()=>{!c&&u&&p.current.pause()}}):(0,r.jsx)("img",{...h,alt:n,src:t,style:s})}},46833:function(e,t,n){n.d(t,{Aw:function(){return x},D$:function(){return i},IN:function(){return o},LS:function(){return s},Nb:function(){return a},PJ:function(){return c},Re:function(){return u},Ux:function(){return l},ae:function(){return d},c$:function(){return h}});var r=n(81192);let i=(0,r.cn)({}),o=(0,r.cn)({}),l=(0,r.cn)([]),s=(0,r.cn)(null),a=(0,r.cn)(null),c=(0,r.cn)(""),d=(0,r.cn)([]),u=(0,r.cn)({}),h=(0,r.cn)({}),x=(0,r.cn)({})},25271:function(e,t,n){var r=n(52676),i=n(75271),o=n(46974),l=n(35019),s=n(71137),a=n(62935),c=n(48945),d=n(85814),u=n(70565),h=n(29573),x=n(80402),p=n(42232),f=n(64224);t.Z=e=>{var t;let{isMobile:n}=e,m=(0,o.useRouter)(),g=m.pathname,j=i.useRef(null),[w,b]=(0,i.useState)(!1),v=(e,t)=>{let{query:n={}}=m;t?m.push({pathname:g},void 0,{shallow:!0}):m.push({pathname:g,query:{...n,custom_node:e}},void 0,{shallow:!0}),b(!1)};return(0,r.jsxs)(l.Z,{direction:"column",alignItems:"flex-start",justifyContent:"center",spacing:1,sx:{backgroundColor:"#14181833",borderRadius:"5px"},children:[(0,r.jsx)(s.Z,{ref:j,variant:"outlined",sx:{border:"2px solid #343839","&:hover":{border:"2px solid #343839"}},startIcon:(0,r.jsx)(p.Z,{icon:"mdi:filter-outline",width:20,height:20}),endIcon:(0,r.jsx)(p.Z,{icon:w?"mdi:chevron-up":"mdi:chevron-down",width:20,height:20}),onClick:()=>b(!0),children:(0,r.jsxs)(l.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(a.Z,{variant:"body2",fontWeight:600,children:n?"Custom Nodes":"Custom Nodes Filter"}),(null===(t=m.query)||void 0===t?void 0:t.custom_node)?(0,r.jsx)(c.Z,{label:m.query.custom_node,variant:"outlined",size:"small",sx:{fontSize:"13px",fontWeight:500,cursor:"pointer",backgroundColor:"#7c3dff",color:"#fff","&:hover":{backgroundColor:"#7c3dff !important",color:"#fff !important"}},onDelete:e=>{e.stopPropagation(),m.push({pathname:g,query:(0,h.Z)(m.query,["custom_node"])},void 0,{shallow:!0})}}):null]})}),(0,r.jsx)(d.ZP,{open:w,anchorEl:j.current,onClose:()=>b(!1),anchorOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiPopover-paper":{width:"100%",maxWidth:"1550px",borderRadius:"10px",background:"#000",boxShadow:"0px 4px 15px 0px rgba(0, 0, 0, 0.80)",border:"1px solid #313131",padding:"24px 16px 16px 16px"}},children:(0,r.jsx)(l.Z,{direction:"row",alignItems:"center",sx:{...n?{width:"100%",flexWrap:"wrap"}:{width:"100%",flexWrap:"wrap",backgroundColor:"black"},padding:"10px"},children:Object.keys(x.I).map(e=>{let t=e.split("/").pop();if(f[e]&&f[e].length>1){let{title_aux:n}=f[e][1];t=n||t}let n=x.I[e],i=m.query.custom_node===t;return(0,r.jsx)(u.Z,{title:`Used by ${n} workflows`,placement:"bottom",children:(0,r.jsx)(c.Z,{label:`${t} (${n})`,size:"small",sx:{mr:1,mb:1,fontSize:"13px",fontWeight:500,cursor:"pointer",backgroundColor:i?"#7c3dff":"#1c1c1c",color:"#fff","&:hover":{backgroundColor:i?"#7c3dff":"#452a6b",color:"#fff"}},onClick:()=>v(t,i)})},e)})})})]})}},97269:function(e,t,n){n.d(t,{TZ:function(){return eE},Zc:function(){return ep},N3:function(){return I},B$:function(){return eD},Di:function(){return L},D0:function(){return er},IG:function(){return e4},iA:function(){return tn},aU:function(){return tl},kM:function(){return eh},cA:function(){return e$},bH:function(){return eT},TY:function(){return eF},Db:function(){return e7},XA:function(){return H},d:function(){return eC},bR:function(){return eP},Cq:function(){return ex},AJ:function(){return U},iW:function(){return V},fM:function(){return eY}});var r,i,o,l,s=n(52676),a=n(75271),c=n(46974),d=n(42232),u=n(19082),h=n(35019),x=n(62935),p=n(71137),f=n(70565),m=n(66686),g=n(4896),j=n.n(g),w=n(5045),b=n(92563),v=n(95860),Z=n(47983),y=n(87717),k=n(11555),C=n(41954),S=n(46833),I=e=>{let{workflow:t,isCollapsed:n,onCollapsedChange:r,isMobile:i}=e,o=(0,c.useRouter)(),[l,g]=(0,u.KO)(Z.f),{query:I}=o,D=(null==I?void 0:I.from)==="dev",{id:W,key:_,name:$,description:E,creator:R,stats:P,is_public:O,flow_app_metadata:A}=t||{},[z,N]=a.useState((null==P?void 0:P.num_likes)||0),{username:F}=R||{},T=`https://openart.ai/workflows/${F||"-"}/${_}/${W}`,Y=`Amazing #ComfyUI workflow: ${$} - ${(0,y.$G)(E,100)}`,{title:M,description:L}=A||{},q=M||$,[G,B]=(0,v.Z)("like-workflows",{}),J=a.useRef(null),[U,X]=a.useState(!1);a.useEffect(()=>{J.current&&i&&!U?j()(J.current,{clamp:3}):j()(J.current,{clamp:100})},[J.current,U]);let[V]=(0,C.Q0)(),K=!!G[W],Q=(0,u.b9)(S.Aw),ee=i?{height:35,flexGrow:1,px:1,fontSize:12,borderRadius:"14px"}:{height:50,borderRadius:"20px"};return(0,s.jsxs)(h.Z,{direction:"column",spacing:1,children:[(0,s.jsx)(ep,{workflow:t,isMobile:i,sx:{p:0}}),(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",gap:2,flexWrap:"wrap",children:[(0,s.jsxs)(h.Z,{direction:"row",flexGrow:1,columnGap:3,flexWrap:"wrap",children:[(0,s.jsx)(x.Z,{variant:"h3",title:q,children:q}),(0,s.jsx)(H,{workflow:t,onClickText:()=>{g(!l)},sx:{flexShrink:0}})]}),(0,s.jsxs)(h.Z,{direction:"row",gap:1,flexWrap:"wrap",alignItems:"center",sx:{...i&&{flexGrow:1}},children:[D&&O?(0,s.jsx)(p.Z,{variant:"heavy-outlined",startIcon:(0,s.jsx)(d.Z,{icon:"ph:tree-structure",sx:{width:20,height:20}}),href:`/workflows/${t.creator.username}/${t.key}/${t.id}`,target:"_blank",sx:ee,children:"Workflow"}):null,(0,s.jsxs)(p.Z,{variant:"heavy-outlined",startIcon:(0,s.jsx)(d.Z,{icon:K?"ph:heart-fill":"ph:heart",sx:{width:20,height:20},...K?{color:"rgb(250, 82, 82)"}:{}}),onClick:()=>{V({workflow_id:W,like:!K}).then(()=>{N(K?z-1:z+1),Q(e=>({...e,[W]:!K})),B({...G,[W]:!K})})},sx:ee,children:[z," Likes"]}),(0,s.jsx)(p.Z,{variant:"heavy-outlined",startIcon:(0,s.jsx)(d.Z,{icon:"ph:images-square",sx:{width:20,height:20}}),href:(0,y.$M)(k.Gw,{flowAppKey:t.key,flowAppId:t.id}),target:"_blank",sx:ee,children:"Gallery"}),(0,s.jsx)(b.Z,{text:Y,icon:"ph:export",shareUrl:T,analyticsEvent:"share_workflow",analyticsCategory:"Workflow Details",analyticsEventParams:{value:T},noHashtag:!0,shareTypes:[w.y.Twitter,w.y.Reddit,w.y.CopyUrl],sx:ee}),(0,s.jsx)(f.Z,{title:`${n?"Show":"Hide"} examples and reviews`,children:(0,s.jsx)(m.Z,{onClick:r,children:(0,s.jsx)(d.Z,{icon:n?"charm:chevron-down":"charm:chevron-up",sx:{width:20,height:20},color:"white"})})})]})]}),(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(x.Z,{variant:"body2",ref:J,children:L}),i?(0,s.jsx)(x.Z,{variant:"body2",sx:{color:"#93989A",fontSize:12,mb:1},onClick:()=>{X(!U)},children:U?"Show less":"Show more"}):null]})]})},D=n(86694),W=n.n(D),_=n(65893),$=n(77403),E=n(54865),R=n(24337),P=n(2488),O=n(25110),A=n(20014),z=n(93001),N=n(81578),F=n(12826),T=n(5600),Y=n(32489);let M=W()(()=>Promise.resolve().then(n.bind(n,355)),{loadableGenerated:{webpack:()=>[355]},ssr:!1});function L(e){let{workflow:t,isAdmin:n=!1,isAuthenticated:r=!1,isMobile:i=!1,children:o,breadcrumbs:l}=e,[c,h]=(0,a.useState)(0),[x,p]=(0,a.useState)(!1),f=(0,u.Dv)(Y.ps),m=(e,t)=>{h(t)},[g,j]=(0,v.Z)("collapsed-flow-apps",{});(0,a.useEffect)(()=>{p(!0)},[]),(0,a.useEffect)(()=>{f&&j({...g,[w]:!0})},[f]);let w=null==t?void 0:t.id,b=x&&!g[w],Z=[{label:"Generations",icon:(0,s.jsx)(d.Z,{icon:"ph:images-square",sx:{width:20,height:20}})},{label:"Albums",icon:(0,s.jsx)(d.Z,{icon:"ph:folder",sx:{width:20,height:20}})}];return(0,s.jsx)(_.Z,{sx:{mt:2,gap:"20px",...i?{display:"flex",flexDirection:"column"}:{}},children:(0,s.jsxs)(_.Z,{sx:{height:"100%"},children:[(0,s.jsx)($.Z,{sx:{boxShadow:0},children:(0,s.jsxs)(E.Z,{sx:{display:"flex",flexDirection:"column",p:i?2:0},children:[l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{sx:{mb:2},children:l}),(0,s.jsx)(R.Z,{sx:{mb:2,mx:-2}})]}):null,(0,s.jsx)(I,{workflow:t,isAuthenticated:r,isMobile:i,isCollapsed:!b,onCollapsedChange:()=>{j({...g,[w]:b})}}),x?(0,s.jsx)(P.Z,{in:b,children:(0,s.jsx)(q,{thumbnails:(null==t?void 0:t.thumbnails)??[],sx:{mt:2}})}):null]})}),(()=>{if(r)return(0,s.jsx)(F.Y,{value:c,onChange:m,sx:{"& .MuiTabs-indicator":{background:"#0084FF"},"& .Mui-selected .MuiTab-iconWrapper":{color:"#0084FF"}},children:Z.map(e=>{let{label:t,icon:n}=e;return(0,s.jsx)(N.i,{label:t,icon:n,iconPosition:"start"},t)})})})(),(0,s.jsx)(_.Z,{sx:{mt:i?1:0},children:i?o:null}),(()=>{if(r)return(0,s.jsx)(_.Z,{sx:{pb:{md:0,xs:8},px:{xs:0}},children:0===c?(0,s.jsx)(M,{sign:null==t?void 0:t.id,filter:{workflow_id:null==t?void 0:t.id},isAdmin:n,enableRecreateFeatures:!1,enableMoreVariations:!0}):(0,s.jsx)(T.default,{})})})()]})})}function q(e){let{thumbnails:t,sx:n,...r}=e,i=e=>{let{width:t,height:n}=e,r=t/n;return r>.75?{width:300,height:300/r}:{height:400,width:400*r}};return(0,s.jsx)(h.Z,{gap:2,direction:"row",alignItems:"center",sx:{overflowY:"hidden",overflowX:"scroll",'& [data-rmiz-modal-overlay="visible"]':{backgroundColor:e=>(0,O.Fq)(e.palette.background.default,.8),backdropFilter:"blur(9px)",WebkitBackdropFilter:"blur(9px)"},...n},...r,children:t.map(e=>(0,s.jsx)(z.Z,{zoomMargin:20,children:(0,s.jsx)(A.M,{url:e.url,alt:e.title,style:{borderRadius:"16px",maxWidth:300,maxHeight:400,...i(e)}})},e.url))})}(r=o||(o={}))[r.Generations=0]="Generations",r[r.Albums=1]="Albums";var G=n(79958),B=n(52889),H=e=>{let t,{workflow:n,sx:r,onClickText:i}=e,{stats:o}=n||{},{rating:l=5,num_reviews:a=0}=o||{};return(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",sx:{...r},spacing:.5,children:[(0,s.jsx)(G.Z,{sx:{},precision:.1,value:l,size:"small",readOnly:!0}),(0,s.jsx)(x.Z,{color:"#faaf00",fontWeight:700,children:l.toFixed(1)}),(0,s.jsx)(x.Z,{variant:"body2",component:"span",sx:{ml:1},fontWeight:500,children:(t=`${a} reviews`,i?(0,s.jsx)(B.Z,{underline:"always",onClick:i,sx:{textDecorationColor:"#fff"},children:t}):t)})]})};let J=e=>{let{icon:t,value:n,iconProps:r,sx:i}=e;return(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",sx:i??{backgroundColor:"rgba(67, 73, 75, 0.5)",px:"5px",py:"2px",borderRadius:"5px",cursor:"default"},children:[(0,s.jsx)(d.Z,{icon:t,width:15,height:15,...r}),(0,s.jsx)(x.Z,{variant:"caption",component:"span",sx:{ml:"5px"},fontWeight:500,children:(0,y.HZ)(n)})]})};var U=e=>{let{workflow:t,sx:n,isWorkflowApp:r=!1,isWorkflow:i=!1}=e,[o]=(0,v.Z)("like-workflows",{}),l=(0,u.Dv)(S.Re),{id:a,stats:c,is_runnable:d}=t||{},{num_views:x=0,num_likes:p=0,num_runs:f=0,num_comments:m=0,num_downloads:g=0}=c||{},j=!!o[a]||!!l[a];return(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",sx:{mt:1},spacing:1,children:[(0,s.jsx)(J,{icon:j?"ic:round-favorite":"ic:round-favorite-border",value:p,iconProps:j?{color:"rgb(250, 82, 82)"}:{}}),i?(0,s.jsx)(J,{icon:"ic:round-remove-red-eye",value:x}):null,d?(0,s.jsx)(J,{icon:"ic:baseline-play-arrow",value:f}):null,i?(0,s.jsx)(J,{icon:"ic:round-download",value:g}):null,i?(0,s.jsx)(J,{icon:"mdi:chat-outline",value:m}):null]})},X=n(61999),V=e=>{let{workflow:t,sx:n,isMobile:r}=e,{thumbnails:i}=t||{};if(!i||0===i.length)return null;let o=i.filter(e=>!!e.url).map(e=>{let{url:t,width:n,height:r}=e;return{original:t.replace("_512.webp","_raw.jpg"),thumbnail:t,originalClass:"image-gallery-original",thumbnailClass:"image-gallery-thumbnail",originalAlt:"",thumbnailAlt:"",originalTitle:"",thumbnailTitle:"",originalWidth:n,originalHeight:r}});return(0,s.jsx)(h.Z,{direction:"row",alignItems:"center",justifyContent:"center",sx:{width:"100%"},children:(0,s.jsx)(_.Z,{sx:{maxWidth:r?"100%":"600px"},children:(0,s.jsx)(X.Z,{items:o,showNav:!0,showFullscreenButton:!1,showBullets:!1,showIndex:!1,showThumbnails:i?i.length>1:null,lazyLoad:!0,showPlayButton:!1,slideDuration:200,renderThumbInner:e=>{let{original:t,thumbnail:n,thumbnailAlt:r,thumbnailTitle:i}=e;return(0,s.jsx)(_.Z,{sx:{width:"100%",height:"100%",borderRadius:"5px",overflow:"hidden",lineHeight:0},children:(0,s.jsx)(A.M,{url:t,style:{objectFit:"cover",width:"100%",height:"auto"}})})},renderItem:e=>{let{original:t,thumbnail:n,originalWidth:r,originalHeight:i}=e;return(0,s.jsx)(z.Z,{zoomMargin:20,children:(0,s.jsx)(_.Z,{sx:{width:"100%",maxWidth:"650px",borderRadius:"5px",overflow:"hidden",lineHeight:0},children:(0,s.jsx)(A.M,{url:t,controls:!0,autoPlay:!0,style:{objectFit:"cover",width:"100%",height:"auto"}})})})}})})})},K=n(17831),Q=n(77579),ee=n(31289),et=n(80402);let en=e=>{let{icon:t,value:n,sx:r,iconProps:i,tooltipText:o}=e;return(0,s.jsx)(f.Z,{title:(0,s.jsxs)(h.Z,{direction:"column",alignItems:"center",children:[(0,s.jsx)(x.Z,{variant:"body1",component:"span",fontWeight:"bold",children:(0,y.UB)(n)}),(0,s.jsx)(x.Z,{variant:"caption",color:"text.secondary",fontWeight:"bold",children:o})]}),placement:"top",sx:{cursor:"pointer"},children:(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",sx:{backgroundColor:"rgba(67, 73, 75, 0.5)",px:"5px",py:"2px",borderRadius:"5px",cursor:"pointer",...r},children:[(0,s.jsx)(d.Z,{icon:t,width:15,height:15,...i}),(0,s.jsx)(x.Z,{variant:"caption",component:"span",sx:{ml:"5px"},fontWeight:500,children:(0,y.HZ)(n)})]})})};var er=e=>{let{workflow:t,sx:n,isMobile:r}=e,{creator:i,source:o}=t||{},l=(null==i?void 0:i.name)||(null==o?void 0:o.name)||"",a=(null==i?void 0:i.avatar)||(null==o?void 0:o.avatar)||"",{username:c,workflow_dev_profile:u}=i||{},{source_link:p}=o||{};return l||p?(0,s.jsxs)(h.Z,{direction:"column",spacing:1,children:[(0,s.jsx)(x.Z,{variant:"body1",fontWeight:"bold",color:"text.secondary",children:"Author"}),(0,s.jsx)(_.Z,{sx:{overflow:"hidden"},children:!!l&&(0,s.jsx)(B.Z,{href:`/workflows/@${c}`,target:"_blank",onClick:e=>{if(!c){e.preventDefault(),e.stopPropagation();return}window.open(`/workflows/@${c}`,"_blank"),e.preventDefault(),e.stopPropagation()},children:(0,s.jsxs)(h.Z,{direction:"row",children:[(0,s.jsx)(K.Z,{sx:{width:35,height:35},alt:l,src:(0,ee.wX)({avatar:a})}),(0,s.jsx)(x.Z,{variant:"body2",sx:{ml:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:"bold",lineHeight:"35.012px"},children:l})]})})}),(()=>{if(!u)return null;let{stats:e}=u||{},{num_workflows:t=0,num_downloads:n=0,num_likes:r=0,num_views:i=0}=e||{};return(0,s.jsxs)(h.Z,{direction:"row",spacing:1,sx:{p:0},children:[(0,s.jsx)(en,{icon:"uil:upload",value:t,tooltipText:"WORKFLOWS"}),(0,s.jsx)(en,{icon:"ic:round-download",value:n,tooltipText:"DOWNLOADS"}),(0,s.jsx)(en,{icon:"ic:round-favorite-border",value:r,tooltipText:"LIKES"}),(0,s.jsx)(en,{icon:"ic:round-remove-red-eye",value:i,tooltipText:"VIEWS"})]})})(),(()=>{if(!u)return null;let{social_links:e,tip_links:t}=u||{};return e||t||0!==e.length||0!==t.length?(0,s.jsx)(h.Z,{direction:"row",spacing:1,sx:{p:0},children:[...t,...e].map((e,t)=>{let n=e.replace(/(^\w+:|^)\/\//,"").split("/")[0],r=(0,Q.Z)(et.X_).find(e=>n.includes(e)),i=r?et.X_[r]:"mdi:link";return(0,s.jsx)(B.Z,{href:e,target:"_blank",children:(0,s.jsx)(m.Z,{color:"primary",size:"small",children:(0,s.jsx)(d.Z,{icon:i,width:25,height:25})})},`link-${t}`)})}):null})()]}):null},ei=n(95496),eo=n(2850),el=n(16850),es=n(26784),ea=n(46406);let ec=(0,ea.ZP)(e=>(0,s.jsx)(eo.Z,{disableGutters:!0,elevation:0,square:!0,...e}))(e=>{let{theme:t}=e;return{border:`1px solid ${t.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},maxWidth:"400px"}}),ed=(0,ea.ZP)(e=>(0,s.jsx)(es.Z,{expandIcon:(0,s.jsx)(ei.Z,{sx:{fontSize:"0.9rem"}}),...e}))(e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}}),eu=(0,ea.ZP)(el.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}});function eh(e){let{id:t,title:n=null,header:r=null,children:i,expand:o=!1,...l}=e,[c,d]=(0,u.KO)(S.c$);(0,a.useEffect)(()=>{d(e=>({...e,[t]:o}))},[o]);let h=c[t]||!1;return(0,s.jsxs)(ec,{expanded:h,onChange:()=>{d(e=>({...e,[t]:!h}))},children:[(0,s.jsxs)(ed,{"aria-controls":"panel1d-content",id:"panel1d-header",children:[n?(0,s.jsx)(x.Z,{variant:"body1",fontWeight:"bold",color:"text.secondary",children:n}):null,r||null]}),(0,s.jsx)(eu,{children:i})]})}var ex=e=>{let{workflow:t,sx:n,isMobile:r}=e,{creator:i,source:o}=t||{},{name:l,avatar:a,source_link:c}=o||{};return c?(0,s.jsxs)(h.Z,{direction:"column",spacing:1,sx:{maxWidth:"300px"},children:[(0,s.jsx)(x.Z,{variant:"caption",color:"text.secondary",fontWeight:"bold",children:"Disclaimer"}),(0,s.jsxs)(x.Z,{variant:"caption",color:"text.secondary",children:["This workflow is from internet. Please check the"," ",(0,s.jsx)(B.Z,{underline:"always",color:"inherit",href:c,target:"_blank",children:"source link"})," ","for more information. We embrace the open source community and appreciate the work of the author. If you are the owner of this workflow and want to claim the ownership or take it down, please join our"," ",(0,s.jsx)(B.Z,{underline:"always",color:"inherit",href:"https://discord.gg/XYjZZT3mXW",target:"_blank",children:"discord server"})," ","and contact the team. Thanks!"]})]}):(null==i?void 0:i.uid)?null:(0,s.jsxs)(h.Z,{direction:"column",spacing:1,sx:{maxWidth:"300px"},children:[(0,s.jsx)(x.Z,{variant:"caption",color:"text.secondary",fontWeight:"bold",children:"Disclaimer"}),(0,s.jsxs)(x.Z,{variant:"caption",color:"text.secondary",children:["This workflow is from internet. We embrace the open source community and appreciate the work of the author. If you are the owner of this workflow and want to claim the ownership or take it down, please join our"," ",(0,s.jsx)(B.Z,{underline:"always",color:"inherit",href:"https://discord.gg/XYjZZT3mXW",target:"_blank",children:"discord server"})," ","and contact the team. Thanks!"]})]})},ep=e=>{let{workflow:t,sx:n,isMobile:r}=e,{creator:i}=t||{},{uid:o,name:l,username:a,avatar:c,bio:d}=i||{};return l?(0,s.jsx)(_.Z,{sx:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"space-between",p:1,...n},children:(0,s.jsx)(_.Z,{sx:{overflow:"hidden"},children:i?(0,s.jsx)(B.Z,{href:`/workflows/@${a}`,target:"_blank",onClick:e=>{if(!a){e.preventDefault(),e.stopPropagation();return}window.open(`/workflows/@${a}`,"_blank"),e.preventDefault(),e.stopPropagation()},children:(0,s.jsxs)(h.Z,{direction:"row",children:[(0,s.jsx)(K.Z,{sx:{width:35,height:35},alt:l,src:(0,ee.wX)({avatar:c})}),(0,s.jsx)(x.Z,{variant:"body2",sx:{ml:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:"bold",lineHeight:"35.012px"},children:l})]})}):null})}):null},ef=n(58684),em=n(44754),eg=n(21461),ej=n(9392),ew=n(63888),eb=n(10986),ev=n(49120),eZ=n(7955),ey=n(38080);let ek=W()(()=>Promise.all([n.e(1309),n.e(339),n.e(1720)]).then(n.bind(n,1720)),{loadableGenerated:{webpack:()=>[1720]},ssr:!1});var eC=e=>{let{workflow:t,sx:n,isMobile:r,...i}=e,{enqueueSnackbar:o}=(0,eb.Ds)(),{data:l}=(0,ew.useSession)(),[c,d]=(0,C.on)(),[f,m]=(0,C.BV)(),{data:g}=(0,C.wN)({workflow_id:null==t?void 0:t.id,limit:10}),[j,w]=(0,a.useState)(!1),[b,v]=(0,a.useState)(0),[Z,y]=(0,a.useState)(!1),[k,I]=(0,a.useState)(""),[D,W]=(0,a.useState)(null),$=(0,u.b9)(S.c$),E=(0,a.useRef)(null);return(0,s.jsxs)(eh,{id:"wf-reviews",header:(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,s.jsx)(x.Z,{variant:"body1",fontWeight:"bold",color:"text.secondary",children:"Reviews"}),(0,s.jsx)(p.Z,{size:"small",color:"primary",variant:"outlined",onClick:e=>{w(!0),e.preventDefault(),e.stopPropagation(),$(e=>({...e,"wf-reviews":!0}))},children:"Add Review"})]}),expand:!0,...i,children:[!!j&&(0,s.jsxs)(h.Z,{direction:"column",spacing:2,sx:{borderStyle:"solid",borderColor:"#535353",borderWidth:"1px",my:2,p:2,position:"relative",maxWidth:"375px"},children:[(0,s.jsx)(x.Z,{variant:"body1",fontWeight:"bold",children:"Rate this workflow"}),(0,s.jsx)(_.Z,{children:(0,s.jsx)(G.Z,{precision:1,value:b,disabled:d,size:"large",onChange:(e,n)=>{v(n),c({workflow_id:t.id,rating:n}).then(e=>{let{review_id:t}=e;E.current=t,o("Thank you for your review",{variant:"success"}),y(!0)})}})}),d?(0,s.jsx)(_.Z,{sx:{position:"absolute",top:0,right:"15px"},children:(0,s.jsx)(em.Z,{size:"2rem"})}):null,!!Z&&(0,s.jsxs)(h.Z,{direction:"column",spacing:2,children:[(0,s.jsx)(x.Z,{variant:"body1",fontWeight:"bold",children:"Share more about your thoughts and experience"}),(0,s.jsx)(eg.Z,{size:"small",label:"",multiline:!0,minRows:4,placeholder:"",fullWidth:!0,value:k,onChange:e=>{I(e.target.value)},inputProps:{maxLength:800},helperText:(0,s.jsxs)(x.Z,{variant:"caption",component:"span",textAlign:"right",sx:{width:"100%",display:"inline-block"},children:[k.length," / 800"]})}),(0,s.jsx)(ef.Z,{variant:"contained",color:"primary",loading:m,disabled:!k,onClick:()=>{f({workflow_id:t.id,review_id:E.current,comment:k}).then(()=>{o("Thank you for your review",{variant:"success"}),w(!1)})},children:"Submit"})]})]}),(0,s.jsxs)(h.Z,{direction:"column",spacing:2,sx:{p:1},children:[(!g||0===g.length)&&(0,s.jsx)(x.Z,{variant:"body2",color:"text.secondary",children:"No reviews yet"}),g?g.map((e,n)=>{let{id:i,rating:o,comment:a,reviewer:c,author_reply:d,author_replied_at:u,created_at:f}=e||{},{uid:m,name:g,username:j,avatar:w}=c||{},{creator:b}=t??{},v=(0,ey.ET)({username:b.username,uid:b.uid}),Z=(0,ev.DY)(1e3*f._seconds),y=(null==u?void 0:u._seconds)?(0,ev.DY)(1e3*u._seconds):null;return(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsx)(G.Z,{precision:1,value:o,size:"small",readOnly:!0}),(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,s.jsx)(B.Z,{href:(0,ey.ET)({username:j,uid:m}),target:"_blank",sx:{"&:hover":{textDecoration:"underline"}},children:(0,s.jsx)(K.Z,{sx:{width:35,height:35},alt:g,src:(0,ee.wX)({avatar:w})})}),(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsx)(B.Z,{href:(0,ey.ET)({username:j,uid:m}),target:"_blank",sx:{"&:hover":{textDecoration:"underline"}},children:(0,s.jsx)(x.Z,{variant:"body2",children:g})}),(0,s.jsx)(x.Z,{variant:"caption",color:"text.secondary",children:Z})]})]}),(0,s.jsxs)(x.Z,{variant:"body2",children:[a,(null==b?void 0:b.uid)&&(null==l?void 0:l.sub)===b.uid&&!d?(0,s.jsx)(p.Z,{onClick:()=>{W(e.id)},size:"small",color:"info",variant:"text",sx:{ml:"1rem"},children:"Reply"}):null]}),D===e.id&&(0,s.jsx)(ek,{entity_type:eZ.H.workflow,entity_id:t.id,sx:{mt:2},isMobile:r,reviewId:e.id,onReplyCancel:()=>{W(null)}}),d?(0,s.jsxs)(h.Z,{sx:{pl:"2rem",mt:"1rem"},children:[(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,s.jsx)(B.Z,{href:v,target:"_blank",sx:{"&:hover":{textDecoration:"underline"}},children:(0,s.jsx)(K.Z,{sx:{width:35,height:35},alt:b.name,src:(0,ee.wX)({avatar:b.avatar})})}),(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsx)(B.Z,{href:v,target:"_blank",sx:{"&:hover":{textDecoration:"underline"}},children:(0,s.jsx)(x.Z,{variant:"body2",children:b.name})}),(0,s.jsx)(x.Z,{variant:"caption",color:"text.secondary",children:y})]})]}),(0,s.jsx)(x.Z,{variant:"body2",children:(0,ej.ZP)(d)})]}):null]},`review-${i}`)}):null]})]})};n(37967),n(19850),n(84930),n(42181),n(8765),n(10627);var eS=n(75952);n(43837),n(50235),(0,ea.ZP)(p.Z)`
  min-width: 36px;
  flex-shrink: 0;
  border-radius: 99px;
  background-color: ${e=>{let{theme:t}=e;return t.palette.background.default}};
`,(0,ea.ZP)(eS.o5)`
  height: auto;
  user-select: none;
`,(0,ea.ZP)($.Z)`
  height: 100%;
  background: ${e=>{let{theme:t}=e;return t.palette.grey[800]}};
`;var eI=n(55513),eD=e=>{let{workflow:t,assets:n,sx:r,isMobile:i}=e,[o,l]=(0,C.K9)();if(!n||0===n.length)return null;let a=e=>{let{id:r,file_name:i,url:l}=n[e],s=document.createElement("a");s.href=l,s.download=i,document.body.append(s),s.click(),s.remove(),o({workflow_id:t.id,asset_id:r})};return(0,s.jsx)(eh,{id:"wf-resources",title:`Resources (${n.length})`,expand:!0,children:(0,s.jsx)(h.Z,{direction:"column",component:"ul",spacing:2,children:n.map((e,t)=>{let{file_name:n,file_size:r,file_type:i,url:o,antivirus_scan_status:l,antivirus_scan_result:c}=e,u=(0,eI.G)(r,{round:1});return(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{py:0},children:[(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:"5px",children:[(0,s.jsx)(d.Z,{icon:"mingcute:safety-certificate-fill",color:"infected"===c?"#ff4d4f":"clean"===c?"#29cc24":"#3a3a3a"}),(0,s.jsxs)(x.Z,{variant:"caption",color:"text.secondary",children:[n," (",u,")"]})]}),(0,s.jsx)(p.Z,{variant:"outlined",size:"small",disabled:!o,onClick:()=>a(t),children:"Download"})]},`file-${t}`)})})})};n(51395),n(27427);var eW=n(48945),e_=n(89259);function e$(e){let{workflow_json:t,sx:n}=e;(0,c.useRouter)();let[r,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(t){l(!0);try{(0,e_.BJ)(t)}catch(e){i(!1)}finally{l(!1)}i(!0)}},[t]),t&&t.nodes)?(0,s.jsxs)(_.Z,{sx:{mt:2,...n},children:[o&&(0,s.jsx)(x.Z,{variant:"body2",children:"Validating ..."}),!o&&r&&(0,s.jsx)(eW.Z,{label:"✔ Runnable snapshot JSON",size:"small",sx:{backgroundColor:"#11a24d"}})]}):t&&0!==Object.keys(t).length&&Number.parseInt(Object.keys(t)[0])?(0,s.jsx)(_.Z,{sx:{mt:2,...n},children:(0,s.jsx)(eW.Z,{label:"Error: It seems that this is a workflow API JSON, not a workflow JSON",size:"small",sx:{backgroundColor:"#e37c0d"}})}):(0,s.jsx)(_.Z,{sx:{mt:2,...n},children:(0,s.jsx)(eW.Z,{label:"Error: Not valid workflow JSON",size:"small",sx:{backgroundColor:"#f44336"}})})}function eE(e){let{workflow_api_json:t,sx:n}=e;(0,c.useRouter)();let[r,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(t){l(!0);try{let e=t&&0!==Object.keys(t).length&&Object.keys(t).every(e=>!!Number.isInteger(Number.parseInt(e)));i(e)}catch(e){i(!1)}finally{l(!1)}i(!0)}},[t]),!1===r)?(0,s.jsx)(_.Z,{sx:{mt:2,...n},children:(0,s.jsx)(eW.Z,{label:"Error: Not valid workflow API JSON",size:"small",sx:{backgroundColor:"#f44336"}})}):(0,s.jsxs)(_.Z,{sx:{mt:2,...n},children:[o&&(0,s.jsx)(x.Z,{variant:"body2",children:"Validating ..."}),!o&&r&&(0,s.jsx)(eW.Z,{label:"✔ Workflow API JSON",size:"small",sx:{backgroundColor:"#11a24d"}})]})}var eR=n(47261);function eP(e){let{snapshot_json:t,sx:n}=e;(0,c.useRouter)();let[r,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[h,p]=(0,a.useState)(0),[f,m]=(0,a.useState)(0);return((0,a.useEffect)(()=>{if(t){l(!0);let{comfyui:e,git_custom_nodes:n,file_custom_nodes:r}=t||{};e&&n&&r?(i(!0),u(e),p((0,Q.Z)(n||{}).length),m(r.length)):i(!1),l(!1)}},[t]),!1===r)?(0,s.jsx)(_.Z,{sx:{mt:2,...n},children:(0,s.jsx)(eW.Z,{label:"Error: Not valid runnable snapshot JSON",size:"small",sx:{backgroundColor:"#f44336"}})}):(0,s.jsxs)(_.Z,{sx:{mt:2,...n},children:[o?(0,s.jsx)(x.Z,{variant:"body2",children:"Validating ..."}):null,!o&&r?(0,s.jsx)(eR.ZP,{title:(0,s.jsxs)(eR.k5,{children:[(0,s.jsxs)(x.Z,{variant:"body2",children:["ComfyUI hash: ",d]}),(0,s.jsxs)(x.Z,{variant:"body2",children:["Git custom node count: ",h]}),(0,s.jsxs)(x.Z,{variant:"body2",children:["File custom node count: ",f]})]}),anchor:(0,s.jsx)(eW.Z,{label:"✔ Runnable snapshot JSON",size:"small",sx:{backgroundColor:"#11a24d"}})}):null]})}var eO=n(78406),eA=n(57338),ez=n(17226),eN=n(94887);function eF(e){let{workflow:t,latestVersion:n,sx:r,isMobile:i}=e,{json_payload:o,api_json_payload:l}=n||{},{primitive_nodes:a,custom_nodes:c,checkpoints:u,loras:p,upscalers:f,num_nodes:m,num_primitive_nodes:g,num_custom_nodes:j,num_checkpoints:w,num_loras:b,num_upscalers:v}=(0,e_.BJ)(JSON.parse(o))||{};return(0,s.jsxs)(eh,{id:"wf-node-details",title:"Node Details",children:[(()=>{let e=Object.keys(a).sort().reduce((e,t)=>(e[t]=a[t],e),{});return(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,s.jsx)(d.Z,{icon:"material-symbols:network-node",width:15,height:15}),(0,s.jsxs)(x.Z,{variant:"body2",fontWeight:"bold",children:["Primitive Nodes (",g,")"]})]}),(0,s.jsx)(h.Z,{direction:"column",sx:{pl:2,pt:1},children:e?(0,eN.Z)(e).map((e,t)=>{let[n,r]=e;return(0,s.jsxs)(x.Z,{variant:"body2",children:[n,(0,s.jsx)(x.Z,{variant:"caption",color:"text.secondary",children:` (${r})`})]},`primitive-node-${n}`)}):null})]})})(),(()=>{let e=Object.keys(c).sort((e,t)=>{let n=c[e],r=c[t],{title:i}=n||{},{title:o}=r||{};return i.localeCompare(o)}).reduce((e,t)=>(e[t]=c[t],e),{});return(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,s.jsx)(d.Z,{icon:"cib:node-js",width:15,height:15}),(0,s.jsxs)(x.Z,{variant:"body2",fontWeight:"bold",children:["Custom Nodes (",j,")"]})]}),(0,s.jsx)(h.Z,{direction:"column",spacing:1,sx:{pl:2,pt:1},children:e?(0,eN.Z)(e).map((e,t)=>{let[n,r]=e,{nodes:i,title:o}=r||{},{title:l,author:a,description:c}=e_.Ew[n]||{};return(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsx)(e4,{anchor:(0,s.jsx)(B.Z,{href:n,target:"_blank",underline:"hover",children:(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",children:[n.includes("github.com")?(0,s.jsx)(d.Z,{icon:"mdi:github",width:15,height:15,sx:{mr:"3px"}}):(0,s.jsx)(d.Z,{icon:"mdi:launch",width:15,height:15,sx:{mr:"3px"}}),(0,s.jsx)(x.Z,{variant:"body2",children:o})]})}),title:l?(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsxs)(x.Z,{variant:"body2",fontWeight:"bold",children:[l,(0,s.jsx)(x.Z,{variant:"caption",children:` (${a})`})]}),(0,s.jsx)(x.Z,{variant:"caption",children:(0,s.jsx)(ez.wZ,{content:c})})]}):null}),(0,s.jsx)(eO.Z,{dense:!0,sx:{m:0,p:0},children:i?(0,eN.Z)(i).map((e,t)=>{let[n,r]=e;return(0,s.jsx)(eA.ZP,{dense:!0,sx:{p:0,m:0,pl:"19px"},children:(0,s.jsxs)(x.Z,{variant:"body2",children:[`- ${n}`,(0,s.jsx)(x.Z,{variant:"caption",color:"text.secondary",children:` (${r})`})]},`primitive-node-${n}`)},`custom-node-${n}-${t}`)}):null})]},`custom-node-${o}`)}):null})]})})()]})}function eT(e){let{latestVersion:t}=e,{json_payload:n}=t||{},{custom_nodes:r,checkpoints:i,loras:o,num_checkpoints:l,num_loras:a}=(0,e_.BJ)(JSON.parse(n))||{},c=(e,t)=>{let n=null;return n=e.includes("huggingface.co")?(0,s.jsx)("img",{src:"https://cdn.openart.ai/assets/hf_logo.webp",alt:"huggingface logo",width:15,height:15,style:{marginRight:"3px"}}):e.includes("civitai.com")?(0,s.jsx)("img",{src:"https://cdn.openart.ai/assets/civitai_logo.webp",alt:"civitai logo",width:15,height:15,style:{marginRight:"3px"}}):(0,s.jsx)(d.Z,{icon:"mdi:launch",width:15,height:15,sx:{mr:"3px"}}),(0,s.jsx)(B.Z,{href:e,target:"_blank",underline:"hover",children:(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",children:[n,(0,s.jsx)(x.Z,{variant:"body2",children:t})]})})};return(0,s.jsxs)(eh,{id:"wf-model-details",title:"Model Details",children:[(()=>{let e=Object.keys(i).sort().reduce((e,t)=>(e[t]=r[t],e),{});return(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,s.jsx)(d.Z,{icon:"clarity:block-line",width:15,height:15}),(0,s.jsxs)(x.Z,{variant:"body2",fontWeight:"bold",children:["Checkpoints (",l,")"]})]}),(0,s.jsx)(h.Z,{direction:"column",spacing:1,sx:{pl:2,pt:1},children:e?(0,eN.Z)(e).map((e,t)=>{let[n,r]=e,i=e_.pz.checkpoints[n];return(0,s.jsx)(h.Z,{direction:"column",children:(0,s.jsx)(e4,{sx:{maxWidth:"300px"},anchor:i?c(i,n):(0,s.jsx)(e4,{anchor:(0,s.jsx)(x.Z,{variant:"body2",children:n}),title:(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsx)(x.Z,{variant:"body2",fontWeight:"bold",children:"Missing download link?"}),(0,s.jsxs)(x.Z,{variant:"caption",children:["You can help add it"," ",(0,s.jsx)(B.Z,{href:"https://github.com/OpenArt-AI/workflow-model-list/blob/main/model-list.json",target:"_blank",underline:"hover",sx:{color:"#30ACF2",fontWeight:"bold"},children:"here"}),"!"]})]})}),title:null})},`checkpoint-${n}`)}):null})]})})(),(()=>{let e=Object.keys(o).sort().reduce((e,t)=>(e[t]=r[t],e),{});return(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,s.jsx)(d.Z,{icon:"clarity:block-line",width:15,height:15}),(0,s.jsxs)(x.Z,{variant:"body2",fontWeight:"bold",children:["LoRAs (",a,")"]})]}),(0,s.jsx)(h.Z,{direction:"column",spacing:1,sx:{pl:2,pt:1},children:e?(0,eN.Z)(e).map((e,t)=>{let[n,r]=e,i=e_.pz.loras[n];return(0,s.jsx)(h.Z,{direction:"column",children:(0,s.jsx)(e4,{sx:{maxWidth:"300px"},anchor:i?c(i,n):(0,s.jsx)(e4,{anchor:(0,s.jsx)(x.Z,{variant:"body2",children:n}),title:(0,s.jsxs)(h.Z,{direction:"column",children:[(0,s.jsx)(x.Z,{variant:"body2",fontWeight:"bold",children:"Missing download link?"}),(0,s.jsxs)(x.Z,{variant:"caption",children:["You can help add it"," ",(0,s.jsx)(B.Z,{href:"https://github.com/OpenArt-AI/workflow-model-list/blob/main/model-list.json",target:"_blank",underline:"hover",sx:{color:"#30ACF2",fontWeight:"bold"},children:"here"}),"!"]})]})}),title:null})},`lora-${n}`)}):null})]})})()]})}var eY=e=>{let{allVersions:t,sx:n,isMobile:r,workflowId:i,...o}=e,[l,c]=(0,a.useState)({}),[u,p]=(0,a.useState)(""),[f]=(0,C.EQ)({onMutate:e=>{let{version_tag:t}=e;c(e=>({...e,[t]:!0}))},onSettled:()=>{c(e=>({...e,[u]:!1})),p("")}});if(!t||0===t.length)return null;let m=e=>{p(e),f({workflow_id:i,version_tag:e})};return(0,s.jsx)(eh,{id:"wf-versions",title:`Versions (${t.length})`,...o,children:(0,s.jsx)(h.Z,{direction:"column",component:"ul",spacing:1,children:t.map((e,t)=>{let{tag:n,created_at:r}=e,i=l[n]||!1;return(0,s.jsx)(_.Z,{component:"li",sx:{pl:1,listStyle:"none"},children:(0,s.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsxs)(x.Z,{variant:"body2",color:"text.secondary",children:["- ",n,"latest"===n&&(0,s.jsx)(s.Fragment,{children:` (${(0,ev.DY)(1e3*r)})`})]}),(0,s.jsx)(ef.Z,{loading:i,variant:"contained",sx:e=>{let{palette:t}=e;return{backgroundColor:t.primary.main,paddingY:"1px",paddingX:"0px",minWidth:"35px","&:hover":{backgroundColor:t.primary.dark,color:"#141818"}}},onClick:()=>m(n),children:(0,s.jsx)(d.Z,{icon:"ic-round-download",width:20,height:20})})]})},`${n}-${t}`)})})})},eM=n(97348);n(48122);var eL=n(62205),eq=n(2656),eG=n(52131),eB=n(66747),eH=n(37178),eJ=n(91210);let eU=(0,eB.s)({}),eX=(0,eB.s)({}),eV=e=>{let{workflow_id:t,version_id:n,isAdmin:r,isWorkflowAdmin:i,defaultCloudID:o,currentDeployment:l,initStatus:s,isFlowAppManagerTester:c,isOwner:d,onError:h,onSuccess:x}=e,[p,f]=(0,u.KO)(eU),[m]=(0,eH.tX)(),[g,j]=(0,u.KO)(eX),[w,b]=(0,a.useState)(l),[v,Z]=(0,a.useState)(s),[y,k]=(0,a.useState)(s),[C,S]=(0,a.useState)(o),I=p[t]??!1,D=e=>{Z(y),k(e)};(0,a.useEffect)(()=>{l&&b(l)},[l]);let{refetch:W,isFetching:_}=(0,eH.ym)({workflow_id:t,version_id:n,enabled:r||c&&d||i,onError:e=>{null==h||h(e)},onDeployed:e=>{k(eJ.fY.DEPLOYED),$(!1),(null==e?void 0:e.deployment)&&b(null==e?void 0:e.deployment),(null==e?void 0:e.cloud_app_id)&&S(null==e?void 0:e.cloud_app_id),v&&v!==eJ.fY.DEPLOYED&&(null==x||x(),Z(eJ.fY.DEPLOYED))},onFailed:e=>{k(eJ.fY.FAILED),$(!1),v!==eJ.fY.FAILED&&(null==h||h(e),Z(eJ.fY.FAILED))},onDeploying:()=>{$(!0),D(eJ.fY.DEPLOYING)}}),$=e=>{j(n=>{n[t]=e})},E=async()=>{$(!0),await m({workflow_id:t,version_id:n,force_reinstall:I}),D(eJ.fY.DEPLOYING),await W()};return{forceReinstall:I,cloudAppID:C,deployStatus:y,isDeploying:g[t]??!1,deployment:w??{},isFetchingState:_,deploy:E,setForceReinstall:e=>{f(n=>{n[t]=e})}}};(i=l||(l={})).T4="t4",i.A10="a10g",i.A100="a100";let eK=["DPi9F7xpDnDYVGulvKCq","yX7UGJvOMSYBPUrMzL7r"],eQ=(0,eB.s)({}),e0=e=>{let{session_id:t,workflow_id:n,initStatus:r,onReady:i,onError:o}=e,[l,s]=(0,u.KO)(eQ),[c,d]=(0,a.useState)(t),[h,x]=(0,a.useState)(r),[p,f]=(0,a.useState)(r),m=eK.includes(n),[g,j]=(0,a.useState)(m?"a10g":"t4"),[w]=(0,eH.VZ)(),b=e=>{s(t=>({...t,[n]:e}))};(0,a.useEffect)(()=>{t&&d(t)},[t]);let{data:{server_status:v}}=(0,eH.pB)({session_id:c??t,enabled:!!c,onReady:e=>{b(!1),f(eJ.mH.READY),h&&h!==eJ.mH.READY&&(null==i||i(e),x(eJ.mH.READY))},onPending:()=>{b(!0),x(p),f(eJ.mH.PENDING)},onCreating:()=>{b(!0),x(p),f(eJ.mH.CREATED)},onError:e=>{b(!1),null==o||o(e)}}),Z=l[n]??!1,y=async e=>{b(!0);let{session_id:t}=await w({workflow_id:e,gpu_type:g});x(p),f(eJ.mH.PENDING),d(t)};return(0,a.useEffect)(()=>{v&&(x(p),f(v))},[v]),{launchStatus:p,loadingStatus:Z,launch:y,cloudWorkflowGPUType:g,setCloudWorkflowGPUType:j}};var e1=n(22289),e2=n(66603),e5=n(27373);let e3=[{key:"copyUrl",label:"Copy URL",icon:"ic:content-copy"},{key:"twitter",label:"Twitter",icon:"logos:twitter"},{key:"reddit",label:"Reddit",icon:"logos:reddit-icon"}];var e7=e=>{var t;let{workflow:n,deployedWorkflowVersion:r,allVersions:i,isWorkflowApp:o=!1,isWorkflow:l=!1,isOwner:g=!1,isAdmin:j=!1,isWorkflowAdmin:w=!1,isFlowAppManagerTester:b=!1,isRunnableTester:Z=!1,isAuthenticated:k=!1}=e,I=(0,c.useRouter)(),{enqueueSnackbar:D}=(0,eb.Ds)(),{id:W,cloud_app_id:_,is_runnable:$,flow_app_config:E,deployment_version_id:R}=n||{};eK.includes(W);let{activeSessions:P,setDisplayActiveSession:O,openSessionManagerModal:A,stopCloudWorkflowSession:z,addLoadingSession:N,isStoppingCloudWorkflow:F}=(0,eG.b)({onStop:()=>{D("Stopped the session.",{variant:"success"})},onStopError:()=>{D("Failed to stop the session.",{variant:"error"})}}),T=(0,u.b9)(S.Re),[Y,M]=(0,a.useState)(null),[L,q]=(0,a.useState)(!1),{data:G}=(0,e1.CD)(),{cloud_run_beta_access:B}=G||{},[H,J]=(0,v.Z)("like-workflows",{}),[U,X]=(0,a.useState)(R),[V,K]=(0,a.useState)(r),{cloudAppID:Q,deploy:ee,isDeploying:et}=eV({workflow_id:W,version_id:null==V?void 0:V.id,isAdmin:j,isWorkflowAdmin:w,isFlowAppManagerTester:b,isOwner:g,defaultCloudID:_,initStatus:null==V?void 0:null===(t=V.deployment)||void 0===t?void 0:t.status,currentDeployment:null==V?void 0:V.deployment,onSuccess:()=>{D("Deployed successfully \uD83C\uDF89",{variant:"success"}),X(V.id)},onError:e=>{D(e,{variant:"error"})}}),{data:en}=(0,eH.w5)({workflow_id:W,enabled:!!Q}),{id:er,status:ei}=(null==en?void 0:en[0])||{},{launchStatus:eo,loadingStatus:el,launch:es,cloudWorkflowGPUType:ea,setCloudWorkflowGPUType:ec}=e0({workflow_id:W,session_id:er,initStatus:ei,onReady:e=>{D("Successfully launched the session.",{variant:"success"});let{url:t}=e||{};N({session_id:er,url:t}),O(er),function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(L||e)&&(A(),q(!1))}()}});eo=eo||ei;let[ed]=(0,C.Q0)(),[eu,eh]=(0,C.EQ)(),ex=()=>{M(null)},ep=async e=>{let{id:t,key:r,name:i,description:o,creator:l}=n||{},{username:s}=l||{},a=`https://openart.ai/workflows/${s||"-"}/${r}/${t}`,c=`Amazing #ComfyUI workflow: ${i} - ${(0,y.$G)(o,100)}`;switch(e.key){case"twitter":em(`https://twitter.com/intent/tweet${(0,e_.jv)({url:a,text:c,related:"openart_ai, openartai",via:"openart_ai"})}`),e5.B("share_workflow",{category:"Workflow Details",label:"twitter",value:a});break;case"reddit":em(`https://www.reddit.com/submit${(0,e_.jv)({url:a,title:c})}`),e5.B("share_workflow",{category:"Workflow Details",label:"reddit",value:a});break;case"copyUrl":try{navigator.clipboard.writeText(a),D("URL copied to clipboard!",{variant:"success"}),e5.B("share_workflow",{category:"Workflow Details",label:"url",value:a})}catch{D("Your browser does not support.",{variant:"error"})}}ex()},em=e=>{let t=Math.max(.5*screen.width,512),n=Math.max(.5*screen.height,384),r=screen.width/2-t/2,i=screen.height/2-n/2;return window.open(e,"",`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${t}, height=${n}, top=${i}, left=${r}`)};(0,a.useEffect)(()=>{if((null==i?void 0:i.length)>0){let e=i.filter(e=>{var t;return(null===(t=e.deployment)||void 0===t?void 0:t.status)===eJ.fY.DEPLOYED}).sort((e,t)=>t.created_at-e.created_at),t=i.find(e=>{var t;return(null===(t=e.deployment)||void 0===t?void 0:t.status)===eJ.fY.DEPLOYING}),n=null;n=e&&e.length>0?e[0]:i[0];let r=e.find(e=>e.id===U)||n;K(t??r)}},[i]);let eg=!!H[W];return(0,s.jsxs)(h.Z,{direction:"column",spacing:2,children:[(0,s.jsx)(h.Z,{direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:2,children:l?(0,s.jsx)(ef.Z,{loading:eh,variant:"contained",startIcon:(0,s.jsx)(d.Z,{icon:"ic-round-download",width:20,height:20}),sx:{backgroundColor:"#eeeeee","&:hover":{backgroundColor:"#bdbdbd",color:"#141818"}},onClick:()=>{eu({workflow_id:W})},children:"Download"}):null}),(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:2,children:[l&&$?(0,s.jsx)(p.Z,{variant:"contained",startIcon:(0,s.jsx)(d.Z,{icon:"ic:baseline-play-arrow",width:20,height:20}),sx:{backgroundColor:"#30ACF2",color:"#FBFBFD","&:hover":{backgroundColor:"#30ACF2",color:"#FBFBFD"}},onClick:()=>{var e;I.push(`/flow-apps/${(null==n?void 0:null===(e=n.creator)||void 0===e?void 0:e.username)||"-"}/${n.key}/${n.id}`)},children:"Run"}):null,(0,s.jsx)(m.Z,{sx:{backgroundColor:"rgba(67, 73, 75, 0.5)"},onClick:()=>{ed({workflow_id:W,like:!eg}).then(()=>{T(e=>({...e,[W]:!eg}))}),J({...H,[W]:!eg})},children:(0,s.jsx)(d.Z,{icon:eg?"ic:round-favorite":"ic:round-favorite-border",...eg?{color:"rgb(250, 82, 82)"}:{},width:20,height:20})}),(0,s.jsx)(m.Z,{sx:{backgroundColor:"rgba(67, 73, 75, 0.5)"},onClick:e=>{M(e.currentTarget)},children:(0,s.jsx)(d.Z,{icon:"uil:share",width:20,height:20})}),o&&(null==E?void 0:E.open_source_workflow)!==!1?(0,s.jsx)(f.Z,{title:"View workflow details",children:(0,s.jsx)(m.Z,{sx:{backgroundColor:"rgba(67, 73, 75, 0.5)"},onClick:()=>{I.push(`/workflows/${n.creator.username}/${n.key}/${n.id}`)},children:(0,s.jsx)(d.Z,{icon:"ic:round-logo-dev",width:20,height:20})})}):null,(0,s.jsx)(e2.Z,{open:!!Y,anchorEl:Y,onClose:ex,children:(0,s.jsx)(h.Z,{children:e3.map(e=>(0,s.jsxs)(eq.Z,{onClick:()=>ep(e),children:[(0,s.jsx)(d.Z,{icon:e.icon,width:16,height:16,mr:1}),(0,s.jsx)(x.Z,{variant:"subtitle2",children:e.label})]},e.label))})})]})]})},e8=n(46837);function e4(e){let{anchor:t,tipText:n="",size:r=15,sx:i,...o}=e;return n||o.title?(0,s.jsxs)(_.Z,{style:{display:"inline-flex",alignItems:"center",cursor:"pointer"},children:[t,(0,s.jsx)(f.Z,{enterTouchDelay:0,sx:{display:"inline-flex",color:"",...i},PopperProps:{sx:{"& .MuiTooltip-tooltip":{maxWidth:{xs:"100vw",sm:"400px"}}}},placement:"top",title:n?(0,s.jsx)(e6,{children:n}):o.title,...o,children:(0,s.jsx)(e8.Z,{sx:{marginLeft:"5px",height:r,width:r,color:"rgba(255, 255, 255, 0.5)"}})})]}):t}function e6(e){let{children:t}=e;return(0,s.jsx)(x.Z,{variant:"caption",children:t})}var e9=n(85814),te=n(29573),tt=n(81868),tn=e=>{var t;let{isMobile:n}=e,[r,i]=(0,a.useState)(!1),o=a.useRef(null),l=(0,c.useRouter)(),u=l.pathname,[f,m]=(0,a.useState)(void 0!==l.query.custom_node),g=void 0!==l.query.custom_node||f,j=(0,Q.Z)(et.Q6),w=(e,t)=>{i(!1);let{query:n={}}=l;t?l.push({pathname:u},void 0,{shallow:!0}):l.push({pathname:u,query:{...n,category:e}},void 0,{shallow:!0})};return(0,s.jsxs)(h.Z,{direction:"column",alignItems:"flex-start",justifyContent:"center",spacing:1,sx:{borderRadius:"5px"},children:[(0,s.jsx)(p.Z,{ref:o,variant:"outlined",sx:{border:"2px solid #343839","&:hover":{border:"2px solid #343839"}},startIcon:(0,s.jsx)(d.Z,{icon:"material-symbols:category-outline-rounded",width:20,height:20}),endIcon:(0,s.jsx)(d.Z,{icon:r?"mdi:chevron-up":"mdi:chevron-down",width:20,height:20}),onClick:()=>i(!0),children:(0,s.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,s.jsx)(x.Z,{variant:"body2",fontWeight:600,children:"Categories"}),(null===(t=l.query)||void 0===t?void 0:t.category)?(0,s.jsx)(eW.Z,{label:l.query.category,variant:"outlined",size:"small",sx:{fontSize:"13px",fontWeight:500,cursor:"pointer",backgroundColor:"#7c3dff",color:"#fff","&:hover":{backgroundColor:"#7c3dff !important",color:"#fff !important"}},onDelete:e=>{e.stopPropagation(),l.push({pathname:u,query:(0,te.Z)(l.query,["category"])},void 0,{shallow:!0})}}):null]})}),(0,s.jsx)(e9.ZP,{open:r,anchorEl:o.current,onClose:()=>i(!1),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,sx:{...n?{width:"100%",overflowX:"scroll"}:{flexWrap:"wrap"},p:1},onClick:()=>{m(!g)},children:[(0,s.jsx)(eW.Z,{label:"Workflow Templates",size:"medium",variant:"outlined",sx:{fontSize:"13px",fontWeight:500,cursor:"pointer",backgroundColor:"#1c1c1c",color:"#fff","&:hover":{backgroundColor:"#0e0e0e !important",color:"#fff !important"}},onClick:()=>{l.push({pathname:tt.VU},void 0,{shallow:!0})}}),(0,s.jsx)(_.Z,{sx:{height:"25px",width:"1px",border:"1px solid #f1f1f133"}}),j.map(e=>{let t=l.query.category===e;return(0,s.jsx)(eW.Z,{label:`${e}`,size:"medium",variant:"outlined",sx:{fontSize:"13px",fontWeight:500,cursor:"pointer",backgroundColor:t?"#7c3dff":"#1c1c1c",color:"#fff","&:hover":{backgroundColor:t?"#7c3dff !important":"#0e0e0e !important",color:"#fff !important"}},onClick:()=>w(e,t)},e)})]})})]})};n(25271);var tr=n(80155);let ti=e=>{let{days:t,setDays:n}=e;return(0,s.jsx)(eM.Z,{sx:{minWidth:120,ml:1},children:(0,s.jsxs)(eL.Z,{labelId:"select-days-label",id:"select-days",value:t??"all",onChange:e=>{n(e.target.value)},size:"small",displayEmpty:!0,inputProps:{"aria-label":"select-days"},sx:{color:"white","&:before":{borderColor:"white"},"&:after":{borderColor:"white"}},children:[(0,s.jsx)(eq.Z,{value:"all",children:"All times"}),(0,s.jsx)(eq.Z,{value:1,children:"24 hours"}),(0,s.jsx)(eq.Z,{value:7,children:"7 days"}),(0,s.jsx)(eq.Z,{value:30,children:"30 days"})]})})},to=e=>{let{label:t,sort:n,active_sort:r,onSorterChange:i,sx:o}=e;return(0,s.jsx)(p.Z,{variant:void 0===n||n===r?"outlined":"text",sx:{backgroundColor:void 0===n||n===r?"transparent":"#131618",borderRadius:"5px 0px 0px 5px",fontWeight:600,border:`2px solid ${void 0===n||n===r?"#343839":"#131618"}`,"&:hover":{border:"2px solid #343839"},color:void 0===n||n===r?"white":"rgba(232, 236, 239, 0.75)",...o},startIcon:void 0===n||n===r?(0,s.jsx)(tr.Z,{}):null,onClick:()=>i(r),children:t})};var tl=e=>{let{isMobile:t}=e,n=(0,c.useRouter)(),{sort:r="trending",days:i="1"}=n.query,{enqueueSnackbar:o}=(0,eb.Ds)(),l=n.pathname,a=e=>{let{query:t={}}=n;n.push({pathname:l,query:{...t,sort:e}},void 0,{shallow:!0})};return(0,s.jsx)(h.Z,{direction:"column",alignItems:"flex-start",justifyContent:"center",children:(0,s.jsxs)(h.Z,{direction:"row",children:[(0,s.jsx)(to,{label:"Latest",active_sort:"latest",sort:r,onSorterChange:a}),(0,s.jsx)(to,{label:"Trending",active_sort:"trending",sort:r,onSorterChange:a,sx:{borderRadius:"0"}}),(0,s.jsx)(to,{label:"Most Downloaded",active_sort:"most_downloaded",sort:r,onSorterChange:a,sx:{borderRadius:"0px 5px 5px 0px"}}),"latest"===r?null:(0,s.jsx)(ti,{days:i,setDays:e=>{let{query:t={}}=n;n.push({pathname:l,query:{...t,days:e}},void 0,{shallow:!0})}})]})})}},38080:function(e,t,n){n.d(t,{ET:function(){return r}});let r=e=>{let{username:t,uid:n}=e;return`/workflows/@${t}/id/${n}`}},95860:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(75271),i=n(51074),o=n.n(i);function l(e,t,n){let[i,l]=(0,r.useState)(t);return(0,r.useEffect)(()=>{let t=new(o())().getItem(e);t&&l(JSON.parse(t))},[]),(0,r.useEffect)(()=>{let t=t=>{t.storageArea===localStorage&&t.key===e&&l(JSON.parse(t.newValue))};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[e,t]),[i,t=>{let r=new(o());l(i=>{let o="function"==typeof t?t(i):t;return r.setItem(e,JSON.stringify(o),n),o})}]}},47983:function(e,t,n){n.d(t,{f:function(){return r}});let r=(0,n(81192).cn)(!1)},7955:function(e,t,n){var r,i;n.d(t,{H:function(){return r}}),(i=r||(r={})).workflow="workflow",i.image="image"}}]);