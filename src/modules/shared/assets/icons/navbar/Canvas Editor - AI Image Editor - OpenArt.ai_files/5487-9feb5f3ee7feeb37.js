"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5487],{63311:function(e,t,i){i.d(t,{Kz:function(){return d},Oq:function(){return s},TJ:function(){return o},UG:function(){return a},WK:function(){return r},l2:function(){return n},wf:function(){return l}});let r=[{id:2,name:"Cute kids",url:"https://cdn.openart.ai/music/Cute/Cute kids_1750728427780.MP3",duration:215,genre:"Chiptune",mood:"Cute, Whimsical, Cheerful, Retro, Playful, Nostalgic, Light, Groovy",tempo:"Medium",story_media_resources_id:"ts9Sy7RgEt9TI7EvUxxG",has_lyrics:!1},{id:3,name:"Fast food",url:"https://cdn.openart.ai/music/Cute/Fast food_1750728427682.MP3",duration:136,genre:"Children's Music",mood:"Cute, Playful, Cheerful, Whimsical, Uplifting, Light, Carefree, Nostalgic",tempo:"Medium",story_media_resources_id:"DbR4NhrcysrUus4p2FNO",has_lyrics:!1},{id:4,name:"French Cuisine",url:"https://cdn.openart.ai/music/Cute/French Cuisine_1750728427713.MP3",duration:130,genre:"Folk",mood:"Cute, Cheerful, Nostalgic, Whimsical, Uplifting, Playful, Romantic, Dreamy, Vintage",tempo:"Fast",story_media_resources_id:"ka1jS0TeKOPsZk3PPGLO",has_lyrics:!1},{id:5,name:"Fresh and Fun",url:"https://cdn.openart.ai/music/Cute/Fresh and Fun_1750728427723.MP3",duration:133,genre:"Jazz",mood:"Cute, Cheerful, Energetic, Groovy, Whimsical, Uplifting, Vintage, Social, Confident",tempo:"Fast",story_media_resources_id:"WGkBchNpnAYBS1SeHTeR",has_lyrics:!1},{id:6,name:"Funny Children Tune",url:"https://cdn.openart.ai/music/Cute/Funny Children Tune_1750728427733.MP3",duration:109,genre:"Children's Music",mood:"Cute, Cheerful, Light, Whimsical, Calm, Nostalgic, Innocent, Peaceful",tempo:"Medium",story_media_resources_id:"kH3kydmYmA1dmP4G4yGr",has_lyrics:!1},{id:7,name:"Happy Day",url:"https://cdn.openart.ai/music/Cute/Happy Day_1750728427750.MP3",duration:142,genre:"Pop / Children's Music",mood:"Cute, Cheerful, Uplifting, Happy, Playful, Optimistic, Bright, Innocent",tempo:"Medium",story_media_resources_id:"URQHoEOlo49IutQ6XEJO",has_lyrics:!1},{id:9,name:"Piano Popcorn Party",url:"https://cdn.openart.ai/music/Cute/Piano Popcorn Party_1750728427760.MP3",duration:108,genre:"Video Game Music, Ragtime",mood:"Cute, Energetic, Playful, Cheerful, Whimsical, Retro, Stimulating, Chaotic",tempo:"Fast",story_media_resources_id:"R85WlXAcsRGFlohxvihx",has_lyrics:!1},{id:10,name:"Summer Dog",url:"https://cdn.openart.ai/music/Cute/Summer Dog_1750728427768.MP3",duration:179,genre:"Lo-fi Hip-Hop",mood:"Cute, Relaxing, Groovy, Cheerful, Calm, Reflective, Smooth, Uplifting",tempo:"Medium",story_media_resources_id:"zo23ZGS3HibVwwjnkcYV",has_lyrics:!1},{id:12,name:"We Did It",url:"https://cdn.openart.ai/music/Cute/We Did It_1750728431955.MP3",duration:37,genre:"Children's Music, Video Game Music",mood:"Cute, Triumphant, Celebratory, Cheerful, Energetic, Uplifting, Retro, Childlike",tempo:"Fast",story_media_resources_id:"4wmwDXtHR8ijDt68XRFJ",has_lyrics:!0},{id:13,name:"Born at dawn",url:"https://cdn.openart.ai/music/Dynamic/Born at dawn_1750728432021.MP3",duration:145,genre:"Progressive House",mood:"Dynamic, Energetic, Euphoric, Uplifting, Party, Triumphant, Pulsing, Hopeful, Celebratory",tempo:"Fast",story_media_resources_id:"q1qRpxTegTwl1jyx6xea",has_lyrics:!1},{id:14,name:"Daredevil",url:"https://cdn.openart.ai/music/Dynamic/Daredevil_1750728431995.MP3",duration:117,genre:"Hard Rock",mood:"Dynamic, Energetic, Confident, Groovy, Rebellious, Party, Motivational, Retro",tempo:"Fast",story_media_resources_id:"3JsOoqy7C48ekwkvCFMp",has_lyrics:!1},{id:16,name:"Funk Commercial",url:"https://cdn.openart.ai/music/Dynamic/Funk Commercial_1750728431966.MP3",duration:80,genre:"Funk",mood:"Dynamic, Groovy, Energetic, Confident, Retro, Uplifting, Smooth, Social",tempo:"Fast",story_media_resources_id:"m22MuxXPkuZ98ztsy7VK",has_lyrics:!1},{id:17,name:"Funk Disco",url:"https://cdn.openart.ai/music/Dynamic/Funk Disco_1750728432007.MP3",duration:92,genre:"Funk Pop",mood:"Dynamic, Energetic, Groovy, Uplifting, Confident, Party, Retro, Funky",tempo:"Fast",story_media_resources_id:"OSweR2wTV0klN0KUIQwM",has_lyrics:!1},{id:18,name:"God Bless the Funk",url:"https://cdn.openart.ai/music/Dynamic/God Bless the Funk_1750728432055.MP3",duration:166,genre:"Funk",mood:"Dynamic, Energetic, Groovy, Party, Retro, Uplifting, Confident, Cheerful",tempo:"Fast",story_media_resources_id:"1JTSO8rHpQkE3BsohPor",has_lyrics:!1},{id:20,name:"Invincible",url:"https://cdn.openart.ai/music/Dynamic/Invincible_1750728432044.MP3",duration:130,genre:"Electronic",mood:"Dynamic, Energetic, Intense, Driving, Motivational, Dark, Pulsing, Confident, Modern",tempo:"Fast",story_media_resources_id:"Kk0CPQsRaaJbGj89uJCg",has_lyrics:!1},{id:23,name:"Phonk",url:"https://cdn.openart.ai/music/Dynamic/Phonk_1750728435666.MP3",duration:82,genre:"Electronic / Phonk",mood:"Dynamic, Energetic, Aggressive, Confident, Dark, Motivational, Rebellious, Pulsing",tempo:"Fast",story_media_resources_id:"nap7TR2OZsB7AmyBtA2P",has_lyrics:!1},{id:24,name:"Pop Funky 60",url:"https://cdn.openart.ai/music/Dynamic/Pop Funky 60_1750728435658.MP3",duration:60,genre:"Funk, Synth-pop",mood:"Dynamic, Groovy, Energetic, Uplifting, Confident, Retro, Cheerful, Party",tempo:"Fast",story_media_resources_id:"MLOGt0EM9mDrnrYQD0f4",has_lyrics:!1},{id:25,name:"Run",url:"https://cdn.openart.ai/music/Dynamic/Run_1750728435675.MP3",duration:125,genre:"Electronic",mood:"Dynamic, Energetic, Uplifting, Motivational, Joyful, Hopeful, Confident, Celebratory, Pulsing",tempo:"Fast",story_media_resources_id:"x5oo3t1p1yXfTQsypYMN",has_lyrics:!1},{id:27,name:"The Good Vibe",url:"https://cdn.openart.ai/music/Dynamic/The Good Vibe_1750728435686.MP3",duration:97,genre:"Funk / Hip-Hop",mood:"Dynamic, Groovy, Relaxing, Vintage, Confident, Smooth, Reflective, Nostalgic",tempo:"Medium",story_media_resources_id:"lkXjQhfZXgPWPR0BX7in",has_lyrics:!1},{id:28,name:"Upbeat Fashion Energetic Pop",url:"https://cdn.openart.ai/music/Dynamic/Upbeat Fashion Energetic Pop_1750728435710.MP3",duration:97,genre:"Electronic / Dance",mood:"Dynamic, Energetic, Groovy, Happy, Motivational, Celebratory, Confident, Retro, Uplifting",tempo:"Fast",story_media_resources_id:"9wnk8OPmNmy91aCuKyfZ",has_lyrics:!1},{id:30,name:"WAKO",url:"https://cdn.openart.ai/music/Dynamic/WAKO_1750728435718.MP3",duration:164,genre:"Electronic",mood:"Dynamic, Energetic, Intense, Party, Confident, Aggressive, Rebellious, Groovy, Dark",tempo:"Fast",story_media_resources_id:"vVOsO1eMpYkUw2GIVzXr",has_lyrics:!0},{id:31,name:"Beach Vibes",url:"https://cdn.openart.ai/music/Light and Cheerful/Beach Vibes_1750728439351.MP3",duration:177,genre:"Funk",mood:"Light and Cheerful, Relaxing, Groovy, Cheerful, Smooth, Reflective, Modern, Flowing, Confident",tempo:"Medium",story_media_resources_id:"sdfcszaCfNkudt8CPR52",has_lyrics:!1},{id:33,name:"Feeling Light",url:"https://cdn.openart.ai/music/Light and Cheerful/Feeling Light_1750728439390.MP3",duration:249,genre:"Alternative Rock",mood:"Light and Cheerful, Reflective, Nostalgic, Melancholic, Calm, Introspective, Yearning, Bittersweet, Soothing",tempo:"Medium",story_media_resources_id:"kpPPdsWfk3fchF7UFXW0",has_lyrics:!1},{id:35,name:"Ginger Steps",url:"https://cdn.openart.ai/music/Light and Cheerful/Ginger Steps_1750728439437.MP3",duration:141,genre:"Folk",mood:"Light and Cheerful, Calm, Peaceful, Soothing, Cheerful, Tender, Nostalgic, Whimsical, Light",tempo:"Medium",story_media_resources_id:"LEN0R5xZQL5yGAHeRMJO",has_lyrics:!1},{id:38,name:"Mellow Tides",url:"https://cdn.openart.ai/music/Light and Cheerful/Mellow Tides_1750728439469.MP3",duration:239,genre:"Classical",mood:"Light and Cheerful, Calm, Peaceful, Reflective, Tender, Dreamy, Nostalgic, Hopeful, Intimate, Soothing",tempo:"Slow",story_media_resources_id:"ev6GrNrNrCLG3aWaMRJ5",has_lyrics:!1},{id:41,name:"Petal Snack",url:"https://cdn.openart.ai/music/Light and Cheerful/Petal Snack_1750728444059.MP3",duration:366,genre:"Folk",mood:"Light and Cheerful, Cheerful, Uplifting, Lighthearted, Whimsical, Peaceful, Innocent, Relaxing",tempo:"Medium",story_media_resources_id:"rlWKvNLwcBw0KMkzwIS9",has_lyrics:!1},{id:43,name:"Silent Pulse",url:"https://cdn.openart.ai/music/Light and Cheerful/Silent Pulse_1750728444179.MP3",duration:60,genre:"Lo-fi Hip-Hop, Jazz",mood:"Light and Cheerful",tempo:"Medium",story_media_resources_id:"lE62MYnImhjNlutAur6G",has_lyrics:!1},{id:44,name:"Sky Island",url:"https://cdn.openart.ai/music/Light and Cheerful/Sky Island_1750728444145.MP3",duration:130,genre:"80s Pop, Synth-pop",mood:"Light and Cheerful, Uplifting, Energetic, Nostalgic, Cheerful, Retro, Motivational, Groovy, Confident",tempo:"Fast",story_media_resources_id:"aHzy4ScR9mLRDvrv2scx",has_lyrics:!1},{id:45,name:"Song About U",url:"https://cdn.openart.ai/music/Light and Cheerful/Song About U_1750728444155.MP3",duration:267,genre:"Lo-fi Hip-Hop, R&B",mood:"Light and Cheerful, Calm, Nostalgic, Relaxing, Reflective, Dreamy, Intimate, Smooth, Peaceful",tempo:"Slow",story_media_resources_id:"B9vsha81g2hvx4ysHA4y",has_lyrics:!1},{id:46,name:"Stay Strong",url:"https://cdn.openart.ai/music/Light and Cheerful/Stay Strong_1750728444121.MP3",duration:336,genre:"Acid Jazz",mood:"Light and Cheerful, Relaxing, Groovy, Smooth, Nostalgic, Reflective, Uplifting, Atmospheric, Calm",tempo:"Medium",story_media_resources_id:"f6ACcfQ5bCPlfiQqbb9Y",has_lyrics:!1},{id:47,name:"Summer Embrace",url:"https://cdn.openart.ai/music/Light and Cheerful/Summer Embrace_1750728444104.MP3",duration:168,genre:"Electronic",mood:"Light and Cheerful, Uplifting, Relaxing, Groovy, Reflective, Hopeful, Nostalgic, Smooth",tempo:"Medium",story_media_resources_id:"fALKxl2XuHoDBM3XTlmR",has_lyrics:!1},{id:48,name:"SunDance Cool Happy Uplifting",url:"https://cdn.openart.ai/music/Light and Cheerful/SunDance Cool Happy Uplifting_1750728444184.MP3",duration:177,genre:"Funk",mood:"Light and Cheerful, Groovy, Energetic, Uplifting, Confident, Stylish, Retro, Motivational, Party",tempo:"Fast",story_media_resources_id:"bxSsdsisLXFtqOWzifIE",has_lyrics:!1},{id:49,name:"Sunrise Beats",url:"https://cdn.openart.ai/music/Light and Cheerful/Sunrise Beats_1750728444174.MP3",duration:58,genre:"Jazz",mood:"Light and Cheerful, Relaxing, Calm, Reflective, Nostalgic, Intimate, Contemplative, Smooth, Peaceful",tempo:"Slow",story_media_resources_id:"6VeiFJkSgBtk0YXRiZP4",has_lyrics:!1},{id:52,name:"Beach Energy Party",url:"https://cdn.openart.ai/music/On Beat/Beach Energy Party_1750728449247.MP3",duration:60,genre:"Funk Rock",mood:"On Beat, Energetic, Confident, Uplifting, Groovy, Party, Bold, Motivational",tempo:"Fast",story_media_resources_id:"bzJ4SXKziL5hoUv67pE8",has_lyrics:!1},{id:53,name:"Brass Attack",url:"https://cdn.openart.ai/music/On Beat/Brass Attack_1750728449190.MP3",duration:145,genre:"Electronic",mood:"On Beat, Driving, Dark, Energetic, Pulsing, Intense, Mysterious, Confident, Retro",tempo:"Fast",story_media_resources_id:"XvDjS92KhZglJij8K5xP",has_lyrics:!1},{id:54,name:"Dear",url:"https://cdn.openart.ai/music/On Beat/Dear_1750728449237.MP3",duration:102,genre:"Electronic, Synth-pop, Dance-pop",mood:"On Beat, Energetic, Uplifting, Joyful, Retro, Celebratory, Confident, Groovy, Inspiring",tempo:"Fast",story_media_resources_id:"0FTOzgE1ghUMkJQndGLf",has_lyrics:!1},{id:55,name:"Energetic Upbeat",url:"https://cdn.openart.ai/music/On Beat/Energetic Upbeat_1750728449253.MP3",duration:58,genre:"Hip-Hop",mood:"On Beat, Confident, Dark, Groovy, Bold, Suspenseful, Introspective, Modern",tempo:"Medium",story_media_resources_id:"Wx6cV5jr87ChCzkKAuPQ",has_lyrics:!1},{id:56,name:"Energetic Workout",url:"https://cdn.openart.ai/music/On Beat/Energetic Workout_1750728449259.MP3",duration:60,genre:"Rock",mood:"On Beat, Energetic, Confident, Rebellious, Groovy, Uplifting, Party, Free-spirited, Vintage",tempo:"Fast",story_media_resources_id:"ng8aj83xCDUoBi1PQVFN",has_lyrics:!1},{id:57,name:"First Date",url:"https://cdn.openart.ai/music/On Beat/First Date_1750728449274.MP3",duration:100,genre:"Hip-Hop / Trap",mood:"On Beat, Groovy, Reflective, Moody, Calm, Introspective, Mysterious, Dark",tempo:"Medium",story_media_resources_id:"PVpa3tgXxVPSZ7zEUJli",has_lyrics:!1},{id:61,name:"Rock N Roll",url:"https://cdn.openart.ai/music/On Beat/Rock N Roll_1750728452380.MP3",duration:86,genre:"Rock",mood:"On Beat, Energetic, Confident, Motivational, Groovy, Bold, Party, Rebellious, Modern",tempo:"Fast",story_media_resources_id:"31kh7Sen7T5zcF6xWMxJ",has_lyrics:!1},{id:62,name:"SOSA",url:"https://cdn.openart.ai/music/On Beat/SOSA_1750728452411.MP3",duration:60,genre:"Unknown",mood:"On Beat, Confident, Groovy, Reflective, Dark, Introspective, Pulsing, Vintage",tempo:"Medium",story_media_resources_id:"HJyIq428L04GdcIUPpAI",has_lyrics:!1},{id:63,name:"Stylish Drum Beats",url:"https://cdn.openart.ai/music/On Beat/Stylish Drum Beats_1750728452418.MP3",duration:30,genre:"Electronic",mood:"On Beat, Energetic, Intense, Explosive, Bold, Motivational, Aggressive, Confident, Pulsing, Dramatic",tempo:"Fast",story_media_resources_id:"aZYsMIxweMy6ZV31NjGU",has_lyrics:!1},{id:66,name:"Bola ocho",url:"https://cdn.openart.ai/music/Quirky/Bola ocho_1750728452433.MP3",duration:79,genre:"Jazz",mood:"Quirky, Mysterious, Groovy, Whimsical, Vintage, Suspenseful, Confident, Smooth",tempo:"Medium",story_media_resources_id:"qdPaH9YclP2oXPajkToF",has_lyrics:!1},{id:67,name:"Dust and Ashes",url:"https://cdn.openart.ai/music/Quirky/Dust and Ashes_1750728452422.MP3",duration:126,genre:"Latin Jazz",mood:"Quirky, Energetic, Uplifting, Groovy, Celebratory, Playful, Confident, Retro, Stylish",tempo:"Fast",story_media_resources_id:"dzoqM7O2VauH6zV6Famv",has_lyrics:!1},{id:68,name:"Face Dance",url:"https://cdn.openart.ai/music/Quirky/Face Dance_1750728452454.MP3",duration:25,genre:"Video Game Music",mood:"Quirky, Whimsical, Cheerful, Nostalgic, Retro, Playful, Curious, Soothing",tempo:"Medium",story_media_resources_id:"dXLbg2u1KCyltgAO51DL",has_lyrics:!1},{id:69,name:"Funky Guitar",url:"https://cdn.openart.ai/music/Quirky/Funky Guitar_1750728452468.MP3",duration:60,genre:"Funk",mood:"Quirky, Groovy, Funky, Playful, Retro, Confident, Energetic, Cheerful, Social",tempo:"Medium",story_media_resources_id:"ywgTeJRTDEUwH0MxIlSR",has_lyrics:!1},{id:70,name:"Funny Moments",url:"https://cdn.openart.ai/music/Quirky/Funny Moments_1750728452458.MP3",duration:145,genre:"Funk",mood:"Quirky, Groovy, Playful, Retro, Quirky, Mysterious, Confident, Light",tempo:"Medium",story_media_resources_id:"zPF9yc4yPY7MAIwLJGv7",has_lyrics:!1},{id:72,name:"Funny and Wacky",url:"https://cdn.openart.ai/music/Quirky/Funny and Wacky_1750728456594.MP3",duration:67,genre:"Chiptune, Classical",mood:"Quirky, Mysterious, Whimsical, Suspenseful, Retro, Dark, Cinematic, Playful",tempo:"Medium",story_media_resources_id:"gMfGqx6nKPfEAOjZv5rs",has_lyrics:!1},{id:74,name:"Happy Melody",url:"https://cdn.openart.ai/music/Quirky/Happy Melody_1750728455236.MP3",duration:82,genre:"Jazz",mood:"Quirky, Sneaky, Mysterious, Playful, Whimsical, Retro, Suspenseful, Groovy",tempo:"Medium",story_media_resources_id:"EW2z7dNASPgosGxBiacD",has_lyrics:!1},{id:75,name:"Hungry Clown",url:"https://cdn.openart.ai/music/Quirky/Hungry Clown_1750728455225.MP3",duration:96,genre:"Classical",mood:"Quirky, Mysterious, Whimsical, Playful, Suspenseful, Cinematic, Vintage",tempo:"Fast",story_media_resources_id:"zNkTEbR0Y1kWSxOBgCGu",has_lyrics:!1},{id:76,name:"Monkeys Spinning Monkeys",url:"https://cdn.openart.ai/music/Quirky/Monkeys Spinning Monkeys_1750728455209.MP3",duration:125,genre:"Classical",mood:"Quirky, Whimsical, Energetic, Cheerful, Dramatic, Adventurous, Triumphant, Cinematic",tempo:"Fast",story_media_resources_id:"GOPtRrqF5rlk1nLh9XLG",has_lyrics:!1},{id:77,name:"Playful and Funny",url:"https://cdn.openart.ai/music/Quirky/Playful and Funny_1750728455244.MP3",duration:101,genre:"Soundtrack",mood:"Quirky, Whimsical, Energetic, Playful, Suspenseful, Dramatic, Mysterious, Cinematic, Vintage",tempo:"Fast",story_media_resources_id:"xkPCMo1rrhTKf2Nr5c86",has_lyrics:!1},{id:78,name:"Sneaky and Goofy",url:"https://cdn.openart.ai/music/Quirky/Sneaky and Goofy_1750728455278.MP3",duration:131,genre:"Jazz",mood:"Quirky, Energetic, Cheerful, Whimsical, Vintage, Playful, Groovy, Cinematic, Uplifting",tempo:"Fast",story_media_resources_id:"DJDQdKAZOXqv6Cob6bv2",has_lyrics:!1},{id:79,name:"A Piantive cello",url:"https://cdn.openart.ai/music/Sad/A Piantive cello_1750728455253.MP3",duration:133,genre:"Soundtrack, Classical, Orchestral",mood:"Sad, Epic, Dramatic, Melancholic, Triumphant, Suspenseful, Reflective, Yearning, Hopeful",tempo:"Slow",story_media_resources_id:"wkN76Av6yVNTZbHIiqh6",has_lyrics:!1},{id:81,name:"Autumn",url:"https://cdn.openart.ai/music/Sad/Autumn_1750728459654.MP3",duration:114,genre:"World Music",mood:"Sad, Contemplative, Peaceful, Atmospheric, Calm, Dreamy, Nostalgic, Hopeful, Soothing",tempo:"Slow",story_media_resources_id:"ZZbJfeUR7jXT3c9PKRQG",has_lyrics:!1},{id:85,name:"Dramatic Emotional Piano",url:"https://cdn.openart.ai/music/Sad/Dramatic Emotional Piano_1750728459628.MP3",duration:145,genre:"Classical",mood:"Sad, Melancholic, Reflective, Calm, Introspective, Soothing, Tender, Lonely",tempo:"Slow",story_media_resources_id:"K6jmSU0C4lWjUE8m2LBC",has_lyrics:!1},{id:87,name:"Intense Cinematic Piano",url:"https://cdn.openart.ai/music/Sad/Intense Cinematic Piano_1750728459646.MP3",duration:98,genre:"Classical",mood:"Sad, Melancholic, Reflective, Calm, Intimate, Soothing, Dreamy, Vulnerable, Nostalgic",tempo:"Slow",story_media_resources_id:"HSWe9afMXibtp9jZ5fcb",has_lyrics:!1},{id:88,name:"Rainbow After the Storm",url:"https://cdn.openart.ai/music/Sad/Rainbow After the Storm_1750728459638.MP3",duration:105,genre:"Classical, Rock, Soundtrack",mood:"Sad, Epic, Dramatic, Triumphant, Melancholic, Empowering, Motivational, Cinematic, Contemplative",tempo:"Medium",story_media_resources_id:"80n12tfPdVz9N2BHTOmJ",has_lyrics:!1},{id:89,name:"Suspense Documentary",url:"https://cdn.openart.ai/music/Sad/Suspense Documentary_1750728459618.MP3",duration:108,genre:"Electronic",mood:"Sad, Contemplative, Suspenseful, Dramatic, Hopeful, Mysterious, Cinematic, Inspiring, Melancholic",tempo:"Medium",story_media_resources_id:"XqvsrSi3GsLx7NGmO8MU",has_lyrics:!1},{id:91,name:"driftaway",url:"https://cdn.openart.ai/music/Sad/driftaway_1750728463421.MP3",duration:137,genre:"Lo-fi Hip-Hop",mood:"Sad, Relaxing, Nostalgic, Contemplative, Calm, Melancholic, Dreamy, Smooth",tempo:"Medium",story_media_resources_id:"Uyko0mK6wgeInkDyN9ur",has_lyrics:!1},{id:94,name:"Cycle of Seasons",url:"https://cdn.openart.ai/music/Soothing/Cycle of Seasons_1750728463441.MP3",duration:239,genre:"Classical",mood:"Soothing, Reflective, Calm, Nostalgic, Tender, Dreamy, Hopeful, Soothing, Introspective",tempo:"Slow",story_media_resources_id:"ZMMfXtz9Warcfi1efMRM",has_lyrics:!1},{id:95,name:"Ethereal Landscape Calm Relax",url:"https://cdn.openart.ai/music/Soothing/Ethereal Landscape Calm Relax_1750728463568.MP3",duration:230,genre:"Soundtrack",mood:"Soothing, Calm, Peaceful, Reflective, Soothing, Dreamy, Hopeful, Tender",tempo:"Slow",story_media_resources_id:"mn1Mc9C0iLPLAtNtCojs",has_lyrics:!1},{id:96,name:"Flower Day (piano)",url:"https://cdn.openart.ai/music/Soothing/Flower Day (piano)_1750728463471.MP3",duration:103,genre:"Classical",mood:"Soothing",tempo:"Slow",story_media_resources_id:"U35KG3EgR0FTWqbN5DD3",has_lyrics:!1},{id:97,name:"Flower dance",url:"https://cdn.openart.ai/music/Soothing/Flower dance_1750728463483.MP3",duration:319,genre:"Classical",mood:"Soothing, Nostalgic, Reflective, Bittersweet, Dreamy, Hopeful, Tender, Cinematic, Soothing",tempo:"Slow",story_media_resources_id:"PCEQ2iyof3hosK1Xx0nG",has_lyrics:!1},{id:98,name:"Frozen Twlight",url:"https://cdn.openart.ai/music/Soothing/Frozen Twlight_1750728463506.MP3",duration:60,genre:"Lofi",mood:"Soothing, Reflective, Calm, Melancholic, Nostalgic, Peaceful, Intimate, Tender",tempo:"Slow",story_media_resources_id:"AYlAHgW4FHJYlaOXRPAv",has_lyrics:!1},{id:100,name:"Inspirational Moment",url:"https://cdn.openart.ai/music/Soothing/Inspirational Moment_1750728468946.MP3",duration:178,genre:"Classical",mood:"Soothing, Melancholic, Contemplative, Nostalgic, Cinematic, Hopeful, Tender, Bittersweet, Peaceful",tempo:"Slow",story_media_resources_id:"aqyJ8rgwuaMSMRvIyHBu",has_lyrics:!1},{id:101,name:"Ishtar",url:"https://cdn.openart.ai/music/Soothing/Ishtar_1750728469011.MP3",duration:380,genre:"Unknown",mood:"Soothing, Contemplative, Melancholic, Peaceful, Intimate, Nostalgic, Soothing, Vulnerable, Reflective",tempo:"Medium",story_media_resources_id:"q7xDBlbFqeQIUacSUW3N",has_lyrics:!1},{id:102,name:"Lighting moment",url:"https://cdn.openart.ai/music/Soothing/Lighting moment_1750728468899.MP3",duration:177,genre:"New Age, Folk",mood:"Soothing, Calm, Peaceful, Contemplative, Soothing, Dreamy, Nostalgic, Intimate, Introspective",tempo:"Slow",story_media_resources_id:"DUU3ljGEsddTzvVsbBkO",has_lyrics:!1},{id:103,name:"Muddy River",url:"https://cdn.openart.ai/music/Soothing/Muddy River_1750728469038.MP3",duration:355,genre:"Classical",mood:"Soothing, Contemplative, Melancholic, Introspective, Peaceful, Nostalgic, Hopeful, Tender",tempo:"Slow",story_media_resources_id:"yC5fcKDB0Xu0MFmGKsxa",has_lyrics:!1},{id:104,name:"Musik und Lyrics von",url:"https://cdn.openart.ai/music/Soothing/Musik und Lyrics von_1750728468963.MP3",duration:203,genre:"Folk, New Age",mood:"Soothing, Peaceful, Nostalgic, Dreamy, Reflective, Soothing, Bittersweet, Ethereal, Contemplative",tempo:"Slow",story_media_resources_id:"FeCGDKqXRjavF5K1BNTR",has_lyrics:!1},{id:105,name:"Night In The Desert",url:"https://cdn.openart.ai/music/Soothing/Night In The Desert_1750728468925.MP3",duration:175,genre:"Classical, Soundtrack",mood:"Soothing",tempo:"Slow",story_media_resources_id:"VTTYCvWCtrKaFLRbjHWk",has_lyrics:!1},{id:106,name:"Prague",url:"https://cdn.openart.ai/music/Soothing/Prague_1750728468979.MP3",duration:135,genre:"Ambient, Lullaby",mood:"Soothing, Peaceful, Contemplative, Dreamy, Soothing, Nostalgic, Tender, Introspective",tempo:"Slow",story_media_resources_id:"1CyICNXmiI4tjPbPHOBq",has_lyrics:!1},{id:108,name:"Smile in the melody",url:"https://cdn.openart.ai/music/Soothing/Smile in the melody_1750728468989.MP3",duration:155,genre:"Classical",mood:"Soothing, Calm, Reflective, Nostalgic, Peaceful, Dreamy, Hopeful, Introspective, Tender",tempo:"Slow",story_media_resources_id:"c5Phow9eJ03iBfRuBCTB",has_lyrics:!1},{id:109,name:"Star river in your eyes",url:"https://cdn.openart.ai/music/Soothing/Star river in your eyes_1750728469000.MP3",duration:143,genre:"Soundtrack",mood:"Soothing, Hopeful, Reflective, Uplifting, Tender, Nostalgic, Calm, Cinematic",tempo:"Slow",story_media_resources_id:"5D5TGZudY2LNjVkdkv2Z",has_lyrics:!1},{id:110,name:"Starlight",url:"https://cdn.openart.ai/music/Soothing/Starlight_1750728474625.MP3",duration:60,genre:"Classical",mood:"Soothing, Contemplative, Melancholic, Peaceful, Introspective, Reflective, Lonely, Soothing, Tender",tempo:"Slow",story_media_resources_id:"xUgeIenmjNZLtvAecS3D",has_lyrics:!1},{id:111,name:"Where We Belong",url:"https://cdn.openart.ai/music/Soothing/Where We Belong_1750728474571.MP3",duration:140,genre:"Classical",mood:"Soothing, Contemplative, Melancholic, Peaceful, Nostalgic, Intimate, Tender, Hopeful",tempo:"Slow",story_media_resources_id:"TAsvRtW7T52CEJtNJ50d",has_lyrics:!1},{id:112,name:"Xiaoyu Guitar",url:"https://cdn.openart.ai/music/Soothing/Xiaoyu Guitar_1750728474645.MP3",duration:184,genre:"Folk",mood:"Soothing, Contemplative, Nostalgic, Calm, Intimate, Melancholic, Hopeful, Soothing, Tender",tempo:"Slow",story_media_resources_id:"XtN0D0GBqb8XosUMnZfW",has_lyrics:!1},{id:113,name:"Break Dance",url:"https://cdn.openart.ai/music/TOP 20/Break Dance_1750728474544.MP3",duration:103,genre:"Funk / Disco",mood:"Groovy, Energetic, Uplifting, Retro, Party, Confident, Bright",tempo:"Fast",story_media_resources_id:"XMyJqJVlj0hSPUbS98Ct",has_lyrics:!1},{id:115,name:"Don't Be Shy",url:"https://cdn.openart.ai/music/TOP 20/Don't Be Shy_1750728474585.MP3",duration:96,genre:"R&B",mood:"Intimate, Relaxing, Atmospheric, Dreamy, Sensual, Dark, Modern, Smooth",tempo:"Slow",story_media_resources_id:"8VJGkn4t2mw6KEy12AL5",has_lyrics:!0},{id:116,name:"Fade Textures",url:"https://cdn.openart.ai/music/TOP 20/Fade Textures_1750728474612.MP3",duration:165,genre:"Electronic Rock",mood:"Contemplative, Dramatic, Inspiring, Bittersweet, Nostalgic, Hopeful, Introspective",tempo:"Medium",story_media_resources_id:"e3okR5ypj9oAIJkkkht9",has_lyrics:!1},{id:119,name:"Fresh Indie Pop",url:"https://cdn.openart.ai/music/TOP 20/Fresh Indie Pop_1750728474632.MP3",duration:104,genre:"Pop Rock",mood:"Energetic, Cheerful, Uplifting, Confident, Party, Retro, Free-spirited, Motivational",tempo:"Fast",story_media_resources_id:"hhZ9X5Mp6NCO9jHyQX9o",has_lyrics:!1},{id:120,name:"Funk Guitar Rhythm",url:"https://cdn.openart.ai/music/TOP 20/Funk Guitar Rhythm_1750728477961.MP3",duration:131,genre:"Funk",mood:"Groovy, Energetic, Uplifting, Confident, Retro, Social, Pulsing",tempo:"Medium",story_media_resources_id:"EoP6eYWtmZ7AKYI1waSr",has_lyrics:!1},{id:121,name:"Get Up That Feeling",url:"https://cdn.openart.ai/music/TOP 20/Get Up That Feeling_1750728478008.MP3",duration:137,genre:"Funk Rock",mood:"Groovy, Energetic, Cheerful, Uplifting, Retro, Confident, Social, Playful",tempo:"Fast",story_media_resources_id:"KSoBS1RgMwJiIB7E9rEd",has_lyrics:!1},{id:122,name:"Ginger Steps (TOP 20)",url:"https://cdn.openart.ai/music/TOP 20/Ginger Steps_1750728477977.MP3",duration:141,genre:"Folk, Children's Music, Lullaby",mood:"Peaceful, Calm, Soothing, Cheerful, Nostalgic, Whimsical, Tender, Light",tempo:"Slow",story_media_resources_id:"undefined"},{id:123,name:"Inspiring Positivity",url:"https://cdn.openart.ai/music/TOP 20/Inspiring Positivity_1750728477989.MP3",duration:190,genre:"Electronic, Corporate",mood:"Uplifting, Motivational, Hopeful, Inspiring, Modern, Confident, Bright, Smooth",tempo:"Medium",story_media_resources_id:"bVf0SIeqGstgeS2udQtI",has_lyrics:!1},{id:125,name:"Positive Dreamy",url:"https://cdn.openart.ai/music/TOP 20/Positive Dreamy_1750728478059.MP3",duration:136,genre:"Lo-fi",mood:"Calm, Relaxing, Reflective, Peaceful, Nostalgic, Dreamy, Intimate, Soothing",tempo:"Slow",story_media_resources_id:"GuQ5hAC9qWkBliTgWmAp",has_lyrics:!1},{id:128,name:"That Positive Feeling",url:"https://cdn.openart.ai/music/TOP 20/That Positive Feeling_1750728478069.MP3",duration:132,genre:"Pop",mood:"Happy, Uplifting, Carefree, Cheerful, Groovy, Playful, Light",tempo:"Medium",story_media_resources_id:"hSrdQM3qsoooC1fpAiiU",has_lyrics:!1},{id:130,name:"Time Cure",url:"https://cdn.openart.ai/music/TOP 20/Time Cure_1750728482160.MP3",duration:234,genre:"Classical",mood:"Reflective, Melancholic, Calm, Bittersweet, Hopeful, Tender, Cinematic",tempo:"Slow",story_media_resources_id:"xsASGiFS9YAP5yHYHmIs",has_lyrics:!1},{id:131,name:"Upbeat Summer Party Pop",url:"https://cdn.openart.ai/music/TOP 20/Upbeat Summer Party Pop_1750728482137.MP3",duration:150,genre:"Pop, Electronic",mood:"Uplifting, Energetic, Groovy, Cheerful, Motivational, Confident, Modern, Bright",tempo:"Fast",story_media_resources_id:"MqaSzL9umngbd5keoIbY",has_lyrics:!1},{id:132,name:"Woozy",url:"https://cdn.openart.ai/music/TOP 20/Woozy_1750728482183.MP3",duration:239,genre:"Lo-fi Hip-Hop",mood:"Relaxing, Calm, Nostalgic, Contemplative, Dreamy, Soothing, Intimate",tempo:"Slow",story_media_resources_id:"O8hUk4mdPRBlwN27HVgj",has_lyrics:!1},{id:133,name:"Youth Memory Album",url:"https://cdn.openart.ai/music/TOP 20/Youth Memory Album_1750728482114.MP3",duration:163,genre:"Pop-Punk",mood:"Energetic, Uplifting, Motivational, Confident, Cheerful, Free-spirited, Nostalgic, Bold",tempo:"Fast",story_media_resources_id:"nU1Jl8Lw1PY4Et46C8vq",has_lyrics:!1},{id:134,name:"Fast Excited Strings",url:"https://cdn.openart.ai/music/Fast%20Excited%20Strings.mp3",duration:128,genre:"orchestral, epic",mood:"dramatic, intense, heroic",tempo:"Fast",story_media_resources_id:"BD3JiszAf9LmXmUlTyhF"},{id:135,name:"Whimsical Restaurant Jingle",url:"https://cdn.openart.ai/music/Whimsical%20Restaurant%20Jingle.mp3",duration:52,genre:"quirky J-Pop",mood:"playful, cheerful, upbeat, whimsical, cute",tempo:"Upbeat",story_media_resources_id:"kRRf5bo1cuxYKf39m6c5",has_lyrics:!0},{id:136,name:"Eine Kleine Nachtmusik - Mozart",url:"https://cdn.openart.ai/music/W.A.Mozart%20Eine%20kleine%20Nachtmusik.mp3",duration:345,genre:"Classical",mood:"energetic, exciting, joyful, playful",tempo:"Upbeat",story_media_resources_id:"Y9MoRaLwpElhSc0xvXw0",has_lyrics:!0},{id:137,name:"Epic Cat Stories",url:"https://cdn.openart.ai/music/Epic%20Cat%20Stories.com.mp3",duration:60,genre:"Cinematic",mood:"Epic, Heroic, Dramatic, Intense, powerful, Triumphant",tempo:"Upbeat",story_media_resources_id:"UyP67mAuWLPy3zn1PXA2",has_lyrics:!0},{id:138,name:"Mozart Minuet with violin",url:"https://cdn.openart.ai/music/Mozart%20Minuet%20with%20violin.mp3",duration:223,genre:"Classical",mood:"energetic, elegant, expressive, playful, bright, passionate",tempo:"Upbeat",story_media_resources_id:"QZPKgmkwQ5pwEwj0fGPU",has_lyrics:!0},{id:139,name:"Chopin Nocturne No. 2 Piano Mono",url:"https://cdn.openart.ai/music/Chopin%20Nocturne%20No.%202.mp3",duration:246,genre:"Classical",mood:"Reflective, melancholic, dreamy, delicate, introspective",tempo:"Medium",story_media_resources_id:"JsBWKD4xHSEZi1D4DUW7",has_lyrics:!0},{id:140,name:"Japan, Zen, Buddha",url:"https://cdn.openart.ai/music/Japan%2C%20Zen%2C%20Buddha.mp3",duration:125,genre:"New Age / Asian Fusion",mood:"Calm, Peaceful, Relaxing, Contemplative, Serene",tempo:"Slow",story_media_resources_id:"4fcU3F9eu6iwkxcBZEXI"},{id:141,name:"Vivaldi Four Seasons Spring",url:"https://cdn.openart.ai/music/Vivaldi%20_Four%20Seasons.mp3",duration:195,genre:"Classical",mood:"Dramatic, energetic, virtuosic, spirited, elegant",tempo:"Fast",story_media_resources_id:"nQRoJdaQQgu9MjbfdncG",has_lyrics:!0},{id:142,name:"Flowers",url:"https://cdn.openart.ai/music/Flowers.mp3",duration:60,genre:"Contemporary Classical",mood:"Melancholic, Reflective, Nostalgic, Pensive",tempo:"Slow",story_media_resources_id:"mQgt89e1oZKPbLomJBoc",has_lyrics:!0},{id:143,name:"The Bakery",url:"https://cdn.openart.ai/music/the%20bakery.mp3",duration:59,genre:"Classical",mood:"Calm, Peaceful, Reflective, Soothing, Gentle",tempo:"Medium",story_media_resources_id:"0DTwOH2tvZgngl8MEjRD",has_lyrics:!0},{id:144,name:"Dandelions",url:"https://cdn.openart.ai/music/Dandelions.com.mp3",duration:60,genre:"Contemporary Instrumental",mood:"Calm, Peaceful, Reflective, Soothing, Gentle",tempo:"Slow",story_media_resources_id:"UkbvJ0nCivGBrRrRbE7V",has_lyrics:!0},{id:145,name:"Always with me",url:"https://cdn.openart.ai/music/Always%20with%20me.mp3",duration:67,genre:"Instrumental Folk",mood:"Peaceful, Serene, Calm, Gentle, Nostalgic, Dreamy",tempo:"Medium",story_media_resources_id:"k60APpalzQ75EcqkHrja",has_lyrics:!0},{id:146,name:"Electric mix",url:"https://cdn.openart.ai/music/Electric%20mix.mp3",duration:125,genre:"Electronic Dance Music",mood:"Energetic, Upbeat, Driving, Hypnotic",tempo:"Fast",story_media_resources_id:"0JUTeqDiBG9PeItJEyU5",has_lyrics:!1},{id:147,name:"City Pop",url:"https://cdn.openart.ai/music/Default/City Pop_1752229208931.mp3",duration:125,genre:"Electronic Pop, R&B",mood:"Default, Calm, Reflective, Dreamy",tempo:"Slow",story_media_resources_id:"y7NzNXhs4wT6BGb5tGtk",has_lyrics:!0},{id:148,name:"Electronic Pop",url:"https://cdn.openart.ai/music/Default/Electronic Pop_1752229208997.mp3",duration:50,genre:"Electronic Pop",mood:"Default, Energetic",tempo:"Fast",story_media_resources_id:"jfNvK3SWuKQDz5Q1f45E",has_lyrics:!0},{id:149,name:"Metal Rock",url:"https://cdn.openart.ai/music/Default/Metal Rock_1752229208960.mp3",duration:67,genre:"Power Metal",mood:"Default, Energetic",tempo:"Fast",story_media_resources_id:"y4CPaVouxm8kB3rLWiS1",has_lyrics:!0},{id:150,name:"Smooth R&B",url:" https://cdn.openart.ai/music/Default/Smooth R&B_1752229208973.mp3",duration:239,genre:"R&B/Soul",mood:"Default, Romantic",tempo:"slow",story_media_resources_id:"XV7ekbpPPBZx2JZNfFHA",has_lyrics:!0}],n=r.filter(e=>!1===e.has_lyrics),o=[{name:"Photorealistic",imageUrl:"https://cdn.openart.ai/assets/1000012744.webp",videoUrl:"https://cdn.openart.ai/assets/StoryBuilder-style-video/openart-video_f35fa071_1750563842403.mp4",value:"photorealistic",imageModelConfig:{model:"flux_kontext",parameters:{}},description:"photorealistic cinematography, ultra-detailed 8K resolution, professional DSLR camera work, natural volumetric lighting, razor-sharp focus, authentic skin textures, realistic fabric materials, environmental depth of field, cinematic color grading, documentary-style realism, natural shadows and highlights, lifelike proportions",avoidTerms:"Avoid image segmentation, split screens, or divided compositions. Do not include cartoon-style, anime, stylized art, or fantasy elements. Avoid oversaturation, artificial colors, or digital art aesthetics. No low quality, blurry, distorted visuals, or obvious CGI that would break photorealistic immersion. Avoid exaggerated proportions or unrealistic scenarios."},{name:"Animation",imageUrl:"https://cdn.openart.ai/assets/1000012743.webp",videoUrl:"https://cdn.openart.ai/assets/StoryBuilder-style-video/openart-video_ef62d5f0_1750561471151.mp4",value:"animation",imageModelConfig:{model:"flux_kontext",parameters:{}},description:"3D computer animation, Disney Pixar studio quality, vibrant saturated color palette, smooth character rigging and animation, expressive facial animation systems, dynamic volumetric lighting, subsurface scattering on skin, detailed texture mapping, cinematic camera movements, stylized but detailed environments, cartoon physics",avoidTerms:"Avoid image segmentation, split screens, or divided layouts. Do not use realistic photography, photographic lighting, or live-action elements. Do not include low-poly models, primitive 3D graphics, or flat shading that would reduce the premium animation quality. Avoid realistic human proportions or documentary-style presentation."},{name:"Microworld",imageUrl:"https://cdn.openart.ai/assets/internal/uploads/image_U1svahuc_1024x1024_1753339280304.webp",videoUrl:"https://cdn.openart.ai/assets/internal/uploads/file_J8LypiZE_1753329056990.mp4",value:"microworld",imageModelConfig:{model:"flux_kontext",parameters:{}},description:"miniature tilt-shift photography, macro lens perspective, dramatic shallow depth of field, toy-like scale, diorama aesthetic, selective focus",avoidTerms:"Avoid image segmentation, split screens, or divided compositions. Do not show human-scale perspectives or normal-sized viewpoints. Avoid deep focus photography that would show everything in sharp detail. Do not include realistic human proportions when people are present - they should appear toy-like or miniature."},{name:"Crayon",imageUrl:"https://cdn.openart.ai/assets/openart-video_c0ad5287_1750598479630.webp",videoUrl:"https://cdn.openart.ai/assets/StoryBuilder-style-video/openart-video_c0ad5287_1750598479630.mp4",value:"crayon",imageModelConfig:{model:"flux_kontext",parameters:{}},description:"Children's crayon drawing style with Henri Matisse-inspired vibrant colors â€” bold non-realistic color blocks, expressive outlines, paper-cut simplicity, visible crayon strokes, playful proportions, and naive artistic charm.",avoidTerms:"Avoid image segmentation, split screens, or divided compositions. Do not use realistic photography, photographic lighting, or live-action elements. Avoid realistic details, precise anatomy, photographic textures, childlike crayon drawing aesthetic. No realistic proportions or sophisticated rendering techniques. Do not show external perspectives of the artwork itself or meta-views of the crayon drawing as an object."},{name:"Pixel Art",imageUrl:"https://cdn.openart.ai/assets/1000012558-1.webp",videoUrl:"https://cdn.openart.ai/assets/StoryBuilder-style-video/openart-video_eb9f151a_1750566651121.mp4",value:"pixelart",imageModelConfig:{model:"flux_kontext",parameters:{}},description:"16-bit pixel art style, retro 90s video game aesthetic, crisp pixel-perfect geometry, limited indexed color palette, dithering patterns, sprite-based animation, nostalgic arcade game graphics, chunky pixelated textures, classic console game lighting, isometric or side-scrolling perspective",avoidTerms:"Avoid image segmentation, split screens, or divided layouts. Do not use smooth gradients, anti-aliasing, vector graphics, or realistic textures. Avoid photographic elements, 3D rendering, or modern digital art techniques that would break the authentic pixel art aesthetic. No curved lines, soft shadows, or high-resolution details that exceed pixel limitations."},{name:"Ghibli-style",imageUrl:"https://cdn.openart.ai/assets/1000012739.webp",videoUrl:"https://cdn.openart.ai/assets/StoryBuilder-style-video/openart-video_da7fd3d6_1750635281678.mp4",value:"ghibli",imageModelConfig:{model:"gpt",parameters:{quality:"medium"}},description:"Studio Ghibli hand-drawn animation style, traditional 2D cel animation, soft watercolor background paintings, gentle pastel color harmonies, whimsical character design with large expressive eyes, flowing organic movements, dreamy atmospheric lighting, detailed nature environments, painterly cloud formations, nostalgic countryside aesthetics",avoidTerms:"Avoid image segmentation, split screens, or divided compositions. Do not use 3D CGI, computer graphics, or realistic rendering. Avoid dark, violent, horror, or harsh themes that contradict the gentle Ghibli philosophy. No sharp digital lines, neon colors, urban cyberpunk elements, or aggressive character designs. Avoid photorealistic details or modern technology aesthetics."},{name:"Cyberpunk",imageUrl:"https://cdn.openart.ai/assets/1000012558-2.webp",videoUrl:"https://cdn.openart.ai/assets/StoryBuilder-style-video/openart-video_39f0ecba_1750567376378.mp4",value:"cyberpunk",imageModelConfig:{model:"flux_kontext",parameters:{}},description:"cyberpunk 2077 aesthetic, vibrant neon lighting systems, dark dystopian urban landscapes, futuristic holographic interfaces, high-tech augmented reality elements, rain-soaked streets with neon reflections, towering megastructure architecture, synthwave color schemes with purple and cyan dominance, atmospheric fog and volumetric lighting, chrome and glass materials",avoidTerms:"Avoid image segmentation, split screens, or divided layouts. Do not include natural landscapes, countryside, rural settings, or historical elements. Avoid bright daylight, pastoral scenes, or medieval/fantasy aesthetics that clash with the futuristic cyberpunk world. No warm, cozy, or wholesome themes that contradict the dystopian atmosphere. Avoid organic, natural materials or earth tones."}];o.map(e=>e.value);let a=30,s=60,l={enabled:!0,type:"openart"},d={watermark:l,fps:30,captions:{enabled:!0}}},19779:function(e,t,i){i.d(t,{D:function(){return d}});var r=i(75271),n=i(63464),o=i(39444);class a{getCommonHeaders(){let e=(0,o.fW)(),t=null,i=null;{let e=sessionStorage.getItem("lastUsedWorkspace");if(e&&"undefined"!==e){let r=JSON.parse(e);t=r.workspace_team_id,i=r.workspace_user_id}}return{Accept:"text/event-stream","Cache-Control":"no-cache",...e,...t&&{"X-TEAM-ID":t},...i&&{"X-USER-ID":i}}}async connect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{onmessage:i,onerror:r,onclose:o,signal:a,method:s="GET",body:l,headers:d={},onopen:c}=t,u=e.startsWith("http")?e:`${this.baseURL}${e.replace(/^\//,"")}`,p={...this.getCommonHeaders(),...d};"POST"===s&&l&&(p["Content-Type"]="application/json");try{await (0,n.L)(u,{method:s,body:l,signal:a,credentials:"include",headers:p,onopen:c||(()=>Promise.resolve()),onmessage:i||(()=>{}),onerror:r||(()=>{}),onclose:o||(()=>{})})}catch(e){throw console.error("[SSE Client] Connection failed:",e),e}}constructor(){this.baseURL="/api/"}}let s=new a;class l{getState(){return{...this.state}}updateOptions(e){this.options={...this.options,...e}}updateState(e){var t;this.state={...this.state,...e},null===(t=this.onStateChange)||void 0===t||t.call(this,this.state)}clearRetryTimeout(){this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=null)}abortConnection(){this.abortController&&(this.abortController.abort(),this.abortController=null)}resetState(){this.updateState({isConnected:!1,isLoading:!1,error:null,retryCount:0})}disconnect(){this.isManualDisconnect=!0,this.shouldStopRetrying=!0,this.persistentRetryCount=0,this.isConnecting=!1,this.clearRetryTimeout(),this.abortConnection(),this.resetState()}stopRetrying(){this.shouldStopRetrying=!0,this.isConnecting=!1,this.clearRetryTimeout(),this.updateState({isLoading:!1,error:"Connection stopped by server"})}scheduleRetry(){let e;let{logPrefix:t="[SSE]",maxRetries:i=20,retryDelay:r=1e3}=this.options;if(!this.retryTimeout){if(this.persistentRetryCount>=i||this.isManualDisconnect||this.shouldStopRetrying){this.persistentRetryCount>=i&&(this.updateState({isLoading:!1,error:"Connection failed after maximum retries"}),this.shouldStopRetrying=!0);return}e=this.persistentRetryCount<3?500+500*this.persistentRetryCount:this.persistentRetryCount<6?2e3+(this.persistentRetryCount-3)*1e3:Math.min(r*2**Math.min(this.persistentRetryCount-6,3),1e4),this.retryTimeout=setTimeout(async()=>{this.retryTimeout=null,this.isManualDisconnect||this.shouldStopRetrying||(this.persistentRetryCount+=1,this.updateState({retryCount:this.persistentRetryCount}),await this.connect())},e)}}handleConnectionError(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{logPrefix:i="[SSE]",onError:r}=this.options;console.error(`${i} SSE error:`,e),this.isConnecting=!1,t&&!this.isManualDisconnect?(this.updateState({isConnected:!1,isLoading:!0,error:null}),this.persistentRetryCount<2?(this.persistentRetryCount+=1,this.updateState({retryCount:this.persistentRetryCount}),setTimeout(()=>this.connect(),100)):this.scheduleRetry()):(this.updateState({isConnected:!1,isLoading:!1,error:"Connection error occurred"}),null==r||r(e))}async connect(){let{url:e,method:t="GET",body:i,onOpen:r}=this.options;if(!e){this.disconnect();return}if(this.isConnecting)return;this.state.isConnected&&(this.abortConnection(),await new Promise(e=>setTimeout(e,100))),this.isManualDisconnect=!1,this.isConnecting=!0,0===this.persistentRetryCount&&(this.abortConnection(),await new Promise(e=>setTimeout(e,100)));let n=new AbortController;this.abortController=n,this.updateState({isConnected:!0,isLoading:!0,error:null});try{await s.connect(e,{method:t,body:i,signal:n.signal,onopen:r||(()=>Promise.resolve()),onmessage:this.handleMessage,onerror:this.handleError,onclose:this.handleClose})}catch(e){this.isConnecting=!1,"AbortError"!==e.name?this.handleConnectionError(e,!this.isManualDisconnect):this.updateState({isConnected:!1,isLoading:!1})}}resetRetryState(){this.persistentRetryCount=0,this.shouldStopRetrying=!1,this.isConnecting=!1,this.updateState({retryCount:this.persistentRetryCount})}resumeConnection(){let{url:e}=this.options;!e||this.state.isConnected||this.shouldStopRetrying||this.isConnecting||(this.persistentRetryCount=0,this.updateState({retryCount:this.persistentRetryCount}),this.connect())}forceReconnect(){this.clearRetryTimeout(),this.abortConnection(),this.isManualDisconnect=!1,this.shouldStopRetrying=!1,this.persistentRetryCount=0,this.isConnecting=!1,this.updateState({retryCount:0}),this.connect()}cleanup(){this.clearRetryTimeout(),this.abortConnection(),this.isConnecting=!1}constructor(e,t){this.options=e,this.state={isConnected:!1,isLoading:!1,error:null,retryCount:0},this.abortController=null,this.retryTimeout=null,this.isManualDisconnect=!1,this.persistentRetryCount=0,this.shouldStopRetrying=!1,this.isConnecting=!1,this.handleMessage=e=>{try{this.options.onMessage(e),this.persistentRetryCount=0,this.shouldStopRetrying=!1,this.isConnecting=!1,this.updateState({isLoading:!1,retryCount:0,error:null})}catch{this.updateState({error:"Failed to process message"})}},this.handleError=e=>{throw this.handleConnectionError(e),e},this.handleClose=()=>{let{onClose:e}=this.options;this.isConnecting=!1,this.isManualDisconnect||this.shouldStopRetrying?(this.updateState({isConnected:!1,isLoading:!1}),null==e||e()):(this.updateState({isConnected:!1,isLoading:!0,error:null}),this.persistentRetryCount<2?(this.persistentRetryCount+=1,this.updateState({retryCount:this.persistentRetryCount}),setTimeout(()=>this.connect(),100)):this.scheduleRetry())},this.onStateChange=t}}let d=e=>{let{url:t,method:i="GET",body:n,enabled:o=!0,onOpen:a,onMessage:s,onError:d,onClose:c,dependencies:u=[],logPrefix:p="[SSE]",maxRetries:h=20,retryDelay:m=1e3}=e,[x,g]=(0,r.useState)({isConnected:!1,isLoading:!1,error:null,retryCount:0}),f=(0,r.useRef)(null),v=(0,r.useRef)("");(0,r.useEffect)(()=>(f.current=new l({url:t,method:i,body:n,onOpen:a,onMessage:s,onError:d,onClose:c,logPrefix:p,maxRetries:h,retryDelay:m},e=>g(e)),()=>{var e;null===(e=f.current)||void 0===e||e.cleanup()}),[]),(0,r.useEffect)(()=>{f.current&&f.current.updateOptions({url:t,method:i,body:n,onOpen:a,onMessage:s,onError:d,onClose:c,logPrefix:p,maxRetries:h,retryDelay:m})},[t,i,n,a,s,d,c,p,h,m]);let y=(0,r.useCallback)(()=>{f.current&&f.current.connect()},[]),b=(0,r.useCallback)(()=>{f.current&&f.current.disconnect()},[]),C=(0,r.useCallback)(()=>{f.current&&f.current.stopRetrying()},[]),w=(0,r.useCallback)(()=>{f.current&&f.current.forceReconnect()},[]);return(0,r.useEffect)(()=>{let e=`${t}-${o}-${JSON.stringify(u)}`;if(o&&t&&f.current){v.current!==e&&(f.current.resetRetryState(),v.current=e);let t=setTimeout(()=>{f.current&&f.current.connect()},0);return()=>{clearTimeout(t),f.current&&f.current.disconnect()}}return f.current&&f.current.disconnect(),()=>{f.current&&f.current.disconnect()}},[o,t,...u]),(0,r.useEffect)(()=>{if(!t||!f.current)return;let e=()=>{"visible"===document.visibilityState&&o&&t&&!x.isConnected&&f.current&&f.current.resumeConnection()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[o,t,x.isConnected]),{isConnected:x.isConnected,error:x.error,connect:y,disconnect:b,stopRetrying:C,forceReconnect:w,isLoading:x.isLoading,retryCount:x.retryCount}}},39088:function(e,t,i){i.d(t,{w:function(){return o}});var r=i(75271),n=i(19779);let o=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[i,o]=(0,r.useState)(null),a=(0,r.useRef)(e);(0,r.useEffect)(()=>{a.current!==e&&o(null),a.current=e},[e]);let s=(0,r.useMemo)(()=>e?`stories/workflow/status_sse?workflowRunId=${encodeURIComponent(e)}`:"",[e]),l=t&&!!e&&"undefined"!==e,d=(0,r.useCallback)(e=>{try{if(!e.data||""===e.data.trim())return;let t=JSON.parse(e.data);if(!t.workflowRunId||!t.status)return;o(t)}catch(t){throw console.error("[SSE Single] Failed to parse SSE data:",t,"Raw data:",e.data),Error("Failed to parse status update")}},[]),c=(0,r.useCallback)(e=>{var t;if(null===(t=e.message)||void 0===t?void 0:t.includes("400"))throw Error("Invalid workflow ID")},[]),u=(0,n.D)({url:s,method:"GET",enabled:l,logPrefix:"[SSE Single]",onMessage:d,onError:c});return{data:i,isConnected:u.isConnected,error:u.error,connect:u.connect,disconnect:u.disconnect,isLoading:u.isLoading}}},23252:function(e,t,i){i.d(t,{i:function(){return o}});var r=i(75271),n=i(19779);let o=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0,[o,a]=(0,r.useState)([]),s=(0,r.useRef)(new Set(e||[])),l=(0,r.useMemo)(()=>e&&0!==e.length?e.join(","):"",[e]),d=(0,r.useCallback)(e=>{try{if(!e.data||""===e.data.trim())return;let t=JSON.parse(e.data);if(!t.workflowRunId||!t.status){console.warn("[SSE Multi] Invalid data structure received:",t);return}if(!s.current.has(t.workflowRunId))return;try{i(t.workflowRunId,t)}catch(e){console.error(`[SSE Multi] Error in status change handler for ${t.workflowRunId}:`,e)}("completed"===t.status||t.status.startsWith("failed"))&&(s.current.delete(t.workflowRunId),a(e=>e.filter(e=>e!==t.workflowRunId)))}catch(t){throw console.error("[SSE Multi] Unexpected error in onmessage:",t,"Raw event:",e),Error("Failed to process status update")}},[i]),c=(0,r.useCallback)(e=>{var t;if(null===(t=e.message)||void 0===t?void 0:t.includes("400"))throw Error("Invalid workflow IDs")},[]),u=(0,r.useCallback)(async t=>{s.current=new Set(e),a(e)},[e]),p=(0,n.D)({url:"stories/workflow/status_sse",method:"POST",body:JSON.stringify({workflowRunIds:e}),enabled:t&&!!e&&e.length>0,logPrefix:"[SSE Multi]",dependencies:[l],onMessage:d,onError:c,onOpen:u});return(0,r.useEffect)(()=>{p.isConnected||(a([]),s.current.clear())},[p.isConnected]),{isConnected:p.isConnected,error:p.error,connect:p.connect,disconnect:p.disconnect,isLoading:p.isLoading,activeWorkflows:o}}},20382:function(e,t,i){i.d(t,{z:function(){return a}});var r=i(52676),n=i(75271),o=i(65893);let a=e=>{let{audioUrl:t,sx:i,samples:a=1e3,barColor:s="#6290FF"}=e,[l,d]=(0,n.useState)([]),[c,u]=(0,n.useState)([]),[p,h]=(0,n.useState)(0),[m,x]=(0,n.useState)(!1),g=(0,n.useRef)(null),f=(0,n.useRef)(null),v=(0,n.useCallback)(e=>{let t=e.getChannelData(0),i=Math.floor(t.length/a),r=[];for(let e=0;e<a;e++){let n=i*e,o=0;for(let e=0;e<i;e++)o+=Math.abs(t[n+e]);r.push(o/i)}let n=Math.max(...r);return r.map(e=>e/n)},[a]),y=(0,n.useCallback)(()=>{if(0===l.length||0===p){u([]);return}let e=Math.floor(p/4);if(l.length<=e)u(l);else{let t=[],i=l.length/e;for(let r=0;r<e;r++){let e=Math.floor(r*i);t.push(l[e])}u(t)}},[l,p]),b=(0,n.useCallback)(async()=>{if(t){x(!0);try{g.current||(g.current=new(window.AudioContext||window.webkitAudioContext));let e=await fetch(t),i=await e.arrayBuffer(),r=await g.current.decodeAudioData(i),n=v(r);d(n)}catch(e){console.error("Error loading audio or generating waveform:",e),d([])}finally{x(!1)}}},[t,v]);(0,n.useEffect)(()=>{b()},[b]),(0,n.useEffect)(()=>{y()},[y]),(0,n.useEffect)(()=>{let e=null,t=function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(f.current){let r=f.current.getBoundingClientRect();r.width>0?(h(r.width),e||(e=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.width;e>0&&h(e)}})).observe(f.current)):i<10&&setTimeout(()=>t(i+1),10*(i+1))}else i<10&&setTimeout(()=>t(i+1),10*(i+1))};return t(),()=>{e&&e.disconnect()}},[]);let C={width:"100%",height:"16px",backgroundColor:"transparent",borderRadius:"2px",marginRight:"4px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",gap:"2px",overflow:"hidden",...i};return(0,r.jsx)(o.Z,{ref:f,sx:C,children:t?m?(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",gap:"2px",height:"100%"},children:Array.from({length:20}).map((e,t)=>(0,r.jsx)(o.Z,{sx:{width:2,height:`${70*Math.random()+30}%`,backgroundColor:"rgba(184, 212, 255, 0.3)",borderRadius:"1px",animation:"pulse 1.5s ease-in-out infinite",animationDelay:`${.1*t}s`,"@keyframes pulse":{"0%, 100%":{opacity:.3},"50%":{opacity:.8}}}},t))}):c.length>0?c.map((e,t)=>(0,r.jsx)(o.Z,{sx:{flex:"0 0 2px",width:2,height:`${Math.max(100*e,5)}%`,backgroundColor:s,borderRadius:"1px"}},t)):(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",gap:"2px",height:"100%"},children:Array.from({length:15}).map((e,t)=>(0,r.jsx)(o.Z,{sx:{width:2,height:`${60*Math.random()+20}%`,backgroundColor:"rgba(184, 212, 255, 0.25)",borderRadius:"1px"}},t))}):(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",gap:"2px",height:"100%"},children:Array.from({length:15}).map((e,t)=>(0,r.jsx)(o.Z,{sx:{width:2,height:`${60*Math.random()+20}%`,backgroundColor:"rgba(184, 212, 255, 0.2)",borderRadius:"1px"}},t))})})}},57984:function(e,t,i){i.d(t,{r:function(){return n}});var r=i(74701);let n=(0,i(46406).ZP)(r.Z)(e=>{let{theme:t}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===t.palette.mode?"#0929F7":"#1890ff"}}},"& .MuiSwitch-thumb":{boxShadow:"0 2px 4px 0 rgb(0 35 11 / 20%)",width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"dark"===t.palette.mode?"rgba(255,255,255,.35)":"rgba(0,0,0,.25)",boxSizing:"border-box"}}})},60645:function(e,t,i){i.d(t,{p:function(){return o}});var r=i(75271),n=i(38060);let o=()=>{let[e]=(0,n.Z)("openart_announcement_bar_closed",{defaultValue:void 0,listenStorageChange:!0}),[t,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i(!0)},[]),null}},85245:function(e,t,i){i.d(t,{AJ:function(){return n.AJ},Bx:function(){return r.Bx},EL:function(){return r.EL},EY:function(){return o.EY},GH:function(){return n.GH},HM:function(){return r.HM},Jo:function(){return r.Jo},MH:function(){return n.MH},cU:function(){return r.cU},lj:function(){return n.lj},lk:function(){return n.lk},no:function(){return n.no},oH:function(){return r.oH},rB:function(){return n.rB},sg:function(){return o.sg},uO:function(){return n.uO},vi:function(){return o.vi}});var r=i(57492),n=i(92101),o=i(9370)},57492:function(e,t,i){i.d(t,{Bx:function(){return p},EL:function(){return g},HM:function(){return m},Jo:function(){return h},PL:function(){return u},cU:function(){return f},oH:function(){return v}});var r=i(75271),n=i(13200),o=i(75616),a=i(21964),s=i(10986),l=i(1327),d=i(28337),c=i(60439);let u={all:["shots"],media:(e,t)=>["shots",e,t,"media"]},p=(e,t)=>{let{enqueueSnackbar:i}=(0,s.Ds)();return(0,n.a)({queryKey:u.media(e||"",t||""),queryFn:async()=>{if(!e||!t)return{images:[],videos:[]};let i=await fetch(`/api/stories/${e}/shots/${t}`);if(!i.ok)throw Error(`Failed to load shot media: ${i.statusText}`);return(await i.json()).media_resources||{images:[],videos:[]}},enabled:!!e&&!!t,onError:e=>{console.error("Error loading shot media:",e),i(`Error: ${e.message}`,{variant:"error"})}})},h=e=>{let t=(0,o.NL)(),{enqueueSnackbar:i}=(0,s.Ds)();return(0,a.D)({mutationFn:async t=>{let{shotId:i,promptData:r}=t;if(!e)throw Error("No story ID provided");let n=await fetch(`/api/stories/${e}/shots/${i}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw Error(`Failed to update shot prompts: ${n.statusText}`);return await n.json()},onSuccess:r=>{t.invalidateQueries({queryKey:l.Y.detail(e||"")}),i("Shot prompts updated successfully",{variant:"success"})},onError:e=>{console.error("Error updating shot prompts:",e),i(`Error: ${e.message}`,{variant:"error"})}})},m=e=>{let t=(0,o.NL)(),{enqueueSnackbar:i}=(0,s.Ds)();return(0,a.D)({mutationFn:async t=>{let{shotId:i,mediaType:r,mediaId:n,mediaUrl:o}=t;if(!e)throw Error("No story ID provided");let a=await fetch(`/api/stories/${e}/shots/${i}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({active_media:{media_type:r,media_id:n,media_url:o}})});if(!a.ok)throw Error(`Failed to set active media: ${a.statusText}`);return await a.json()},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:l.Y.detail(e||"")}),i(`Active ${n.mediaType} updated successfully`,{variant:"success"})},onError:(e,t)=>{console.error(`Error setting active ${t.mediaType}:`,e),i(`Error: ${e.message}`,{variant:"error"})}})},x=()=>{let[e,t]=(0,r.useState)({});return{pollWorkflowStatus:async e=>{for(let i=0;i<100;i++){await new Promise(e=>setTimeout(e,3e3));let i=await d.ZP.post("/stories/workflow/status",{workflowRunIds:e});if(200!==i.status)throw Error(i.data.error||`Polling failed with status ${i.status}`);let r=i.data;if("RUN_SUCCESS"===r.status)return r.output;if("RUN_FAILED"===r.status){var t;throw console.error("Workflow failed:",r.error,r),Error((null===(t=r.error)||void 0===t?void 0:t.message)||r.error||"Workflow execution failed")}if("RUN_CANCELED"===r.status)throw Error("Workflow was canceled")}throw Error(`Workflow ${e} timed out after 100 attempts.`)},pollingErrors:e,setPollingErrors:t}},g=e=>{let t=(0,o.NL)(),{enqueueSnackbar:i}=(0,s.Ds)(),{pollWorkflowStatus:n}=x(),[a,c]=(0,r.useState)({}),[p,h]=(0,r.useState)({});return{regenerateMedia:async(r,o,a,s,p)=>{if(!e)throw Error("No story ID provided");let m=1===o.length?o[0]:"both";h(e=>({...e,[r]:{workflowRunId:void 0,error:void 0,regeneratingType:m}})),c(e=>({...e,[r]:!0}));try{let c={media_types:o,image_prompt:a,video_prompt:s};p&&(c.advanced_settings=p);let m=await d.ZP.post(`/stories/workflow/regenerate_shot?storyId=${e}&shotId=${r}`,c);if(200!==m.status){let e=m.data.catch(()=>({error:`Failed to start regeneration: ${m.statusText}`}));throw Error(e.error||`Failed to start regeneration: ${m.statusText}`)}let{workflowRunId:x}=m.data;if(!x)throw Error("workflowRunId not found in regeneration response");try{h(e=>({...e,[r]:{...e[r],workflowRunId:x}}));let a=await n(x);if(!a||!a.success)throw Error((null==a?void 0:a.error)||"Workflow completed but indicated failure or missing output.");return t.invalidateQueries({queryKey:l.Y.detail(e)}),t.invalidateQueries({queryKey:u.media(e,r)}),i(`Shot ${o.join(" and ")} regenerated successfully via workflow`,{variant:"success"}),a}finally{h(e=>({...e,[r]:{...e[r],workflowRunId:void 0}}))}}catch(e){throw console.error("Error in regenerateShotMedia process:",e),i(`Error: ${e.message}`,{variant:"error"}),h(t=>({...t,[r]:{...t[r],error:e.message}})),e}finally{c(e=>({...e,[r]:!1}))}},regeneratingShots:a,pollingState:p}},f=e=>{let t=(0,o.NL)(),{enqueueSnackbar:i}=(0,s.Ds)(),{pollWorkflowStatus:n}=x(),[a,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)(null);return{generateMedia:async r=>{if(!e)throw Error("No story ID provided");d(!0),p(null);try{var o,a,s,c;let d=await fetch(`/api/stories/workflow/batch_generate?storyId=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({media_types:r})});if(!d.ok)throw Error(`Failed to start batch generation: ${d.statusText}`);let h=await d.json();if(h.workflowRunId){p(h.workflowRunId),i(`Batch ${r.join(" and ")} generation started with workflow ${h.workflowRunId}`,{variant:"info"});let s=await n(h.workflowRunId);if(s&&s.success){if(t.invalidateQueries({queryKey:l.Y.detail(e)}),null===(a=s.story)||void 0===a?void 0:null===(o=a.storyboard)||void 0===o?void 0:o.shots)for(let i of s.story.storyboard.shots)t.invalidateQueries({queryKey:u.media(e,i.shot_id)});return i(`Batch ${r.join(" and ")} generation completed successfully`,{variant:"success"}),s}}else{if(t.invalidateQueries({queryKey:l.Y.detail(e)}),null===(c=h.story)||void 0===c?void 0:null===(s=c.storyboard)||void 0===s?void 0:s.shots)for(let i of h.story.storyboard.shots)t.invalidateQueries({queryKey:u.media(e,i.shot_id)});return i(`${r.join(" and ")} generation completed`,{variant:"success"}),h}}catch(e){throw console.error(`Error starting batch ${r.join("/")} generation:`,e),i(`Error: ${e.message}`,{variant:"error"}),e}finally{d(!1),p(null)}},isGenerating:a,workflowRunId:c}},v=()=>{let e=(0,o.NL)(),{enqueueSnackbar:t}=(0,s.Ds)(),{pollWorkflowStatus:i}=x(),[n,a]=(0,r.useState)(!1),[l,u]=(0,r.useState)(null);return{rebuildTimelineAndExport:async(r,n,o)=>{a(!0),u(null);try{let a=await d.ZP.post("/stories/workflow/rebuild_timeline_and_export",{story_id:r,force_music_reselection:n||!1,rebuild_timeline:o||!1});if(200!==a.status)throw Error(`Failed to start recovery: ${a.data.error}`);let s=a.data;if(s.workflowRunId){u(s.workflowRunId);let r=o?"Recovery (rebuild + export)":"Video export";t(`${r} started with workflow ${s.workflowRunId}`,{variant:"info"});let n=await i(s.workflowRunId);if(n&&n.success)return(0,c.tO)(e,n.story),t(o?"Timeline rebuilt and video exported successfully":"Video exported successfully",{variant:"success"}),n}else throw Error("No workflow ID received from recovery API")}catch(e){throw console.error("Error in recovery process:",e),t(o?`Recovery error: ${e.message}`:`Export error: ${e.message}`,{variant:"error"}),e}finally{a(!1),u(null)}},isRebuilding:n,workflowRunId:l}}},92101:function(e,t,i){i.d(t,{AJ:function(){return p},GH:function(){return y},MH:function(){return f},lj:function(){return v},lk:function(){return h},no:function(){return g},rB:function(){return x},uO:function(){return m}});var r=i(75271),n=i(13200),o=i(21617),a=i(75616),s=i(21964),l=i(10986),d=i(1327),c=i(28337),u=i(60439);let p=()=>{let{enqueueSnackbar:e}=(0,l.Ds)();return(0,n.a)({queryKey:d.Y.lists_all(),queryFn:async()=>{let e=await c.ZP.get("/stories");if(200!==e.status)throw Error(`Failed to fetch stories: ${e.statusText}`);return e.data},onError:t=>{console.error("Error fetching stories:",t),e(`Error: ${t.message}`,{variant:"error"})}})},h=()=>{let e=async e=>{let{pageParam:t=null}=e,i=new URLSearchParams;return t&&i.append("cursor",t),(await c.ZP.get(`/stories?${i.toString()}`)).data},{data:t,isFetching:i,fetchNextPage:r,hasNextPage:n,...a}=(0,o.N)(d.Y.lists(),e,{getNextPageParam:e=>(null==e?void 0:e.nextCursor)||null,keepPreviousData:!0,refetchOnWindowFocus:!0});return{stories:(null==t?void 0:t.pages.flatMap(e=>e.stories))||[],hasNextPage:n,isFetching:i,fetchNextPage:r,...a}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=async e=>{let{pageParam:t=null}=e,i=new URLSearchParams;return t&&i.append("cursor",t),(await c.ZP.get(`/stories/published?${i.toString()}`)).data},{data:i,isFetching:r,isFetchingNextPage:n,fetchNextPage:a,hasNextPage:s,...l}=(0,o.N)(d.Y.published(e),t,{getNextPageParam:e=>(null==e?void 0:e.nextCursor)||null});return{stories:(null==i?void 0:i.pages.flatMap(e=>e.stories))||[],hasNextPage:s,isFetching:r,isFetchingNextPage:n,fetchNextPage:a,...l}},x=e=>{let{enqueueSnackbar:t}=(0,l.Ds)(),[i,o]=(0,r.useState)(null);return{...(0,n.a)({queryKey:d.Y.detail(e||""),queryFn:async()=>{if(!e)return null;let t=await c.ZP.get(`/stories/${e}`);if(200!==t.status)throw Error(`Failed to get story: ${t.statusText}`);return t.data},enabled:!!e,refetchOnMount:!0,onSuccess:e=>{e&&o(structuredClone(e))},onError:e=>{console.error("Error getting story:",e),t(`Error: ${e.message}`,{variant:"error"})}}),editedStory:i,setEditedStory:o}},g=()=>{let e=(0,a.NL)(),{enqueueSnackbar:t}=(0,l.Ds)();return(0,s.D)({mutationFn:async e=>{let t=await c.ZP.post("/stories",e);if(200!==t.status)throw Error(`Failed to create story: ${t.statusText}`);return t.data},onSuccess:i=>{(0,u.Sg)(e,i),t("Story created successfully",{variant:"success"})},onError:e=>{console.error("Error creating story:",e),t(`Error: ${e.message}`,{variant:"error"})}})},f=e=>{let t=(0,a.NL)(),{enqueueSnackbar:i}=(0,l.Ds)();return(0,s.D)({mutationFn:async t=>{if(!e)throw Error("No story ID provided");let i=await c.ZP.patch(`/stories/${e}`,t);if(200!==i.status)throw Error(`Failed to update story: ${i.statusText}`);return i.data},onSuccess:e=>{(0,u.tO)(t,e),i("Story updated successfully",{variant:"success"})},onError:e=>{console.error("Error updating story:",e),i(`Error: ${e.message}`,{variant:"error"})}})},v=()=>{let e=(0,a.NL)(),{enqueueSnackbar:t}=(0,l.Ds)();return(0,s.D)({mutationFn:async e=>{let t=await c.ZP.delete(`/stories/${e}`,{method:"DELETE"});if(200!==t.status)throw Error(`Failed to delete story: ${t.statusText}`);return e},onSuccess:i=>{(0,u.tN)(e,i),t("Story deleted successfully",{variant:"success"})},onError:e=>{console.error("Error deleting story:",e),t(`Error: ${e.message}`,{variant:"error"})}})},y=()=>{let e=(0,a.NL)(),{enqueueSnackbar:t}=(0,l.Ds)();return(0,s.D)({mutationFn:async e=>{let{templateStoryId:t,operation:i}=e,r=await c.ZP.post("/stories/operate_template_story",{template_story_id:t,operation:i});if(200!==r.status)throw Error(`Failed to create story from template: ${r.statusText}`);return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:d.Y.lists()})},onError:e=>{console.error("Error creating story from template:",e),t(`Error: ${e.message}`,{variant:"error"})}})}},9370:function(e,t,i){i.d(t,{EY:function(){return p},sg:function(){return u},vi:function(){return h}});var r=i(75271),n=i(75616),o=i(21964),a=i(10986),s=i(1327),l=i(28337),d=i(59435),c=i(45137);let u=e=>{let t=(0,n.NL)(),{enqueueSnackbar:i}=(0,a.Ds)();return(0,o.D)({mutationFn:async t=>{if(!e)throw Error("No story ID provided");let i=await l.ZP.post(`/stories/${e}/storyboard`,t);if(200!==i.status)throw Error(`Failed to generate storyboard: ${i.statusText}`);return i.data},onSuccess:r=>{t.invalidateQueries({queryKey:s.Y.detail(e||"")}),i("Script regenerated successfully",{variant:"success"})},onError:e=>{console.error("Error generating storyboard:",e),i(`Error generating storyboard: ${e.message}`,{variant:"error"})}})},p=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{enqueueSnackbar:t}=(0,a.Ds)(),[i,n]=(0,r.useState)(!1),[s,u]=(0,r.useState)(null);return{...(0,o.D)({mutationFn:async i=>{n(!0),u(null);try{(0,c.B)("story_creation_requested",{story_type:"character_vlog",prompt:i.vlog_topic});let r=await l.ZP.post("/stories/workflow/generate_character_vlog",i);if(200!==r.status){let e=r.data;throw Error(`Failed to generate character vlog ${e.message}`)}(0,c.B)("story_created",{story_type:"character_vlog",prompt:i.vlog_topic,credits_num:d.v["story.character_vlog"].credit});let n=r.data;if(!n.workflowRunId)return t("Character vlog generated successfully",{variant:"success"}),n;if(!e)return n;u(n.workflowRunId),t(`Character vlog generation started with workflow ${n.workflowRunId}`,{variant:"info"})}catch(e){throw e}finally{n(!1),u(null)}}}),isGenerating:i,workflowRunId:s}},h=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{enqueueSnackbar:t}=(0,a.Ds)(),[i,n]=(0,r.useState)(!1),[s,u]=(0,r.useState)(null);return{...(0,o.D)({mutationFn:async i=>{n(!0),u(null);try{(0,c.B)("story_creation_requested",{story_type:"script_to_video",prompt:i.script_content});let r=await l.ZP.post("/stories/workflow/generate_script_to_video",i);if((0,c.B)("story_created",{story_type:"script_to_video",prompt:i.script_content,credits_num:d.v["story.script_to_video"].credit}),200!==r.status){let e=r.data;throw Error(`Failed to generate script to video: ${e.message||r.statusText}`)}let n=r.data;if(!n.workflowRunId)return t("Script to video generated successfully",{variant:"success"}),n;if(!e)return n;u(n.workflowRunId),t(`Script to video generation started with workflow ${n.workflowRunId}`,{variant:"info"})}catch(e){throw e}finally{n(!1),u(null)}}}),isGenerating:i,workflowRunId:s}}},37841:function(e,t,i){i.d(t,{WQ:function(){return E},T9:function(){return ed},PL:function(){return el},VL:function(){return Q},WJ:function(){return Y},NM:function(){return T},Tq:function(){return eo},lj:function(){return r.lj},vi:function(){return r.vi},uO:function(){return r.uO},oH:function(){return r.oH},EL:function(){return r.EL},HM:function(){return r.HM},Bx:function(){return r.Bx},rB:function(){return r.rB},Jo:function(){return r.Jo},MH:function(){return r.MH}});var r=i(85245),n=i(52676),o=i(75271),a=i(65893);function s(e){let{children:t,value:i,index:r,...o}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:i!==r,id:`shots-tabpanel-${r}`,"aria-labelledby":`shots-tab-${r}`,...o,children:i===r&&(0,n.jsx)(a.Z,{sx:{p:3},children:t})})}var l=i(76392),d=i(26773),c=i(14388),u=i(2850),p=i(26784),h=i(62935),m=i(16850),x=i(21461),g=i(71137),f=i(44754),v=i(97348),y=i(98588),b=i(33914),C=i(53049),w=i(12558),j=i(35019),F=i(17831),k=i(48945),_=i(2488),S=i(62205),I=i(2656),Z=i(62462);function E(e){var t,i,s,E;let{onStoryCreated:A,onWorkflowStatusChange:M}=e,[R,T]=(0,o.useState)("My Character Vlog"),[D,z]=(0,o.useState)("https://picsum.photos/seed/character/800/800"),[P,L]=(0,o.useState)("<<THE_MARKER>> is learning how to code"),[W,B]=(0,o.useState)("auto"),[H,U]=(0,o.useState)("character_model"),[O,$]=(0,o.useState)(null),[N,G]=(0,o.useState)(!1),[V,K]=(0,o.useState)(!1),[Y,q]=(0,o.useState)({model:"flux_kontext",parameters:{}}),[X,J]=(0,o.useState)({model:"kling2.1",parameters:{videoMode:"std"}}),{mutate:Q,isLoading:ee}=(0,r.no)(),{mutate:et,isLoading:ei,isGenerating:er,workflowRunId:en}=(0,r.EY)();(0,o.useEffect)(()=>{M&&(er&&en?M({isGenerating:!0,workflowRunId:en,message:`Polling workflow: ${en}`}):er&&M({isGenerating:!0,message:"Starting character vlog generation..."}))},[er,en,M]);let eo=()=>{G(!0)};return(0,n.jsxs)(u.Z,{defaultExpanded:!0,sx:{mb:2,bgcolor:"background.paper",borderRadius:1,overflow:"hidden"},children:[(0,n.jsx)(p.Z,{expandIcon:(0,n.jsx)(l.Z,{}),sx:{color:"white","& .MuiAccordionSummary-expandIconWrapper":{color:"white"}},children:(0,n.jsx)(h.Z,{variant:"h6",children:"Create Story"})}),(0,n.jsxs)(m.Z,{sx:{p:3},children:[(0,n.jsxs)(a.Z,{sx:{mb:3,p:2,bgcolor:"background.default",borderRadius:1},children:[(0,n.jsx)(h.Z,{variant:"subtitle1",gutterBottom:!0,color:"primary",children:"Quick Create"}),(0,n.jsx)(x.Z,{fullWidth:!0,label:"Story Title",variant:"outlined",size:"small",value:R,onChange:e=>T(e.target.value),sx:{mb:2}}),(0,n.jsx)(g.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{Q({title:R,category_id:"character_vlog",category_inputs:{vlog_topic:"a story about a cat"}},{onSuccess:e=>{e.id&&A&&A(e.id)}})},disabled:ee,startIcon:ee?(0,n.jsx)(f.Z,{size:20}):null,sx:{borderRadius:2},children:ee?"Creating...":"Create Empty Character Vlog Draft"})]}),(0,n.jsxs)(a.Z,{sx:{p:2,bgcolor:"background.default",borderRadius:1},children:[(0,n.jsx)(h.Z,{variant:"subtitle1",gutterBottom:!0,color:"primary",children:"Generate Character Full Vlog"}),(0,n.jsxs)(v.Z,{component:"fieldset",sx:{mb:2},children:[(0,n.jsx)(y.Z,{component:"legend",children:"Character Source"}),(0,n.jsxs)(b.Z,{row:!0,value:H,onChange:e=>{let t=e.target.value;U(t),"image_url"===t?($(null),q({model:"gpt",parameters:{quality:"medium"}})):q({model:"character",parameters:{}})},sx:{mt:1},children:[(0,n.jsx)(C.Z,{value:"image_url",control:(0,n.jsx)(w.Z,{}),label:"Image URL"}),(0,n.jsx)(C.Z,{value:"character_model",control:(0,n.jsx)(w.Z,{}),label:"Character Model"})]})]}),"image_url"===H?(0,n.jsx)(x.Z,{fullWidth:!0,label:"Character Image URL",variant:"outlined",size:"small",value:D,onChange:e=>z(e.target.value),sx:{mb:2}}):(0,n.jsx)(a.Z,{sx:{mb:2},children:O?(0,n.jsxs)(j.Z,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[(0,n.jsx)(F.Z,{src:O.image_url||void 0}),(0,n.jsxs)(a.Z,{sx:{flex:1},children:[(0,n.jsx)(h.Z,{variant:"body2",fontWeight:"medium",children:O.model_name}),(0,n.jsx)(k.Z,{label:O.id,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}})]}),(0,n.jsx)(g.Z,{variant:"outlined",size:"small",onClick:eo,children:"Change"})]}):(0,n.jsx)(g.Z,{fullWidth:!0,variant:"outlined",startIcon:(0,n.jsx)(d.Z,{}),onClick:eo,sx:{mb:2},children:"Select Character Model"})}),(0,n.jsxs)(a.Z,{sx:{mb:2},children:[(0,n.jsx)(g.Z,{variant:"text",onClick:()=>K(!V),sx:{mb:1},children:V?"\uD83D\uDD3C Advanced Settings":"\uD83D\uDD3D Advanced Settings"}),(0,n.jsx)(_.Z,{in:V,children:(0,n.jsxs)(a.Z,{sx:{p:2,borderRadius:1},children:[(0,n.jsx)(h.Z,{variant:"subtitle2",gutterBottom:!0,children:"Model Configuration"}),(0,n.jsxs)(v.Z,{fullWidth:!0,sx:{mb:2},children:[(0,n.jsx)(y.Z,{children:"Image Model"}),(0,n.jsxs)(S.Z,{value:Y.model,onChange:e=>{switch(e.target.value){case"gpt":q({model:"gpt",parameters:{quality:"medium"}});break;case"character":q({model:"character",parameters:{}});break;case"flux_kontext":q({model:"flux_kontext",parameters:{}})}},size:"small",children:["character_model"===H&&(0,n.jsx)(I.Z,{value:"character",children:"Character Model"}),(0,n.jsx)(I.Z,{value:"gpt",children:"GPT Model"}),(0,n.jsx)(I.Z,{value:"flux_kontext",children:"Flux Kontext"})]}),"image_url"===H&&(0,n.jsx)(h.Z,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"Character model is only available when using Character Model mode"})]}),"gpt"===Y.model&&(0,n.jsxs)(v.Z,{fullWidth:!0,sx:{mb:2},children:[(0,n.jsx)(y.Z,{children:"Image Quality"}),(0,n.jsxs)(S.Z,{value:(null===(t=Y.parameters)||void 0===t?void 0:t.quality)||"medium",onChange:e=>q({...Y,parameters:{quality:e.target.value}}),size:"small",children:[(0,n.jsx)(I.Z,{value:"low",children:"Low"}),(0,n.jsx)(I.Z,{value:"medium",children:"Medium"}),(0,n.jsx)(I.Z,{value:"high",children:"High"})]})]}),(0,n.jsxs)(v.Z,{fullWidth:!0,sx:{mb:2},children:[(0,n.jsx)(y.Z,{children:"Video Model"}),(0,n.jsxs)(S.Z,{value:X.model,onChange:e=>{let t=e.target.value;switch(t){case"pixverse4.5":J({model:t,parameters:{resolution:"720p"}});break;case"kling":case"kling2.1":J({model:t,parameters:{videoMode:"std"}});break;default:J({model:t,parameters:{}})}},size:"small",children:[(0,n.jsx)(I.Z,{value:"pixverse4.5",children:"PixVerse 4.5"}),(0,n.jsx)(I.Z,{value:"kling",children:"Kling 1.6"}),(0,n.jsx)(I.Z,{value:"kling2.1",children:"Kling 2.1"}),(0,n.jsx)(I.Z,{value:"wan-i2v",children:"Wan 2.1"})]})]}),"pixverse4.5"===X.model&&(0,n.jsxs)(v.Z,{fullWidth:!0,sx:{mb:2},children:[(0,n.jsx)(y.Z,{children:"Video Resolution"}),(0,n.jsxs)(S.Z,{value:(null===(i=X.parameters)||void 0===i?void 0:i.resolution)||"720p",onChange:e=>J({...X,parameters:{resolution:e.target.value}}),size:"small",children:[(0,n.jsx)(I.Z,{value:"360p",children:"360p"}),(0,n.jsx)(I.Z,{value:"720p",children:"720p"}),(0,n.jsx)(I.Z,{value:"1080p",children:"1080p"})]})]}),"kling"===X.model&&(0,n.jsxs)(v.Z,{fullWidth:!0,sx:{mb:2},children:[(0,n.jsx)(y.Z,{children:"Video Mode"}),(0,n.jsxs)(S.Z,{value:(null===(s=X.parameters)||void 0===s?void 0:s.videoMode)||"std",onChange:e=>J({...X,parameters:{videoMode:e.target.value}}),size:"small",children:[(0,n.jsx)(I.Z,{value:"std",children:"Standard"}),(0,n.jsx)(I.Z,{value:"pro",children:"Pro"})]})]}),"kling2.1"===X.model&&(0,n.jsxs)(v.Z,{fullWidth:!0,sx:{mb:2},children:[(0,n.jsx)(y.Z,{children:"Video Mode"}),(0,n.jsxs)(S.Z,{value:(null===(E=X.parameters)||void 0===E?void 0:E.videoMode)||"std",onChange:e=>J({...X,parameters:{videoMode:e.target.value}}),size:"small",children:[(0,n.jsx)(I.Z,{value:"std",children:"Standard"}),(0,n.jsx)(I.Z,{value:"pro",children:"Pro"})]})]})]})})]}),(0,n.jsx)(x.Z,{fullWidth:!0,label:"Script",variant:"outlined",value:P,onChange:e=>L(e.target.value),multiline:!0,rows:4,sx:{mb:2},placeholder:"Write a script for your character vlog. Each sentence will become a shot."}),(0,n.jsx)(x.Z,{fullWidth:!0,label:"Background Music URL (Optional)",variant:"outlined",size:"small",value:W,onChange:e=>B(e.target.value),sx:{mb:2},placeholder:"https://example.com/background-music.mp3",helperText:"Add background music to enhance your vlog. "}),(0,n.jsx)(g.Z,{fullWidth:!0,variant:"contained",color:"secondary",onClick:()=>{et({title:R,character:"character_model"===H&&O?{model_id:O.id}:{name:"My Character",reference_image_url:D,reference_mode:"quick"},aspect_ratio:"16:9",vlog_topic:P,...W.trim()&&{background_music:W.trim()},advanced_settings:V?{image_model_config:Y,video_model_config:X}:void 0},{onSuccess:e=>{var t;let i=(null===(t=e.story)||void 0===t?void 0:t.id)||e.id;i&&A&&A(i),M&&M({isGenerating:!1,message:"Character vlog generated successfully!"})},onError:e=>{M&&M({isGenerating:!1,error:e.message||"Failed to generate character vlog"})}})},disabled:er||ei,startIcon:er||ei?(0,n.jsx)(f.Z,{size:20,color:"inherit"}):(0,n.jsx)(c.Z,{}),sx:{borderRadius:2},children:er||ei?"Generating...":"Generate Character Vlog"})]})]}),(0,n.jsx)(Z.Z,{open:N,onClose:()=>{G(!1)},onSelectCharacter:e=>{$(e)}})]})}var A=i(20665),M=i(43682),R=i(95254);function T(e){let{selectedStoryId:t,onSelectStory:i}=e,{data:o=[],isLoading:s,refetch:l}=(0,r.AJ)();return(0,n.jsxs)(M.Z,{sx:{p:0,bgcolor:"background.paper",flex:1,display:"flex",flexDirection:"column",borderRadius:1,overflow:"hidden"},children:[(0,n.jsxs)(a.Z,{sx:{p:2,color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)(h.Z,{variant:"h6",children:"My Stories"}),(0,n.jsx)(g.Z,{variant:"contained",size:"small",onClick:()=>l(),disabled:s,startIcon:s?(0,n.jsx)(f.Z,{size:16,color:"inherit"}):(0,n.jsx)(A.Z,{}),sx:{bgcolor:"white","&:hover":{bgcolor:"rgba(255,255,255,0.9)"}},children:s?"Loading...":"Refresh"})]}),o.length>0?(0,n.jsx)(a.Z,{sx:{flex:1,overflowY:"auto",p:2,"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"4px"}},children:o.map(e=>(0,n.jsx)(D,{story:e,isSelected:t===e.id,onClick:()=>e.id&&i(e.id)},e.id))}):(0,n.jsx)(a.Z,{sx:{p:3,textAlign:"center",flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(h.Z,{color:"text.secondary",children:"No stories found. Create a new story or click refresh."})})]})}function D(e){let{story:t,isSelected:i,onClick:r}=e;return(0,n.jsxs)(M.Z,{elevation:i?3:1,onClick:r,sx:{p:2,mb:2,cursor:"pointer",bgcolor:i?"action.selected":"background.paper",borderLeft:i?"4px solid":"1px solid",borderLeftColor:i?"primary.main":"divider","&:hover":{bgcolor:i?"action.selected":"action.hover"},transition:"all 0.2s ease"},children:[(0,n.jsx)(h.Z,{variant:"subtitle1",fontWeight:i?"bold":"normal",children:t.title}),(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[(0,n.jsx)(h.Z,{variant:"caption",color:"text.secondary",children:(0,R.g)(t.created_at).toLocaleDateString()}),(0,n.jsx)(a.Z,{sx:{px:1,borderRadius:"4px",fontSize:"0.75rem",bgcolor:"completed"===t.status?"success.light":t.status.startsWith("processing:")?"info.light":"failed"===t.status?"error.light":"warning.light",color:"completed"===t.status?"success.dark":t.status.startsWith("processing:")?"info.dark":"failed"===t.status?"error.dark":"warning.dark"},children:t.status})]})]})}var z=i(77039),P=i(78657),L=i(98798),W=i(56938),B=i(54055),H=i(48774),U=i(92598),O=i(66686),$=i(70565),N=i(61271),G=i(77742),V=i(57598),K=i(73807);function Y(e){var t,i;let{story:s,onEditTitle:l,onDeleteStory:d}=e,[c,u]=(0,o.useState)(!1),{mutate:p,isLoading:m}=(0,r.sg)(s.id),{generateMedia:x,isGenerating:v}=(0,r.cU)(s.id),{rebuildTimelineAndExport:y,isRebuilding:b,workflowRunId:C}=(0,r.oH)(),w=s.video_editor_timeline,j=(null==w?void 0:w.mediaAssets)||[],F=(null==w?void 0:w.tracks)||[],k=async()=>{if(s.id)try{await y(s.id,!1)}catch(e){console.error("Recovery failed:",e)}},_=()=>{u(!1)},S=null===(i=s.storyboard)||void 0===i?void 0:null===(t=i.shots)||void 0===t?void 0:t.every(e=>e.active_video_url);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.Z,{sx:{mb:2,p:2,bgcolor:"background.paper",borderRadius:1},children:[b&&C?(0,n.jsxs)(U.Z,{severity:"info",sx:{mb:2},children:["Recovery in progress with workflow ID: ",C]}):null,(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,n.jsx)(h.Z,{variant:"h5",children:s.title}),(0,n.jsx)(O.Z,{size:"small",onClick:l,children:(0,n.jsx)(W.Z,{})})]}),(0,n.jsxs)(h.Z,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["ID: ",s.id," | Status: ",s.status]}),(0,n.jsxs)(h.Z,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Created: ",(0,R.g)(s.created_at).toLocaleString()]}),(0,n.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Updated: ",(0,R.g)(s.updated_at).toLocaleString()]})]}),(0,n.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsx)($.Z,{title:"Rebuild timeline and export video (recovery)",children:(0,n.jsx)("span",{children:(0,n.jsx)(g.Z,{variant:"contained",color:"warning",size:"small",onClick:k,disabled:b||!S,startIcon:b?(0,n.jsx)(f.Z,{size:16}):(0,n.jsx)(z.Z,{}),sx:{textTransform:"none"},children:b?"Recovering...":"Recovery Mode"})})}),(0,n.jsx)(g.Z,{variant:"outlined",size:"small",onClick:()=>{p({use_placeholders:!1})},disabled:m,startIcon:m?(0,n.jsx)(f.Z,{size:16}):(0,n.jsx)(A.Z,{}),children:m?"Generating...":"Regenerate Storyboard"}),(0,n.jsx)(g.Z,{variant:"outlined",color:"secondary",size:"small",onClick:()=>{x(["image"])},disabled:v,startIcon:v?(0,n.jsx)(f.Z,{size:16}):(0,n.jsx)(B.Z,{}),children:v?"Generating...":"Batch Gen Images"}),(0,n.jsx)(g.Z,{variant:"outlined",color:"info",size:"small",onClick:()=>{x(["video"])},disabled:v,startIcon:v?(0,n.jsx)(f.Z,{size:16}):(0,n.jsx)(H.Z,{}),children:v?"Generating...":"Batch Gen Videos"}),(0,n.jsx)(g.Z,{variant:"outlined",color:"primary",size:"small",onClick:()=>{x(["image","video"])},disabled:v,startIcon:v?(0,n.jsx)(f.Z,{size:16}):(0,n.jsx)(A.Z,{}),children:v?"Generating...":"Batch Gen All"}),s.last_export_url?(0,n.jsx)(g.Z,{variant:"contained",color:"success",size:"small",component:"a",href:s.last_export_url,target:"_blank",rel:"noopener noreferrer",startIcon:(0,n.jsx)(L.Z,{}),children:"Download Video"}):null,w?(0,n.jsx)(g.Z,{variant:"outlined",size:"small",onClick:()=>{u(!0)},sx:{textTransform:"none"},children:"Open Video Editor"}):null,(0,n.jsx)(g.Z,{variant:"outlined",color:"error",size:"small",onClick:d,sx:{textTransform:"none"},children:"Delete Story"})]})]})]}),(0,n.jsxs)(N.Z,{open:c,onClose:_,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{height:"90vh"}},children:[(0,n.jsx)(G.Z,{children:(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)(h.Z,{variant:"h6",children:["Video Editor - ",s.title]}),(0,n.jsx)(O.Z,{onClick:_,children:(0,n.jsx)(P.default,{})})]})}),(0,n.jsx)(V.Z,{sx:{p:0,height:"100%"},children:w?(0,n.jsx)(K.d,{mediaAssets:j,tracks:F}):null})]})]})}var q=i(11220),X=i(27706),J=i(30880);function Q(e){let{story:t,editedStory:i,onCategoryInputChange:r}=e;if(!t||!i)return null;let o=(e,t)=>{let i=t,n=t.trim();if(n.startsWith("{")||n.startsWith("["))try{i=JSON.parse(t)}catch{i=t}r(e,i)};return(0,n.jsxs)(u.Z,{sx:{mb:2,bgcolor:"background.paper","&:before":{display:"none"}},children:[(0,n.jsx)(p.Z,{expandIcon:(0,n.jsx)(l.Z,{}),"aria-controls":"category-inputs-content",id:"category-inputs-header",children:(0,n.jsx)(h.Z,{variant:"subtitle1",color:"primary",children:"Category Inputs"})}),(0,n.jsx)(m.Z,{children:(null==i?void 0:i.category_inputs)&&Object.keys(i.category_inputs).length>0?Object.entries(i.category_inputs).map(e=>{let[t,i]=e,r=(0,q.Z)(i)||(0,X.Z)(i),s=(0,J.Z)(i)?i:JSON.stringify(i,null,2),l=r||(0,J.Z)(i)&&i.length>50;return(0,n.jsx)(a.Z,{sx:{mb:2},children:(0,n.jsx)(x.Z,{fullWidth:!0,label:t,value:s,onChange:e=>o(t,e.target.value),multiline:l,rows:l?4:1})},t)}):(0,n.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"No category inputs available"})})]})}var ee=i(40174);function et(e){var t,i,o,s,l,d,u,p,m,v;let{storyId:y,shot:b,index:C,onPromptChange:w}=e,{mutate:j,isLoading:F}=(0,r.Jo)(y),{data:k={images:[],videos:[]},isLoading:_,refetch:S}=(0,r.Bx)(y,b.shot_id),{mutate:I}=(0,r.HM)(y),{regenerateMedia:Z,regeneratingShots:E,pollingState:R}=(0,r.EL)(y),T=e=>{Z(b.shot_id,e,b.image_prompt,b.video_prompt)},D=(e,t,i)=>{I({shotId:b.shot_id,mediaType:e,mediaId:t,mediaUrl:i})};return(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,n.jsxs)(h.Z,{variant:"h6",children:["Shot ",C+1]}),(0,n.jsxs)(a.Z,{children:[(0,n.jsx)($.Z,{title:"Regenerate Image",children:(0,n.jsx)("span",{children:(0,n.jsx)(O.Z,{color:"secondary",onClick:()=>T(["image"]),disabled:E[b.shot_id],sx:{mr:1,backgroundColor:"rgba(186, 104, 200, 0.08)","&:hover":{backgroundColor:"rgba(186, 104, 200, 0.16)"}},children:E[b.shot_id]&&(null===(t=R[b.shot_id])||void 0===t?void 0:t.regeneratingType)==="image"?(0,n.jsx)(f.Z,{size:24,color:"secondary"}):(0,n.jsx)(B.Z,{})})})}),(0,n.jsx)($.Z,{title:"Regenerate Video",children:(0,n.jsx)("span",{children:(0,n.jsx)(O.Z,{color:"info",onClick:()=>T(["video"]),disabled:E[b.shot_id],sx:{mr:1,backgroundColor:"rgba(3, 169, 244, 0.08)","&:hover":{backgroundColor:"rgba(3, 169, 244, 0.16)"}},children:E[b.shot_id]&&(null===(i=R[b.shot_id])||void 0===i?void 0:i.regeneratingType)==="video"?(0,n.jsx)(f.Z,{size:24,color:"info"}):(0,n.jsx)(H.Z,{})})})}),(0,n.jsx)($.Z,{title:"Regenerate Both",children:(0,n.jsx)("span",{children:(0,n.jsx)(O.Z,{color:"primary",onClick:()=>T(["image","video"]),disabled:E[b.shot_id],sx:{backgroundColor:"rgba(25, 118, 210, 0.08)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.16)"}},children:E[b.shot_id]&&(null===(o=R[b.shot_id])||void 0===o?void 0:o.regeneratingType)==="both"?(0,n.jsx)(f.Z,{size:24,color:"primary"}):(0,n.jsx)(c.Z,{})})})})]})]}),(null===(s=R[b.shot_id])||void 0===s?void 0:s.workflowRunId)&&E[b.shot_id]?(0,n.jsx)(a.Z,{sx:{mb:2,p:1,backgroundColor:"rgba(255, 235, 59, 0.1)",borderRadius:1},children:(0,n.jsxs)(h.Z,{variant:"caption",color:"textSecondary",children:["Polling workflow: ",null===(l=R[b.shot_id])||void 0===l?void 0:l.workflowRunId," for"," ",null===(d=R[b.shot_id])||void 0===d?void 0:d.regeneratingType,"..."]})}):null,(null===(u=R[b.shot_id])||void 0===u?void 0:u.error)?(0,n.jsx)(a.Z,{sx:{mb:2,p:1,backgroundColor:"rgba(244, 67, 54, 0.1)",borderRadius:1},children:(0,n.jsxs)(h.Z,{variant:"caption",color:"error",children:["Polling Error: ",null===(p=R[b.shot_id])||void 0===p?void 0:p.error]})}):null,(0,n.jsxs)(h.Z,{variant:"caption",color:"text.secondary",children:["ID: ",b.shot_id]}),(0,n.jsxs)(a.Z,{sx:{mb:3,mt:2},children:[(0,n.jsx)(a.Z,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:(0,n.jsx)(g.Z,{variant:"contained",color:"primary",size:"small",onClick:()=>{j({shotId:b.shot_id,promptData:{image_prompt:b.image_prompt,video_prompt:b.video_prompt,voice_over:b.voice_over}})},disabled:F,startIcon:F?(0,n.jsx)(f.Z,{size:16}):null,children:"Save Shot"})}),(0,n.jsx)(x.Z,{fullWidth:!0,label:"Image Prompt",value:b.image_prompt||"",onChange:e=>w(b.shot_id,"image_prompt",e.target.value),multiline:!0,rows:2,sx:{mb:2}}),(0,n.jsx)(x.Z,{fullWidth:!0,label:"Video Prompt",value:b.video_prompt||"",onChange:e=>w(b.shot_id,"video_prompt",e.target.value),multiline:!0,rows:2,sx:{mb:2}}),b.voice_over?(0,n.jsx)(x.Z,{fullWidth:!0,label:"Voice Over",value:b.voice_over||"",onChange:e=>w(b.shot_id,"voice_over",e.target.value),multiline:!0,rows:2}):null]}),(0,n.jsxs)(ee.ZP,{container:!0,spacing:2,children:[b.active_image_id?(0,n.jsx)(ee.ZP,{item:!0,xs:12,md:6,children:(0,n.jsxs)(M.Z,{elevation:3,sx:{p:2,height:"100%",display:"flex",flexDirection:"column",bgcolor:"background.paper"},children:[(0,n.jsx)(h.Z,{variant:"subtitle2",color:"secondary.main",gutterBottom:!0,children:"Active Image"}),(0,n.jsxs)(h.Z,{variant:"caption",color:"text.secondary",children:["ID: ",b.active_image_id]}),b.active_image_url?(0,n.jsx)(a.Z,{sx:{mt:1,mb:1,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("img",{src:b.active_image_url,alt:`Shot ${C+1}`,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain"}})}):(0,n.jsx)(a.Z,{sx:{mt:1,mb:1,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(h.Z,{color:"text.secondary",children:"No image available"})})]})}):null,b.active_video_id?(0,n.jsx)(ee.ZP,{item:!0,xs:12,md:6,children:(0,n.jsxs)(M.Z,{elevation:3,sx:{p:2,height:"100%",display:"flex",flexDirection:"column",bgcolor:"background.paper"},children:[(0,n.jsx)(h.Z,{variant:"subtitle2",color:"info.main",gutterBottom:!0,children:"Active Video"}),(0,n.jsxs)(h.Z,{variant:"caption",color:"text.secondary",children:["ID: ",b.active_video_id]}),b.active_video_url?(0,n.jsx)(a.Z,{sx:{mt:1,mb:1,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("video",{controls:!0,src:b.active_video_url,style:{maxWidth:"100%",maxHeight:"300px"}})}):(0,n.jsx)(a.Z,{sx:{mt:1,mb:1,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(h.Z,{color:"text.secondary",children:"No video available"})})]})}):null]}),(0,n.jsx)(a.Z,{sx:{mt:3},children:(0,n.jsxs)(M.Z,{elevation:3,sx:{p:2,bgcolor:"background.default"},children:[(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,n.jsx)(h.Z,{variant:"subtitle1",color:"primary",children:"Shot Media Library"}),(0,n.jsx)(g.Z,{variant:"outlined",size:"small",color:"primary",onClick:()=>S(),disabled:_,startIcon:_?(0,n.jsx)(f.Z,{size:16,color:"primary"}):(0,n.jsx)(A.Z,{}),sx:{borderWidth:1.5,"&:hover":{borderWidth:1.5,backgroundColor:"rgba(25, 118, 210, 0.08)"}},children:_?"Loading...":"Load Shot Media"})]}),(null===(m=k.images)||void 0===m?void 0:m.length)>0||(null===(v=k.videos)||void 0===v?void 0:v.length)>0?(0,n.jsxs)(a.Z,{children:[k.images&&k.images.length>0?(0,n.jsxs)(a.Z,{sx:{mb:3},children:[(0,n.jsxs)(h.Z,{variant:"subtitle2",color:"secondary.main",gutterBottom:!0,children:["Images (",k.images.length,")"]}),(0,n.jsx)(a.Z,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:1,p:1,borderRadius:1,bgcolor:"background.paper"},children:k.images.map(e=>(0,n.jsxs)(a.Z,{onClick:()=>D("image",e.id,e.url),sx:{border:e.id===b.active_image_id?"2px solid #ba68c8":"2px solid transparent",p:1,borderRadius:1,position:"relative",cursor:"pointer","&:hover":{borderColor:"#e1bee7"}},children:[(0,n.jsx)("img",{src:e.url,alt:`${e.id}`,style:{width:"120px",height:"120px",objectFit:"cover"}}),e.id===b.active_image_id&&(0,n.jsx)(a.Z,{sx:{position:"absolute",top:5,right:5,bgcolor:"#ba68c8",color:"white",width:22,height:22,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:"âœ“"})]},e.id))})]}):null,k.videos&&k.videos.length>0?(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)(h.Z,{variant:"subtitle2",color:"info.main",gutterBottom:!0,children:["Videos (",k.videos.length,")"]}),(0,n.jsx)(a.Z,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:1,p:1,borderRadius:1,bgcolor:"background.paper"},children:k.videos.map(e=>(0,n.jsxs)(a.Z,{onClick:()=>D("video",e.id,e.url),sx:{border:e.id===b.active_video_id?"2px solid #03a9f4":"2px solid transparent",p:1,borderRadius:1,position:"relative",cursor:"pointer","&:hover":{borderColor:"#4fc3f7"}},children:[(0,n.jsx)("video",{controls:!0,src:e.url,style:{width:"160px",height:"120px",objectFit:"cover"},onClick:e=>e.stopPropagation()}),e.id===b.active_video_id&&(0,n.jsx)(a.Z,{sx:{position:"absolute",top:5,right:5,bgcolor:"#03a9f4",color:"white",width:22,height:22,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:"âœ“"})]},e.id))})]}):null]}):(0,n.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,n.jsx)(h.Z,{color:"text.secondary",children:'No media loaded. Click "Load Media" to view all shot media.'})})]})})]})}var ei=i(90010),er=i(22532),en=i(25822);function eo(e){var t,i,r,l,d,c,u;let{storyId:p,editedStory:m,selectedStory:v,tabValue:y,onTabChange:b,onShotPromptChange:C,onSaveAll:w,isSaving:j,hasChanges:F}=e,[k,_]=(0,o.useState)([]),[S,I]=(0,o.useState)(!1);if(!v||!m)return null;let Z=(null===(t=m.storyboard)||void 0===t?void 0:t.shots)&&m.storyboard.shots.length>0,E=async()=>{var e;if(Z&&(null===(e=m.storyboard)||void 0===e?void 0:e.shots)){I(!0);try{let e=m.storyboard.shots.map(async(e,t)=>{try{let o=await fetch(`/api/stories/${p}/shots/${e.shot_id}`);if(o.ok){var i,r,n;let a=await o.json();return{shotId:e.shot_id,shotIndex:t+1,images:(null===(i=a.media_resources)||void 0===i?void 0:i.images)||[],videos:(null===(r=a.media_resources)||void 0===r?void 0:r.videos)||[],audio:(null===(n=a.media_resources)||void 0===n?void 0:n.audio)||[]}}}catch(t){console.error(`Error loading media for shot ${e.shot_id}:`,t)}return{shotId:e.shot_id,shotIndex:t+1,images:[],videos:[],audio:[]}}),t=await Promise.all(e);_(t)}catch(e){console.error("Error loading all shots media:",e)}finally{I(!1)}}};return(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)(a.Z,{sx:{borderBottom:1,borderColor:"divider",px:3},children:[(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)(h.Z,{variant:"subtitle1",color:"primary",sx:{mb:1},children:"Storyboard Shots"}),F?(0,n.jsx)(g.Z,{variant:"contained",color:"primary",onClick:w,disabled:j,size:"small",sx:{ml:2,mb:1},children:j?(0,n.jsx)(f.Z,{size:24}):"Save All Changes"}):null]}),Z?(0,n.jsxs)(er.Z,{value:y,onChange:b,variant:"scrollable",scrollButtons:"auto","aria-label":"storyboard shots tabs",children:[null===(r=m.storyboard)||void 0===r?void 0:null===(i=r.shots)||void 0===i?void 0:i.map((e,t)=>(0,n.jsx)(en.Z,{label:`Shot ${t+1}`,id:`shots-tab-${t}`,"aria-controls":`shots-tabpanel-${t}`,sx:{minWidth:"100px"}},e.shot_id)),(0,n.jsx)(en.Z,{label:(0,n.jsxs)(a.Z,{display:"flex",alignItems:"center",children:[(0,n.jsx)(ei.Z,{sx:{mr:1}}),"Raw JSON"]}),id:"shots-tab-raw","aria-controls":"shots-tabpanel-raw"})]}):(0,n.jsx)(h.Z,{variant:"body2",color:"text.secondary",sx:{my:2},children:'No shots available. Use the "Regenerate Storyboard" button to create shots.'})]}),Z?null===(d=m.storyboard)||void 0===d?void 0:null===(l=d.shots)||void 0===l?void 0:l.map((e,t)=>(0,n.jsx)(s,{value:y,index:t,children:(0,n.jsx)(et,{storyId:p,shot:e,index:t,onPromptChange:C})},e.shot_id)):null,Z?(0,n.jsx)(s,{value:y,index:(null===(u=m.storyboard)||void 0===u?void 0:null===(c=u.shots)||void 0===c?void 0:c.length)||0,children:(0,n.jsxs)(a.Z,{sx:{p:3},children:[(0,n.jsx)(h.Z,{variant:"h6",gutterBottom:!0,children:"Raw JSON Data"}),(0,n.jsxs)(ee.ZP,{container:!0,spacing:3,children:[(0,n.jsxs)(ee.ZP,{item:!0,xs:12,children:[(0,n.jsx)(h.Z,{variant:"subtitle1",gutterBottom:!0,color:"primary",children:"Story Data"}),(0,n.jsx)(x.Z,{multiline:!0,fullWidth:!0,rows:20,value:JSON.stringify((()=>{var e;if(!v)return{};let{storyboard:t,...i}=v;if(!t)return i;let r=(null===(e=t.shots)||void 0===e?void 0:e.map(e=>({shot_id:e.shot_id,image_prompt:e.image_prompt,video_prompt:e.video_prompt,voice_over:e.voice_over})))||[];return{...i,storyboard:{...t,shots:r}}})(),null,2),InputProps:{readOnly:!0,sx:{fontFamily:"monospace",fontSize:"0.875rem"}},sx:{"& .MuiInputBase-root":{bgcolor:"background.paper"}}})]}),(0,n.jsxs)(ee.ZP,{item:!0,xs:12,children:[(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,n.jsx)(h.Z,{variant:"subtitle1",color:"primary",children:"Media Library (Organized by Shot)"}),(0,n.jsx)(g.Z,{variant:"outlined",onClick:E,disabled:S,startIcon:S?(0,n.jsx)(f.Z,{size:16}):null,children:S?"Loading Media...":"Load All Shots Media"})]}),(0,n.jsx)(x.Z,{multiline:!0,fullWidth:!0,rows:20,value:k.length>0?JSON.stringify((()=>{let e={};return k.forEach(t=>{e[`shot_${t.shotIndex}`]={shot_id:t.shotId,media_resources:{images:t.images.map(e=>({id:e.id,url:e.url,status:e.status,source:e.source,ai_model:e.ai_model,prompt:e.prompt,created_at:e.created_at})),videos:t.videos.map(e=>({id:e.id,url:e.url,status:e.status,source:e.source,ai_model:e.ai_model,prompt:e.prompt,created_at:e.created_at})),audio:t.audio.map(e=>({id:e.id,url:e.url,status:e.status,source:e.source,ai_model:e.ai_model,created_at:e.created_at}))},total_media_count:t.images.length+t.videos.length+t.audio.length}}),e})(),null,2):'Click "Load All Shots Media" to view media library',InputProps:{readOnly:!0,sx:{fontFamily:"monospace",fontSize:"0.875rem"}},sx:{"& .MuiInputBase-root":{bgcolor:"background.paper"}}})]})]}),k.length>0&&(0,n.jsxs)(a.Z,{sx:{mt:3},children:[(0,n.jsx)(h.Z,{variant:"subtitle2",gutterBottom:!0,color:"primary",children:"Media Summary"}),(0,n.jsx)(M.Z,{elevation:1,sx:{p:2,bgcolor:"background.default"},children:(0,n.jsx)(ee.ZP,{container:!0,spacing:2,children:k.map(e=>(0,n.jsx)(ee.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,n.jsxs)(a.Z,{sx:{p:1,border:1,borderColor:"divider",borderRadius:1},children:[(0,n.jsxs)(h.Z,{variant:"body2",fontWeight:"bold",children:["Shot ",e.shotIndex]}),(0,n.jsxs)(h.Z,{variant:"caption",display:"block",children:["Images: ",e.images.length]}),(0,n.jsxs)(h.Z,{variant:"caption",display:"block",children:["Videos: ",e.videos.length]}),(0,n.jsxs)(h.Z,{variant:"caption",display:"block",children:["Audio: ",e.audio.length]})]})},e.shotId))})})]})]})}):null]})}var ea=i(45800),es=i(79481);function el(e){let{open:t,onClose:i,title:r,onTitleChange:o,onSave:a,isLoading:s}=e;return(0,n.jsxs)(N.Z,{open:t,onClose:i,fullWidth:!0,maxWidth:"sm",children:[(0,n.jsx)(G.Z,{children:"Edit Story Title"}),(0,n.jsxs)(V.Z,{children:[(0,n.jsx)(ea.Z,{sx:{mb:2},children:"Enter a new title for your story."}),(0,n.jsx)(x.Z,{autoFocus:!0,margin:"dense",label:"Title",type:"text",fullWidth:!0,value:r,onChange:e=>o(e.target.value),sx:{mt:1}})]}),(0,n.jsxs)(es.Z,{children:[(0,n.jsx)(g.Z,{onClick:i,color:"inherit",children:"Cancel"}),(0,n.jsx)(g.Z,{onClick:a,color:"primary",variant:"contained",disabled:s||!r.trim(),children:s?(0,n.jsx)(f.Z,{size:24}):"Update Title"})]})]})}function ed(e){let{open:t,onClose:i,storyTitle:r,onConfirmDelete:o,isLoading:a}=e;return(0,n.jsxs)(N.Z,{open:t,onClose:i,fullWidth:!0,maxWidth:"sm",children:[(0,n.jsx)(G.Z,{children:"Delete Story"}),(0,n.jsx)(V.Z,{children:(0,n.jsxs)(ea.Z,{children:['Are you sure you want to delete the story "',r,'"?']})}),(0,n.jsxs)(es.Z,{children:[(0,n.jsx)(g.Z,{onClick:i,color:"inherit",children:"Cancel"}),(0,n.jsx)(g.Z,{onClick:o,color:"error",variant:"contained",disabled:a,children:a?(0,n.jsx)(f.Z,{size:24}):"Delete Story"})]})]})}},68125:function(e,t,i){i.d(t,{d:function(){return h}});var r=i(52676);i(75271);var n=i(89980),o=i(62269),a=i(65893),s=i(2850),l=i(26784),d=i(62935),c=i(16850),u=i(65210),p=i(71087);function h(e){var t,i;let{iconSize:h=20,sx:m,imageModelConfig:x,videoModelConfig:g,imageModelOptions:f,videoModelOptions:v,onModelSelect:y,expanded:b,onChange:C}=e;return(0,r.jsx)(a.Z,{sx:{position:"relative",...m},children:(0,r.jsxs)(s.Z,{expanded:b,onChange:C,sx:{backgroundColor:"transparent",boxShadow:"none",border:"none","&:before":{display:"none"},"&.Mui-expanded":{margin:0}},children:[(0,r.jsx)(l.Z,{expandIcon:(0,r.jsx)(n.Z,{sx:{color:"#666",fontSize:16,backgroundColor:"#101010",borderRadius:"50%",width:24,height:24,padding:"4px"}}),sx:{padding:0,minHeight:"auto","&.Mui-expanded":{minHeight:"auto"},"& .MuiAccordionSummary-content":{margin:0,"&.Mui-expanded":{margin:0}},"& .MuiAccordionSummary-expandIconWrapper":{transition:"transform 0.3s","&.Mui-expanded":{transform:"rotate(180deg)"}}},children:(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(o.Z,{sx:{color:"#CCCCCC",fontSize:h}}),(0,r.jsx)(d.Z,{sx:{fontWeight:500,fontSize:{xs:"14px",md:"16px"},lineHeight:"1.5em",color:"#CCCCCC"},children:"Advanced Settings"})]})}),(0,r.jsx)(c.Z,{sx:{padding:"16px 0 0 0"},children:(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:1.5},children:[(0,r.jsx)(u.O,{label:"Select image model",value:(null===(t=p.Fj.find(e=>e.value.model===x.model&&JSON.stringify(e.value.parameters)===JSON.stringify(x.parameters)))||void 0===t?void 0:t.name)||p.Fj[0].name,options:f,onChange:e=>y("imageModel",e)}),(0,r.jsx)(u.O,{label:"Select video model",value:(null===(i=p.E5.concat(p.yD).find(e=>e.value.model===g.model&&JSON.stringify(e.value.parameters)===JSON.stringify(g.parameters)))||void 0===i?void 0:i.name)||p.E5[0].name,options:v,onChange:e=>y("videoModel",e)})]})})]})})}},79882:function(e,t,i){i.d(t,{Y:function(){return d}});var r=i(52676);i(75271);var n=i(18547),o=i(65893),a=i(62935),s=i(43237),l=i(80924);function d(e){let{iconSize:t=20,sx:i,value:d,onChange:c,aspectRatioOptions:u=["16:9","9:16"]}=e,{isMobile:p}=(0,l.j)(),h=(e,t,i)=>(0,r.jsx)(o.Z,{onClick:()=>c(e),sx:{display:"flex",alignItems:"center",gap:"1.03px",padding:"2.06px",width:p?"80px":"99.84px",height:"28.82px",backgroundColor:"#101010",border:d===e?"2px solid #2F66FF":"none",borderRadius:"5.15px",cursor:"pointer",boxSizing:"border-box","&:hover":{backgroundColor:"#111111"}},children:(0,r.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3.83px",padding:"0px 7.66px",width:p?"76px":"95.73px",height:"22.97px",backgroundColor:"transparent",borderRadius:"3.83px",boxSizing:"border-box"},children:[(0,r.jsx)(o.Z,{sx:{width:t,height:i,backgroundColor:"#2E2E2E",borderRadius:"9:16"===e?"1.46px":"1.81px"}}),(0,r.jsx)(a.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:p?"10px":"12px",lineHeight:"1.67em",letterSpacing:"-0.02em",color:d===e?"#FFFFFF":"#C6C6C6"},children:e})]})},e);return(0,r.jsx)(s.u,{icon:(0,r.jsx)(n.Z,{sx:{color:"#CCCCCC",fontSize:t}}),title:"Aspect Ratio",rightSide:(0,r.jsx)(o.Z,{sx:{display:"flex",gap:1},children:u.map(e=>{let[t,i]=e.split(":").map(Number);return 1===t&&1===i?h(e,"12px","12px"):h(e,`${t}px`,`${i}px`)})}),isMobile:p,sx:i})}},96995:function(e,t,i){i.d(t,{D:function(){return y}});var r=i(52676),n=i(75271),o=i(81190),a=i(14388),s=i(65893),l=i(74861),d=i(61271),c=i(57598),u=i(62935),p=i(35019),h=i(66686),m=i(71137),x=i(44754);i(68836),i(20921),i(45887);var g=i(21964),f=i(28337),v=i(30754);function y(e){let{onChange:t,onUploadStart:i,onUploadError:y,open:b=!1,onClose:C,enableTrimming:w=!1,minDuration:j=10,maxDuration:F=60,preselectedFile:k=null}=e,[_,S]=(0,n.useState)(null),[I,Z]=(0,n.useState)(!1),[E,A]=(0,n.useState)("upload"),[M,R]=(0,n.useState)(null),[T,D]=(0,n.useState)(!1),[z,P]=(0,n.useState)(0),[L,W]=(0,n.useState)(0),[B,H]=(0,n.useState)(0),[U,O]=(0,n.useState)(0),[$,N]=(0,n.useState)([]),[G,V]=(0,n.useState)([]),[K,Y]=(0,n.useState)(0),[q,X]=(0,n.useState)(""),J=(0,n.useRef)(null),Q=(0,n.useRef)(null),ee=(0,n.useRef)(null),et=(0,n.useRef)(),ei=(0,n.useRef)(null),{mutate:er,isLoading:en}=(0,g.D)({mutationFn:async e=>{let t=new FormData;t.append("file",e),t.append("cdnFolder","storybuilder/soundtracks");let{data:i}=await f.ZP.post("/media/upload_file",t,{headers:{"Content-Type":"multipart/form-data"}});return i},onError:e=>{console.error("Failed to upload soundtrack:",e),(0,v.cB)("Failed to upload soundtrack. Please try again.")}}),eo=e=>{if(!e.type.startsWith("audio/"))return!1;let t=e.name.toLowerCase();return[".mp3",".wav",".m4a",".aac",".ogg",".flac",".wma"].some(e=>t.endsWith(e))},ea=(0,n.useCallback)(e=>{let t=e.getChannelData(0),i=Math.floor(t.length/1e3),r=[];for(let e=0;e<1e3;e++){let n=i*e,o=0;for(let e=0;e<i;e++)o+=Math.abs(t[n+e]);r.push(o/i)}let n=Math.max(...r);return r.map(e=>e/n)},[]),es=(0,n.useCallback)(()=>{if(0===$.length||0===K){V([]);return}let e=Math.floor((K-0)/4);if($.length<=e)V($);else{let t=[],i=$.length/e;for(let r=0;r<e;r++){let e=Math.floor(r*i);t.push($[e])}V(t)}},[$,K]),el=(0,n.useCallback)(()=>{if(ei.current){let e=ei.current.getBoundingClientRect().width;e>0&&Y(e)}},[]),ed=(0,n.useCallback)(e=>Math.round(1e3*e)/1e3,[]),ec=(0,n.useCallback)((e,t)=>{let i=ed(e),r=ed(t),n=Math.max(0,Math.min(i,L)),o=Math.max(0,Math.min(r,L)),a=o-n;a>=j&&a<=F&&(H(n),O(o),q&&X(""))},[L,F,q,ed]),eu=(0,n.useCallback)(e=>{let t=U-B,i=B+e,r=i+t;r=(i=Math.max(0,Math.min(L-t,i)))+t,ec(i,r)},[B,U,L,ec]),ep=(0,n.useCallback)(e=>{O(Math.max(B+j,Math.min(Math.min(L,B+F),U+e)))},[U,B,j,F,L]),eh=(0,n.useCallback)((e,t)=>i=>{var r;i.preventDefault();let n=null===(r=i.currentTarget.parentElement)||void 0===r?void 0:r.getBoundingClientRect();if(!n)return;let o=i=>{let{newTrimStart:r,newTrimEnd:o}=t(("touches"in i?i.touches[0].clientX:i.clientX)-n.left-10,n.width-20);if("start"===e&&void 0!==r){let e=U-10;H(Math.max(Math.max(0,U-60),Math.min(e,r)))}else"end"===e&&void 0!==o?O(Math.max(B+10,Math.min(Math.min(L,B+60),o))):"area"===e&&void 0!==r&&void 0!==o&&ec(r,o)},a=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",a)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",a),document.addEventListener("touchmove",o),document.addEventListener("touchend",a)},[B,U,L,ec]),em=(0,n.useMemo)(()=>eh("start",(e,t)=>({newTrimStart:ed(Math.max(0,Math.min(1,e/t))*L)})),[eh,L,ed]),ex=(0,n.useMemo)(()=>eh("end",(e,t)=>({newTrimEnd:ed(Math.max(0,Math.min(1,e/t))*L)})),[eh,L,ed]),eg=(0,n.useCallback)(e=>{var t;e.preventDefault();let i=null===(t=e.currentTarget.parentElement)||void 0===t?void 0:t.getBoundingClientRect();if(!i)return;let r="touches"in e?e.touches[0].clientX:e.clientX,n=U-B,o=e=>{let t=ed(B+(("touches"in e?e.touches[0].clientX:e.clientX)-r)/(i.width-20)*L),o=ed(t+n);o=ed((t=Math.max(0,Math.min(L-n,t)))+n),ec(t,o)},a=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",a)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",a),document.addEventListener("touchmove",o),document.addEventListener("touchend",a)},[B,U,L,ec,ed]),ef=(0,n.useCallback)(async e=>{try{ee.current||(ee.current=new(window.AudioContext||window.webkitAudioContext));let t=await e.arrayBuffer(),i=await ee.current.decodeAudioData(t);return{duration:i.duration,sampleRate:i.sampleRate,numberOfChannels:i.numberOfChannels,fileSize:e.size,mimeType:e.type,bitrate:Math.round(8*e.size/i.duration/1e3)}}catch(t){return console.error("Error extracting audio metadata:",t),{duration:0,sampleRate:0,numberOfChannels:0,fileSize:e.size,mimeType:e.type}}},[]),ev=(0,n.useCallback)(async e=>{try{ee.current||(ee.current=new(window.AudioContext||window.webkitAudioContext));let t=await e.arrayBuffer(),i=await ee.current.decodeAudioData(t),r=URL.createObjectURL(e),n={duration:i.duration,sampleRate:i.sampleRate,numberOfChannels:i.numberOfChannels,fileSize:e.size,mimeType:e.type,bitrate:Math.round(8*e.size/i.duration/1e3)},o=ea(i);if(N(o),W(i.duration),i.duration<=F)H(0),O(ed(i.duration));else{let e=Math.min(30,F),t=(i.duration-e)/2,r=ed(Math.max(0,t)),n=ed(r+e);H(r),O(n)}return{file:e,audioBuffer:i,audioUrl:r,metadata:n}}catch(e){throw console.error("Error processing audio file:",e),e}},[ea,F,ed]),ey=(0,n.useCallback)(()=>{Q.current&&T&&(P(Q.current.currentTime),et.current=requestAnimationFrame(ey))},[T]),eb=(0,n.useCallback)(()=>{Q.current&&(T?(Q.current.pause(),D(!1),et.current&&cancelAnimationFrame(et.current)):(Q.current.currentTime=B,P(B),Q.current.play(),D(!0),ey()))},[T,B,ey]),eC=(0,n.useCallback)(()=>{D(!1),P(B),et.current&&cancelAnimationFrame(et.current)},[B]),ew=(0,n.useCallback)(()=>{Q.current&&(P(Q.current.currentTime),Q.current.currentTime>=U&&(Q.current.pause(),D(!1),P(B),et.current&&cancelAnimationFrame(et.current)))},[U,B]),ej=(0,n.useCallback)(e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,[]),eF=(0,n.useCallback)(async()=>{if(!M||!ee.current)throw Error("Audio data not available");let{audioBuffer:e,file:t}=M,i=e.sampleRate,r=Math.floor(B*i),n=Math.floor(U*i)-r,o=ee.current.createBuffer(e.numberOfChannels,n,i);for(let t=0;t<e.numberOfChannels;t++){let i=e.getChannelData(t),a=o.getChannelData(t);for(let e=0;e<n;e++)a[e]=i[r+e]}let a=o.length,s=new ArrayBuffer(2*a),l=new DataView(s),d=o.getChannelData(0);for(let e=0;e<a;e++){let t=Math.max(-1,Math.min(1,d[e]));l.setInt16(2*e,32767*t,!0)}let c=new Blob([ek(s,i)],{type:"audio/wav"}),u=t.name.replace(/\.[^/.]+$/,"");return new File([c],`${u}_trimmed.wav`,{type:"audio/wav"})},[M,B,U]),ek=(e,t)=>{let i=e.byteLength,r=new ArrayBuffer(44+i),n=new DataView(r),o=(e,t)=>{for(let i=0;i<t.length;i++)n.setUint8(e+i,t.codePointAt(i)||0)};o(0,"RIFF"),n.setUint32(4,36+i,!0),o(8,"WAVE"),o(12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,t,!0),n.setUint32(28,2*t,!0),n.setUint16(32,2,!0),n.setUint16(34,16,!0),o(36,"data"),n.setUint32(40,i,!0);let a=new Uint8Array(e);return new Uint8Array(r,44).set(a),r},e_=(0,n.useCallback)(async e=>{S(e),w&&(R(await ev(e)),A("trimming"))},[w,ev]),eS=async e=>{let t=e.target.files;if(t&&t.length>0){let i=t[0];eo(i)?e_(i):(console.warn("Invalid file type. Please select an audio file."),null==y||y({message:"Please select a valid audio file (.mp3, .wav, .m4a, .aac, .ogg, .flac, .wma)"}),e.target.value="")}},eI=()=>{S(null),Z(!1),A("upload"),R(null),X(""),Q.current&&(Q.current.pause(),D(!1)),document.removeEventListener("keydown",eR),"trimming"!==E&&(null==C||C())},[eZ,eE]=(0,n.useState)(!1),eA=async()=>{if(_){let e;if(X(""),"trimming"===E&&M){let e=U-B;if(e<j){X(`Trimmed audio must be at least ${j} seconds long. Current duration: ${ej(e)}`);return}if(Math.floor(e)>F){X(`Trimmed audio must be no longer than ${F} seconds. Current duration: ${ej(e)}`);return}}let t=_;if(eE(!0),"trimming"===E&&M){t=await eF();let i=U-B;e={...M.metadata,duration:i,fileSize:t.size,mimeType:t.type,bitrate:Math.round(8*t.size/i/1e3)}}else if(M)e=M.metadata;else try{e=await ef(_)}catch(t){console.error("Error extracting metadata for direct upload:",t),e={duration:0,sampleRate:0,numberOfChannels:0,fileSize:_.size,mimeType:_.type}}eM(t,e)}},eM=(e,r)=>{null==i||i(),er(e,{onSuccess:i=>{eE(!1);let n=r||{duration:0,sampleRate:0,numberOfChannels:0,fileSize:e.size,mimeType:e.type};t(i.url,e.name,n),eI()},onError:e=>{eE(!1),console.error("Upload failed:",e),null==y||y(e)}})};(0,n.useEffect)(()=>()=>{et.current&&cancelAnimationFrame(et.current),(null==M?void 0:M.audioUrl)&&URL.revokeObjectURL(M.audioUrl)},[M]),(0,n.useEffect)(()=>{es()},[es]),(0,n.useEffect)(()=>{let e=()=>{el()};return"trimming"===E&&el(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[el,E]),(0,n.useEffect)(()=>{if("trimming"===E){let e=null,t=function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(ei.current){let r=ei.current.getBoundingClientRect();r.width>0?(Y(r.width),e||(e=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.width;e>0&&Y(e)}})).observe(ei.current)):i<10&&setTimeout(()=>t(i+1),10*(i+1))}else i<10&&setTimeout(()=>t(i+1),10*(i+1))};return t(),()=>{e&&e.disconnect()}}},[E]);let eR=(0,n.useCallback)(e=>{if("trimming"===E&&M)switch(e.code){case"Space":e.preventDefault(),eb();break;case"ArrowLeft":e.preventDefault(),eu(-(e.shiftKey?5:e.ctrlKey||e.metaKey?.1:1));break;case"ArrowRight":e.preventDefault(),eu(e.shiftKey?5:e.ctrlKey||e.metaKey?.1:1);break;case"ArrowUp":e.preventDefault(),ep(e.shiftKey?5:e.ctrlKey||e.metaKey?.1:1);break;case"ArrowDown":e.preventDefault(),ep(-(e.shiftKey?5:e.ctrlKey||e.metaKey?.1:1))}},[E,M,eb,B,U,L,F,j]);(0,n.useEffect)(()=>{if(b&&"trimming"===E)return document.addEventListener("keydown",eR),()=>{document.removeEventListener("keydown",eR)}},[b,E,eR]),(0,n.useEffect)(()=>{Q.current&&"trimming"===E&&(Q.current.pause(),Q.current.currentTime=B,D(!1),P(B),et.current&&cancelAnimationFrame(et.current))},[B,E]),(0,n.useEffect)(()=>{b&&k?e_(k):b&&!k&&A("upload")},[b,k,e_]);let eT=U-B,eD="trimming"===E?535:444;return(0,r.jsxs)(r.Fragment,{children:[en?(0,r.jsx)(s.Z,{sx:{position:"absolute",bottom:0,left:0,right:0},children:(0,r.jsx)(l.Z,{sx:{height:2,borderRadius:"0 0 6px 6px","& .MuiLinearProgress-bar":{backgroundColor:"#2F66FF"}}})}):null,(0,r.jsx)(d.Z,{open:b,onClose:(e,t)=>{eZ&&"backdropClick"===t||eI()},maxWidth:"md",fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"trimming"===E?"8px":"11px",padding:"16px 20px",width:eD,maxWidth:"90vw",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"}},children:(0,r.jsxs)(c.Z,{sx:{padding:0},children:[(0,r.jsxs)(u.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:16,lineHeight:"1.21em",color:"#FFFFFF",textAlign:"left",mb:2},children:["Upload a Song"," ",(0,r.jsx)("span",{style:{fontSize:"0.75em",fontWeight:400,color:"rgb(153, 153, 153)"},children:"(Up to 60s)"})]}),"upload"===E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Z,{sx:{mb:2},children:[(0,r.jsx)(s.Z,{onClick:()=>{var e;null===(e=J.current)||void 0===e||e.click()},onDragOver:e=>{var t;if(e.preventDefault(),!((null===(t=e.dataTransfer.items)||void 0===t?void 0:t.length)&&Array.from(e.dataTransfer.items).some(e=>e.type.startsWith("audio/")))){e.dataTransfer.dropEffect="none";return}Z(!0)},onDragEnter:e=>{e.preventDefault()},onDragLeave:()=>{Z(!1)},onDrop:e=>{e.preventDefault(),Z(!1);let t=e.dataTransfer.files;if(0===t.length)return;let i=t[0];eo(i)?e_(i):(console.warn("Invalid file type. Please select an audio file."),null==y||y({message:"Please select a valid audio file (.mp3, .wav, .m4a, .aac, .ogg, .flac, .wma)"}))},sx:{backgroundColor:"#101010",border:I?"1px dashed #2F66FF":"1px dashed #2E2E2E",borderRadius:"8px",height:101,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",mb:1,transition:"border-color 0.2s ease","&:hover":{borderColor:"#444444"}},children:(0,r.jsx)(u.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:14,lineHeight:"1.57em",color:_?"#2F66FF":"#E0E0E0",textAlign:"center",whiteSpace:"pre-wrap",px:2},children:_?`Selected: ${_.name}`:I?"Drop your audio file here":(0,r.jsxs)(r.Fragment,{children:["Drag and drop audio file here,",(0,r.jsx)("br",{}),"or ",(0,r.jsx)("span",{style:{textDecoration:"underline"},children:"select a file"})]})})}),(0,r.jsx)(u.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:12,lineHeight:"1.67em",color:"#888888"},children:w?(0,r.jsxs)(r.Fragment,{children:["Next, we'll help you trim your audio to between ",j," and"," ",F," seconds long.",(0,r.jsx)("br",{}),"Audio with vocals detected will be made private-only."]}):(0,r.jsxs)(r.Fragment,{children:["Next, we'll help you trim your audio to between 6 and 60 seconds long.",(0,r.jsx)("br",{}),"Audio with vocals detected will be made private-only."]})})]}),(0,r.jsx)("input",{ref:J,type:"file",accept:".mp3,.wav,.m4a,.aac,.ogg,.flac,.wma",style:{display:"none"},onChange:eS})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Z,{sx:{backgroundColor:"#101010",borderRadius:"7px",padding:"16px",mb:2,position:"relative"},children:[(0,r.jsx)(p.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:(0,r.jsxs)(s.Z,{sx:{flex:1,height:63,m:2,position:"relative",overflow:"hidden"},children:[(0,r.jsx)(s.Z,{ref:ei,sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"10px",gap:"2px",height:"100%",backgroundColor:"#1856D0",borderRadius:"8px"},children:G.map((e,t)=>{let i=t/G.length>=B/L&&t/G.length<=U/L,n=t/G.length*L;return(0,r.jsx)(s.Z,{sx:{flex:"0 0 2px",width:2,height:`${Math.max(100*e,5)}%`,backgroundColor:i?i&&z>=n?"#FFFFFF":"#B8D4FF":"rgba(255, 255, 255, 0.3)",borderRadius:"1px"}},t)})}),(0,r.jsxs)(s.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},children:[(0,r.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,bottom:0,width:`${B/L*100}%`,backgroundColor:"rgba(0, 0, 0, 0.6)"}}),(0,r.jsx)(s.Z,{sx:{position:"absolute",top:0,right:0,bottom:0,width:`${(L-U)/L*100}%`,backgroundColor:"rgba(0, 0, 0, 0.6)"}})]}),(0,r.jsx)(s.Z,{onMouseDown:em,onTouchStart:em,sx:{position:"absolute",top:0,bottom:0,left:`${B/L*100}%`,width:3,backgroundColor:"#FFFFFF",cursor:"ew-resize",zIndex:10,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:12,height:12,backgroundColor:"#FFFFFF",borderRadius:"50%",border:"2px solid #1856D0"},"&:hover::before":{backgroundColor:"#F0F0F0"}}}),(0,r.jsx)(s.Z,{onMouseDown:ex,onTouchStart:ex,sx:{position:"absolute",top:0,bottom:0,right:`${(L-U)/L*100}%`,width:3,backgroundColor:"#FFFFFF",cursor:"ew-resize",zIndex:10,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:12,height:12,backgroundColor:"#FFFFFF",borderRadius:"50%",border:"2px solid #1856D0"},"&:hover::before":{backgroundColor:"#F0F0F0"}}}),(0,r.jsx)(s.Z,{onMouseDown:eg,onTouchStart:eg,sx:{position:"absolute",top:0,bottom:0,left:`calc(${B/L*100}% + 6px)`,width:`calc(${(U-B)/L*100}% - 12px)`,cursor:"move",zIndex:8,backgroundColor:"transparent","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"},"&:active":{backgroundColor:"rgba(255, 255, 255, 0.2)"},"&:hover::after":{opacity:1}}}),(T||z>0)&&z>=B&&z<=U?(0,r.jsx)(s.Z,{sx:{position:"absolute",top:0,bottom:0,left:`${z/L*100}%`,width:2,backgroundColor:"#FF4444",zIndex:100}}):null]})}),(0,r.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mx:2},children:[(0,r.jsxs)(u.Z,{sx:{flex:"1 1 200px",color:"#FFFFFF",fontSize:12},children:[ej(B)," - ",ej(U)]}),(0,r.jsx)(h.Z,{onClick:eb,sx:{color:"#FFFFFF",backgroundColor:"rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:T?(0,r.jsx)(o.Z,{}):(0,r.jsx)(a.Z,{})}),(0,r.jsxs)(u.Z,{sx:{flex:"1 1 200px",color:"#FFFFFF",fontSize:12,textAlign:"right"},children:["Duration: ",ej(eT),eT===j?"(min)":eT===F?"(max)":""]})]}),(0,r.jsxs)(s.Z,{sx:{mt:2,mx:7},children:[(0,r.jsx)(u.Z,{sx:{color:"#888888",fontSize:11,textAlign:"center"},children:"Shortcuts: Space (play/pause), â† â†’ (move), â†‘ â†“ (resize)"}),(0,r.jsx)(u.Z,{sx:{color:"#888888",fontSize:10,textAlign:"center",mt:.5},children:"Hold Shift for 5x speed, Ctrl/Cmd for 0.1x precision"})]})]}),q?(0,r.jsx)(u.Z,{sx:{color:"#FF6B6B",fontSize:12,textAlign:"center",mb:2,backgroundColor:"rgba(255, 107, 107, 0.1)",padding:"8px 12px",borderRadius:"4px",border:"1px solid rgba(255, 107, 107, 0.3)"},children:q}):null,M?(0,r.jsx)("audio",{ref:Q,src:M.audioUrl,onEnded:eC,onTimeUpdate:ew,style:{display:"none"}}):null]}),(0,r.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",gap:1},children:[(0,r.jsx)(m.Z,{onClick:eI,variant:"outlined",disabled:eZ,sx:{borderRadius:"5px",padding:"10px 27px",width:131,height:44,textTransform:"none",fontFamily:"Inter",fontWeight:600,fontSize:16,lineHeight:"1.02em"},children:"upload"===E?"Cancel":"Back"}),(0,r.jsx)(m.Z,{color:"primary",onClick:eA,variant:"primary",disabled:!_||eZ||"trimming"===E&&!M,startIcon:eZ?(0,r.jsx)(x.Z,{size:20,sx:{color:"#666666"}}):null,sx:{borderRadius:"5px",padding:"17px 42px",width:160,height:44,textTransform:"none",fontFamily:"Inter",fontWeight:600,fontSize:16,lineHeight:"1.21em"},children:"Confirm"})]})]})})]})}},21231:function(e,t,i){i.d(t,{L:function(){return a}});var r=i(52676),n=i(75271),o=i(96995);function a(e){let[t,i]=(0,n.useState)(!1),[a,s]=(0,n.useState)(null),l=(0,n.useCallback)(()=>{i(!0)},[]),d=(0,n.useCallback)(()=>{i(!1),s(null)},[]),c=(0,n.useCallback)(()=>{d()},[d]),u=(0,n.useCallback)((t,i,r)=>{e.onChange(t,i,r),d()},[e.onChange,d]),p=(0,n.useCallback)(e=>{s(e),i(!0)},[]),h=(0,n.useCallback)(e=>{s(e),i(!0)},[]),m=(0,r.jsx)(o.D,{open:t,onClose:c,onChange:u,onUploadStart:e.onUploadStart,onUploadError:e.onUploadError,preselectedFile:a,...e.uploadProps??{}});return{visible:t,open:l,close:d,context:m,selectFile:p,openWithFile:h}}},13402:function(e,t,i){i.d(t,{l:function(){return N}});var r=i(52676),n=i(75271),o=i(13566),a=i(59190),s=i(85504),l=i(65893),d=i(62935),c=i(17831),u=i(71137),p=i(44754),h=i(43682),m=i(70565),x=i(35019),g=i(97348),f=i(73255),v=i(83396),y=i(76474),b=i(99237),C=i(61271),w=i(57598),j=i(66686),F=i(21461),k=i(92598),_=i(68836),S=i.n(_),I=i(67197),Z=i(84625),E=i(79267);function A(e){let{open:t,onClose:i,onCharacterCreated:o,initialFile:a}=e,[s,c]=(0,n.useState)(""),[p,h]=(0,n.useState)(null),[m,x]=(0,n.useState)(!1),[g,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{a&&t&&(R(a),c("My Character"))},[a,t]);let{getRootProps:_,getInputProps:A,isDragActive:M}=(0,Z.uI)({accept:{"image/*":[".jpeg",".jpg",".png",".webp"]},multiple:!1,onDrop:async e=>{e.length>0&&await R(e[0])}}),R=async e=>{x(!0),f(null);try{var t;let i=new FormData;i.append("file",e);let r=await S().post("/api/media/upload_image",i,{headers:{"Content-Type":"multipart/form-data"}});if(200===r.status&&(null===(t=r.data)||void 0===t?void 0:t.imageUrl))h(r.data.imageUrl);else throw Error("Failed to upload image")}catch(e){console.error("Image upload error:",e),f("Failed to upload image. Please try again.")}finally{x(!1)}},T=async()=>{if(!p||!s.trim()){f("Please provide both an image and character name.");return}null==o||o({id:(0,I.x0)(),name:s.trim(),image_url:p}),D()},D=()=>{c(""),h(null),f(null),x(!1),i()},z=()=>{window.open(`${window.location.origin}/characters`,"_blank")};return(0,r.jsx)(C.Z,{open:t,onClose:D,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{bgcolor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"16px",maxWidth:"534px",width:{xs:"100%",sm:"534px"},height:{xs:"auto",sm:"auto"},m:{xs:2,sm:4}}},children:(0,r.jsxs)(w.Z,{sx:{p:0,height:"100%",display:"flex",flexDirection:"column",overflow:"auto"},children:[(0,r.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:"24px",py:"20px",borderBottom:"1px solid #2E2E2E"},children:[(0,r.jsx)(d.Z,{sx:{color:"#FFFFFF",fontWeight:600,fontSize:"20px",lineHeight:"20px",letterSpacing:"-0.05em"},children:"Quick Reference (Fastest)"}),(0,r.jsx)(j.Z,{onClick:D,sx:{color:"#444444",width:24,height:24,"&:hover":{color:"#666666"}},children:(0,r.jsx)(v.Z,{sx:{fontSize:16}})})]}),(0,r.jsxs)(l.Z,{sx:{flex:1,display:"flex",flexDirection:"column",p:"32px",gap:"16px"},children:[(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{sx:{color:"#888888",fontSize:"14px",fontWeight:500,lineHeight:"22px",mb:"8px"},children:"Character Name"}),(0,r.jsx)(F.Z,{fullWidth:!0,placeholder:"Give your character a name",value:s,onChange:e=>c(e.target.value),sx:{"& .MuiOutlinedInput-root":{bgcolor:"#101010",border:"1px solid #3F3F3F",borderRadius:"8px",height:"50px",color:"#FFFFFF",fontSize:"14px",fontWeight:500,lineHeight:"22px",letterSpacing:"-0.14px","&:hover":{borderColor:"#555555"},"&.Mui-focused":{borderColor:"#0084FF"},"& fieldset":{border:"none"}},"& .MuiOutlinedInput-input":{"&::placeholder":{color:"#444444",opacity:1}}}})]}),(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{sx:{color:"#888888",fontSize:"14px",fontWeight:500,lineHeight:"22px",mb:"8px"},children:"Reference Image"}),(0,r.jsxs)(l.Z,{..._(),sx:{width:"100%",height:"210px",border:"2px dashed #474747",borderRadius:"12px",bgcolor:"#101010",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",gap:"10px",p:"20px",position:"relative",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"#555555",bgcolor:"#151515","& .upload-hover-overlay":{opacity:p?1:0}}},children:[(0,r.jsx)("input",{...A()}),p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{component:"img",src:p,alt:"Uploaded character",sx:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"10px",position:"absolute",top:0,left:0}}),(0,r.jsx)(j.Z,{onClick:e=>{e.stopPropagation(),h(null),f(null)},sx:{position:"absolute",top:8,right:8,width:32,height:32,bgcolor:"rgba(0, 0, 0, 0.6)",color:"#FFFFFF",zIndex:2,"&:hover":{bgcolor:"rgba(0, 0, 0, 0.8)"}},children:(0,r.jsx)(y.Z,{sx:{fontSize:18}})}),(0,r.jsxs)(l.Z,{className:"upload-hover-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.7)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"10px",opacity:0,transition:"opacity 0.2s ease-in-out",gap:"10px"},children:[(0,r.jsx)(l.Z,{sx:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(b.Z,{sx:{color:"#FFFFFF",fontSize:"29px"}})}),(0,r.jsxs)(l.Z,{sx:{textAlign:"center",px:2},children:[(0,r.jsx)(d.Z,{sx:{color:"#FFFFFF",fontSize:"14px",fontWeight:600,lineHeight:"1.3em",letterSpacing:"-0.02em",mb:"8px"},children:"Click to upload or drag and drop"}),(0,r.jsx)(d.Z,{sx:{color:"#CCCCCC",fontSize:"12px",fontWeight:500,lineHeight:"1.3em",letterSpacing:"-0.02em",textAlign:"center"},children:"Replace with a new image"})]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{sx:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(b.Z,{sx:{color:"#444444",fontSize:"29px"}})}),(0,r.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(d.Z,{sx:{color:"#FFFFFF",fontSize:"14px",fontWeight:600,lineHeight:"1.3em",letterSpacing:"-0.02em",mb:"14px"},children:M?"Drop the image here":"Click to upload or drag and drop"}),(0,r.jsx)(d.Z,{sx:{color:"#606060",fontSize:"12px",fontWeight:500,lineHeight:"1.3em",letterSpacing:"-0.02em",textAlign:"center"},children:"Use a high-quality image of a human-like character."})]})]}),m?(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"12px"},children:(0,r.jsx)(d.Z,{sx:{color:"#FFFFFF"},children:"Uploading..."})}):null]})]}),(0,r.jsxs)(u.Z,{variant:"outlined",onClick:()=>z(),sx:{bgcolor:"#2E2E2E",border:"none",borderRadius:"6px",height:"41px",color:"#E0E0E0",fontSize:"14px",fontWeight:600,lineHeight:"1.3",textTransform:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px","&:hover":{bgcolor:"#3A3A3A",border:"none"}},children:[(0,r.jsx)(E.y58,{sx:{width:20,height:20}}),"Train Character for Higher Consistency",(0,r.jsx)(l.Z,{component:"svg",sx:{width:18,height:18},viewBox:"0 0 18 18",fill:"none",children:(0,r.jsx)("path",{d:"M7.49985 3.74971H6.14985C5.30985 3.74971 4.88985 3.74971 4.56885 3.91321C4.28662 4.05701 4.05716 4.28648 3.91335 4.56871C3.74985 4.88971 3.74985 5.30971 3.74985 6.14971V11.8497C3.74985 12.6897 3.74985 13.1097 3.91335 13.4307C4.05716 13.7129 4.28662 13.9424 4.56885 14.0862C4.8891 14.2497 5.3091 14.2497 6.1476 14.2497H11.8521C12.6906 14.2497 13.1099 14.2497 13.4301 14.0862C13.7129 13.9422 13.9424 13.7127 14.0864 13.4307C14.2499 13.1097 14.2499 12.6905 14.2499 11.852V10.4997M14.9999 6.74971V2.99971M14.9999 2.99971H11.2499M14.9999 2.99971L9.74985 8.24971",stroke:"#888888",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),g?(0,r.jsx)(l.Z,{sx:{px:"32px",mb:2},children:(0,r.jsx)(k.Z,{severity:"error",sx:{bgcolor:"#2E1A1A",color:"#FF6B6B"},children:g})}):null,(0,r.jsxs)(l.Z,{sx:{borderTop:"1px solid #2E2E2E",p:"28px 32px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)(u.Z,{variant:"outlined",onClick:D,sx:{bgcolor:"#1D1D1D",border:"1px solid #444444",borderRadius:"5px",px:"27px",py:"10px",fontSize:"16px",fontWeight:600,lineHeight:"16.35px",textTransform:"none",minWidth:"99px",height:"44px",color:"#B5B5B5","&:hover":{bgcolor:"#2A2A2A",border:"1px solid #555555"}},children:"Cancel"}),(0,r.jsx)(u.Z,{variant:"contained",onClick:T,disabled:!p||!s.trim(),sx:{bgcolor:"#0C2F75",borderRadius:"5px",px:"27px",py:"10px",fontSize:"16px",fontWeight:600,lineHeight:"16.35px",textTransform:"none",height:"44px",flex:1,color:"#B5B5B5",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px","&:hover":{bgcolor:"#0A2660"},"&:disabled":{bgcolor:"#1A1A1A",color:"#444444"}},children:"Create Character"})]})]})})}var M=i(67206),R=i(67753),T=i(16087),D=i(30076),z=i(38118),P=i(61011);function L(e){let{title:t,children:i,scrollRef:n,scrollState:o}=e;return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"body2",sx:{fontSize:12,fontWeight:500,color:"#AAAAAA",mb:1},children:t}),(0,r.jsxs)(l.Z,{sx:{position:"relative"},children:[(0,r.jsx)(M.F,{gap:1.5,ref:n,children:i}),(null==o?void 0:o.canScrollLeft)?(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,width:60,height:"100%",background:"linear-gradient(90deg, rgba(16, 16, 16, 0.8) 0%, rgba(16, 16, 16, 0) 100%)",pointerEvents:"none",zIndex:1}}):null,(null==o?void 0:o.canScrollRight)?(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,right:0,width:60,height:"100%",background:"linear-gradient(90deg, rgba(16, 16, 16, 0) 0%, rgba(16, 16, 16, 0.8) 100%)",pointerEvents:"none",zIndex:1}}):null]})]})}let W=n.memo(e=>{let{character:t,isSelected:i,size:n=80,onCharacterSelect:a,characterRef:s}=e;return(0,r.jsxs)(l.Z,{ref:s,onClick:()=>a(t),sx:{cursor:"pointer",flexShrink:0,position:"relative",width:n,height:n,transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(1.05)",".character-avatar-overlay":{opacity:1}}},children:[(0,r.jsx)(c.Z,{src:t.image_url,alt:t.model_name,sx:{width:n,height:n,border:i?"2px solid #0929F7":"1px solid #444444",borderRadius:"50%",transition:"border-color 0.2s ease-in-out"}}),(0,r.jsxs)(l.Z,{sx:{position:"absolute",top:0,left:0,pt:1,pb:1.5,width:"100%",height:"100%",overflow:"hidden",borderRadius:"50%",background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 100%)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",opacity:i?1:0,transition:"all 0.3s ease-in-out",pointerEvents:"none"},className:"character-avatar-overlay",children:[(0,r.jsx)(d.Z,{variant:"caption",sx:{fontSize:14,fontWeight:i?600:500,color:"#FFFFFF",textAlign:"center",transition:"all 0.2s ease-in-out",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxHeight:"42px"},children:t.model_name}),i?(0,r.jsx)(o.Z,{sx:{fontSize:32,color:"#FFFFFF",strokeWidth:4,transition:"all 0.2s ease-in-out"}}):(0,r.jsx)(u.Z,{variant:"contained",size:"small",sx:{minWidth:44,height:18,fontSize:11,fontWeight:500,bgcolor:"#101010",color:"#FFFFFF",borderRadius:"4px",boxShadow:"3px 3px 3.4px 0px rgba(0, 0, 0, 0.44)",transition:"all 0.2s ease-in-out","&:hover":{bgcolor:"#202020"}},children:"Apply"})]})]})},(e,t)=>e.character.id===t.character.id&&e.isSelected===t.isSelected&&e.size===t.size);W.displayName="CharacterAvatar";let B=n.memo(e=>{let{character:t,isSelected:i,size:n=80,onCharacterSelect:a,characterRef:s}=e;return(0,r.jsxs)(l.Z,{ref:s,onClick:()=>a(t),sx:{cursor:"pointer",flexShrink:0,position:"relative",width:n,height:n,transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(1.05)",".character-avatar-overlay":{opacity:1}}},children:[(0,r.jsx)(c.Z,{src:t.image_url,alt:t.model_name,sx:{width:n,height:n,border:i?"2px solid #0929F7":"1px solid #444444",borderRadius:"50%",transition:"border-color 0.2s ease-in-out"}}),(0,r.jsxs)(l.Z,{sx:{position:"absolute",top:0,left:0,pt:1,pb:1.5,width:"100%",height:"100%",overflow:"hidden",borderRadius:"50%",background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 100%)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",opacity:i?1:0,transition:"all 0.3s ease-in-out",pointerEvents:"none"},className:"character-avatar-overlay",children:[(0,r.jsx)(d.Z,{variant:"caption",sx:{fontSize:14,fontWeight:i?600:500,color:"#FFFFFF",textAlign:"center",transition:"all 0.2s ease-in-out",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxHeight:"42px"},children:t.model_name}),i?(0,r.jsx)(o.Z,{sx:{fontSize:32,color:"#FFFFFF",strokeWidth:4,transition:"all 0.2s ease-in-out"}}):(0,r.jsx)(u.Z,{variant:"contained",size:"small",sx:{minWidth:44,height:18,fontSize:11,fontWeight:500,bgcolor:"#101010",color:"#FFFFFF",borderRadius:"4px",boxShadow:"3px 3px 3.4px 0px rgba(0, 0, 0, 0.44)",transition:"all 0.2s ease-in-out","&:hover":{bgcolor:"#202020"}},children:"Apply"})]})]})},(e,t)=>e.character.id===t.character.id&&e.isSelected===t.isSelected&&e.size===t.size);B.displayName="MyCharacterAvatar";let H=e=>{let{onClick:t}=e;return(0,r.jsx)(l.Z,{onClick:t,sx:{flexShrink:0,cursor:"pointer",width:80,height:80,position:"relative",transition:"transform 0.2s ease-in-out"},children:(0,r.jsxs)(c.Z,{sx:{width:80,height:80,bgcolor:"#2E2E2E",border:"1px dashed #444444",borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease-in-out","&:hover":{bgcolor:"#3E3E3E",borderColor:"#555555"}},children:[(0,r.jsx)(a.Z,{sx:{color:"#E0E0E0",fontSize:16,mb:.5}}),(0,r.jsx)(d.Z,{variant:"caption",sx:{fontSize:12,fontWeight:500,color:"#AAAAAA",textAlign:"center",lineHeight:1.21},children:"Custom"})]})})},U=e=>{let{onClick:t}=e;return(0,r.jsx)(l.Z,{onClick:t,sx:{flexShrink:0,cursor:"pointer",width:64,height:64,position:"relative",transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(1.05)"}},children:(0,r.jsx)(c.Z,{sx:{width:64,height:64,bgcolor:"#2E2E2E",border:"1px solid #444444",borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease-in-out","&:hover":{bgcolor:"#3E3E3E",borderColor:"#555555","& .view-all-text":{textDecoration:"underline"}}},children:(0,r.jsx)(d.Z,{variant:"caption",className:"view-all-text",sx:{fontSize:12,fontWeight:500,color:"#FFFFFF",textAlign:"center",textDecoration:"none",textUnderlineOffset:"2px",transition:"text-decoration 0.2s ease-in-out"},children:"View All"})})})},O=e=>{let{size:t=80,count:i=1}=e;return(0,r.jsx)(r.Fragment,{children:Array.from({length:i}).map((e,i)=>(0,r.jsx)(l.Z,{sx:{flexShrink:0,width:t,height:t,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(c.Z,{sx:{width:t,height:t,bgcolor:"#2E2E2E",border:"1px solid #444444",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(p.Z,{size:24,sx:{color:"#666666"}})})},i))})},$=e=>{let{allowOutfitChanges:t,onToggle:i}=e;return(0,r.jsxs)(h.Z,{sx:{bgcolor:"#101010",border:"1px solid #2E2E2E",borderRadius:"8px",p:2,display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(E.y58,{}),(0,r.jsx)(d.Z,{sx:{fontSize:14,fontWeight:500,color:"#AAAAAA"},children:"Allow Outfit Changes?"}),(0,r.jsx)(m.Z,{title:"For trained characters, AI may change character outfits to match the story context",children:(0,r.jsx)(s.Z,{sx:{fontSize:14,color:"#444444",cursor:"help"}})})]}),(0,r.jsxs)(l.Z,{sx:{bgcolor:"#2E2E2E",border:"1px solid #2E2E2E",borderRadius:"4px",p:"3px",display:"flex",alignItems:"center",gap:"2px",height:24},children:[(0,r.jsx)(l.Z,{onClick:()=>i(!0),sx:{width:38,height:18,borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",bgcolor:t?"#013FFE":"transparent",boxShadow:t?"1px 1px 2.1px 0px rgba(0, 21, 255, 0.38)":"none",transition:"all 0.2s ease-in-out"},children:(0,r.jsx)(d.Z,{sx:{fontSize:11,fontWeight:600,color:t?"#FFFFFF":"#666666",textAlign:"center"},children:"YES"})}),(0,r.jsx)(l.Z,{onClick:()=>i(!1),sx:{width:38,height:18,borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",bgcolor:t?"transparent":"#013FFE",boxShadow:t?"none":"1px 1px 2.1px 0px rgba(0, 21, 255, 0.38)",transition:"all 0.2s ease-in-out"},children:(0,r.jsx)(d.Z,{sx:{fontSize:11,fontWeight:600,color:t?"#666666":"#FFFFFF",textAlign:"center"},children:"NO"})})]})]})};function N(e){let{selectedCharacter:t,onCharacterSelect:i,error:o,showPreviewAvatar:a=!0,showTitle:s=!0,characterType:u="default"}=e,p=(0,z.k)(),m=(0,D.B)(),{data:v=[],isLoading:y}=(0,P.Wr)(),b=null==v?void 0:v.filter(e=>"completed"===e.status),[C,w]=(0,n.useState)([]),[j,F]=(0,n.useState)(!1),[k,_]=(0,n.useState)(!1),[S,I]=(0,n.useState)(),[Z,E]=(0,n.useState)(!1),M=(0,n.useRef)(null),N=(0,n.useRef)(null),G=(0,n.useRef)({}),[V,K]=(0,n.useState)({myCharacters:{canScrollLeft:!1,canScrollRight:!1},openArt:{canScrollLeft:!1,canScrollRight:!1}}),Y=(0,n.useCallback)(()=>{let e=(e,t)=>{let i=e.current;if(i){let{scrollLeft:e,scrollWidth:r,clientWidth:n}=i,o=e>1,a=e<r-n-1;K(e=>({...e,[t]:{canScrollLeft:o,canScrollRight:a}}))}};e(N,"myCharacters"),e(M,"openArt")},[]);(0,n.useEffect)(()=>{let e=N.current,t=M.current;e&&e.addEventListener("scroll",Y),t&&t.addEventListener("scroll",Y),Y();let i=new ResizeObserver(Y);return e&&i.observe(e),t&&i.observe(t),()=>{e&&e.removeEventListener("scroll",Y),t&&t.removeEventListener("scroll",Y),i.disconnect()}},[Y]);let q=e=>({id:e.model_id,model_name:e.character_name,image_url:e.thumbnail,modelData:e}),X=(0,n.useMemo)(()=>C.map(e=>({id:e.id,model_name:e.name,image_url:e.image_url,reference_mode:e.reference_mode})).concat(b.map(q)),[b,C]),{data:J,isLoading:Q}=(0,P.Lg)(u);(0,n.useEffect)(()=>{if(!y&&!Q){let e=setTimeout(()=>{Y()},100);return()=>clearTimeout(e)}},[y,Q,Y]);let ee=(0,n.useMemo)(()=>{if(!J)return[];let e=J.slice(0,8),i=(null==t?void 0:t.type)==="premade",r=i&&e.some(e=>e.id===t.id);if(!i||!t||r)return e;{let i=e.filter(e=>e.id!==t.id).slice(0,7);return[t.modelData||{id:t.id,model_name:t.name,image_url:t.image_url},...i]}},[J,null==t?void 0:t.id,null==t?void 0:t.modelData]),et=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"premade",id:e.id,name:e.model_name,image_url:e.image_url,modelData:e,allowOutfitChanges:!1}),t&&J&&M.current&&(J.slice(0,8).some(t=>t.id===e.id)?setTimeout(()=>{let t=G.current[e.id];if(t&&M.current){let e=M.current.getBoundingClientRect(),i=t.getBoundingClientRect().left-e.left+M.current.scrollLeft-50;M.current.scrollTo({left:Math.max(0,i),behavior:"smooth"})}},100):setTimeout(()=>{M.current&&M.current.scrollTo({left:0,behavior:"smooth"})},100))},[i,J]),ei=e=>{let t="my-character";"quick"===e.reference_mode?t="custom-quick":"train"===e.reference_mode&&(t="custom-train"),i({type:t,id:e.id,name:e.model_name,image_url:e.image_url,reference_mode:"quick",modelData:e.modelData,allowOutfitChanges:!1})},er=async e=>{w([{...e,reference_mode:"quick"}]),i({type:"custom-quick",id:e.id,name:e.name,image_url:e.image_url,reference_mode:"quick"})};return(0,r.jsxs)(x.Z,{sx:{width:"100%",maxWidth:"100%",flexDirection:"column",gap:2},children:[s?(0,r.jsx)(d.Z,{variant:"h6",sx:{color:"#CCCCCC",fontWeight:600,flexGrow:0},children:"Pick your star"}):null,(0,r.jsxs)(g.Z,{fullWidth:!0,error:!!o,sx:{width:"100%",flexGrow:1,position:"relative",height:"max-content"},children:[(0,r.jsxs)(l.Z,{sx:{display:"flex",gap:1,alignItems:"stretch",height:"100%",flexDirection:{xs:"column",sm:"row"}},children:[a?(0,r.jsxs)(l.Z,{sx:{flexShrink:0,width:{xs:180,sm:240},height:{xs:180,sm:240},flexBasis:{xs:"auto",sm:240},position:"relative",mx:{xs:"auto",sm:0}},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),E(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),E(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),E(!1);let t=e.dataTransfer.files;if(t.length>0){let e=t[0];e.type.startsWith("image/")&&(I(e),F(!0))}},children:[(0,r.jsx)(c.Z,{src:(null==t?void 0:t.image_url)||T.FC,alt:(null==t?void 0:t.name)||"No character selected",sx:{width:"100%",height:"100%",border:Z?"2px dashed #0929F7":t?"2px solid #0929F7":"1px solid #2E2E2E",borderRadius:"8px",bgcolor:"transparent",transition:"border-color 0.3s ease-in-out","& .MuiAvatar-img":{objectFit:"contain"}}}),Z?(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(9, 41, 247, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:(0,r.jsx)(d.Z,{sx:{color:"#0929F7",fontWeight:600,fontSize:"14px",textAlign:"center"},children:"Drop image to create character"})}):null]}):null,(0,r.jsx)(h.Z,{sx:{flex:1,bgcolor:"#101010",border:"1px solid #2E2E2E",borderRadius:"8px",p:{xs:1.5,sm:2},position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},children:(0,r.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",gap:1},children:[(0,r.jsxs)(L,{title:"My Characters",scrollRef:N,scrollState:V.myCharacters,children:[(0,r.jsx)(H,{onClick:()=>{m({onAuthenticated:()=>F(!0)})}}),p&&y?(0,r.jsx)(O,{size:80,count:1}):p&&X.map(e=>(0,r.jsx)(B,{character:e,isSelected:(null==t?void 0:t.id)===e.id,size:80,onCharacterSelect:ei},e.id))]}),(0,r.jsxs)(L,{title:"Community Characters",scrollRef:M,scrollState:V.openArt,children:[Q?(0,r.jsx)(O,{size:64,count:8}):ee.map(e=>(0,r.jsx)(W,{character:e,isSelected:(null==t?void 0:t.id)===e.id,size:64,onCharacterSelect:e=>et(e,!1),characterRef:t=>{G.current[e.id]=t}},e.id)),!Q&&(0,r.jsx)(U,{onClick:()=>_(!0)})]})]})})]}),o?(0,r.jsx)(f.Z,{children:o}):null,(null==t?void 0:t.type)!=="custom-quick"?(0,r.jsx)(l.Z,{sx:{mt:2},children:(0,r.jsx)($,{allowOutfitChanges:null==t?void 0:t.allowOutfitChanges,onToggle:e=>{i({...t,allowOutfitChanges:e})}})}):null]}),(0,r.jsx)(A,{open:j,onClose:()=>{F(!1),I(void 0)},onCharacterCreated:er,initialFile:S}),(0,r.jsx)(R.n,{open:k,onClose:()=>_(!1),onCharacterSelect:e=>et(e,!0),selectedCharacter:t,characterType:u})]})}},8234:function(e,t,i){i.d(t,{$:function(){return p}});var r=i(52676),n=i(61271),o=i(66686),a=i(65893),s=i(62935),l=i(71137),d=i(46740),c=i(34800);let u=(0,d.F4)`
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
`;function p(e){let{open:t,onClose:i}=e;return(0,r.jsxs)(n.Z,{open:t,onClose:i,maxWidth:!1,PaperProps:{sx:{background:"#1A1A1A",borderRadius:"13px",border:"2px solid #2E2E2E",width:"312px",height:"416px",maxWidth:"none",maxHeight:"none",position:"relative",overflow:"hidden",p:0}},children:[(0,r.jsx)(o.Z,{onClick:i,sx:{position:"absolute",top:"9px",right:"9px",width:"20px",height:"20px",backgroundColor:"rgba(255, 255, 255, 0.17)",borderRadius:"16px",color:"#FFFFFF",minWidth:"auto",p:0,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.25)"},zIndex:1e3},children:(0,r.jsx)(c.Tw,{sx:{fontSize:"16px"}})}),(0,r.jsxs)(a.Z,{sx:{position:"relative",mb:"16px",height:"254px",borderRadius:"8px 8px 0 0",overflow:"hidden"},children:[(0,r.jsx)(a.Z,{sx:{width:"100%",height:"100%",backgroundImage:"url(https://cdn.openart.ai/assets/priview_editor_dialog.webp)",backgroundSize:"cover",backgroundPosition:"center",position:"relative"}}),(0,r.jsx)(a.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)",backgroundSize:"200% 100%",animation:`${u} 3s ease-in-out infinite`,pointerEvents:"none"}})]}),(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"9px",mb:"24px",px:"21px"},children:[(0,r.jsx)(s.Z,{sx:{fontWeight:700,fontSize:"20px",lineHeight:"1.1",color:"#FFFFFF",textAlign:"center"},children:"Edit Seamlessly on Web"}),(0,r.jsx)(s.Z,{sx:{fontWeight:500,fontSize:"14px",lineHeight:"1.429",color:"#888888",textAlign:"center"},children:"Enjoy a more powerful and precise video editing experience on the web."})]}),(0,r.jsx)(a.Z,{sx:{px:"31px",pb:"24px"},children:(0,r.jsx)(l.Z,{onClick:i,fullWidth:!0,sx:{background:"#013FFE",borderRadius:"7px",height:"44px",fontFamily:"Inter",fontWeight:700,fontSize:"14px",lineHeight:"1.571",letterSpacing:"-0.029em",color:"#FFFFFF",textTransform:"none","&:hover":{background:"#0133E6"}},children:"OK, I Got it !"})})]})}},83469:function(e,t,i){i.d(t,{d:function(){return x}});var r=i(52676),n=i(75271),o=i(99837),a=i(13868),s=i(54512),l=i(44754),d=i(62935),c=i(75616),u=i(39204),p=i(23638),h=i(39088),m=i(60439);let x=e=>{let{workflowRunId:t,storyId:i,onComplete:x,shouldAutoDownload:g=!0}=e,f=(0,c.NL)(),{data:v,isLoading:y,error:b}=(0,h.w)(t),[C,w]=(0,n.useState)(!1),[j,F]=(0,n.useState)(0),[k,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e;if(t)return(null==v?void 0:v.status.startsWith("processing"))&&!C?e=setInterval(()=>{F(e=>Math.min(e+(Math.random()*(e>80?1:e>60?2:5)+.5),90))},800+1200*Math.random()):(null==v?void 0:v.status)==="completed"?((0,m.tO)(f,v.story),F(100)):(b||(null==v?void 0:v.status.startsWith("failed")))&&F(0),()=>{e&&clearInterval(e)}},[null==v?void 0:v.status,C,b,t,v,f]),(0,n.useEffect)(()=>{F(0),_(!1)},[t]);let S=(null==v?void 0:v.status.startsWith("processing"))&&t,I=(null==v?void 0:v.status)==="completed"&&t,Z=(b||(null==v?void 0:v.status.startsWith("failed")))&&t;return(0,n.useEffect)(()=>{let e;return(async()=>{if(I&&100===j&&!k){if(_(!0),!C&&g)try{w(!0);let t=null==v?void 0:v.story;if(null==t?void 0:t.last_export_url){var e;let r=`story_${i}_${(null===(e=t.title)||void 0===e?void 0:e.replace(/[^a-z0-9]/gi,"_"))||"video"}.mp4`,n=t.last_export_url,o=document.createElement("a");o.href=n,o.download=r,o.rel="noopener noreferrer",o.style.display="none",document.body.append(o),o.click(),o.remove()}}catch(e){console.error("Failed to fetch updated story for download:",e)}finally{w(!1)}null==x||x()}})(),()=>{e&&clearTimeout(e)}},[I,j,i,x,C,v,g,k]),(0,n.useEffect)(()=>{if(Z&&!C&&!k){_(!0);let e=setTimeout(()=>{null==x||x()},1e3);return()=>clearTimeout(e)}},[Z,C,x,k]),(0,r.jsxs)(u.E.div,{initial:{opacity:0},animate:{opacity:t?1:0},exit:{opacity:0},transition:{duration:.3},style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",zIndex:10,pointerEvents:t?"auto":"none"},children:[(0,r.jsx)(p.M,{mode:"wait",children:C?(0,r.jsx)(u.E.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",stiffness:200,damping:15},style:{width:48,height:48,borderRadius:"50%",backgroundColor:"#0066FF",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:16,position:"relative"},children:(0,r.jsx)(u.E.div,{animate:{y:[0,-2,0]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:(0,r.jsx)(o.Z,{sx:{fontSize:24,color:"white"}})})},"downloading"):I?(0,r.jsx)(u.E.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",stiffness:200,damping:15},style:{width:48,height:48,borderRadius:"50%",backgroundColor:"#42BE65",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:16},children:(0,r.jsx)(a.Z,{sx:{fontSize:24,color:"white"}})},"success"):Z?(0,r.jsx)(u.E.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",stiffness:200,damping:15},style:{width:48,height:48,borderRadius:"50%",backgroundColor:"#FA4D56",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:16},children:(0,r.jsx)(s.Z,{sx:{fontSize:24,color:"white"}})},"failed"):(0,r.jsxs)(u.E.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",stiffness:200,damping:15},style:{position:"relative",width:80,height:80,marginBottom:16,display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(l.Z,{variant:"determinate",value:100,size:80,thickness:4,sx:{color:"rgba(255, 255, 255, 0.1)",position:"absolute"}}),(0,r.jsx)(l.Z,{variant:"determinate",value:j,size:80,thickness:4,sx:{color:"#0066FF",position:"absolute",filter:"drop-shadow(0 0 8px rgba(0, 102, 255, 0.3))"}}),(0,r.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},style:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)(d.Z,{sx:{color:"#FFFFFF",fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:1},children:[Math.round(j),"%"]})}),S||C?(0,r.jsx)(u.E.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},style:{position:"absolute",width:88,height:88,borderRadius:"50%",background:"conic-gradient(from 0deg, transparent 0deg, rgba(0, 102, 255, 0.2) 60deg, transparent 120deg)",filter:"blur(8px)",zIndex:-1}}):null]},"progress")}),(0,r.jsx)(u.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,r.jsx)(d.Z,{sx:{color:C?"#0066FF":b||(null==v?void 0:v.status.startsWith("failed"))?"#FA4D56":(null==v?void 0:v.status)==="completed"?"#42BE65":"#FFFFFF",fontFamily:"Inter",fontSize:"12px",fontWeight:500,lineHeight:1.21,textAlign:"center",letterSpacing:"0.5px"},children:(()=>{if(C)return"Downloading...";if(b)return"Export failed";if(y||!v)return"Preparing export...";switch(v.status){case"processing:generating_timeline":case"processing:exporting_video":return"Exporting...";case"processing:generating_storyboard":return"Generating storyboard...";case"completed":return"Export complete";case"failed":return"Export failed";default:return"Processing..."}})()})}),b||(null==v?void 0:v.error)?(0,r.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:(0,r.jsx)(d.Z,{sx:{mt:1,color:"#FA4D56",fontFamily:"Inter",fontSize:"10px",fontWeight:400,textAlign:"center",opacity:.8,maxWidth:"90%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:"string"==typeof b?b:"string"==typeof(null==v?void 0:v.error)?v.error:"An error occurred"})}):null]})}},67206:function(e,t,i){i.d(t,{F:function(){return d}});var r=i(52676),n=i(75271),o=i(55625),a=i(29720),s=i(65893),l=i(66686);let d=(0,n.forwardRef)((e,t)=>{let{children:i,gap:d=1.5,onScroll:c,scrollAmount:u=200}=e,p=(0,n.useRef)(null),h=t||p,[m,x]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),v=(0,n.useCallback)(()=>{let e="object"==typeof h&&(null==h?void 0:h.current);if(e){let{scrollLeft:t,scrollWidth:i,clientWidth:r}=e;x(t>0),f(t<i-r-1)}},[h]);(0,n.useEffect)(()=>{v();let e="object"==typeof h&&(null==h?void 0:h.current);if(e){e.addEventListener("scroll",v);let t=new ResizeObserver(v);return t.observe(e),()=>{e.removeEventListener("scroll",v),t.disconnect()}}},[v,h]);let y=e=>{let t="object"==typeof h&&(null==h?void 0:h.current);if(t){let i="left"===e?t.scrollLeft-u:t.scrollLeft+u;t.scrollTo({left:i,behavior:"smooth"})}null==c||c(e)};return(0,r.jsxs)(s.Z,{sx:{position:"relative",display:"flex",alignItems:"center"},children:[(0,r.jsx)(l.Z,{size:"small",onClick:()=>y("left"),sx:{position:"absolute",left:-8,zIndex:2,bgcolor:"#FFFFFF",color:"#000000",width:32,height:32,opacity:m?1:0,visibility:m?"visible":"hidden",transition:"all 0.3s ease-in-out","&:hover":{bgcolor:"#F0F0F0"}},children:(0,r.jsx)(o.Z,{fontSize:"small"})}),(0,r.jsx)(s.Z,{ref:h,sx:{display:"flex",gap:d,overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},maskImage:m&&g?"linear-gradient(to right, transparent, black 16px, black calc(100% - 16px), transparent)":m&&!g?"linear-gradient(to right, transparent, black 16px, black 100%)":!m&&g?"linear-gradient(to right, black 0%, black calc(100% - 16px), transparent)":"none",WebkitMaskImage:m&&g?"linear-gradient(to right, transparent, black 16px, black calc(100% - 16px), transparent)":m&&!g?"linear-gradient(to right, transparent, black 16px, black 100%)":!m&&g?"linear-gradient(to right, black 0%, black calc(100% - 16px), transparent)":"none"},children:i}),(0,r.jsx)(l.Z,{size:"small",onClick:()=>y("right"),sx:{position:"absolute",right:-8,zIndex:2,bgcolor:"#FFFFFF",color:"#000000",width:32,height:32,opacity:g?1:0,visibility:g?"visible":"hidden",transition:"all 0.3s ease-in-out","&:hover":{bgcolor:"#F0F0F0"}},children:(0,r.jsx)(a.Z,{fontSize:"small"})})]})});d.displayName="HorizontalScrollableContainer"},97071:function(e,t,i){i.d(t,{W:function(){return x}});var r=i(52676),n=i(75271),o=i(65893),a=i(77403),s=i(35019),l=i(68096),d=i(62935),c=i(38060),u=i(71087),p=i(80924),h=i(79267);let m=e=>{let{children:t,sx:i,onClick:n}=e;return(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.14)",borderRadius:"6px",p:.5,backdropFilter:"blur(9.4px)",...i},onClick:e=>{e.stopPropagation(),e.preventDefault(),n()},children:t})};function x(e){let{id:t,title:i,thumbnail:x,videoUrl:g,duration:f="0:28",onClick:v,category_id:y,onVideoTimeUpdate:b}=e,{isMobile:C}=(0,p.j)(),[w,j]=(0,c.Z)("story-community-auto-sound",{defaultValue:!1,listenStorageChange:!0}),[F,k]=(0,n.useState)(!1),[_,S]=(0,n.useState)(0),I=(0,n.useRef)(null),Z=(0,u.tu)(y),E=(0,n.useCallback)(()=>{if(I.current){let e=I.current.currentTime;Math.abs(e-_)>=.1&&(S(e),null==b||b(e))}},[b,_]);return(0,r.jsxs)(a.Z,{component:"a",href:`/story/community/${t}`,sx:{width:"100%",borderRadius:"12px",overflow:"hidden",bgcolor:"#1F1F1F",border:"none",boxShadow:"none",position:"relative",display:"flex",flexDirection:"column",gap:"8px",pb:1,cursor:v?"pointer":"default"},onClick:e=>{e.preventDefault(),null==v||v()},onMouseEnter:()=>{k(!0),I.current&&I.current.play()},onMouseLeave:()=>{k(!1),I.current&&(I.current.pause(),I.current.currentTime=0,S(0))},children:[(0,r.jsxs)(s.Z,{sx:{position:"relative",width:"100%",height:"100%",borderRadius:"12px",overflow:"hidden"},children:[!C&&(0,r.jsx)(o.Z,{component:"video",ref:I,muted:!w,loop:!0,preload:"metadata",poster:x,onTimeUpdate:E,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:2,opacity:F?1:0,transition:"opacity 0.3s ease",pointerEvents:"none"},children:(0,r.jsx)("source",{src:g,type:"video/mp4"})}),x?(0,r.jsx)(l.Z,{component:"img",image:x,alt:i,sx:{objectFit:"cover",width:"100%",height:"100%",zIndex:1}}):(0,r.jsx)(o.Z,{sx:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#2A2A2A",borderRadius:"12px",zIndex:1},children:(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#888888",fontFamily:"Inter",fontSize:"14px",fontWeight:400},children:"No preview"})})]}),(0,r.jsxs)(s.Z,{direction:"row",width:"100%",height:"50px",sx:{px:{xs:.2,md:1},pt:{xs:.2,md:1},pb:2,position:"absolute",top:"0px",left:"0px",background:F?"linear-gradient(0deg, rgba(0, 0, 0, 0.00) 0%, #000 161%)":"none",zIndex:3},alignItems:"center",justifyContent:"space-between",children:[(0,r.jsxs)(s.Z,{direction:"row",spacing:{xs:0,md:.5},alignItems:"start",sx:{opacity:{xs:1,md:F?1:0}},children:[(0,r.jsx)(m,{onClick:()=>{j(!w)},sx:{display:{xs:"none",md:"block"}},children:w?(0,r.jsx)(h.uwl,{width:14,height:14}):(0,r.jsx)(h.Q_3,{width:14,height:14})}),(0,r.jsx)(m,{children:(0,r.jsxs)(s.Z,{direction:"row",spacing:.5,alignItems:"center",children:[(0,r.jsx)(Z,{width:14,height:14,color:"rgba(255, 255, 255, 0.75)"}),(0,r.jsx)(d.Z,{fontSize:{xs:11,md:12},fontWeight:600,lineHeight:1.21,color:"rgba(255, 255, 255, 0.6)",textAlign:"center",letterSpacing:"-0.12px",children:(0,u.Oo)(y)})]})})]}),(0,r.jsx)(m,{children:(0,r.jsx)(d.Z,{fontSize:{xs:11,md:12},fontWeight:600,lineHeight:1.21,color:"rgba(255, 255, 255, 0.6)",textAlign:"center",children:f})})]}),(0,r.jsx)(s.Z,{direction:"column",spacing:.5,sx:{px:1},children:(0,r.jsx)(d.Z,{variant:"body2",fontSize:"14px",sx:{color:"#FFFFFF",fontWeight:700,lineHeight:"20px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i})})]})}},4054:function(e,t,i){i.d(t,{V:function(){return C}});var r=i(52676),n=i(75271),o=i(46974),a=i(85720),s=i(65893),l=i(90902),d=i(14930),c=i(62935),u=i(71137),p=i(12073),h=i(19242),m=i(51395),x=i(97071),g=i(58997),f=i(45137);let v=e=>{var t;let[i,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{var t;if(null===(t=e.metadata)||void 0===t?void 0:t.duration){r(e.metadata.duration);return}if(e.last_export_url){let t=document.createElement("video");t.preload="metadata",t.src=e.last_export_url;let i=()=>{r(t.duration),t.remove()},n=()=>{r(0),t.remove()};return t.addEventListener("loadedmetadata",i,{once:!0}),t.addEventListener("error",n,{once:!0}),t.load(),()=>{t.removeEventListener("loadedmetadata",i),t.removeEventListener("error",n),t.remove()}}},[null===(t=e.metadata)||void 0===t?void 0:t.duration,e.last_export_url]),i};function y(e){let{story:t,index:i,onClick:n,onVideoTimeUpdate:o}=e,a=v(t),s=a?`${Math.floor(a/60)}:${(a%60).toFixed(0).padStart(2,"0")}`:"0:00";return(0,r.jsx)(x.W,{id:t.id||`story-${i}`,title:t.title,author:"OpenArt",videoUrl:t.last_export_url,thumbnail:t.last_export_thumbnail_url,description:void 0,duration:s,onClick:n,category_id:null==t?void 0:t.category_id,onVideoTimeUpdate:o})}function b(e){let{aspectRatio:t}=e,[i,o]=(0,n.useState)(t||"16:9");return(0,n.useEffect)(()=>{t||o(Math.random()>.5?"16:9":"9:16")},[t]),(0,r.jsxs)(s.Z,{sx:{width:"100%",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",overflow:"hidden",mb:2},children:[(0,r.jsx)(l.Z,{variant:"rectangular",width:"100%",height:"16:9"===i?180:280,sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"12px 12px 0 0"}}),(0,r.jsxs)(s.Z,{sx:{p:2},children:[(0,r.jsx)(l.Z,{variant:"text",width:"80%",height:24,sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",mb:1}}),(0,r.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(l.Z,{variant:"text",width:"40%",height:20,sx:{backgroundColor:"rgba(255, 255, 255, 0.08)"}}),(0,r.jsx)(l.Z,{variant:"text",width:"20%",height:20,sx:{backgroundColor:"rgba(255, 255, 255, 0.08)"}})]})]})]})}function C(e){let{initCommunityStory:t,stories:i,title:l,emptyText:x="No template stories available.",isLoading:v=!1,maxItems:C,sx:w,fetchNextPage:j,hasNextPage:F=!1,isFetchingNextPage:k=!1}=e,_=(0,p.Z)(),S=(0,o.useRouter)(),I=(0,d.Z)(_.breakpoints.up("xl")),Z=(0,d.Z)(_.breakpoints.up("lg")),E=(0,d.Z)(_.breakpoints.up("md")),[A,M]=((0,d.Z)(_.breakpoints.up("sm")),(0,n.useState)(0)),{pathname:R}=S,[T,D]=(0,n.useState)(t||null),[z,P]=(0,n.useState)(!!t),{ref:L,inView:W}=(0,h.YD)({threshold:.1,triggerOnce:!1}),B=C?i.slice(0,C):i,H=I?4:Z?4:E?3:2;(0,n.useEffect)(()=>{W&&j&&F&&!k&&j()},[W,j,F,k]);let U=(0,n.useCallback)(e=>{D(e),P(!0),window.history.replaceState({},"",`/story/community/${e.id}`)},[]),O=(0,n.useCallback)(()=>{P(!1),D(null),R.startsWith("/story/community")||R.startsWith("/story/share")?window.history.replaceState({},"","/story"):window.history.replaceState({},"",R)},[R]),$=(0,n.useCallback)(()=>{if(!T)return;let e=T.last_export_url;if(e){let t=document.createElement("a");t.download=`${T.title||"openart-story"}.mp4`,t.href=e,t.target="_self",t.click()}else console.error("No last export URL found")},[T]),N=(0,n.useCallback)(()=>{T&&(0,f.B)("story_preview_dialog_create_button_clicked",{story_type:T.category_id,story_id:T.id})},[T]),G=(0,n.useCallback)(()=>{T&&T.id!==B.at(-1).id&&D(B[B.indexOf(T)+1])},[T,B]),V=(0,n.useCallback)(()=>{T&&T.id!==B[0].id&&D(B[B.indexOf(T)-1])},[T,B]),K=(0,n.useCallback)(e=>{z||M(e)},[z]);return(0,r.jsxs)(s.Z,{sx:{mb:4,width:"100%",...w},children:[l?(0,r.jsx)(c.Z,{variant:"h6",component:"h2",sx:{fontWeight:700,fontSize:"24px",lineHeight:"29.05px",mb:"32px",color:"#E0E0E0",textAlign:"left"},children:l}):null,B.length>0||v&&0===B.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.Z,{columnsCount:H,gutter:I?"16px":Z?"16px":E?"16px":"8px",children:[B.map((e,t)=>(0,r.jsx)(s.Z,{sx:{},children:(0,r.jsx)(y,{story:e,index:t,onClick:()=>U(e),onVideoTimeUpdate:K})},e.id||`story-${t}`)),k?Array.from({length:Z?3*H:E?2*H:H},(e,t)=>(0,r.jsx)(b,{},`loading-skeleton-${t}`)):null,v&&0===B.length?Array.from({length:Z?12:E?9:6},(e,t)=>(0,r.jsx)(b,{},`initial-skeleton-${t}`)):null]}),!C&&(F||k)?(0,r.jsx)(s.Z,{ref:L,sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:4,mb:2,py:2}}):null]}):v?null:(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:8,bgcolor:"rgba(0, 0, 0, 0.2)",borderRadius:2,border:"1px dashed",borderColor:"grey.700"},children:[(0,r.jsx)(a.Z,{sx:{fontSize:48,color:"grey.600",mb:2}}),(0,r.jsx)(c.Z,{variant:"body1",sx:{color:"grey.500",mb:3,textAlign:"center"},children:x})]}),T?(0,r.jsx)(g.z,{story:T,story_id:T.id,needloadCompleteData:T.id!==(null==t?void 0:t.id),currentVideoTime:A,open:z,onClose:O,onDownload:$,onNext:G,onPrev:V,canDelete:!1,useDirectDownload:!0,canNavigateNext:T?T.id!==B.at(-1).id:null,canNavigatePrev:T?T.id!==B[0].id:null,bottomContent:(0,r.jsx)(u.Z,{onClick:N,sx:{backgroundColor:"#013FFE",color:"#FFFFFF",fontSize:"16px",fontWeight:700,lineHeight:"23px",textTransform:"none",width:"100%",height:"44px",borderRadius:"8px",gap:"10px","&:hover":{backgroundColor:"#0135E6"}},target:"_blank",href:(e=>{switch(e){case"character_vlog":return"/story/create/vlog";case"script_to_video":return"/story/create/script";case"music_video":return"/story/create/mv";default:return"/story/editor"}})(T.category_id),children:(e=>{switch(e){case"character_vlog":return"Create Character Vlog â†’";case"script_to_video":return"Create Script to Video â†’";case"music_video":return"Create Music Video â†’";case"create_from_scratch":return"Create from Scratch â†’";default:return"Create Story â†’"}})(T.category_id)})}):null]})}},20839:function(e,t,i){i.d(t,{p:function(){return c}});var r=i(52676);i(75271);var n=i(65893),o=i(62935),a=i(46740),s=i(31993);let l=(0,a.F4)`
  0%, 100% {
    opacity: 0.7;
  }
  50% {
    opacity: 1;
  }
`,d={color:"#ffffff",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:1.21};function c(e){let{text:t="",textStyle:i=d,logoSize:a=80,sx:c}=e;return(0,r.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",background:"linear-gradient(134.98deg, #444444 1.37%, #1A1A1A 103.51%)",...c},children:[(0,r.jsx)(s._,{size:a,title:""}),t?(0,r.jsx)(o.Z,{sx:{textAlign:"center",animation:`${l} 2s ease-in-out infinite`,letterSpacing:"0.5px",textShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",...i},children:t}):null]})}t.Z=c},65210:function(e,t,i){i.d(t,{O:function(){return c}});var r=i(52676);i(75271);var n=i(903),o=i(97348),a=i(62205),s=i(65893),l=i(62935),d=i(2656);function c(e){let{label:t,value:i,options:c,onChange:u,sx:p={}}=e,h=`model-selector-${t.replaceAll(" ","-").toLowerCase()}`,m=c.find(e=>e.name===i);return(0,r.jsx)(o.Z,{sx:{flex:1,...p},children:(0,r.jsx)(a.Z,{id:h,value:i,onChange:e=>{u(e.target.value)},displayEmpty:!0,sx:{backgroundColor:"#101010",borderRadius:"8px",height:"48px",color:"#FFFFFF",border:"1px solid transparent","&:hover":{border:"1px solid #333"},"&.Mui-focused":{border:"1px solid #2F66FF"},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiSelect-select":{padding:"12px 16px",display:"flex",flexDirection:"row",alignItems:"center"},"& .MuiSelect-icon":{color:"#666666",fontSize:"16px"}},renderValue:e=>(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"10px",width:"100%"},children:[(0,r.jsx)(l.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"1.5em",letterSpacing:"-0.04em",color:"#ccc"},children:t}),(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:null==m?void 0:m.icon}),(0,r.jsx)(l.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"1.5em",letterSpacing:"-0.04em",color:"#FFFFFF"},children:e})]})]}),MenuProps:{PaperProps:{sx:{border:"1px solid #2e2e2e",borderRadius:"8px",mt:.5,minWidth:"200px","& .MuiMenuItem-root":{margin:"0px",minHeight:"auto",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderRadius:"0px","&:not(:last-child)":{borderBottom:"1px solid #2E2E2E"}}}}},children:c.map(e=>(0,r.jsxs)(d.Z,{value:e.name,disabled:e.disabled,children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)(s.Z,{sx:{width:24,height:24,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",opacity:e.disabled?.5:1},children:e.icon}),(0,r.jsx)(l.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:"16px",lineHeight:"1.5em",letterSpacing:"-0.04em",color:e.disabled?"#666666":"#FFFFFF"},children:e.name})]}),i===e.name&&(0,r.jsx)(s.Z,{sx:{width:22,height:22,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(n.Z,{sx:{color:"#FFFFFF",fontSize:16}})})]},e.name))})})}},13270:function(e,t,i){i.d(t,{m:function(){return p}});var r=i(52676),n=i(75271),o=i(61271),a=i(57598),s=i(62935),l=i(21461),d=i(65893),c=i(71137),u=i(44754);function p(e){let{open:t,onClose:i,onSuccess:p,onFileReady:h,placeholder:m="Enter Suno music URL (suno.ai or suno.com)...",title:x="Parse Music URL"}=e,[g,f]=(0,n.useState)(""),[v,y]=(0,n.useState)(!1),[b,C]=(0,n.useState)(!1),[w,j]=(0,n.useState)(""),F=e=>{if(!e.trim())return{isValid:!1,error:"Please enter a URL"};try{new URL(e)}catch{return{isValid:!1,error:"Please enter a valid URL"}}let t=e.toLowerCase();return["suno.ai","suno.com"].some(e=>t.includes(e))?{isValid:!0,error:""}:{isValid:!1,error:"Please enter a URL from Suno Music (suno.ai or suno.com)"}},k=async(e,t)=>{try{let i=await fetch(e);if(!i.ok)throw Error(`Failed to download file: ${i.statusText}`);let r=await i.blob(),n=r.type||"audio/mpeg";return new File([r],t,{type:n})}catch(e){throw console.error("Error downloading file:",e),Error("Failed to download music file for trimming")}},_=async()=>{let e=F(g);if(!e.isValid){j(e.error);return}y(!0),j("");try{let e=await fetch("/api/media/parse_music_url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:g})}),i=await e.json();if(i.success&&i.musicUrl){if(h){C(!0),y(!1);try{var t;let e=(null===(t=i.metadata)||void 0===t?void 0:t.title)?`${i.metadata.title}.mp3`:`suno_music_${Date.now()}.mp3`,r=await k(i.musicUrl,e);h(r,e,i.metadata)}catch(e){console.error("Failed to download music for trimming:",e),j("Failed to download music file. Please try again."),C(!1);return}}p(i.musicUrl,i.metadata),S()}else j(i.message||i.error||"Failed to parse music URL. Please try again."),y(!1)}catch(e){console.error("Failed to parse music URL:",e),j("Network error. Please check your connection and try again."),y(!1)}},S=()=>{f(""),j(""),y(!1),C(!1),i()};n.useEffect(()=>{t&&(f(""),j(""),y(!1),C(!1))},[t]);let I=v||b;return(0,r.jsx)(o.Z,{open:t,onClose:S,maxWidth:"xs",fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"11px",padding:"16px 20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"}},children:(0,r.jsxs)(a.Z,{sx:{padding:0},children:[(0,r.jsx)(s.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:16,lineHeight:"1.21em",color:"#FFFFFF",textAlign:"left",mb:3},children:x}),(0,r.jsx)(l.Z,{fullWidth:!0,value:g,onChange:e=>{f(e.target.value),w&&j("")},placeholder:m,error:!!w,disabled:I,sx:{mb:w?1:2,"& .MuiOutlinedInput-root":{backgroundColor:"#2E2E2E",color:"#FFFFFF",borderRadius:"8px",height:52,border:w?"1px solid #FF4444":"none","& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},"&.Mui-error":{border:"1px solid #FF4444"},"&.Mui-disabled":{backgroundColor:"#1E1E1E",color:"#666"}},"& .MuiInputBase-input":{padding:"16px",fontSize:14,fontFamily:"Inter"}}}),w?(0,r.jsx)(s.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:12,lineHeight:"1.33em",color:"#FF4444",mb:2},children:w}):null,(0,r.jsxs)(d.Z,{sx:{mb:2},children:[(0,r.jsx)(s.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:12,lineHeight:"1.33em",color:"#888",mb:.5},children:"URL Examples:"}),(0,r.jsxs)(s.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:12,lineHeight:"1.33em",color:"#888",mb:.25},children:[(0,r.jsx)(d.Z,{component:"span",sx:{color:"#FFA500"},children:"https://suno.com/song/"}),(0,r.jsx)(d.Z,{component:"span",sx:{color:"#888"},children:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"})]}),(0,r.jsxs)(s.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:12,lineHeight:"1.33em",color:"#888"},children:[(0,r.jsx)(d.Z,{component:"span",sx:{color:"#FFA500"},children:"https://suno.com/s/"}),(0,r.jsx)(d.Z,{component:"span",sx:{color:"#888"},children:"xxxxxxxxxxxxxxxx"})]})]}),(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",gap:1},children:[(0,r.jsx)(c.Z,{onClick:S,variant:"outlined",disabled:I,sx:{borderRadius:"5px",padding:"10px 27px",width:131,height:44,textTransform:"none",fontFamily:"Inter",fontWeight:600,fontSize:16,lineHeight:"1.02em"},children:"Cancel"}),(0,r.jsx)(c.Z,{onClick:_,variant:"primary",disabled:!g.trim()||I,sx:{borderRadius:"5px",padding:"17px 42px",width:160,height:44,textTransform:"none",fontFamily:"Inter",fontWeight:600,fontSize:16,lineHeight:"1.21em"},startIcon:I?(0,r.jsx)(u.Z,{size:16,sx:{color:"inherit"}}):null,children:v?"Parsing...":b?"Preparing...":"Confirm"})]})]})})}},42054:function(e,t,i){i.d(t,{C:function(){return eB}});var r=i(52676),n=i(75271),o=i(65893),a=i(62935),s=i(92598),l=i(71137),d=i(44754),c=i(68125),u=i(79882),p=i(71087),h=i(52646),m=i(14930),x=i(55547),g=i(44595),f=i(77403),v=i(54865),y=i(17831),b=i(70565),C=i(12073);let w=i(63311).WK.map(e=>({id:e.id.toString(),title:e.name,artist:"OpenArt",url:e.url,duration:e.duration}));function j(e){let{onSelectMusic:t}=e,i=(0,C.Z)(),s=(0,m.Z)(i.breakpoints.down("md")),d=(0,m.Z)(i.breakpoints.down("sm")),c=()=>d?2:s?3:4,[u,p]=(0,n.useState)(()=>{let e=c();return w.slice(-e)}),[j,F]=(0,n.useState)(null),[k,_]=(0,n.useState)(!1),[S,I]=(0,n.useState)(!0),Z=(0,n.useCallback)(async()=>{_(!0),I(!1),await new Promise(e=>setTimeout(e,200));let e=[...w].sort(()=>Math.random()-.5),t=d?2:s?3:4;p(e.slice(0,t)),I(!0),setTimeout(()=>_(!1),300)},[s,d]),E=(0,n.useCallback)(e=>{t&&t(e)},[t]),A=(0,n.useCallback)(e=>{F(e.id)},[]),M=(0,n.useCallback)(()=>{F(null)},[]);return(0,r.jsx)(o.Z,{sx:{mb:4,width:"100%"},children:(0,r.jsxs)(o.Z,{sx:{display:"flex",gap:{xs:1.5,sm:2,md:3},alignItems:"center",justifyContent:"center",flexDirection:"row"},children:[(0,r.jsx)(x.Z,{in:S,timeout:300,children:(0,r.jsx)(o.Z,{sx:{display:"flex",gap:{xs:1,sm:1.5,md:2.5},flexDirection:"row",overflow:"hidden"},children:u.map((e,t)=>(0,r.jsx)(g.Z,{in:S,timeout:300+100*t,style:{transformOrigin:"0 0 0"},children:(0,r.jsx)(f.Z,{onMouseEnter:t=>A(e),onMouseLeave:M,onClick:()=>E(e),sx:{background:j===e.id?"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.03) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, rgba(255, 255, 255, 0.005) 100%)",backdropFilter:j===e.id?"blur(10px)":"blur(5px)",borderRadius:1,cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:j===e.id?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:j===e.id?"0 8px 25px rgba(0, 0, 0, 0.15), 0 4px 10px rgba(0, 0, 0, 0.1)":"0 1px 3px rgba(0, 0, 0, 0.02)",border:j===e.id?"1px solid rgba(255, 255, 255, 0.15)":"1px solid rgba(255, 255, 255, 0.02)",opacity:j===e.id?1:.6,height:28,flexShrink:0,justifyContent:"center",alignItems:"center",position:"relative"},children:(0,r.jsx)(v.Z,{sx:{height:"100%",width:"100%",padding:"0 !important",display:"flex",alignItems:"center",justifyContent:"center","&:last-child":{paddingBottom:"0 !important"}},children:(0,r.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:1,padding:.7,width:"100%"},children:[(0,r.jsx)(o.Z,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(y.Z,{sx:{width:25,height:25,backgroundColor:j===e.id?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.05)",flexShrink:0,borderRadius:.5,border:j===e.id?"1px solid rgba(255, 255, 255, 0.05)":"1px solid rgba(255, 255, 255, 0.02)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},src:"https://storage.googleapis.com/cdn.openart.ai/music_video/CD_icon.png"})}),(0,r.jsx)(b.Z,{title:`Click to select '${e.title}'`,arrow:!0,children:(0,r.jsx)(a.Z,{variant:"body2",sx:{color:j===e.id?"#E0E0E0":"#999999",fontWeight:500,lineHeight:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:{xs:"100px",sm:"120px",md:"150px"},flexShrink:0,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.title})})]})})})},e.id))})}),(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",flexShrink:0},children:(0,r.jsx)(b.Z,{title:"Refresh examples",arrow:!0,children:(0,r.jsx)(l.Z,{onClick:Z,disabled:k,sx:{minWidth:{xs:"100%",md:24},height:24,borderColor:"rgba(255, 255, 255, 0.1)",color:k?"#666666":"#CCCCCC",borderRadius:2,transition:"all 0.3s ease",padding:0,"&:hover":{backgroundColor:"#333333",borderColor:"rgba(255, 255, 255, 0.2)",transform:k?"none":"scale(1.05)"},"&:disabled":{color:"#666666",borderColor:"rgba(255, 255, 255, 0.05)"}},children:(0,r.jsx)(h.Z,{sx:{fontSize:14,animation:k?"spin 0.8s linear infinite":"none","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})})})})]})})}var F=i(43682),k=i(13402),_=i(75783);let S=[{name:"Custom",imageUrl:"https://cdn.openart.ai/music_video/CustomButton.png",isSpecial:!0,value:"custom",videoUrl:null},{name:"Auto style",imageUrl:"https://cdn.openart.ai/music_video/Autobutton.png",isSpecial:!0,value:"auto",videoUrl:null},{name:"Y2K Collage",imageUrl:"https://cdn.openart.ai/music_video/k-pop.png"},{name:"Rock Haze",imageUrl:"https://cdn.openart.ai/music_video/Rock_Haze.jpg"},{name:"Noise Collage",imageUrl:"https://cdn.openart.ai/music_video/Noise_Collage.jpg"},{name:"City-Pop",imageUrl:"https://cdn.openart.ai/music_video/KDXS1116.jpeg"},{name:"Midnight Blue Soul",imageUrl:"https://cdn.openart.ai/music_video/openart-image_FYA_abWu_1750917048290_raw.jpg"},{name:"Bubble-Gum Punk",imageUrl:"https://cdn.openart.ai/music_video/openart-image_GWSVi_xj_1750920727228_raw.jpg"},{name:"EDM",imageUrl:"https://cdn.openart.ai/music_video/EDM.png"},{name:"Vaporwave",imageUrl:"https://cdn.openart.ai/music_video/Vaporwave.png"},{name:"Classical Rococo",imageUrl:"https://cdn.openart.ai/music_video/ClassicalRococo.png"},{name:"Metal Noir",imageUrl:"https://cdn.openart.ai/music_video/Sequence%2B01.00_01_28_05.Still036.jpg"},{name:"Miniature",imageUrl:"https://cdn.openart.ai/storybuilder/video_style_thumnails/miniature.jpg"},{name:"Pixel art",imageUrl:"https://cdn.openart.ai/storybuilder/video_style_thumnails/pixelart.jpg"},{name:"Cyberpunk",imageUrl:"https://cdn.openart.ai/storybuilder/video_style_thumnails/cyberpunk.jpg"},{name:"Psychedelic",imageUrl:"https://cdn.openart.ai/storybuilder/video_style_thumnails/psychedelic.jpg"},{name:"Ghibli",imageUrl:"https://cdn.openart.ai/storybuilder/video_style_thumnails/ghibli.jpg"},{name:"Pixar",imageUrl:"https://cdn.openart.ai/storybuilder/video_style_thumnails/pixar.jpg"},{name:"Photorealistic",imageUrl:"https://cdn.openart.ai/storybuilder/video_style_thumnails/photorealistic.jpg"},{name:"Anime",imageUrl:"https://cdn.openart.ai/storybuilder/video_style_thumnails/anime.jpg"}],I="#101010";var Z=i(23638),E=i(21461),A=i(39204),M=i(80924);let R=e=>{let{value:t="",onChange:i,placeholder:o="Describe the style"}=e,[a,s]=(0,n.useState)(t),{isMobile:l}=(0,M.j)();return(0,r.jsx)(A.E.div,{initial:{opacity:0,height:0,marginBottom:0},animate:{opacity:1,height:"auto",marginBottom:l?12:16},exit:{opacity:0,height:0,marginBottom:0},transition:{duration:.3,ease:[.4,0,.2,1]},style:{overflow:"hidden"},children:(0,r.jsx)(E.Z,{value:a,onChange:e=>{let t=e.target.value;s(t),null==i||i(t)},placeholder:o,variant:"outlined",fullWidth:!0,size:"small",sx:{mx:0,"& .MuiOutlinedInput-root":{backgroundColor:"#1A1A1A",borderRadius:"6px",height:l?"36px":"40px",fontSize:l?"13px":"14px",fontWeight:500,p:1,minHeight:l?"44px":"40px","& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}},"& .MuiOutlinedInput-input":{color:"#666666",padding:l?"10px 0px":"8px 0px","&::placeholder":{color:"#666666",opacity:1}}}})})};var T=i(89663);let D=(e,t)=>e?T.RM.mobile:t?T.RM.tablet:T.RM.desktop,z=()=>{let{isMobile:e,isTablet:t}=(0,M.j)();return(0,n.useMemo)(()=>D(e,t),[e,t])},P=()=>{let[e,t]=(0,n.useState)(0),i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=()=>{i.current&&t(i.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{containerWidth:e,containerRef:i}},L=e=>{let[t,i]=(0,n.useState)(!1),r=(0,n.useRef)(null),{isMobile:o,isTablet:a}=(0,M.j)();return(0,n.useEffect)(()=>{let e=()=>{if(r.current){let{scrollTop:e,scrollHeight:t,clientHeight:n}=r.current;i(e+n<t-T.CG.SCROLL_THRESHOLD)}};e();let t=r.current;if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[e]),{canScrollDown:t,scrollableRef:r,handleScrollDown:()=>{if(r.current){let{columnsCount:t,gap:i,padding:n,minCardHeight:s}=D(o,a),l=e-2*n;r.current.scrollBy({top:Math.max(Math.max(0,(l-i*(t-1))/t),s)+i,behavior:"smooth"})}}}},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=z(),{cardWidth:r,cardHeight:o,containerHeight:a,columnsCount:s,gap:l,padding:d}=(0,n.useMemo)(()=>{let{columnsCount:r,gap:n,padding:o,minCardHeight:a,fallbackHeight:s,customInputHeight:l,customInputMarginBottom:d,showStyleNumber:c}=i,u=Math.max(0,(e-2*o-n*(r-1))/r),p=Math.max(u,a),h=Math.ceil(c/r),m=p*h+n*(h-1)+2*o;return t&&(m+=l+d),{cardWidth:u,cardHeight:p,containerHeight:m=Math.max(m,s),columnsCount:r,gap:n,padding:o}},[e,i,t]);return{cardWidth:r,cardHeight:o,containerHeight:a,columnsCount:s,gap:l,padding:d}},B=e=>{let{delay:t=0}=e;return(0,r.jsx)(o.Z,{sx:{width:4,height:4,borderRadius:"50%",bgcolor:"rgba(255, 255, 255, 0.6)",animation:`pulse 1.5s ease-in-out infinite ${t}s`,"@keyframes pulse":{"0%, 100%":{opacity:.6},"50%":{opacity:1}}}})},H=e=>{let{canScrollDown:t,onScrollDown:i}=e;return t?(0,r.jsxs)(o.Z,{onClick:i,sx:{position:"absolute",bottom:12,right:12,display:"flex",alignItems:"center",gap:.5,px:1,py:.5,bgcolor:"rgba(0, 0, 0, 0.7)",borderRadius:"12px",backdropFilter:"blur(4px)",zIndex:3,cursor:"pointer",transition:"all 0.2s","&:hover":{bgcolor:"rgba(0, 0, 0, 0.8)",transform:"scale(1.05)"},"&:active":{transform:"scale(0.95)"}},children:[(0,r.jsx)(B,{delay:0}),(0,r.jsx)(B,{delay:.2}),(0,r.jsx)(B,{delay:.4})]}):null},U=e=>{let{icon:t,title:i,selectedStyleName:n}=e;return(0,r.jsx)(A.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:(0,r.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(A.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.4,ease:"easeOut",delay:.1},children:t}),(0,r.jsx)(a.Z,{variant:"h6",sx:{fontFamily:"Inter",fontWeight:500,fontSize:"16px",color:"#AAAAAA"},children:i})]})})})},O=e=>{let{styleOption:t,isSelected:i,onSelect:s,cardWidth:l,cardHeight:d}=e,c=(0,n.useRef)(null),[u,p]=(0,n.useState)(!1),{isMobile:h}=(0,M.j)();return(0,r.jsx)(o.Z,{sx:{height:`${d}px`,overflow:"hidden",borderRadius:"6px"},children:(0,r.jsx)(A.E.div,{whileHover:h?{}:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2,ease:"easeInOut"},style:{width:"100%",height:"100%"},children:(0,r.jsx)(f.Z,{onClick:()=>{s(t)},onMouseEnter:()=>{!h&&(p(!0),c.current&&t.videoUrl&&c.current.play().catch(()=>{}))},onMouseLeave:()=>{!h&&(p(!1),c.current&&t.videoUrl&&(c.current.pause(),c.current.currentTime=0))},onTouchStart:()=>{h&&c.current&&t.videoUrl&&(p(!0),c.current.play().catch(()=>{}),setTimeout(()=>{p(!1),c.current&&(c.current.pause(),c.current.currentTime=0)},1e3))},sx:{cursor:"pointer",transition:"all 0.2s",backgroundColor:"transparent",boxShadow:"none",borderRadius:"4px",width:"100%",height:"100%",border:"none",opacity:1,filter:"none",...h&&{"&:active":{transform:"scale(0.95)"}}},children:(0,r.jsx)(v.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:0,"&:last-child":{pb:0},position:"relative",height:"100%"},children:(0,r.jsxs)(o.Z,{sx:{backgroundColor:"transparent",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:"100%",height:"100%",overflow:"hidden",border:i?"3px solid #2F66FF":"3px solid transparent",transition:"border-color 0.2s ease"},children:[t.videoUrl?(0,r.jsx)("video",{ref:c,src:t.videoUrl,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",borderRadius:"4px",opacity:u?1:0,transition:"opacity 0.3s ease",zIndex:2}}):null,t.imageUrl?(0,r.jsx)("img",{src:t.imageUrl,alt:t.name,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:1}}):null,(0,r.jsx)(o.Z,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"50%",background:"linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.8) 100%)",borderRadius:"0 0 4px 4px",pointerEvents:"none",zIndex:2.5}}),(0,r.jsx)(A.E.div,{animate:{color:i?"#FFFFFF":"#CCC"},transition:{duration:.2},style:{position:"absolute",bottom:h?6:8,left:"50%",transform:"translateX(-50%)",zIndex:3},children:(0,r.jsx)(a.Z,{variant:"caption",sx:{textAlign:"center",fontWeight:600,fontSize:`${Math.max(Math.min(.12*l,h?11:12),10)}px`,lineHeight:"1.21em",whiteSpace:"nowrap"},children:t.name})})]})})})})})},$=e=>{let{styles:t,selectedStyle:i,onStyleSelect:n,cardWidth:a,cardHeight:s,columnsCount:l=4,gap:d=1.5}=e;return(0,r.jsx)(o.Z,{sx:{display:"grid",gridTemplateColumns:`repeat(${l}, 1fr)`,gap:d/8,width:"100%",pb:.5},children:t.map((e,t)=>(0,r.jsx)(O,{styleOption:e,isSelected:(null==i?void 0:i.name)===e.name,onSelect:n,cardWidth:a,cardHeight:s},e.name))})};var N=i(79267);let G=e=>{let{value:t="auto",onChange:i}=e,[a,s]=(0,n.useState)(()=>"auto"===t?S.find(e=>"Auto style"===e.name)||null:S.find(e=>e.name===t||"value"in e&&e.value===t)||null);(0,n.useEffect)(()=>{"auto"===t&&(null==a?void 0:a.name)==="Auto style"&&(null==i||i("auto"))},[]);let l=(0,n.useMemo)(()=>(null==a?void 0:a.name)==="Custom",[a]),{isMobile:d}=(0,M.j)(),c=z(),{containerWidth:u,containerRef:p}=P(),{canScrollDown:h,scrollableRef:m,handleScrollDown:x}=L(u),{cardWidth:g,cardHeight:f,containerHeight:v,columnsCount:y,gap:b,padding:C}=W(u,l),{fallbackHeight:w}=c;return(0,r.jsxs)(o.Z,{sx:{position:"relative"},children:[(0,r.jsx)(U,{icon:(0,r.jsx)(N.zTQ,{size:16,sx:{color:"#AAAAAA"}}),title:"Video Style",selectedStyleName:null==a?void 0:a.name}),(0,r.jsxs)(F.Z,{ref:p,elevation:0,sx:{bgcolor:I,borderRadius:"8px",position:"relative",maxWidth:"100%",width:"100%",height:u>0?`${v}px`:`${w}px`,p:C/8,overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(180deg, ${I}CC 0%, transparent 100%)`,zIndex:2,pointerEvents:"none"},"&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"4px",background:`linear-gradient(0deg, ${I}CC 0%, transparent 100%)`,zIndex:2,pointerEvents:"none"}},children:[(0,r.jsxs)(o.Z,{ref:m,sx:{height:"100%",overflow:"auto","&::-webkit-scrollbar":{width:d?"0px":"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:"2px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}},children:[(0,r.jsx)(Z.M,{children:l?(0,r.jsx)(R,{value:"custom"===t?"":t,onChange:i,placeholder:"Describe the style"}):null}),(0,r.jsx)($,{styles:S,selectedStyle:a,onStyleSelect:e=>{if("Custom"===e.name){s(e),null==i||i("");return}s(e);let t="value"in e&&e.value?e.value:e.name;null==i||i(t||"auto")},cardWidth:g,cardHeight:f,columnsCount:y,gap:b})]}),(0,r.jsx)(H,{canScrollDown:h,onScrollDown:x})]})]})};var V=i(89980),K=i(2850),Y=i(26784),q=i(16850),X=i(35019),J=i(25110);let Q=["Romantic","Futuristic","Hip-Hop","Supernatural","Superhero","Adventure","Space","Drama","Mystery"],ee=e=>{let{onTopicsChange:t,placeholder:i="Leave it blank, and we'll automatically detect the topic from your music!",expanded:s,onChange:d}=e,c=(0,C.Z)(),[u,p]=(0,n.useState)(""),h=e=>{p(e),e.trim()?null==t||t(e.trim().split(",").map(e=>e.trim()).filter(Boolean)):null==t||t([])},m=e=>{u.trim()?h(`${u.trim()}, ${e}`):h(e)};return(0,r.jsx)(o.Z,{sx:{width:"100%",maxWidth:800},children:(0,r.jsxs)(K.Z,{expanded:s,onChange:d,sx:{backgroundColor:"transparent",boxShadow:"none",border:"none","&:before":{display:"none"},"&.Mui-expanded":{margin:0}},children:[(0,r.jsx)(Y.Z,{expandIcon:(0,r.jsx)(V.Z,{sx:{color:"#666",fontSize:16,backgroundColor:"#101010",borderRadius:"50%",width:24,height:24,padding:"4px"}}),sx:{padding:0,minHeight:"auto","&.Mui-expanded":{minHeight:"auto"},"& .MuiAccordionSummary-content":{margin:0,"&.Mui-expanded":{margin:0}},"& .MuiAccordionSummary-expandIconWrapper":{transition:"transform 0.3s","&.Mui-expanded":{transform:"rotate(180deg)"}}},children:(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,r.jsx)(a.Z,{variant:"body1",sx:{color:"rgba(255, 255, 255, 1)",fontWeight:600},children:"Story topics (optional)"})})}),(0,r.jsx)(q.Z,{sx:{padding:"16px 0 0 0"},children:(0,r.jsxs)(o.Z,{sx:{backgroundColor:"#1A1A1A",borderRadius:2,p:2},children:[(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",minHeight:56,pb:2},children:(0,r.jsx)(o.Z,{component:"input",placeholder:i,value:u,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()},sx:{width:"100%",border:"none",outline:"none",backgroundColor:"transparent",color:(0,J.Fq)(c.palette.common.white,.7),fontSize:"0.95rem",padding:0,margin:0,fontFamily:"inherit","&::placeholder":{color:(0,J.Fq)(c.palette.common.white,.5)},"&:focus":{outline:"none",border:"none"}}})}),(0,r.jsx)(X.Z,{direction:"row",spacing:1.5,sx:{overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap","&::-webkit-scrollbar":{height:6},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:(0,J.Fq)(c.palette.common.white,.2),borderRadius:3},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:(0,J.Fq)(c.palette.common.white,.3)}},children:Q.map((e,t)=>(0,r.jsx)(l.Z,{variant:"outlined",onClick:()=>m(e),sx:{borderRadius:{xs:16,sm:20},px:{xs:2,sm:3},py:{xs:.5,sm:1},borderColor:(0,J.Fq)(c.palette.common.white,.3),color:(0,J.Fq)(c.palette.common.white,.8),textTransform:"none",fontSize:{xs:"0.8rem",sm:"0.9rem"},fontWeight:400,flexShrink:0,minHeight:{xs:32,sm:40},"&:hover":{borderColor:(0,J.Fq)(c.palette.common.white,.5),backgroundColor:(0,J.Fq)(c.palette.common.white,.05)}},children:e},t))})]})})]})})};var et=e=>{let{onTypeChange:t,handleConsistentStyleChange:i,handleCharacterSelect:s,selectedCharacter:l,handleMusicVideoTopicChange:d,onAspectRatioChange:c}=e,[u,p]=(0,n.useState)(null),[h,g]=(0,n.useState)("auto"),[v,y]=(0,n.useState)("auto"),[b,w]=(0,n.useState)(null),[j,I]=(0,n.useState)("auto"),[Z,E]=(0,n.useState)(null),A=(0,n.useRef)(null),M=(0,n.useRef)(null),R=(0,C.Z)(),T=(0,m.Z)(R.breakpoints.down("md")),D=(0,m.Z)(R.breakpoints.down("sm"));(0,n.useEffect)(()=>{"auto"===h&&(null==i||i("auto"))},[]),(0,n.useEffect)(()=>()=>{A.current&&clearTimeout(A.current)},[]);let z=e=>{p(e),"consistent-character"===e?null==t||t("auto"===j?"story-focused":"consistent-character"):null==t||t(e),("consistent-style"===e||"consistent-character"===e)&&c&&c("16:9")},P=e=>{T||(A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{w(e)},300))},L=()=>{!T&&(w(null),A.current&&(clearTimeout(A.current),A.current=null))},W=e=>{T&&(E(e),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{w(e)},150))},B=()=>{T&&(E(null),M.current&&(clearTimeout(M.current),M.current=null),setTimeout(()=>{w(null)},200))},H=(e,t)=>{I(t)};return(0,r.jsxs)(o.Z,{sx:{borderRadius:2,width:"100%"},children:[(0,r.jsx)(o.Z,{sx:{display:"flex",gap:2,width:"100%"},children:[{type:"consistent-style",title:"Style",description:"Maintain a unified visual style throughout your story.",imageUrl:"https://cdn.openart.ai/music_video/Stylish/default.png",selectedImageUrl:"https://cdn.openart.ai/music_video/Stylish/select.png",hoverImageUrl:"https://cdn.openart.ai/music_video/Stylish/ezgif-4bc17675d5729d.webp"},{type:"consistent-character",title:"Story",description:"Maintain character consistency throughout your story.",imageUrl:"https://cdn.openart.ai/music_video/Tell%20a%20Story/Default.png",selectedImageUrl:"https://cdn.openart.ai/music_video/Tell%20a%20Story/Select.png",hoverImageUrl:"https://cdn.openart.ai/music_video/Tell%20a%20Story/ezgif-24b0932e59a6a9.webp"},{type:"singing-dancing",title:"Sing",description:"Create dynamic singing and dancing videos with character consistency.",imageUrl:"https://cdn.openart.ai/music_video/Perform%20%26%20Sing/default.png",selectedImageUrl:"https://cdn.openart.ai/music_video/Perform%20%26%20Sing/select.png",isBeta:!0,hoverImageUrl:"https://cdn.openart.ai/music_video/Perform%20%26%20Sing/ezgif-526bfc2c3b8292.webp"}].map(e=>(0,r.jsxs)(o.Z,{onMouseEnter:()=>P(e.type),onMouseLeave:L,onTouchStart:()=>W(e.type),onTouchEnd:B,sx:{flex:1,cursor:"pointer",transition:T?"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)":"all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55)",backgroundColor:"rgba(26, 26, 26, 1)",overflow:"hidden",transform:T&&Z===e.type?"scale(0.98) translateY(2px)":"scale(1) translateY(0px)","&:hover":T?{}:{transform:"scale(1.05) translateY(-8px)","& .type-card":{boxShadow:"0 20px 40px rgba(47, 102, 255, 0.3), 0 0 0 2px rgba(47, 102, 255, 0.4)"}},"&:active":{transform:T?"scale(0.95) translateY(4px)":"scale(0.98) translateY(2px)",transition:"all 0.1s cubic-bezier(0.4, 0, 0.2, 1)"}},children:[(0,r.jsx)(f.Z,{className:"type-card",onClick:()=>z(e.type),sx:{flex:1,cursor:"pointer",transition:T?"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)":"all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55)",backgroundColor:"rgba(26, 26, 26, 1)",border:u===e.type?"2px solid #2F66FF":"2px solid transparent",borderRadius:2,overflow:"hidden",boxShadow:u===e.type?"0 12px 24px rgba(47, 102, 255, 0.25), 0 0 0 1px rgba(47, 102, 255, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.1)","&:hover":T?{}:{border:"2px solid #2F66FF",boxShadow:"0 20px 40px rgba(47, 102, 255, 0.3), 0 0 0 2px rgba(47, 102, 255, 0.4)"},...T&&{"&:active":{transform:"scale(0.98)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"}}},children:(0,r.jsxs)(o.Z,{sx:{width:"100%",height:T?D?120:140:160,backgroundImage:`url(${b===e.type&&e.hoverImageUrl?e.hoverImageUrl:u===e.type?e.selectedImageUrl:e.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"rgba(50, 50, 50, 1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",transition:T?"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)":"all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55)",transform:u===e.type?"scale(1.02)":"scale(1)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:u===e.type?"linear-gradient(45deg, rgba(47, 102, 255, 0.1), rgba(47, 102, 255, 0.05))":"transparent",transition:T?"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)":"all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55)",borderRadius:"inherit"}},children:[e.isBeta?(0,r.jsx)(o.Z,{sx:{position:"absolute",top:8,right:8,borderRadius:"4px",px:"6px",py:"2px",fontSize:"10px",fontWeight:600,color:"white",bgcolor:"#0929F7",zIndex:2,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:"BETA"}):null,(0,r.jsx)(o.Z,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.7) 100%)",p:2,pt:3,zIndex:3,transition:"opacity 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},children:(0,r.jsx)(a.Z,{sx:{fontWeight:900,fontSize:"19px",color:"#FFFFFF",textAlign:"center",lineHeight:1.2,textShadow:"0 1px 3px rgba(0, 0, 0, 0.8)",WebkitTextStroke:"0.5px rgba(255, 255, 255, 0.3)",textRendering:"optimizeLegibility",fontStretch:"condensed"},children:e.title})})]})},e.type),u===e.type&&(0,r.jsx)(o.Z,{sx:{width:"100%",display:"flex",justifyContent:"center",animation:T?"mobile-bounce-in 0.4s cubic-bezier(0.25, 0.8, 0.25, 1)":"bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)","@keyframes mobile-bounce-in":{"0%":{transform:"scale(0.8) translateY(-20px)",opacity:0},"60%":{transform:"scale(1.05) translateY(0px)",opacity:.9},"100%":{transform:"scale(1) translateY(0px)",opacity:1}},"@keyframes bounce-in":{"0%":{transform:"scale(0.3) translateY(-50px)",opacity:0},"50%":{transform:"scale(1.1) translateY(0px)",opacity:.8},"100%":{transform:"scale(1) translateY(0px)",opacity:1}}},children:(0,r.jsx)(o.Z,{component:"img",src:"https://cdn.openart.ai/music_video/type_select.png",alt:"Type Selection",sx:{maxWidth:"100%",height:"auto",borderRadius:1,filter:"drop-shadow(0 4px 12px rgba(47, 102, 255, 0.4))",maxHeight:"auto"}})})]},e.type))}),(0,r.jsxs)(o.Z,{sx:{width:"100%"},children:["consistent-style"===u&&(0,r.jsx)(x.Z,{in:"consistent-style"===u,timeout:{enter:800,exit:500},children:(0,r.jsx)(o.Z,{sx:{width:"100%",transform:"consistent-style"===u?"translateY(0) scale(1)":"translateY(20px) scale(0.95)",transition:"all 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:(0,r.jsx)(F.Z,{elevation:1,sx:{p:2,bgcolor:"rgba(16, 16, 16, 1)",position:"relative",overflow:"hidden",borderRadius:2,width:"100%",boxShadow:"consistent-style"===u?"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05)":"none",transition:"box-shadow 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:(0,r.jsx)(o.Z,{sx:{mb:2,width:"100%"},children:(0,r.jsx)(G,{value:"Custom"===h?v:h||"auto",onChange:e=>{let t=S.find(t=>t.name.toLowerCase()===e.toLowerCase());t?(g(t.name),y(t.name),null==i||i(t.name)):(g("Custom"),y(e),null==i||i(e))}})})})})}),"consistent-character"===u&&(0,r.jsx)(x.Z,{in:"consistent-character"===u,timeout:{enter:800,exit:500},children:(0,r.jsx)(o.Z,{sx:{width:"100%",transform:"consistent-character"===u?"translateY(0) scale(1)":"translateY(20px) scale(0.95)",transition:"all 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:(0,r.jsxs)(F.Z,{elevation:1,sx:{p:T?1.5:2,bgcolor:"rgba(16, 16, 16, 1)",borderRadius:T?3:2,width:"100%",boxShadow:"consistent-character"===u?"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05)":"none",transition:"box-shadow 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:[(0,r.jsxs)(o.Z,{sx:{width:"100%",display:"flex",gap:0,bgcolor:"#1A1A1A",borderRadius:"8px"},children:[(0,r.jsxs)(o.Z,{onClick:()=>{H(null,"auto"),null==t||t("story-focused")},sx:{flex:1,height:T?36:40,borderRadius:"8px",backgroundColor:"auto"===j?"#33323B":"#1A1A1A",color:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",fontSize:T?"13px":"14px",fontWeight:600,fontFamily:"Inter",lineHeight:"1.21em",transition:"all 0.2s ease-in-out","&:active":{transform:"scale(0.98)"}},children:[(0,r.jsx)(_.QM,{width:T?12:14,height:T?12:14,fill:"auto"===j?"#83A9FF":"#FFFFFF"}),"Auto Story"]}),(0,r.jsxs)(o.Z,{onClick:()=>{H(null,"one-star"),null==t||t("consistent-character")},sx:{flex:1,height:T?36:40,borderRadius:"8px",backgroundColor:"one-star"===j?"#33323B":"#1A1A1A",color:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",gap:"7px",cursor:"pointer",fontSize:T?"13px":"14px",fontWeight:600,fontFamily:"Inter",lineHeight:"1.21em",transition:"all 0.2s ease-in-out","&:active":{transform:"scale(0.98)"}},children:[(0,r.jsx)(_.yQ,{width:T?12:14,height:T?12:14,fill:"one-star"===j?"#83A9FF":"#FFFFFF"}),"One-Star Story"]})]}),(0,r.jsxs)(o.Z,{sx:{width:"100%",display:"flex",flexDirection:"row"},children:[(0,r.jsx)(o.Z,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:"auto"===j&&(0,r.jsx)(o.Z,{component:"img",src:"https://storage.googleapis.com/cdn.openart.ai/music_video/Story-type-select.png",alt:"Auto Story Selection",sx:{maxWidth:"100%",height:"auto",maxHeight:T?120:"auto"}})}),(0,r.jsx)(o.Z,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:"one-star"===j&&(0,r.jsx)(o.Z,{component:"img",src:"https://storage.googleapis.com/cdn.openart.ai/music_video/Story-type-select.png",alt:"Auto Story Selection",sx:{maxWidth:"100%",height:"auto",maxHeight:T?120:"auto"}})})]}),(0,r.jsxs)(o.Z,{children:["auto"===j&&(0,r.jsxs)(o.Z,{sx:{width:"100%",minHeight:T?150:200,bgcolor:"rgba(0, 0, 0, 0.8)",borderRadius:T?3:2,backgroundImage:`
                            radial-gradient(ellipse at 30% 50%, rgba(77, 53, 137, 0.3) 0%, transparent 50%),
                            radial-gradient(ellipse at 70% 60%, rgba(0, 37, 206, 0.3) 0%, transparent 50%),
                            radial-gradient(ellipse at 10% 80%, rgba(0, 234, 255, 0.2) 0%, transparent 50%)
                          `,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:T?2:4,position:"relative",overflow:"hidden"},children:[(0,r.jsx)(o.Z,{sx:{position:"absolute",top:T?15:20,left:T?40:60,width:T?10:12,height:T?10:12,"&::before":{content:'""',position:"absolute",width:"100%",height:"100%",background:"linear-gradient(45deg, #2FFF9E, #0022FF)",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)",filter:"drop-shadow(0 0 6px rgba(100, 255, 229, 0.5))"}}}),(0,r.jsx)(o.Z,{sx:{position:"absolute",top:T?30:40,right:T?60:80,width:T?6:8,height:T?6:8,"&::before":{content:'""',position:"absolute",width:"100%",height:"100%",background:"linear-gradient(45deg, #2FFF9E, #C6A3FF)",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)",filter:"drop-shadow(0 0 4px rgba(100, 255, 229, 0.5))"}}}),(0,r.jsx)(o.Z,{sx:{position:"absolute",bottom:T?40:60,right:T?30:40,width:T?8:10,height:T?8:10,"&::before":{content:'""',position:"absolute",width:"100%",height:"100%",background:"linear-gradient(45deg, #2FFF9E, #C6A3FF)",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)",filter:"drop-shadow(0 0 5px rgba(100, 255, 229, 0.5))"}}}),(0,r.jsxs)(a.Z,{variant:"h6",sx:{color:"transparent",background:"linear-gradient(90deg, #BFFFBF, #EFE5FF)",backgroundClip:"text",WebkitBackgroundClip:"text",textAlign:"center",fontWeight:700,fontSize:T?D?"14px":"16px":"18px",lineHeight:1.3,mb:2},children:["Sit back and relax,",(0,r.jsx)("br",{}),"we'll create a story for you."]})]}),"one-star"===j&&(0,r.jsxs)(o.Z,{sx:{width:"100%",bgcolor:"rgba(0, 0, 0, 0.6)",p:T?2:4,borderRadius:3},children:[(0,r.jsx)(k.l,{selectedCharacter:l,onCharacterSelect:s,error:void 0,showTitle:!1,showPreviewAvatar:!1,characterType:"music_video_consistent"}),(0,r.jsx)(o.Z,{sx:{mt:2},children:(0,r.jsx)(ee,{onTopicsChange:d,expanded:!0})})]})]})]})})}),"singing-dancing"===u&&(0,r.jsx)(x.Z,{in:"singing-dancing"===u,timeout:{enter:800,exit:500},children:(0,r.jsx)(o.Z,{sx:{width:"100%",transform:"singing-dancing"===u?"translateY(0) scale(1)":"translateY(20px) scale(0.95)",transition:"all 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:(0,r.jsxs)(F.Z,{elevation:1,sx:{p:T?1.5:2,bgcolor:"rgba(16, 16, 16, 1)",borderRadius:T?3:2,width:"100%",border:"1px solid #2E2E2E",boxShadow:"singing-dancing"===u?"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05)":"none",transition:"box-shadow 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:[(0,r.jsx)(a.Z,{variant:"h6",sx:{color:"rgba(255, 255, 255, 1)",mb:2,fontWeight:600,fontSize:T?"16px":"18px"},children:"Character Selection"}),(0,r.jsx)(k.l,{selectedCharacter:l,onCharacterSelect:s,error:void 0,showPreviewAvatar:!1,showTitle:!1,characterType:"music_video_singing_dancing"})]})})})]})]})},ei=i(25528),er=i(42070),en=i(83396),eo=i(94958),ea=i(44514),es=i(68953),el=i(99237),ed=i(66686),ec=i(82338),eu=i(24337),ep=i(46740),eh=i(21231),em=i(22465);let ex=(0,ep.F4)`
  0%, 100% {
    opacity: 0.4;
    transform: scaleY(1);
  }
  50% {
    opacity: 1;
    transform: scaleY(1.5);
  }
`,eg=(0,ep.F4)`
  0%, 100% {
    opacity: 0.6;
    transform: scaleY(0.8);
  }
  25% {
    opacity: 0.9;
    transform: scaleY(1.4);
  }
  50% {
    opacity: 1;
    transform: scaleY(1.8);
  }
  75% {
    opacity: 0.8;
    transform: scaleY(1.2);
  }
`,ef=(0,ep.F4)`
  0%, 100% {
    transform: translateY(0px) scaleX(1);
    opacity: 0.3;
  }
  50% {
    transform: translateY(-10px) scaleX(1.1);
    opacity: 0.7;
  }
`,ev=(0,ep.F4)`
  0%, 100% {
    filter: drop-shadow(0 0 5px rgba(98, 144, 255, 0.3));
  }
  50% {
    filter: drop-shadow(0 0 20px rgba(98, 144, 255, 0.8));
  }
`,ey=(0,ep.F4)`
  0% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.8;
  }
  100% {
    opacity: 0.3;
  }
`,eb=(0,ep.F4)`
  0% {
    transform: translateX(-100%) rotate(45deg);
  }
  100% {
    transform: translateX(200%) rotate(45deg);
  }
`;var eC=e=>{let{selectedMusicExample:t,onSelectedMusicExampleProcessed:i,onChange:s,onUploadStart:d,onUploadError:c,onLinkChange:u,linkPlaceholder:p="Enter Suno music URL..."}=e,[h,m]=(0,n.useState)(null),[x,g]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),C=(0,n.useRef)(null),w=(0,n.useCallback)(async(e,t)=>{let i=await fetch(e),r=await i.blob();return new File([r],t,{type:r.type||"audio/mpeg"})},[]),j=(0,n.useCallback)(async(e,t)=>{try{b(!0);let i=window.AudioContext||window.webkitAudioContext;if(!i){console.error("AudioContext not supported"),m({url:e,fileName:t,duration:0}),s&&s(e,t,0),b(!1);return}let r=new i,n=await fetch(e),o=await n.arrayBuffer(),a=await r.decodeAudioData(o);"closed"!==r.state&&r.close();let l={url:e,fileName:t,duration:a.duration};m(l),s&&s(e,t,a.duration)}catch(i){console.error("Failed to parse audio file:",i),m({url:e,fileName:t,duration:0}),s&&s(e,t,0)}finally{b(!1)}},[s]),{open:k,context:_,selectFile:S}=(0,eh.L)({uploadProps:{enableTrimming:!0},onChange:(e,t)=>{e&&t?j(e,t):s&&s("","",0)},onUploadStart:()=>{d&&d()},onUploadError:e=>{console.error("Music upload failed:",e),c&&c(e)}});(0,n.useEffect)(()=>{t&&(async()=>{try{let e=await w(t.url,`${t.title}.mp3`);S(e),i&&i()}catch(e){console.error("Failed to load music for trimming:",e),s&&s(t.url,t.title,t.duration),i&&i()}})()},[t,w,S,s,i]);let I=(0,n.useCallback)(e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,[]),Z=(0,n.useCallback)(()=>{C.current&&(x?C.current.pause():C.current.play(),g(!x))},[x]);(0,n.useEffect)(()=>{let e=C.current;if(!e||!h)return;let t=()=>g(!1),i=()=>g(!1),r=()=>g(!0);return e.addEventListener("ended",t),e.addEventListener("pause",i),e.addEventListener("play",r),()=>{e.removeEventListener("ended",t),e.removeEventListener("pause",i),e.removeEventListener("play",r)}},[h]);let E=(0,n.useCallback)(()=>{m(null),g(!1),b(!1),C.current&&(C.current.pause(),C.current.currentTime=0),s&&s("","",0)},[s]),A=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),v(!0)},[]),M=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget===e.target&&v(!1)},[]),R=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),T=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),v(!1);let t=Array.from(e.dataTransfer.files);if(t.length>0){let e=t[0];e.type.startsWith("audio/")?S(e):(console.warn("Please drop an audio file"),c&&c(Error("Please select an audio file")))}},[S,c]),{open:D,context:z}=(0,em.K)({onSuccess:(e,t)=>{u&&u(e)},placeholder:p,title:"Enter Suno Music Link",enableTrimming:!0,onFileReady:(e,t,i)=>{S(e)}});return y?(0,r.jsx)(o.Z,{sx:{minHeight:"158px",backgroundColor:"#0C2F75",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",position:"relative",padding:"31px 23px",overflow:"hidden"},children:(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",zIndex:1},children:[(0,r.jsx)(o.Z,{sx:{width:"48px",height:"48px",border:"3px solid rgba(255, 255, 255, 0.3)",borderTop:"3px solid white",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"16px","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}),(0,r.jsx)(a.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:"18px",lineHeight:"1.3em",letterSpacing:"-0.02em",color:"white",textAlign:"center",marginBottom:"8px"},children:"Processing Audio..."})]})}):h?(0,r.jsxs)(o.Z,{sx:{minHeight:{xs:"120px",sm:"158px"},backgroundColor:"#0C2F75",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",position:"relative",padding:{xs:"20px 16px",sm:"31px 23px"},overflow:"hidden"},children:[(0,r.jsx)(o.Z,{sx:{position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",padding:"0 4px"},children:Array.from({length:3}).map((e,t)=>(0,r.jsx)(o.Z,{sx:{display:"flex",gap:"11px",alignItems:"center",opacity:x?.35:.18,marginRight:t<2?"13px":0,transition:"opacity 0.3s ease-out"},children:Array.from({length:17}).map((e,i)=>{let n=[29,61,44,62,44,79,44,79,44,79,44,79,44,58,44,65,24][i]||44;return(0,r.jsx)(o.Z,{sx:{width:"5px",height:`${n}px`,backgroundColor:"rgba(255, 255, 255, 0.25)",borderRadius:"2.5px",animation:x?`${eg} ${1.2+i%4*.3}s infinite ease-in-out`:`${ef} ${3+i%5*.4}s infinite ease-in-out`,animationDelay:`${.1*t+.05*i}s`,transformOrigin:"center",transition:"all 0.3s ease-out"}},`${t}-${i}`)})},t))}),x?(0,r.jsx)(o.Z,{sx:{position:"absolute",left:0,top:0,right:0,bottom:0,background:`
                                  radial-gradient(
                    ellipse at center,
                    rgba(98, 144, 255, 0.2) 0%,
                    rgba(147, 51, 234, 0.12) 50%,
                    transparent 70%
                  )
              `,borderRadius:"8px",animation:`${ev} 1.8s infinite`}}):null,(0,r.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%",paddingLeft:"23px",position:"relative",zIndex:1},children:(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"18px"},children:[(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"4px"},children:[(0,r.jsx)(a.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:{xs:"18px",sm:"20px"},lineHeight:"1.3em",letterSpacing:"-0.02em",color:"white",textAlign:"left"},children:h.fileName}),(0,r.jsx)(a.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:"15px",lineHeight:"1.3em",letterSpacing:"-0.02em",color:"#CCCCCC"},children:h.duration>0?I(h.duration):"0:00"})]}),(0,r.jsx)(ed.Z,{onClick:Z,sx:{width:"32px",height:"32px",backgroundColor:"white",borderRadius:"20px","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.9)"},marginTop:"8px"},children:x?(0,r.jsx)(ei.Z,{sx:{color:"#101010",fontSize:"16px"}}):(0,r.jsx)(er.Z,{sx:{color:"#101010",fontSize:"16px",marginLeft:"2px"}})})]})}),(0,r.jsx)(ed.Z,{onClick:E,sx:{position:"absolute",top:"8px",right:"8px",width:"20px",height:"20px",backgroundColor:"#061A3F",borderRadius:"34px","&:hover":{backgroundColor:"rgba(6, 26, 63, 0.8)"}},children:(0,r.jsx)(en.Z,{sx:{color:"rgba(255, 255, 255, 0.56)",fontSize:"12px"}})}),(0,r.jsx)("audio",{ref:C,src:h.url,style:{display:"none"}})]}):(0,r.jsxs)(o.Z,{onDragEnter:A,onDragLeave:M,onDragOver:R,onDrop:T,sx:{minHeight:"140px",backgroundColor:f?"rgba(98, 144, 255, 0.1)":"rgba(16, 16, 16, 1)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"10px",border:f?"2px dashed rgba(98, 144, 255, 0.8)":"2px dashed transparent",transition:"all 0.3s ease-in-out",position:"relative"},children:[f?(0,r.jsxs)(o.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(98, 144, 255, 0.15)",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:[(0,r.jsx)(eo.Z,{sx:{fontSize:48,color:"rgba(98, 144, 255, 1)",marginBottom:2,animation:`${ex} 1s infinite`}}),(0,r.jsx)(a.Z,{sx:{color:"white",fontSize:"18px",fontWeight:600,textAlign:"center",marginBottom:1},children:"Drop your music file here"}),(0,r.jsx)(a.Z,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px",textAlign:"center"},children:"Supports MP3, WAV, M4A and other audio formats"})]}):null,(0,r.jsx)(ec.Z,{maxWidth:"md",children:(0,r.jsx)(F.Z,{elevation:0,sx:{backgroundColor:"transparent",padding:4,textAlign:"center",border:"none"},children:(0,r.jsxs)(o.Z,{sx:{position:"relative",zIndex:1},children:[(0,r.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsxs)(o.Z,{sx:{position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:.3,zIndex:0,overflow:"hidden"},children:[(0,r.jsx)(o.Z,{sx:{position:"absolute",right:"50%",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",flexDirection:"row-reverse"},children:Array.from({length:18}).map((e,t)=>{let i=t+1,n=1-(i-1)/17,a=.8-i/18*.5,s=20*Math.sin(.1*i);return(0,r.jsx)(o.Z,{sx:{width:"3px",height:`${Math.max(35+55*n+8*n*Math.abs(Math.sin(.3*i))+4*n*Math.abs(Math.cos(.1*i)),20)}px`,background:`linear-gradient(
                             0deg,
                             hsla(${210+s}, 70%, ${45+20*a}%, ${.8*a}) 0%,
                             hsla(${230+s}, 80%, ${55+25*a}%, ${1*a}) 50%,
                             hsla(${250+s}, 90%, ${65+30*a}%, ${1.2*a}) 100%
                           )`,borderRadius:"1.5px",animation:`${eg} ${1.5+t%3*.3}s infinite`,animationDelay:`${.08*i}s`,transformOrigin:"bottom",marginRight:"5px"}},`left-${t}`)})}),(0,r.jsx)(o.Z,{sx:{position:"absolute",left:"50%",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center"},children:Array.from({length:18}).map((e,t)=>{let i=t+1,n=1-(i-1)/17,a=.8-i/18*.5,s=20*Math.sin(.1*i);return(0,r.jsx)(o.Z,{sx:{width:"3px",height:`${Math.max(35+55*n+8*n*Math.abs(Math.sin(.3*i))+4*n*Math.abs(Math.cos(.1*i)),20)}px`,background:`linear-gradient(
                             0deg,
                             hsla(${210+s}, 70%, ${45+20*a}%, ${.8*a}) 0%,
                             hsla(${230+s}, 80%, ${55+25*a}%, ${1*a}) 50%,
                             hsla(${250+s}, 90%, ${65+30*a}%, ${1.2*a}) 100%
                           )`,borderRadius:"1.5px",animation:`${eg} ${1.5+t%3*.3}s infinite`,animationDelay:`${.08*i}s`,transformOrigin:"bottom",marginLeft:"5px"}},`right-${t}`)})}),(0,r.jsx)(o.Z,{sx:{position:"absolute",width:"200px",height:"200px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:`
                      radial-gradient(
                        circle at center,
                        rgba(98, 144, 255, 0.15) 0%,
                        rgba(147, 51, 234, 0.08) 40%,
                        rgba(59, 130, 246, 0.05) 70%,
                        transparent 100%
                      )
                    `,animation:`${ev} 4s infinite`}})]}),(0,r.jsx)(o.Z,{sx:{position:"relative",display:"inline-flex",padding:3,borderRadius:3,marginBottom:4,width:100,height:100,alignItems:"center",justifyContent:"center",background:`
                  radial-gradient(circle at 30% 30%, rgba(255,255,255,0.3) 0%, transparent 50%),
                  linear-gradient(135deg, #444 0%, #222 50%, #111 100%)
                `,boxShadow:`
                  0 8px 32px rgba(0,0,0,0.5),
                  inset 0 1px 0 rgba(255,255,255,0.2),
                  inset 0 -1px 0 rgba(0,0,0,0.5)
                `,overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:3,background:`
                    linear-gradient(
                      45deg,
                      transparent 30%,
                      rgba(255,255,255,0.1) 40%,
                      rgba(255,255,255,0.3) 50%,
                      rgba(255,255,255,0.1) 60%,
                      transparent 70%
                    )
                  `,animation:`${ey} 3s ease-in-out infinite`,zIndex:1},"&::after":{content:'""',position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.4) 50%, transparent 70%)",animation:`${eb} 4s ease-in-out infinite`,zIndex:2}},children:(0,r.jsx)(ea.Z,{sx:{fontSize:74,color:"white",position:"relative",zIndex:4,filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5))"}})})]}),(0,r.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:1,sm:2},flexDirection:{xs:"column",sm:"row"},width:"100%",maxWidth:{xs:"310px",sm:"none"},margin:"0 auto"},children:[(0,r.jsx)(l.Z,{variant:"outlined",startIcon:(0,r.jsx)(es.Z,{sx:{color:"rgba(98, 144, 255, 1)"}}),onClick:D,sx:{borderColor:"#666",color:"white",borderRadius:25,textTransform:"none",fontSize:"14px",minWidth:{xs:"155px",sm:"155px"},width:{xs:"155px",sm:"auto"},padding:{xs:"8px 16px",sm:"6px 16px"},"&:hover":{borderColor:"#888",backgroundColor:"rgba(255,255,255,0.05)"}},children:"Paste Link"}),(0,r.jsx)(o.Z,{sx:{display:{xs:"none",sm:"flex"},alignItems:"center"},children:(0,r.jsx)(eu.Z,{orientation:"vertical",flexItem:!0,sx:{backgroundColor:"rgba(68, 68, 68, 1)",height:20}})}),(0,r.jsx)(a.Z,{sx:{display:{xs:"block",sm:"none"},color:"rgba(255, 255, 255, 0.6)",fontSize:"12px",fontWeight:500,margin:0},children:"or"}),(0,r.jsx)(l.Z,{variant:"outlined",startIcon:(0,r.jsx)(el.Z,{sx:{color:"rgba(98, 144, 255, 1)"}}),onClick:k,sx:{borderColor:"#666",color:"white",borderRadius:25,textTransform:"none",fontSize:"14px",minWidth:{xs:"155px",sm:"155px"},width:{xs:"155px",sm:"auto"},padding:{xs:"8px 16px",sm:"6px 16px"},"&:hover":{borderColor:"#888",backgroundColor:"rgba(255,255,255,0.05)"}},children:"Upload / Drag"})]})]})})}),_,z]})},ew=i(19702),ej=i(51686),eF=i(11615),ek=i(46974),e_=i(21964),eS=i(10986),eI=i(28337),eZ=i(59435),eE=i(45137);let eA=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],[t,i]=(0,n.useState)(!1),[r,o]=(0,n.useState)(null),{enqueueSnackbar:a}=(0,eS.Ds)();return{...(0,e_.D)({mutationFn:async t=>{i(!0),o(null);try{(0,eE.B)("story_creation_requested",{story_type:"music_video",prompt:t.video_topic});let i=await eI.ZP.post("/stories/workflow/generate_music_video",t);if((0,eE.B)("story_created",{story_type:"music_video",prompt:t.video_topic,credits_num:eZ.v["story.music_video"].credit}),200!==i.status){let e=i.data;throw Error(`Failed to generate music video: ${e.message}`)}let r=i.data;if(!r.workflowRunId)return a("Music video generated successfully",{variant:"info"}),r;if(!e)return r;o(r.workflowRunId),a(`Music video generation started with workflow ${r.workflowRunId}`,{variant:"info"})}catch(e){throw console.error("Error generating music video",e),e}finally{i(!1),o(null)}}}),isGenerating:t,workflowRunId:r}};var eM=i(57482);let eR="music_video_creation_form_data_v1",eT=eF.z.object({musicUrl:eF.z.string().url(),musicDuration:eF.z.number(),videoType:eF.z.enum(["consistent-character","consistent-style","singing-dancing","story-focused"]).optional(),character:eF.z.custom().optional(),consistentStyle:eF.z.string().optional(),referenceImageUrl:eF.z.string().optional(),musicVideoTopic:eF.z.array(eF.z.string()),aspectRatio:eF.z.enum(["16:9","9:16","1:1"]),advancedSettings:eF.z.object({imageModelConfig:eF.z.custom(),videoModelConfig:eF.z.custom()})}),eD="consistent-character",ez=[],eP="16:9",eL={imageModelConfig:{model:"character",parameters:{}},videoModelConfig:{model:"kling2.1",parameters:{videoMode:"std"}}};var eW=i(30076);function eB(e){let{onSubmit:t}=e,i=(0,eW.B)(),[h,m]=n.useState(null),{errors:x,isGenerating:g,character:f,videoType:v,musicUrl:y,advancedSettings:b,aspectRatio:C,imageModelOptions:w,videoModelOptions:F,handleMusicUrlChange:k,handleVideoTypeChange:_,handleCharacterSelect:S,handleConsistentStyleChange:I,handleMusicVideoTopicChange:Z,handleAspectRatioSelect:E,onFormSubmit:A,handleModelSelect:M}=function(e){let{onSubmit:t}=e,[i,r]=(0,n.useState)(!1),[o,a]=(0,n.useState)(!1),s=(0,ej.cI)({mode:"onChange",defaultValues:{musicUrl:"",musicDuration:0,videoType:eD,character:null,consistentStyle:"",referenceImageUrl:"",musicVideoTopic:[...ez],aspectRatio:eP,advancedSettings:eL},resolver:(0,ew.F)(eT)}),{handleSubmit:l,formState:{errors:d},setValue:c,watch:u,setError:h,clearErrors:m,reset:x}=s,g=(0,ek.useRouter)(),f=u("musicUrl"),v=u("musicDuration"),y=u("videoType"),b=u("character"),C=u("consistentStyle"),w=u("referenceImageUrl"),j=u("musicVideoTopic"),F=u("aspectRatio"),k=u("advancedSettings"),{mutate:_,isLoading:S}=eA(!1);(0,n.useEffect)(()=>{a(!0)},[]),(0,n.useEffect)(()=>{if(!o)return;let e=(0,eM.$o)(eR,{});Object.keys(e).length>0&&Object.entries(e).forEach(e=>{let[t,i]=e;null!=i&&""!==i&&c(t,i)})},[o,c]),(0,n.useEffect)(()=>{if(!o)return;let e=u(e=>{let t=Object.entries(e).reduce((e,t)=>{let[i,r]=t;return null!=r&&""!==r&&(e[i]=r),e},{});Object.keys(t).length>0&&(0,eM.qQ)(eR,t)});return()=>e.unsubscribe()},[u,o]);let I=(0,n.useMemo)(()=>(0,p._p)(b),[b]),Z=(0,n.useMemo)(()=>p.Fj.filter(e=>!0).map(e=>({name:e.name,icon:e.icon,value:e.value,disabled:["consistent-style","story-focused"].includes(y)&&(0,p.Rx)(e.value)||(0,p.Rx)(e.value)&&I})),[y,I]),E=(0,n.useMemo)(()=>(0,p.GI)(y).map(e=>({name:e.name,icon:e.icon,value:e.value,disabled:!1})),[y]);(0,n.useEffect)(()=>{if(b&&I){let e=p.Fj.find(e=>(0,p.Me)(e.value));(null==e?void 0:e.value)&&c("advancedSettings.imageModelConfig",e.value)}},[b,I,c]),(0,n.useEffect)(()=>{let e=k.videoModelConfig,t=(0,p.GI)(y);if(!t.some(t=>t.value.model===e.model&&JSON.stringify(t.value.parameters)===JSON.stringify(e.parameters))&&t.length>0){let e=t[0];if("singing-dancing"!==y){let i=t.find(e=>"kling2.1"===e.value.model||"kling"===e.value.model);i&&(e=i)}c("advancedSettings.videoModelConfig",e.value)}},[y,k.videoModelConfig,c]);let A=(0,n.useCallback)((e,t)=>{c("musicUrl",e),c("musicDuration",t),m("musicUrl"),m("musicDuration")},[c,m]),M=(0,n.useCallback)(e=>{c("character",e),m("character")},[c,m]),R=(0,n.useCallback)(e=>{c("consistentStyle",e)},[c]),T=(0,n.useCallback)(async e=>{try{c("referenceImageUrl",e),m("referenceImageUrl")}catch(e){h("referenceImageUrl",{message:`Upload failed: ${e instanceof Error?e.message:"Unknown error"}`})}},[c,h,m]),D=(0,n.useCallback)(()=>{c("referenceImageUrl",""),m("referenceImageUrl")},[c,m]),z=(0,n.useCallback)(e=>{c("musicVideoTopic",e),m("musicVideoTopic")},[c,m]),P=(0,n.useCallback)(e=>{c("videoType",e)},[c]),L=(0,n.useCallback)(e=>{c("aspectRatio",e),m("aspectRatio")},[c,m]),W=(0,n.useCallback)((e,t)=>{if("imageModel"===e){let e=p.Fj.find(e=>e.name===t);if(e){if((0,p.Rx)(e.value)&&I)return;c("advancedSettings.imageModelConfig",e.value)}}else if("videoModel"===e){let e=(0,p.GI)(y).find(e=>e.name===t);e&&c("advancedSettings.videoModelConfig",e.value)}},[c,I,y]),B=(0,n.useCallback)(()=>{x({musicUrl:"",musicDuration:0,videoType:eD,character:null,consistentStyle:"",referenceImageUrl:"",musicVideoTopic:[...ez],aspectRatio:eP,advancedSettings:eL}),o&&(0,eM.qQ)(eR,{})},[x,o]),H=l(async e=>{let i=!1;if(e.musicUrl.trim()||(h("musicUrl",{message:"Please provide a music URL"}),i=!0),!i)try{let i={music_url:e.musicUrl,character:e.character&&("consistent-character"===y||"singing-dancing"===y)?(0,p.ZX)(e.character):null,video_consistent_style:e.consistentStyle&&"consistent-style"===y?e.consistentStyle:null,reference_image_url:e.referenceImageUrl&&"consistent-style"===y?e.referenceImageUrl:null,video_topic:e.musicVideoTopic.join(","),advanced_settings:{image_model_config:e.advancedSettings.imageModelConfig,video_model_config:e.advancedSettings.videoModelConfig},video_type:e.videoType,aspect_ratio:e.aspectRatio};_(i,{onSuccess:e=>{o&&(0,eM.qQ)(eR,{}),e.workflowRunId?g.push(`/story/create/workflow/${e.workflowRunId}?category_id=music_video`):t()},onError:e=>{console.error("Generation failed:",e)}})}catch(e){h("musicUrl",{message:`Failed to process: ${e instanceof Error?e.message:"Unknown error"}`})}});return{form:s,errors:d,isGenerating:S,isUploadingImage:i,musicUrl:f,videoType:y,character:b,consistentStyle:C,referenceImageUrl:w,musicVideoTopic:j,aspectRatio:F,advancedSettings:k,musicDuration:v,imageModelOptions:Z,videoModelOptions:E,handleMusicUrlChange:A,handleVideoTypeChange:P,handleCharacterSelect:M,handleConsistentStyleChange:R,handleReferenceImageUpload:T,handleReferenceImageRemove:D,handleMusicVideoTopicChange:z,handleAspectRatioSelect:L,onFormSubmit:H,handleModelSelect:W,resetForm:B}}({onSubmit:t}),R=n.useCallback(e=>{m(e)},[]),T=eZ.v["story.music_video"];return(0,r.jsxs)(o.Z,{component:"form",onSubmit:e=>{e.preventDefault(),i({onAuthenticated:()=>A(e)})},sx:{maxWidth:800,mx:"auto",mt:8,position:"relative",minHeight:"100vh",pb:"140px"},children:[(0,r.jsxs)(o.Z,{sx:{mb:1.5,mt:4},children:[(0,r.jsxs)(a.Z,{variant:"h6",color:"rgba(204, 204, 204, 1)",mb:2,gutterBottom:!0,children:["Upload a Song"," ",(0,r.jsx)("span",{style:{fontSize:"0.75em",fontWeight:400,color:"rgb(153, 153, 153)"},children:"(Up to 60s)"})]}),(0,r.jsx)(eC,{selectedMusicExample:h,onSelectedMusicExampleProcessed:()=>m(null),onChange:(e,t,i)=>{k(e,i)},onUploadStart:()=>{},onUploadError:e=>{console.error("Upload error:",e)},onLinkChange:e=>{k(e,0)},linkPlaceholder:"Enter Suno music URL..."}),x.musicUrl?(0,r.jsx)(s.Z,{severity:"error",sx:{mt:1},children:x.musicUrl.message}):null]}),(0,r.jsx)(o.Z,{sx:{mb:2,width:"100%",maxWidth:"100%"},children:(0,r.jsx)(j,{onSelectMusic:R})}),(0,r.jsxs)(o.Z,{sx:{mb:2,width:"100%",maxWidth:"100%"},children:[(0,r.jsx)(a.Z,{variant:"h6",color:"rgba(204, 204, 204, 1)",mb:2,gutterBottom:!0,children:"Select a Mode"}),(0,r.jsx)(et,{onTypeChange:e=>{var t,i,r,n,o,a,s,l;switch(_(e),e){case"consistent-character":M("imageModel",(null===(t=w.find(e=>(0,p.Rx)(e.value)))||void 0===t?void 0:t.name)||""),M("videoModel",(null===(i=F.find(e=>(0,p.t3)(e.value,{model:"kling2.1",parameters:{videoMode:"std"}})))||void 0===i?void 0:i.name)||"");break;case"singing-dancing":M("imageModel",(null===(r=w.find(e=>(0,p.Rx)(e.value)))||void 0===r?void 0:r.name)||""),M("videoModel",(null===(n=F.find(e=>(0,p.t3)(e.value,{model:"wan-multi-talk"})))||void 0===n?void 0:n.name)||"");break;case"story-focused":M("imageModel",(null===(o=w.find(e=>(0,p.Me)(e.value)))||void 0===o?void 0:o.name)||""),M("videoModel",(null===(a=F.find(e=>(0,p.t3)(e.value,{model:"kling2.1",parameters:{videoMode:"std"}})))||void 0===a?void 0:a.name)||"");break;default:M("imageModel",(null===(s=w.find(e=>(0,p.Me)(e.value)))||void 0===s?void 0:s.name)||""),M("videoModel",(null===(l=F.find(e=>(0,p.t3)(e.value,{model:"kling2.1",parameters:{videoMode:"std"}})))||void 0===l?void 0:l.name)||"")}},handleConsistentStyleChange:I,handleCharacterSelect:S,selectedCharacter:f,handleMusicVideoTopicChange:Z,aspectRatio:C,onAspectRatioChange:E}),x.character?(0,r.jsx)(s.Z,{severity:"error",sx:{mt:1},children:x.character.message}):null]}),C&&E?(0,r.jsx)(o.Z,{sx:{mb:3},children:(0,r.jsx)(u.Y,{aspectRatioOptions:"singing-dancing"===v?["16:9","9:16","1:1"]:["16:9","9:16"],value:C,onChange:e=>{("16:9"===e||"9:16"===e||"1:1"===e)&&E(e)},sx:{mb:2}})}):null,(0,r.jsx)(o.Z,{sx:{mb:4,width:"100%",maxWidth:"100%"},children:(0,r.jsx)(c.d,{imageModelConfig:b.imageModelConfig,videoModelConfig:b.videoModelConfig,imageModelOptions:w,videoModelOptions:F,onModelSelect:M})}),(0,r.jsxs)(o.Z,{sx:{position:"fixed",backgroundColor:"#1A1A1A",bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:2,boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.3)",maxWidth:810,mx:"auto",borderTop:"1px solid #2E2E2E",zIndex:10,gap:1},children:[(0,r.jsx)(l.Z,{variant:"primary",type:"submit",disabled:g||!y||("singing-dancing"===v||"consistent-character"===v)&&!f,sx:{borderRadius:1,py:2.25,px:6,fontWeight:700,fontSize:16,lineHeight:1.21,textTransform:"none",border:"none","&.MuiButton-root":{boxShadow:"none"},maxWidth:800,width:"100%"},startIcon:g?(0,r.jsx)(d.Z,{size:20,sx:{color:"#666666"}}):null,children:g?"Generating Story...":"Create Story â†’"}),(0,r.jsxs)(o.Z,{sx:{backgroundColor:"#2E2E2E",borderRadius:"4px",padding:"4px 0px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1,maxWidth:800,width:"100%"},children:[(0,r.jsx)(o.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:(0,r.jsxs)(a.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:"11px",lineHeight:"1.8em",letterSpacing:"-0.02em",color:"#16D866"},children:[T.credit," credits"]})}),(0,r.jsx)(a.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:"12px",lineHeight:"1em",color:"#BFBFBF"},children:"Video renders in about a minute. Fully editable later."})]})]})]})}},58997:function(e,t,i){i.d(t,{z:function(){return V}});var r=i(52676),n=i(75271),o=i(83396),a=i(61271),s=i(66686),l=i(35019),d=i(65893),c=i(83469),u=i(55625),p=i(29720),h=i(71137),m=i(23638),x=i(39204);let g=e=>{let{canNavigatePrev:t=!1,canNavigateNext:i=!1,onPrev:n,onNext:o,isAnimationReady:a=!0,isMobile:d=!1}=e;if(d)return t||i?(0,r.jsxs)(l.Z,{direction:"row",spacing:2,mt:2,justifyContent:"center",children:[t?(0,r.jsx)(h.Z,{onClick:n,variant:"outlined",startIcon:(0,r.jsx)(u.Z,{}),sx:{borderColor:"#2E2E2E",color:"#FFFFFF",fontSize:"14px",textTransform:"none",flex:1,"&:hover":{borderColor:"#444444",backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:"Previous"}):null,i?(0,r.jsx)(h.Z,{onClick:o,variant:"outlined",endIcon:(0,r.jsx)(p.Z,{}),sx:{borderColor:"#2E2E2E",color:"#FFFFFF",fontSize:"14px",textTransform:"none",flex:1,"&:hover":{borderColor:"#444444",backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:"Next"}):null]}):null;let c={width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.3)",color:"#FFFFFF",backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"rgba(255, 255, 255, 0.2)"}},g={initial:a?{opacity:0,scale:.9}:{opacity:1,scale:1},animate:{opacity:1,scale:1,transition:{duration:.2,ease:[.25,.46,.45,.94],delay:.05}},exit:a?{opacity:0,scale:.9,transition:{duration:.15,ease:[.55,.085,.68,.53]}}:{opacity:1,scale:1}},f=a?{scale:1.05,transition:{duration:.2,ease:[.25,.46,.45,.94]}}:{},v=a?{scale:.95,transition:{duration:.1,ease:[.25,.46,.45,.94]}}:{};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.M,{children:t?(0,r.jsx)(x.E.div,{...g,style:{position:"absolute",top:"50%",left:"16px",transform:"translateY(-50%)",zIndex:1e3,willChange:"transform, opacity"},children:(0,r.jsx)(s.Z,{onClick:n,component:x.E.button,whileHover:f,whileTap:v,sx:c,children:(0,r.jsx)(u.Z,{sx:{fontSize:"24px"}})})}):null}),(0,r.jsx)(m.M,{children:i?(0,r.jsx)(x.E.div,{...g,style:{position:"absolute",top:"50%",right:"16px",transform:"translateY(-50%)",zIndex:1e3,willChange:"transform, opacity"},children:(0,r.jsx)(s.Z,{onClick:o,component:x.E.button,whileHover:f,whileTap:v,sx:c,children:(0,r.jsx)(p.Z,{sx:{fontSize:"24px"}})})}):null})]})};var f=i(96262),v=i(54524),y=i(79267);function b(e){let{onShare:t,onDownload:i,isRebuilding:o,sx:a,canShare:s,canDownload:c,onDelete:u,isDeleting:p,canDelete:m,isMobile:x=!1,story:g,useDirectDownload:b=!1}=e,[C,w]=(0,n.useState)(!1),[j,F]=(0,n.useState)(null),k=(e,t,i,n)=>x?(0,r.jsx)(h.Z,{onClick:t,disabled:i,variant:"outlined",startIcon:e,sx:{borderColor:"#2E2E2E",color:"#FFFFFF",fontSize:"14px",textTransform:"none",flex:1,"&:hover":{borderColor:"#444444",backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:n}):(0,r.jsx)(f.Z,{onClick:t,disabled:i,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"4px",height:"32px",padding:"0 8px",background:"rgba(16, 16, 16, 0.52)",color:"#666666",fontSize:"12px",fontWeight:500,lineHeight:"20px",textTransform:"none",minWidth:"auto",borderRadius:"6.5px","&:hover":{background:"rgba(16, 16, 16, 0.52)"}},children:e}),_=(e,t)=>e?(0,r.jsx)(d.Z,{sx:{width:"16px",height:"16px",border:"2px solid #444444",borderTop:"2px solid #CCCCCC",borderRadius:"50%",animation:"spin 1s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}):t;return(0,r.jsxs)(l.Z,{direction:x?"row":"column",spacing:x?2:1,sx:a,children:[s?k((0,r.jsx)(y.wg6,{sx:{fontSize:"16px",color:"#CCCCCC"}}),t,!1,"Share"):null,c?k(_(o,(0,r.jsx)(y.l8y,{sx:{fontSize:"16px",color:"#CCCCCC"}})),e=>{b?i():(F(e.currentTarget),w(!0))},o,"Download"):null,m?k(_(p,(0,r.jsx)(y.ttv,{sx:{fontSize:"16px",color:"#CCCCCC"}})),u,p,"Delete"):null,g&&!b?(0,r.jsx)(v.Z,{open:C,anchorEl:j,onClose:()=>{w(!1),F(null)},story:g,openDirectlyToExportOptions:!0}):null]})}var C=i(27553);let w=e=>{let{onEdit:t,isEditingStory:i,onEditStory:n}=e;return t?(0,r.jsx)(h.Z,{onClick:n,disabled:i,sx:{backgroundColor:"#013FFE",color:"#FFFFFF",fontSize:{xs:"14px",md:"16px"},fontWeight:700,lineHeight:"23px",textTransform:"none",width:"100%",height:"44px",borderRadius:"8px",gap:"10px","&:hover":{backgroundColor:"#0135E6"},"&:disabled":{backgroundColor:"#666666",color:"#CCCCCC"}},startIcon:i?(0,r.jsx)(d.Z,{sx:{width:"18px",height:"18px",border:"2px solid #CCCCCC",borderTop:"2px solid #FFFFFF",borderRadius:"50%",animation:"spin 1s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}):(0,r.jsx)(C.Z,{sx:{fontSize:"18px"}}),children:i?"Processing...":"Edit the story"}):null};var j=i(24337);function F(e){let{onDelete:t,isDeleting:i,canDelete:n}=e;return n?(0,r.jsx)(l.Z,{direction:"column",spacing:1.5,children:(0,r.jsx)(f.Z,{onClick:t,disabled:i,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"8px",height:"36px",padding:"16px 24px",background:"rgba(220, 53, 69, 0.12)",color:"#dc3545",fontSize:"14px",fontWeight:500,lineHeight:"20px",textTransform:"none",minWidth:"auto",borderRadius:"8px",width:"100%","&:hover":{background:"rgba(220, 53, 69, 0.2)"},"&:disabled":{background:"rgba(220, 53, 69, 0.08)",color:"rgba(220, 53, 69, 0.5)"}},children:i?(0,r.jsx)(d.Z,{sx:{width:"16px",height:"16px",border:"2px solid #444444",borderTop:"2px solid #CCCCCC",borderRadius:"50%",animation:"spin 1s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.ttv,{sx:{fontSize:"16px"}}),"Delete"]})})}):null}var k=i(46974),_=i(48945),S=i(17831),I=i(62935),Z=i(46406);let E={character_vlog:{label:"Character Vlog",sx:{backgroundColor:"rgba(1, 63, 254, 0.40);"}},script_to_video:{label:"Explainer Video",sx:{backgroundColor:"rgba(251, 35, 194, 0.40)"}},music_video:{label:"Music Video",sx:{backgroundColor:"rgba(27, 239, 97, 0.20)"}},create_from_scratch:{label:"Create from Scratch",sx:{}}},A={"consistent-character":{label:"Consistent Character",sx:{}},"consistent-style":{label:"Style Mode",sx:{}},"singing-dancing":{label:"Sing Mode",sx:{}},"story-focused":{label:"Story Mode",sx:{}}},M=(0,Z.ZP)(_.Z)({backgroundColor:"#1A1A1A",color:"#E0E0E0",fontSize:"14px",fontWeight:600,height:"32px",borderRadius:"4px","& .MuiChip-label":{px:"8px"}}),R=e=>{let{story:t,showProfile:i=!0,isMobile:o=!1}=e,a=(0,k.useRouter)(),s=(0,n.useMemo)(()=>{let e=E[t.category_id];if(!e)return[];let i=[];if(e&&i.push((0,r.jsx)(M,{label:`# ${e.label}`,sx:e.sx},`${t.category_id}`)),"music_video"===t.category_id){let e=A[t.category_inputs.video_type];e&&i.push((0,r.jsx)(M,{label:`# ${e.label}`,sx:e.sx},e.label))}return i},[t.category_id,t.category_inputs]);return(0,r.jsxs)(l.Z,{spacing:2,children:[(0,r.jsx)(l.Z,{direction:"row",spacing:1.5,alignItems:"center",flexWrap:"wrap",children:s}),(()=>{let e=null==t?void 0:t.profile;if(!i||!e)return null;let n=e.display_name||e.username;return(0,r.jsxs)(l.Z,{direction:"row",spacing:1.25,alignItems:"center",sx:{cursor:"pointer"},onClick:t=>{t.stopPropagation(),t.preventDefault(),e.username&&!e.is_team&&a.push(`/@${e.username}`)},children:[(0,r.jsx)(S.Z,{src:e.avatar_url,sx:{width:36,height:36,border:"2px solid rgb(213, 131, 131)"}}),(0,r.jsx)(I.Z,{sx:{color:"#FFFFFF",fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"22px"},children:n})]})})(),(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(l.Z,{direction:"row",spacing:1,alignItems:"center",children:[t.is_template?(0,r.jsx)(M,{label:"Example",sx:{backgroundColor:"#013FFE",color:"#FFFFFF",fontSize:"12px",fontWeight:600,height:"24px",borderRadius:"4px",flexShrink:0,"& .MuiChip-label":{px:"6px"},...o&&{background:"linear-gradient(135deg, rgba(255, 246, 246, 0.15) 0%, rgba(255, 255, 255, 0.2) 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",backdropFilter:"blur(10.9px)",color:"rgba(255, 255, 255, 0.62)",fontFamily:"Inter",fontSize:"14px",fontWeight:600,height:"24px",borderRadius:"6px","& .MuiChip-label":{px:"8px",py:"4px"}}}}):null,(0,r.jsx)(I.Z,{sx:{color:"#FFFFFF",fontSize:o?"14px":"16px",fontWeight:700,letterSpacing:"-0.16px",flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title})]}),(0,r.jsx)(I.Z,{sx:{color:"#888888",fontSize:"12px",fontWeight:500},children:function(e){try{let t=e.created_at;if(e.is_published&&!e.is_featured&&e.published_at&&(t=e.published_at),!t)return"";let i=function(e){if(!e)return null;if("number"==typeof e)return new Date(e);if("object"==typeof e&&void 0!==e._seconds){let t=e._seconds||0;return new Date(1e3*t+(e._nanoseconds||0)/1e6)}return"string"==typeof e?new Date(e):e instanceof Date?e:null}(t);if(!i||!(i instanceof Date&&!Number.isNaN(i.getTime())))return"";return i.toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch(e){return console.warn("Error formatting story date:",e),""}}(t)})]})]})};function T(e){let t,{onShare:i,onDownload:o,isRebuilding:a,canShare:s,canDownload:c,story:u,useDirectDownload:p=!1}=e,[h,m]=(0,n.useState)(!1),[x,g]=(0,n.useState)(null),b=(e,t,i)=>(0,r.jsx)(f.Z,{onClick:t,disabled:i,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"8px",height:"36px",padding:"16px 24px",background:"rgba(255, 255, 255, 0.12)",color:"white",fontSize:"12px",fontWeight:500,lineHeight:"20px",textTransform:"none",minWidth:"auto",borderRadius:"8px",width:"100%","&:hover":{background:"rgba(255, 255, 255, 0.12)"}},children:e}),C=[s,c].filter(Boolean).length;return 0===C?null:(0,r.jsxs)(l.Z,{direction:"column",flexWrap:"wrap",spacing:1.5,children:[(0,r.jsx)(I.Z,{sx:{color:"#FFFFFF",fontSize:{xs:"14px",md:"16px"},fontWeight:700,lineHeight:"23px"},children:"Share & Download"}),(0,r.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:`repeat(${C}, 1fr)`,gap:"8px",width:"100%"},children:[s?b((0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.wg6,{sx:{fontSize:"16px"}})," Share"]}),i,!1):null,c?b((t=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.l8y,{sx:{fontSize:"16px"}})," Download"]}),a?(0,r.jsx)(d.Z,{sx:{width:"16px",height:"16px",border:"2px solid #444444",borderTop:"2px solid #CCCCCC",borderRadius:"50%",animation:"spin 1s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}):t),e=>{p?o():(g(e.currentTarget),m(!0))},a):null]}),u&&!p?(0,r.jsx)(v.Z,{open:h,anchorEl:x,onClose:()=>{m(!1),g(null)},story:u,openDirectlyToExportOptions:!0}):null]})}var D=i(45306);let z=e=>{let{story:t,showProfile:i=!0,canShare:n=!0,canDownload:o=!0,canDelete:a=!0,isRebuilding:s,isDeleting:c,useDirectDownload:u=!1,bottomContent:p,isAnimationReady:h,isMobile:f,canNavigateNext:v=!1,canNavigatePrev:y=!1,onNext:b,onPrev:C,onShare:w,onDownload:k,onDelete:_,onEdit:S}=e,I=(0,D.q)(t.category_id);return(0,r.jsx)(l.Z,{px:2,py:f?2:3,height:f?"60%":"100%",direction:"column",width:"100%",maxWidth:f?"100%":"30%",spacing:f?2:3,sx:{borderTop:f?"1px solid #2E2E2E":"none",flex:f?1:void 0,pb:f?4:void 0},children:(0,r.jsx)(m.M,{mode:"wait",children:(0,r.jsxs)(x.E.div,{initial:h?{opacity:0,y:8}:{opacity:1,y:0},animate:{opacity:1,y:0,transition:{duration:.25,ease:[.25,.46,.45,.94],delay:.1}},exit:h?{opacity:0,y:-8,transition:{duration:.15,ease:[.55,.085,.68,.53]}}:{opacity:1,y:0},style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:f?"16px":"24px",willChange:"transform, opacity"},children:[(0,r.jsx)(R,{story:t,showProfile:i,isMobile:f}),(0,r.jsx)(j.Z,{}),(0,r.jsx)(T,{onShare:w,onDownload:k,isRebuilding:s,canShare:n,canDownload:o,onEdit:S,story:t,useDirectDownload:u}),(0,r.jsx)(l.Z,{direction:"column",spacing:1.5,pr:f?0:1.5,sx:{overflowY:f?"visible":"auto",flex:f?void 0:1},children:I?(0,r.jsx)(I,{story:t}):null}),f?(0,r.jsxs)(l.Z,{sx:{mt:2},spacing:1,children:[p,(0,r.jsx)(F,{onDelete:_,isDeleting:c,canDelete:a}),(0,r.jsx)(g,{canNavigatePrev:y,canNavigateNext:v,onPrev:C,onNext:b,isAnimationReady:h,isMobile:f})]}):(0,r.jsx)(d.Z,{sx:{mt:"auto !important"},children:p})]},`${t.id}-details`)})})};var P=i(52702),L=i(65230);let W=e=>{let{story:t,useStoryPreviewPlayer:i=!1,isAnimationReady:o,currentVideoTime:a=0}=e,s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{s.current&&a>0&&(s.current.currentTime=a)},[a,t.id]),(0,r.jsx)(m.M,{mode:"wait",children:(0,r.jsx)(x.E.div,{initial:o?{opacity:0,x:15}:{opacity:1,x:0},animate:{opacity:1,x:0,transition:{duration:.2,ease:[.25,.46,.45,.94]}},exit:o?{opacity:0,x:-15,transition:{duration:.15,ease:[.55,.085,.68,.53]}}:{opacity:1,x:0},style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",willChange:"transform, opacity"},children:i?(0,r.jsx)(L.cP,{storyData:t,controls:!0,style:{width:"100%",height:"100%",objectFit:"contain",display:"block"}}):(0,r.jsx)(P.X,{story:t,origin:"preview_video_dialog",children:e=>(0,r.jsx)("video",{ref:s,controls:!0,preload:"auto",loop:!0,autoPlay:!0,playsInline:!0,poster:t.last_export_thumbnail_url,"aria-label":t.title||"Story video",onPlay:e.onPlay,onPause:e.onPause,onEnded:e.onEnded,onTimeUpdate:e.onTimeUpdate,onSeeking:e.onSeeking,onError:e.onError,onLoadStart:e.onLoadStart,onLoadedMetadata:()=>{s.current&&a>0&&(s.current.currentTime=a)},style:{width:"100%",height:"100%",objectFit:"contain",display:"block"},src:t.last_export_url,children:"Your browser does not support the video tag."})})},t.id)})};var B=i(90902);let H=()=>(0,r.jsxs)(l.Z,{direction:"column",sx:{minHeight:"100%",overflowY:"auto"},children:[(0,r.jsx)(d.Z,{sx:{width:"100%",height:"40vh",minHeight:"250px",position:"relative",backgroundColor:"#1A1A1A",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,r.jsx)(B.Z,{variant:"rectangular",width:"100%",height:"100%",sx:{backgroundColor:"#2A2A2A"}})}),(0,r.jsxs)(l.Z,{px:2,py:2,direction:"column",spacing:2,sx:{borderTop:"1px solid #2E2E2E",flex:1,pb:4},children:[(0,r.jsxs)(l.Z,{spacing:1.5,children:[(0,r.jsx)(l.Z,{direction:"row",spacing:1.5,alignItems:"center",flexWrap:"wrap",children:(0,r.jsx)(B.Z,{variant:"rectangular",width:120,height:32,sx:{backgroundColor:"#2A2A2A",borderRadius:"4px"}})}),(0,r.jsx)(j.Z,{}),(0,r.jsxs)(l.Z,{direction:"column",spacing:1.5,children:[(0,r.jsx)(B.Z,{variant:"text",width:"80%",height:20,sx:{backgroundColor:"#2A2A2A"}}),(0,r.jsx)(B.Z,{variant:"text",width:"60%",height:16,sx:{backgroundColor:"#2A2A2A"}})]})]}),(0,r.jsx)(j.Z,{}),(0,r.jsxs)(l.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(B.Z,{variant:"rectangular",width:40,height:40,sx:{backgroundColor:"#2A2A2A",borderRadius:"8px"}}),(0,r.jsx)(B.Z,{variant:"rectangular",width:40,height:40,sx:{backgroundColor:"#2A2A2A",borderRadius:"8px"}})]}),(0,r.jsxs)(l.Z,{direction:"column",spacing:1.5,children:[(0,r.jsx)(B.Z,{variant:"text",width:"100%",height:20,sx:{backgroundColor:"#2A2A2A"}}),(0,r.jsx)(B.Z,{variant:"text",width:"100%",height:20,sx:{backgroundColor:"#2A2A2A"}})]}),(0,r.jsx)(B.Z,{variant:"rectangular",width:"100%",height:44,sx:{backgroundColor:"#2A2A2A",borderRadius:"8px",mt:2}})]})]}),U=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{sx:{width:"70%",height:"100%",position:"relative",backgroundColor:"#1A1A1A",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(B.Z,{variant:"rectangular",width:"100%",height:"100%",sx:{backgroundColor:"#2A2A2A"}})}),(0,r.jsxs)(l.Z,{px:2,py:3,height:"100%",direction:"column",width:"100%",maxWidth:"30%",spacing:3,children:[(0,r.jsxs)(l.Z,{spacing:2,children:[(0,r.jsx)(l.Z,{direction:"row",spacing:1.5,alignItems:"center",flexWrap:"wrap",children:(0,r.jsx)(B.Z,{variant:"rectangular",width:120,height:32,sx:{backgroundColor:"#2A2A2A",borderRadius:"4px"}})}),(0,r.jsxs)(l.Z,{direction:"row",spacing:1.25,alignItems:"center",children:[(0,r.jsx)(B.Z,{variant:"circular",width:36,height:36,sx:{backgroundColor:"#2A2A2A"}}),(0,r.jsx)(B.Z,{variant:"text",width:120,height:22,sx:{backgroundColor:"#2A2A2A"}})]}),(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(B.Z,{variant:"text",width:"90%",height:20,sx:{backgroundColor:"#2A2A2A"}}),(0,r.jsx)(B.Z,{variant:"text",width:"70%",height:16,sx:{backgroundColor:"#2A2A2A"}})]})]}),(0,r.jsx)(j.Z,{}),(0,r.jsxs)(l.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(B.Z,{variant:"rectangular",width:40,height:40,sx:{backgroundColor:"#2A2A2A",borderRadius:"8px"}}),(0,r.jsx)(B.Z,{variant:"rectangular",width:40,height:40,sx:{backgroundColor:"#2A2A2A",borderRadius:"8px"}})]}),(0,r.jsxs)(l.Z,{direction:"column",spacing:1.5,pr:1.5,sx:{overflowY:"auto"},children:[(0,r.jsx)(B.Z,{variant:"text",width:"100%",height:20,sx:{backgroundColor:"#2A2A2A"}}),(0,r.jsx)(B.Z,{variant:"text",width:"100%",height:20,sx:{backgroundColor:"#2A2A2A"}}),(0,r.jsx)(B.Z,{variant:"text",width:"80%",height:20,sx:{backgroundColor:"#2A2A2A"}})]}),(0,r.jsx)(d.Z,{sx:{mt:"auto !important"},children:(0,r.jsx)(B.Z,{variant:"rectangular",width:"100%",height:44,sx:{backgroundColor:"#2A2A2A",borderRadius:"8px"}})})]})]});var O=i(92101),$=i(1372),N=i(45137),G=i(80924);let V=e=>{let{open:t,onClose:i,workflowRunId:u,isRebuilding:p,isDeleting:h,shouldAutoDownload:m,story:x,story_id:f,showProfile:y=!0,bottomContent:C,canShare:j=!0,canDownload:F=!0,canDelete:_=!0,onDownload:S,onExportComplete:I,onDelete:Z,onEdit:E,useStoryPreviewPlayer:A=!1,useDirectDownload:M=!1,needloadCompleteData:R=!1,canNavigateNext:T=!1,canNavigatePrev:D=!1,onNext:P,onPrev:L,currentVideoTime:B}=e,{isMobile:V}=(0,G.j)(),{currentStory:K,isLoadingStory:Y,shareAnchorEl:q,isSharePopoverOpen:X,isAnimationReady:J,isEditingStory:Q,handleShareClick:ee,handleShareClose:et,handleEditStory:ei,handleDeleteStory:er}=function(e){let{story:t,story_id:i,needloadCompleteData:r,onEdit:o,onDelete:a}=e,s=(0,k.useRouter)(),[l,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),{data:m,isLoading:x}=(0,$.TO)(i,r||!t),{mutateAsync:g}=(0,O.GH)(),f=r?m:t;(0,n.useEffect)(()=>{u(!0)},[]);let v=async()=>{if(f)try{if(h(!0),f.is_template){(0,N.B)("editor_opened",{story_id:f.id,opened_from:"preview_video_dialog"});let e=await g({templateStoryId:f.id,operation:"edit"});s.push(`/story/editor?story_id=${e.id}`)}else null==o||o()}catch(e){console.error("Error editing story:",e)}finally{h(!1)}},y=async()=>{f&&((null==f?void 0:f.is_template)?await g({templateStoryId:f.id,operation:"delete"}):await (null==a?void 0:a()))};return{currentStory:f,isLoadingStory:x,shareAnchorEl:l,isSharePopoverOpen:!!l,isAnimationReady:c,isEditingStory:p,handleShareClick:e=>{d(e.currentTarget)},handleShareClose:()=>{d(null)},handleEditStory:v,handleDeleteStory:y}}({story:x,story_id:f,onEdit:E,onDelete:Z,needloadCompleteData:R}),en=Y&&!K,eo=(0,r.jsx)(w,{onEdit:E,isEditingStory:Q,onEditStory:ei});return(0,r.jsxs)(a.Z,{open:t,onClose:i,maxWidth:!1,fullWidth:!0,sx:{"& .MuiDialog-container":{alignItems:"center",justifyContent:"center",opacity:"1 !important"}},disablePortal:!0,PaperProps:{sx:{backgroundColor:"#101010",border:"1px solid #2E2E2E",borderRadius:V?"0px":"12px",width:V?"100vw":"1103px",maxWidth:V?"100vw":"90vw",height:V?"100%":"829px",...!V&&{maxHeight:"90vh"},margin:0,padding:0,position:"relative",overflow:"hidden",display:"flex",flexDirection:V?"column":"row",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"}},children:[(0,r.jsx)(s.Z,{onClick:i,sx:{position:"absolute",top:"16px",right:"16px",width:"30px",height:"30px",borderRadius:"50%",color:"#666666",zIndex:1e3},children:(0,r.jsx)(o.Z,{sx:{fontSize:"18px"}})}),en?V?H():U():K?V?(0,r.jsxs)(l.Z,{direction:"column",sx:{minHeight:"100%",overflowY:"auto"},children:[(0,r.jsxs)(d.Z,{sx:{width:"100%",height:"40vh",minHeight:"250px",position:"relative",backgroundColor:"#1A1A1A",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:[(0,r.jsx)(W,{story:K,useStoryPreviewPlayer:A,isAnimationReady:J,currentVideoTime:B}),u&&(null==K?void 0:K.id)?(0,r.jsx)(c.d,{workflowRunId:u,storyId:K.id,onComplete:I,shouldAutoDownload:m}):null]}),(0,r.jsx)(z,{story:K,showProfile:y,canShare:j,canDownload:F,canDelete:_,isRebuilding:p,isDeleting:h,useDirectDownload:M,bottomContent:C||eo,isAnimationReady:J,isMobile:V,canNavigateNext:T,canNavigatePrev:D,onNext:P,onPrev:L,onShare:ee,onDownload:S,onDelete:er,onEdit:E})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.Z,{sx:{width:"70%",height:"100%",position:"relative",backgroundColor:"#1A1A1A",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(W,{story:K,useStoryPreviewPlayer:A,isAnimationReady:J,currentVideoTime:B}),(0,r.jsx)(b,{onShare:ee,onDownload:S,isRebuilding:p,canShare:(null==K||!K.is_template)&&j,canDownload:(null==K||!K.is_template)&&F,onDelete:er,isDeleting:h,canDelete:_,story:K,useDirectDownload:M,sx:{position:"absolute",top:"16px",right:"16px"}}),u&&(null==K?void 0:K.id)?(0,r.jsx)(c.d,{workflowRunId:u,storyId:K.id,onComplete:I,shouldAutoDownload:m}):null,(0,r.jsx)(g,{canNavigatePrev:D,canNavigateNext:T,onPrev:L,onNext:P,isAnimationReady:J,isMobile:!1})]}),(0,r.jsx)(z,{story:K,showProfile:y,canShare:j,canDownload:F,canDelete:_,isRebuilding:p,isDeleting:h,useDirectDownload:M,bottomContent:C||eo,isAnimationReady:J,isMobile:V,canNavigateNext:T,canNavigatePrev:D,onNext:P,onPrev:L,onShare:ee,onDownload:S,onDelete:er,onEdit:E})]}):null,K?(0,r.jsx)(v.Z,{open:X,anchorEl:q,onClose:et,story:K}):null]})}},52721:function(e,t,i){i.d(t,{E:function(){return d}});var r=i(52676),n=i(75271),o=i(65893),a=i(76590);let s=e=>{let t=document.createElement("div");return t.textContent=e,t.innerHTML},l=e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||""};function d(e){let{isHovered:t,value:d,onChange:c,placeholder:u="Enter your prompt...",disabled:p=!1,onFocus:h,onBlur:m}=e,x=(0,n.useRef)(null),g=(0,n.useRef)(null),f=(0,a.Jc)(),v=(0,n.useMemo)(()=>f?[{key:f.name||"Character",value:f.model_id||f.name||"unknown"}]:[],[f]),y=(0,n.useMemo)(()=>(null==f?void 0:f.model_id)||(null==f?void 0:f.name)||"unknown",[f]),b=(0,n.useMemo)(()=>(null==f?void 0:f.name)||"Character",[f]),C=(0,n.useCallback)(e=>{if(!f)return s(e).replaceAll("\n","<br>");let t=e;t=(t=t.split("<<THE_MARKER>>").map(e=>s(e)).join("<<THE_MARKER>>")).replaceAll("\n","<br>");let i=`<span class="mention-text" data-character-id="${y}" contenteditable="false" data-character-name="${b}">@${b}</span>`;return t.replaceAll("<<THE_MARKER>>",i)},[f,y,b]),w=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!f)return e;let i=e;if(t){let t=document.createElement("div");t.innerHTML=e,t.querySelectorAll(".mention-text").forEach(e=>{if(e.dataset.characterId===y){let t=e.textContent||"";i=i.replace(t,"<<THE_MARKER>>")}}),i=l(i)}else RegExp(`@${b.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`)}`,"g").test(i)&&(i=i.replaceAll(`@${b}`,"<<THE_MARKER>>"));return i},[f,y,b]),j=(0,n.useCallback)(()=>{if(!x.current||p)return;let e=x.current.innerHTML,t=x.current.textContent||"",i=w(t,!1);!(f&&t.includes(`@${b}`))&&e.includes("mention-text")&&(x.current.innerHTML=t),c(i)},[w,f,b,c,p]);return(0,n.useEffect)(()=>{if(!x.current||p)return;let e=e=>{var t;e.preventDefault();let i=((null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain"))??"").replaceAll(/\n\s*\n/g,"\n").trim();document.execCommand("insertText",!1,i)},t=e=>{var t,i,r;if("Backspace"===e.key||"Delete"===e.key){let r=window.getSelection();if(!r||0===r.rangeCount)return;let n=r.getRangeAt(0);if(r.toString()===(null===(t=x.current)||void 0===t?void 0:t.textContent)){e.preventDefault(),x.current.innerHTML="",j();return}let o=null===(i=n.startContainer.parentElement)||void 0===i?void 0:i.closest(".mention-text");if(o){let t=o.textContent||"";f&&`@${b}`===t.trim()&&"Backspace"!==e.key||(e.preventDefault(),o.remove(),j())}}else if("Enter"===e.key){let t=window.getSelection();if(!t||0===t.rangeCount)return;let i=null===(r=t.getRangeAt(0).startContainer.parentElement)||void 0===r?void 0:r.closest(".mention-text");if(i){e.preventDefault();let r=document.createRange();r.setStartAfter(i),r.collapse(!0),t.removeAllRanges(),t.addRange(r)}}},r=e=>{let t=e.target.closest(".mention-text");if(t){e.preventDefault();let i=window.getSelection(),r=document.createRange();r.setStartAfter(t),r.collapse(!0),null==i||i.removeAllRanges(),null==i||i.addRange(r)}},n=()=>{var e;let t=window.getSelection();if(!t||0===t.rangeCount)return;let i=null===(e=t.getRangeAt(0).startContainer.parentElement)||void 0===e?void 0:e.closest(".mention-text");if(i){let e=document.createRange();e.setStartAfter(i),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}},o=e=>{},a=e=>{},s=null,l=e=>{s=setTimeout(()=>{x.current&&(x.current.querySelectorAll(".mention-text").forEach(e=>{e.setAttribute("contenteditable","false")}),c(w(x.current.textContent||"",!1))),s=null},0)},d=x.current;return d.addEventListener("paste",e),d.addEventListener("keydown",t),d.addEventListener("click",r),document.addEventListener("selectionchange",n),g.current&&(g.current.detach(d),g.current=null),v.length>0&&i.e(7233).then(i.t.bind(i,27233,23)).then(e=>{let t=e.default;document.querySelectorAll(".prompt-tribute-container").forEach(e=>e.remove()),g.current=new t({trigger:"@",values:v,menuContainer:document.body,positionMenu:!0,selectTemplate:e=>e?`<span class="mention-text" data-character-id="${e.original.value}" contenteditable="false" data-character-name="${e.original.key}">@${e.original.key}</span>&nbsp;`:"",containerClass:"tribute-container prompt-tribute-container",menuItemTemplate:e=>`<div class="mention-item">@${e.original.key}</div>`,noMatchTemplate:()=>'<div class="mention-item no-match">No matches found</div>',allowSpaces:!0,requireLeadingSpace:!1,replaceTextSuffix:""}),x.current&&(g.current.attach(x.current),x.current.addEventListener("tribute-active-true",o),x.current.addEventListener("tribute-active-false",a),x.current.addEventListener("tribute-replaced",l))}).catch(e=>{console.error("Failed to load tributejs:",e)}),()=>{s&&clearTimeout(s),g.current&&d&&g.current.detach(d),d.removeEventListener("paste",e),d.removeEventListener("keydown",t),d.removeEventListener("click",r),document.removeEventListener("selectionchange",n),d.removeEventListener("tribute-active-true",o),d.removeEventListener("tribute-active-false",a),d.removeEventListener("tribute-replaced",l)}},[v,p]),(0,n.useEffect)(()=>{x.current&&w(x.current.textContent||"",!1)!==d&&(d.includes("<<THE_MARKER>>")&&f?(x.current.innerHTML=C(d),x.current.querySelectorAll(".mention-text").forEach(e=>{e.setAttribute("contenteditable","false")})):x.current.textContent=d)},[d,w,C,f]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:`
        .prompt-tribute-container {
          position: absolute !important;
          background-color: #2E2E2E !important;
          border: 1px solid #444444 !important;
          border-radius: 4px !important;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) !important;
          z-index: 10000 !important;
          max-height: 200px !important;
          overflow-y: auto !important;
        }
        
        .prompt-tribute-container .tribute-item,
        .prompt-tribute-container .mention-item {
          color: #E0E0E0 !important;
          font-size: 14px !important;
          cursor: pointer !important;
          border: none !important;
          background: none !important;
        }
        
        .prompt-tribute-container .tribute-item:hover,
        .prompt-tribute-container .mention-item:hover,
        .prompt-tribute-container .tribute-item.highlight {
          color: #6290FF !important;
        }
        
        .prompt-tribute-container .no-match {
          color: #999999 !important;
          cursor: default !important;
        }
        
        .mention-text {
          color: #6290FF !important;
          font-weight: 500 !important;
          margin: 0 1px !important;
          display: inline-block !important;
          user-select: none !important;
        }
      `}),(0,r.jsx)(o.Z,{sx:{width:"100%",height:"100%",backgroundColor:"transparent",position:"relative"},children:(0,r.jsx)(o.Z,{ref:x,contentEditable:!p,onInput:j,onFocus:()=>{null==h||h()},onBlur:()=>{null==m||m()},sx:{width:"100%",height:"100%",color:t?"#FFFFFF":"rgba(255, 255, 255, 0.3)",transition:"color 0.2s ease",bgcolor:"transparent",caretColor:"white",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:1.67,letterSpacing:"-0.01em",border:"none",outline:"none",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowY:"auto",cursor:p?"not-allowed":"text",opacity:p?.5:1,"&:empty::before":{content:`"${u}"`,color:"#666666",pointerEvents:"none"}}})})]})}},43237:function(e,t,i){i.d(t,{u:function(){return s}});var r=i(52676);i(75271);var n=i(65893),o=i(62935),a=i(35019);function s(e){let{sx:t,icon:i,title:s,rightSide:l}=e;return(0,r.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch",gap:2,sx:t,children:[(0,r.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",gap:1,color:"#CCCCCC"},children:[i,s?(0,r.jsx)(o.Z,{sx:{fontWeight:500,fontSize:{xs:"14px",md:"16px"},lineHeight:"1.5em",color:"#CCCCCC"},children:s}):null]}),(0,r.jsx)(n.Z,{sx:{display:"flex",gap:1},children:l})]})}},54524:function(e,t,i){i.d(t,{Z:function(){return ew}});var r=i(52676),n=i(75271),o=i(46974),a=i(85814),s=i(46406),l=i(75616),d=i(10986);let c=e=>{switch(e){case"generate_link":case"share_link_native":case"share_file_native":return["generate_link"];case"publish":return["publish"];default:return}},u=e=>({"processing:generating_timeline":30,"processing:user_exporting_video":75})[e]||50,p=()=>`
  <html>
    <head>
      <title>OpenArt - Preparing Story</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        body { 
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
          background: #1D1D1D;
          color: #FFFFFF;
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 100vh;
          text-align: center;
          overflow: hidden;
        }
        .loading-container {
          background: #292929;
          padding: 32px;
          border-radius: 12px;
          border: 1px solid #444444;
          box-shadow: 0px 8px 24px rgba(0, 0, 0, 0.4);
          max-width: 400px;
          width: 90%;
          position: relative;
        }
        .logo-container {
          margin-bottom: 24px;
        }
        .logo {
          width: 48px;
          height: 48px;
          background: linear-gradient(135deg, #0929F7 0%, #3366FF 100%);
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto;
          font-weight: 700;
          font-size: 20px;
          color: white;
        }
        .spinner {
          width: 32px;
          height: 32px;
          border: 3px solid #444444;
          border-top: 3px solid #0929F7;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 20px;
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        h2 { 
          margin: 0 0 8px 0;
          font-size: 20px;
          font-weight: 600;
          color: #FFFFFF;
          line-height: 1.3;
        }
        p { 
          margin: 0;
          font-size: 14px;
          color: rgba(255, 255, 255, 0.7);
          font-weight: 400;
          line-height: 1.5;
        }
        .progress-bar {
          width: 100%;
          height: 3px;
          background: #444444;
          border-radius: 2px;
          margin-top: 20px;
          overflow: hidden;
        }
        .progress-fill {
          height: 100%;
          background: linear-gradient(90deg, #0929F7 0%, #3366FF 100%);
          border-radius: 2px;
          animation: progress 2s ease-in-out infinite;
        }
        @keyframes progress {
          0% { width: 0%; }
          50% { width: 70%; }
          100% { width: 100%; }
        }
        .dots {
          display: inline-block;
          animation: dots 1.5s infinite;
        }
        @keyframes dots {
          0%, 20% { opacity: 0; }
          50% { opacity: 1; }
          100% { opacity: 0; }
        }
      </style>
    </head>
    <body>
      <div class="loading-container">
        <div class="spinner"></div>
        <h2>Preparing your story<span class="dots">...</span></h2>
        <p>Please wait while we prepare your story</p>
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
      </div>
    </body>
  </html>
  `,h=(e,t)=>"generate_link"===e&&!!t,m=()=>{let e=window.open("about:blank","_blank");return e&&e.document.write(p()),e};var x=i(81192),g=i(19082);let f=(0,x.cn)("main"),v=(0,x.cn)(null),y=(0,x.cn)(null),b=(0,x.cn)(!1),C=(0,x.cn)(null),w=(0,x.cn)(!0),j=(0,x.cn)(!1),F=(0,x.cn)(e=>({useLastExport:!1,removeWatermark:e(b)})),k=(0,x.cn)(e=>!!e(w)),_=(0,x.cn)(e=>{let t=e(C),i=e(b);return((null==t?void 0:t.is_export_outdated)||i)??!1});function S(){let[e,t]=(0,g.KO)(f),[i,r]=(0,g.KO)(v),[o,a]=(0,g.KO)(y),[s,l]=(0,g.KO)(b),[d,c]=(0,g.KO)(j),u=(0,n.useCallback)(()=>{t("main"),r(null),a(null),l(!1),c(!1)},[t,r,a,l,c]),p=(0,n.useCallback)(e=>{t("export_options"),r(e)},[t,r]),h=(0,n.useCallback)(()=>{"export_options"===e&&(t("main"),r(null),a(null),c(!1))},[e,t,r,a,c]);return{shareState:e,currentAction:i,selectedPlatform:o,removeWatermark:s,isUnpublishMode:d,setRemoveWatermark:l,setSelectedPlatform:a,setIsUnpublishMode:c,resetState:u,setExportOptionsView:p,goBack:h}}function I(){let e=(0,g.b9)(C),t=(0,g.b9)(w),i=(0,g.Dv)(C),r=(0,g.Dv)(k);return{story:i,shouldShowExportOptions:r,shouldHighlightBottomButton:(0,g.Dv)(_),exportOptions:(0,g.Dv)(F),initializeProps:(0,n.useCallback)((i,r)=>{e(i),t(r)},[e,t])}}let Z=e=>`https://openart.ai/story/share/${e}`,E=(e,t,i)=>({twitter:`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(i)}`,reddit:`https://reddit.com/submit?url=${encodeURIComponent(i)}&title=${encodeURIComponent(t)}`,linkedin:`https://www.linkedin.com/feed/?shareActive=true&text=${encodeURIComponent(`${t} ${i}`)}`})[e]||"",A=async e=>{try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("Failed to copy link:",e),!1}},M=async e=>{if(!navigator.share)return!1;try{return await navigator.share(e),!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return console.error("Error sharing:",e),!0;return!1}},R=async(e,t)=>{try{let i=await fetch(e);if(!i.ok)throw Error(`Failed to download video: ${i.statusText}`);let r=await i.blob();return new File([r],`${t}.mp4`,{type:"video/mp4"})}catch(e){return console.error("Error downloading video:",e),null}},T=()=>void 0!==navigator.share,D=async(e,t)=>{await e.invalidateQueries({queryKey:["stories","published",{}]}),await e.invalidateQueries({queryKey:["stories","detail",t]})},z=e=>`Check out this story on @openart_ai: ${e||"My Story"}`,P=(e,t)=>{let i=document.createElement("a");i.download=`${t}.mp4`,i.href=e,i.target="_self",i.click()};var L=i(33880),W=i(39088),B=i(1372),H=i(60439);let U=async(e,t,i)=>{t(!0);try{P(e.last_export_url,e.title||"openart-story"),i()}catch(e){console.error("Download failed:",e),(0,d.yv)("Failed to download video",{variant:"error"})}finally{setTimeout(()=>t(!1),500)}},O=(e,t,i)=>{let r=E(t,z(e.title),Z(null==e?void 0:e.id));r&&window.open(r,"_blank"),i()},$=async(e,t,i)=>{(0,d.yv)(i?"Story published":"Story unpublished",{variant:"success"}),(0,H.tO)(e,{...t,is_published:i}),await D(e,t.id)},N=async(e,t,i,r)=>{try{await t({is_published:!0}),await $(i,e,!0)}catch(e){console.error("Publish failed:",e),(0,d.yv)("Failed to publish story",{variant:"error"})}},G=async(e,t)=>{let i=z(e.title),r=Z(null==e?void 0:e.id),n={title:e.title||"My OpenArt Story",text:i,url:r};await M(n)||(0,d.yv)("Unable to share due to system restrictions, please try other sharing options",{variant:"warning"}),t()},V=async(e,t)=>{if(!e.last_export_url){(0,d.yv)("No video available to share",{variant:"warning"});return}let i=z(e.title),r=await R(e.last_export_url,e.title||"openart-story");if(r){let t={title:e.title||"My OpenArt Story",text:i,files:[r]};await M(t)||(0,d.yv)("Unable to share due to system restrictions, please try other sharing options",{variant:"warning"})}t()},K=e=>{var t;let{shareState:i,currentAction:r,selectedPlatform:o,removeWatermark:a,setSelectedPlatform:s,setExportOptionsView:p,goBack:x}=S(),{story:g,shouldShowExportOptions:f}=I(),[v]=(0,B.oH)(),[y,b]=(0,n.useState)(null),[C,w]=(0,n.useState)(null),[j,F]=(0,n.useState)(!1),[k,_]=(0,n.useState)(0),[M,R]=(0,n.useState)(null),[P,H]=(0,n.useState)(!1),K=(0,l.NL)(),{data:Y}=(0,W.w)(y),{updateStoryAsync:q,isLoading:X}=(0,L.MH)((null==g?void 0:g.id)||""),J=(0,n.useCallback)(()=>{var e;return(null==g?void 0:null===(e=g.metadata)||void 0===e?void 0:e.duration)?.5*g.metadata.duration+2:30},[null==g?void 0:null===(t=g.metadata)||void 0===t?void 0:t.duration]),Q=(0,n.useCallback)(()=>{let e=J(),t=Date.now(),i=setInterval(()=>{let i;let r=(Date.now()-t)/1e3,n=Math.min(r/e*100,95);i=n>=95?Math.min(95+Math.min((r-.95*e)/(.5*e)*4,4),99):n,_(e=>Math.max(e,i))},200);return()=>clearInterval(i)},[J]);(0,n.useEffect)(()=>{if(j&&C)return Q()},[j,C,Q]);let ee=(0,n.useCallback)(()=>{b(null),w(null),F(!1),_(0)},[]),et=(0,n.useCallback)(async(e,t)=>{try{if(F(!0),_(e=>Math.max(e,2)),w(e),h(e,t)){let e=m();e&&R(e)}let i={story_id:null==g?void 0:g.id,remove_watermark:a},r=c(e);r&&(i.extra_steps=r);let n=await v(i);b(n)}catch(t){console.error(`Failed to start ${e}:`,t),ee(),(0,d.yv)(`Failed to ${e}. Please try again.`,{variant:"error"})}},[null==g?void 0:g.id,v,ee,a]);(0,n.useEffect)(()=>{if(!y||!Y||!C||!g||Y.workflowRunId!==y)return;let t=null;if("completed"===Y.status)_(100),t=setTimeout(async()=>{let t=Y.story;if(t)switch(C){case"download":await U(t,H,e);break;case"generate_link":if(o&&M&&!M.closed){let e=E(o,z(t.title),Z(t.id));e&&(M.location.href=e)}else if(!o){let e=Z(null==g?void 0:g.id);await A(e)?(0,d.yv)("Link copied to clipboard",{variant:"success"}):(0,d.yv)("Failed to copy link",{variant:"error"})}e();break;case"publish":await $(K,t,!0);break;case"share_link_native":await G(t,e);break;case"share_file_native":await V(t,e)}await D(K,null==g?void 0:g.id),ee()},1e3);else if(Y.status.startsWith("failed"))console.error(`${C} failed:`,Y),M&&!M.closed&&M.close(),ee(),(0,d.yv)(`Failed to ${C}. Please try again.`,{variant:"error"});else if(Y.status.startsWith("processing")){F(!0);let e=u(Y.status);_(t=>Math.max(t,e))}return()=>{t&&clearTimeout(t)}},[y,Y,null==g?void 0:g.id]);let ei=(0,n.useCallback)(async()=>{if(!g)return;let e=Z(null==g?void 0:g.id);await A(e)?(0,d.yv)("Link copied to clipboard",{variant:"success"}):(0,d.yv)("Failed to copy link. Please try selecting and copying manually.",{variant:"error"})},[g]),er=(0,n.useCallback)(async()=>{g&&(f?p("download"):await U(g,H,e))},[g,f,p,e]),en=(0,n.useCallback)(async()=>{g&&(f?p("generate_link"):o?O(g,o,e):ei())},[g,f,p,o,e,ei]),eo=(0,n.useCallback)(async()=>{if(g){if("main"===i){p("publish");return}try{g.is_published?(await q({is_published:!1}),await $(K,g,!1)):f&&g.is_export_outdated?await et("publish"):await N(g,q,K,e)}catch(e){console.error("Publish/Unpublish failed:",e),(0,d.yv)("Failed to update story",{variant:"error"})}}},[g,i,f,p,q,K,e,et]),ea=(0,n.useCallback)(async t=>{if(g){if(s(t),g.is_public&&!f){O(g,t,e);return}f?p("generate_link"):O(g,t,e)}},[g,f,s,p,e]),es=(0,n.useCallback)(async()=>{g&&(f?p("share_link_native"):await G(g,e))},[g,f,p,e]),el=(0,n.useCallback)(async()=>{g&&(f?p("share_file_native"):await V(g,e))},[g,f,p,e]);return{handleCopyLink:ei,handleDownload:er,handleGenerateLink:en,handlePublishOrUnpublish:eo,handleSocialShare:ea,handleNativeLinkShare:es,handleNativeVideoShare:el,handleBack:(0,n.useCallback)(()=>{x()},[x]),handleReExport:(0,n.useCallback)(async()=>{g&&await et(r,o||void 0)},[g,et,r,o]),handleUseLastExport:(0,n.useCallback)(async()=>{if(g)switch(r){case"download":await U(g,H,e);break;case"generate_link":o&&O(g,o,e);break;case"publish":await N(g,q,K,e);break;case"share_link_native":await G(g,e);break;case"share_file_native":await V(g,e)}},[g,r,o,q,K,e]),isProcessing:j,progress:k,isNativeShareSupported:T,isPublishLoading:X,isDownloadLoading:P}};var Y=i(65893),q=i(35019),X=i(21461),J=i(66686),Q=i(71137),ee=i(74701),et=i(62935),ei=i(42232);let er=(0,s.ZP)(J.Z)({display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px",borderRadius:"8px",backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"background-color 0.2s ease","&:hover":{backgroundColor:"#2E2E2E"},"&:disabled":{opacity:.6,cursor:"not-allowed"},"& .icon-container":{width:"46px",height:"46px",borderRadius:"50%",backgroundColor:"#2E2E2E",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"4px"}}),en=(0,s.ZP)(Q.Z)({color:"#E0E0E0",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px",fontFamily:"Inter",fontSize:"14px",fontWeight:600,lineHeight:"22px",textTransform:"none","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),eo=(0,s.ZP)(Q.Z)({backgroundColor:"#1856D0",color:"#FFFFFF",padding:"7px 12px",borderRadius:"8px",fontFamily:"Inter",fontSize:"14px",fontWeight:600,textTransform:"none","&:hover":{backgroundColor:"#1447B3"},"&.secondary":{backgroundColor:"#030B1D",color:"#FFFFFF",border:"1px solid rgba(255, 255, 255, 0.2)","&:hover":{backgroundColor:"#0A1A30"}},"&.highlighted":{backgroundColor:"#1856D0",color:"#FFFFFF",border:"none","&:hover":{backgroundColor:"#1447B3"}}}),ea=e=>{let{onClick:t,disabled:i=!1,className:n,sx:o,children:a,progress:s=0,isProcessing:l=!1}=e;return(0,r.jsxs)(eo,{onClick:t,disabled:i,className:n,sx:{...o,position:"relative",overflow:"hidden"},children:[!0===l&&(0,r.jsx)(Y.Z,{sx:{position:"absolute",top:0,left:0,height:"100%",width:`${s}%`,borderRadius:"8px",backgroundColor:"#3e74dd",transition:"width 0.3s ease",zIndex:0}}),(0,r.jsx)(Y.Z,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center",gap:1},children:a})]})},es=(0,s.ZP)(ee.Z)(e=>{let{theme:t}=e;return{width:33,height:18,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:1.5,"&.Mui-checked":{transform:"translateX(15px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#0929F7"}}},"& .MuiSwitch-thumb":{boxShadow:"none",width:15,height:15,borderRadius:"50%",backgroundColor:"#A0A0A0",transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:75,opacity:1,backgroundColor:"#4A4A4A",boxSizing:"border-box"}}}),el=e=>{let{title:t,onBack:i}=e;return(0,r.jsx)(q.Z,{direction:"row",alignItems:"center",spacing:1,children:i?(0,r.jsxs)(en,{onClick:i,size:"small",children:[(0,r.jsx)(ei.Z,{icon:"ph:arrow-left",width:16,height:16}),"Back"]}):(0,r.jsx)(et.Z,{sx:{color:"#E0E0E0",fontFamily:"Inter",fontSize:"14px",fontWeight:600,lineHeight:"22px"},children:t})})},ed=e=>{let{icon:t,label:i,onClick:n,textColor:o="#AAAAAA",isLoading:a=!1,disabled:s=!1}=e;return(0,r.jsxs)(er,{onClick:n,disabled:a||s,children:[(0,r.jsx)(Y.Z,{className:"icon-container",children:t}),(0,r.jsx)(et.Z,{sx:{color:o,fontFamily:"Inter",fontSize:"12px",fontWeight:500,lineHeight:"19px",textAlign:"center"},children:i})]})},ec=e=>{let{story:t}=e,{story:i}=I(),n=t||i;return n&&(null==n?void 0:n.last_export_url)!==null&&(null==n?void 0:n.last_export_url)!==void 0&&(null==n?void 0:n.last_export_url)!==""?(0,r.jsxs)(q.Z,{spacing:1,children:[(0,r.jsx)(et.Z,{sx:{color:"#FFFFFF",fontFamily:"Inter",fontSize:"14px",fontWeight:600,lineHeight:"17px"},children:"Preview Last Export"}),(0,r.jsx)(Y.Z,{sx:{width:"100%",height:"169px",border:"1px solid #444444",borderRadius:"12px",overflow:"hidden",position:"relative"},children:(0,r.jsx)("video",{controls:!0,preload:"auto",loop:!0,playsInline:!0,poster:n.last_export_thumbnail_url,"aria-label":n.title||"Story video",style:{width:"100%",height:"100%",objectFit:"contain",display:"block"},src:n.last_export_url,children:"Your browser does not support the video tag."})})]}):null},eu=()=>(0,r.jsxs)(q.Z,{direction:"row",alignItems:"center",gap:.75,children:[(0,r.jsx)(ei.Z,{icon:"ph:warning",width:20,height:20,color:"#F1C21B"}),(0,r.jsx)(et.Z,{sx:{color:"#F1C21B",fontFamily:"Inter",fontSize:"12px",fontWeight:500,lineHeight:"14px"},children:"Older export detectedâ€”export again below to update."})]}),ep=e=>{let{checked:t,onChange:i}=e;return(0,r.jsxs)(q.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsxs)(q.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,r.jsx)(ei.Z,{icon:"ph:sparkle",width:20,height:20,color:"#16D866"}),(0,r.jsx)(et.Z,{sx:{color:"#FFFFFF",fontFamily:"Inter",fontSize:"14px",fontWeight:600,lineHeight:"12px"},children:"Remove Watermark"})]}),(0,r.jsx)(es,{checked:t,onChange:e=>i(e.target.checked)})]})};var eh=i(79267),em=i(45137);let ex=e=>({twitter:"Twitter",linkedin:"LinkedIn",reddit:"Reddit"})[e]||e.charAt(0).toUpperCase()+e.slice(1),eg=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;switch(e){case"twitter":return(0,r.jsx)(eh.M6y,{width:t,height:t});case"linkedin":return(0,r.jsx)(ei.Z,{icon:"mdi:linkedin",width:t,height:t,color:"#0077B5"});case"reddit":return(0,r.jsx)(eh.DVi,{width:t,height:t});default:return(0,r.jsx)(ei.Z,{icon:"ph:share-network",width:t,height:t})}},ef=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;switch(e){case"download":return(0,r.jsx)(ei.Z,{icon:"ph:download-simple",width:t,height:t});case"publish":return(0,r.jsx)(eh.w0w,{size:t,color:"#FFFFFF"});case"unpublish":return(0,r.jsx)(ei.Z,{icon:"ph:eye-slash",width:t,height:t,color:"#FFFFFF"});default:return(0,r.jsx)(ei.Z,{icon:"ph:share-network",width:t,height:t})}},ev=e=>{let{onDownload:t,onLink:i,onPublishOrUnpublish:n,onSocialShare:o,onNativeLinkShare:a,onNativeVideoShare:s,isOwner:l=!1,isNativeShareSupported:d}=e,{story:c}=I();if(!c)return null;let u=c.is_published||!1,p=null!==c.last_export_url&&void 0!==c.last_export_url&&""!==c.last_export_url,h=e=>{em.B("story_shared_clicked",{story_id:c.id,story_type:c.category_id,share_method:`social_${e}`}),o(e)};return(0,r.jsxs)(Y.Z,{children:[(0,r.jsx)(el,{title:"Share"}),(0,r.jsxs)(q.Z,{spacing:2,sx:{mt:3},children:[(0,r.jsxs)(q.Z,{direction:"row",spacing:2,justifyContent:"center",children:[(0,r.jsx)(ed,{icon:(0,r.jsx)(eh.l8y,{size:22,color:"#FFFFFF"}),label:"Download",onClick:()=>{em.B("story_shared_clicked",{story_id:c.id,story_type:c.category_id,share_method:"download"}),t()}}),(0,r.jsx)(ed,{icon:(0,r.jsx)(eh.lgH,{size:22,color:"#FFFFFF"}),label:"Copy Link",onClick:()=>{em.B("story_shared_clicked",{story_id:c.id,story_type:c.category_id,share_method:"copy_link"}),i()}}),l?(0,r.jsx)(ed,{icon:ef(u?"unpublish":"publish",22),label:u?"Unpublish":"Publish",onClick:()=>{em.B("story_shared_clicked",{story_id:c.id,story_type:c.category_id,share_method:u?"unpublish":"publish"}),n()},textColor:u?"#FA4D56":void 0}):null]}),(0,r.jsx)(q.Z,{direction:"row",spacing:1,justifyContent:"center",children:["twitter","linkedin","reddit"].map(e=>(0,r.jsx)(ed,{icon:eg(e,22),label:ex(e),onClick:()=>h(e)},e))}),d()&&p?(0,r.jsxs)(q.Z,{direction:"row",spacing:1,justifyContent:"center",children:[(0,r.jsx)(ed,{icon:(0,r.jsx)(ei.Z,{icon:"ph:share-network",width:22,height:22,color:"#FFFFFF"}),label:"Share Link Via..",onClick:()=>{em.B("story_shared_clicked",{story_id:c.id,story_type:c.category_id,share_method:"native_link_share"}),a()},textColor:"#E0E0E0"}),(0,r.jsx)(ed,{icon:(0,r.jsx)(ei.Z,{icon:"ph:video",width:22,height:22,color:"#FFFFFF"}),label:"Share File Via..",onClick:()=>{em.B("story_shared_clicked",{story_id:c.id,story_type:c.category_id,share_method:"native_video_share"}),s()},textColor:"#E0E0E0"})]}):null]})]})},ey=e=>{let{onBack:t,onReExport:i,onUseLastExport:n,onPublishOrUnpublish:o,onCopyLink:a,isPublishLoading:s=!1,isDownloadLoading:l=!1,isProcessing:d=!1,isOwner:c=!1,progress:u=0}=e,{currentAction:p,removeWatermark:h,setRemoveWatermark:m,selectedPlatform:x}=S(),{story:g,shouldHighlightBottomButton:f}=I();if(!g)return null;let v=null!==g.last_export_url&&void 0!==g.last_export_url&&""!==g.last_export_url,y=c&&!["share_link_native","share_file_native"].includes(p),b=g.is_published||!1,C=()=>"generate_link"===p?x?`Share on ${ex(x)}`:"Copy link":"share_link_native"===p?"Share last export":"Download Last Export";return(0,r.jsx)(Y.Z,{children:(0,r.jsxs)(q.Z,{spacing:2,children:[(0,r.jsx)(el,{title:(()=>{switch(p){case"download":return"Download Video";case"generate_link":return x?`Share on ${ex(x)}`:"Copy Link";case"publish":return"Publish Story";case"share_link_native":return"Share Link";case"share_file_native":return"Share Video";default:return"Share"}})(),onBack:t}),g.is_export_outdated&&c?(0,r.jsx)(eu,{}):null,"publish"===p&&(0,r.jsx)(q.Z,{direction:"row",spacing:2,justifyContent:"center",children:[{action:"publish",disabled:b||s},{action:"unpublish",disabled:!b||s}].map(e=>{let{action:t,disabled:i}=e,n="unpublish"===t;return(0,r.jsx)(eo,{onClick:o,disabled:i,sx:{flex:1,backgroundColor:i?"#030B1D":n?"#FA4D56":"#1856D0",color:i?"#666666":"#FFFFFF",border:i?"1px solid #444444":"none","&:hover":{backgroundColor:i?"#030B1D":n?"#E53E3E":"#1447B3"},"&:disabled":{backgroundColor:"#030B1D",color:"#666666"}},children:s&&b===n?(0,r.jsx)(ei.Z,{icon:"eos-icons:loading",width:16,height:16}):(0,r.jsxs)(q.Z,{direction:"row",alignItems:"center",spacing:1,children:[ef(t),(0,r.jsx)("span",{children:ex(t)})]})},t)})}),v&&"generate_link"===p&&!x?(0,r.jsxs)(q.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(X.Z,{size:"small",value:Z(g.id),sx:{flex:1,"& .MuiOutlinedInput-root":{backgroundColor:"transparent","& fieldset":{borderColor:"#444444"},"& input":{color:"#CCCCCC",fontFamily:"Inter",fontSize:"12px",fontWeight:500,padding:"8px"}}},InputProps:{readOnly:!0}}),(0,r.jsxs)(eo,{onClick:a||n,className:f?"secondary":"highlighted",sx:{minWidth:"98px",gap:"4px"},children:[(0,r.jsx)(ei.Z,{icon:"ph:copy",width:16,height:16}),C()]})]}):"publish"!==p&&v&&(0,r.jsx)(eo,{onClick:n,className:f?"secondary":"highlighted",sx:{width:"100%"},disabled:"download"===p&&l,children:"download"===p&&l?(0,r.jsx)(ei.Z,{icon:"eos-icons:loading",width:16,height:16}):(0,r.jsxs)(q.Z,{direction:"row",alignItems:"center",spacing:1,children:["download"===p?ef("download"):x?eg(x):(0,r.jsx)(ei.Z,{icon:"ph:share-network",width:16,height:16}),(0,r.jsx)("span",{children:C()})]})}),(0,r.jsx)(ec,{}),y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ep,{checked:h,onChange:m}),(0,r.jsx)(ea,{onClick:i,className:f?"highlighted":"secondary",sx:{width:"100%"},disabled:d,progress:u,isProcessing:d,children:d?(0,r.jsxs)(q.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,r.jsx)(ei.Z,{icon:"eos-icons:loading",width:16,height:16}),(0,r.jsx)("span",{children:"Exporting..."})]}):(0,r.jsxs)(q.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,r.jsx)(ei.Z,{icon:"ph:arrows-clockwise",width:16,height:16}),(0,r.jsx)("span",{children:{download:"Export Again and Download",generate_link:x?"Export Again and Share":"Export Again and Copy Link",publish:"Export Again and Publish",share_link_native:"Export Again and Share",share_file_native:"Export Again and Share"}[p||""]||"Export Again"})]})})]}):null]})})};var eb=i(22289);let eC=(0,s.ZP)(a.ZP)({"& .MuiPopover-paper":{backgroundColor:"#1A1A1A",border:"1px solid #444444",borderRadius:"12px",padding:"20px",minWidth:"320px",maxWidth:"360px",boxShadow:"0px 8px 24px rgba(0, 0, 0, 0.4)"}});var ew=e=>{let{open:t,anchorEl:i,onClose:a,story:s,openDirectlyToExportOptions:l=!1}=e,d=(0,o.useRouter)(),{data:c,isLoggedIn:u}=(0,eb.$_)(),p=(null==s?void 0:s.user_id)===(null==c?void 0:c.id),{shareState:h,resetState:m,setExportOptionsView:x}=S(),{initializeProps:g}=I(),f=K(a),v=()=>{let{asPath:e}=d||{},t=`/signin?callbackUrl=${encodeURIComponent(e)}`;d.push(t)},y=e=>function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];if(!u){v();return}return e(...i)};return(0,n.useEffect)(()=>{t&&(g(s,p),l&&x("download"))},[t,s,p,g,l,x]),(0,n.useEffect)(()=>{t||m()},[t,m]),(0,r.jsx)(eC,{open:t,anchorEl:i,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:"export_options"===h?(0,r.jsx)(ey,{onBack:l?void 0:f.handleBack,onReExport:f.handleReExport,onUseLastExport:f.handleUseLastExport,onPublishOrUnpublish:f.handlePublishOrUnpublish,onCopyLink:f.handleCopyLink,isPublishLoading:f.isPublishLoading,isDownloadLoading:f.isDownloadLoading,isProcessing:f.isProcessing,isOwner:p,progress:f.progress}):(0,r.jsx)(ev,{onDownload:y(f.handleDownload),onLink:y(f.handleGenerateLink),onPublishOrUnpublish:y(f.handlePublishOrUnpublish),onSocialShare:y(f.handleSocialShare),onNativeLinkShare:y(f.handleNativeLinkShare),onNativeVideoShare:y(f.handleNativeVideoShare),isOwner:p,isNativeShareSupported:f.isNativeShareSupported})})}},62930:function(e,t,i){i.d(t,{E:function(){return R}});var r=i(52676),n=i(75271),o=i(79574),a=i.n(o),s=i(46974),l=i(58684),d=i(65893),c=i(62935),u=i(35019),p=i(48945),h=i(68096),m=i(77403),x=i(75616),g=i(39204),f=i(83469),v=i(20839),y=i(54524),b=i(45887),C=i(25162),w=i(85245),j=i(79267),F=i(1372),k=i(42232),_=i(45137),S=i(60439);let I=e=>{let{storyStatus:t}=e;return(0,r.jsxs)(d.Z,{sx:{height:"100%",width:"100%",px:"40px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(253deg, #202020 -15.03%, #393939 59.06%, #202020 117.83%), #2E2E2E"},children:[(0,r.jsx)(a(),{src:"https://cdn.openart.ai/story/home/my/storyErrorStatus.png",alt:"Story card error",width:69,height:60}),(0,r.jsx)(c.Z,{sx:{mt:1,color:"#888",textAlign:"center",fontFamily:"Inter",fontSize:"12px",fontWeight:500,lineHeight:"normal"},children:(0,C.MZ)(t).description})]})},Z=()=>(0,r.jsx)(d.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(253deg, #202020 -15.03%, #393939 59.06%, #202020 117.83%), #2E2E2E"},children:(0,r.jsx)(k.Z,{icon:"fa6-solid:compass-drafting",width:32,height:32,color:"#666666"})}),E=e=>{let{title:t,formattedDate:i,typeImage:n}=e;return(0,r.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{p:0,px:{xs:1,sm:1.5},pt:1,gap:1},children:[(0,r.jsx)(d.Z,{sx:{flex:"0 0 auto"},children:(0,r.jsx)(a(),{src:n,alt:"Story card error",width:20,height:20})}),(0,r.jsxs)(d.Z,{sx:{flex:"1 1 auto",overflow:"hidden"},children:[(0,r.jsx)(c.Z,{variant:"subtitle1",component:"h3",sx:{color:"#FFF",fontSize:{xs:"12px",sm:"14px"},fontStyle:"normal",fontWeight:600,lineHeight:"22px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t,children:t}),(0,r.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:{xs:"10px",sm:"12px"}},children:i})]})]})},A=e=>{let{story:t,onDelete:i,isDeleting:n,setWorkflowRunId:o,setIsRegenerating:a}=e,h=(0,s.useRouter)(),[m,x]=(0,F.oH)(),g=["failed:generating_timeline","failed:exporting_video","failed:user_exporting_video"].includes(t.status),f=["failed:exporting_video","failed:generating_images","failed:generating_timeline","failed:user_exporting_video","failed:generating_videos"].includes(t.status),v=async()=>{a(!0),o(await m({story_id:t.id,force_music_reselection:!0,rebuild_timeline:!0}))};return(0,r.jsxs)(u.Z,{direction:"row",justifyContent:g?"space-between":"center",alignItems:"center",sx:{p:0,px:1.5,pt:2.2,gap:1},children:[g?(0,r.jsxs)(d.Z,{sx:{position:"relative"},children:[(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",padding:"10px 12px",width:116,height:36,backgroundColor:"#013FFE",border:"1px solid rgba(255, 255, 255, 0.16)",borderRadius:"8px",backdropFilter:"blur(23.5px)",cursor:"pointer","&:hover":{backgroundColor:"#0235e6"}},loading:x,onClick:v,children:!x&&(0,r.jsx)(c.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:"14px",lineHeight:"1.21em",color:"#FFFFFF",textAlign:"center"},children:"Recover"})}),(0,r.jsx)(p.Z,{label:"FREE",size:"small",sx:{position:"absolute",top:-6,right:-6,height:16,minWidth:28,background:"linear-gradient(135deg, #00C851 0%, #007E33 100%)",color:"#FFFFFF",fontSize:"10px",fontWeight:700,fontFamily:"Inter",borderRadius:"8px",zIndex:10,"& .MuiChip-label":{px:"6px",py:"2px"}}})]}):null,f?(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",padding:"10px 12px",width:116,height:36,backgroundColor:"#1A1A1A",border:"1px solid rgba(255, 255, 255, 0.16)",borderRadius:"8px",backdropFilter:"blur(23.5px)",cursor:"pointer","&:hover":{backgroundColor:"#2A2A2A"}},onClick:()=>{(0,_.B)("editor_opened",{story_id:null==t?void 0:t.id,opened_from:"story_card"}),h.push(`/story/editor?story_id=${null==t?void 0:t.id}`)},children:(0,r.jsx)(c.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:"14px",lineHeight:"1.21em",color:"#FFFFFF",textAlign:"center"},children:"Open Editor"})}):null,!(f||g)&&(0,r.jsx)(l.Z,{loading:n,sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",padding:"10px 12px",width:116,height:36,backgroundColor:"#1A1A1A",border:"1px solid rgba(255, 255, 255, 0.16)"},onClick:()=>{null==i||i(t.id)},children:(0,r.jsx)(c.Z,{children:"Delete"})})]})},M=e=>{let{icon:t,onClick:i,isLoading:n}=e;return(0,r.jsx)(l.Z,{loading:n,disableRipple:!0,disableElevation:!0,sx:{width:24,height:24,p:0,minWidth:"unset",backgroundColor:"#262626",borderRadius:"3.75px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"none",outline:"none",boxShadow:"none","&:hover":{backgroundColor:"#404040",boxShadow:"none"},"&:focus":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&.Mui-disabled":{backgroundColor:"#262626",color:"inherit"},"& .MuiLoadingButton-loadingIndicator":{color:"#FFFFFF",position:"absolute"},"&.MuiLoadingButton-loading":{color:"transparent"}},onClick:e=>{e.stopPropagation(),e.preventDefault(),i(e)},children:t})};function R(e){var t;let{story:i,id:o,title:a,createdAt:l,isOpenPreview:F,onOpenPreview:k,onDelete:R,isDeleting:T,onExport:D,isRebuilding:z,workflowRunId:P,onExportComplete:L}=e,W=null==i?void 0:null===(t=i.status)||void 0===t?void 0:t.startsWith("processing:"),[B,H]=(0,n.useState)(!1),[U,O]=(0,n.useState)(!1),[$,N]=(0,n.useState)(!1),[G,V]=(0,n.useState)(!1),[K,Y]=(0,n.useState)(null),[q,X]=(0,n.useState)(!1),[J,Q]=(0,n.useState)(null),ee=(0,x.NL)(),{mutateAsync:et}=(0,w.GH)(),ei=(0,s.useRouter)(),[er,en]=(0,n.useState)(null),eo=P||er,ea="object"==typeof l?`Created on ${new Date(1e3*l._seconds+l._nanoseconds/1e6).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`:`Created on ${l}`,es=null==i?void 0:i.last_export_thumbnail_url,el=(0,n.useMemo)(()=>(0,C.v4)(null==i?void 0:i.status)?(0,r.jsx)(I,{storyStatus:null==i?void 0:i.status}):(null==i?void 0:i.status.startsWith("draft"))&&!es?(0,r.jsx)(Z,{}):W?(0,r.jsx)(v.Z,{text:(0,b.Xe)(null==i?void 0:i.status)}):es?(0,r.jsx)(g.E.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:30},style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(0,r.jsx)(h.Z,{component:"img",image:es,alt:a,sx:{maxHeight:"100%",maxWidth:"100%",width:"100%",height:"100%",objectFit:"cover"}})}):(0,r.jsx)(d.Z,{sx:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.900"},children:(0,r.jsx)(c.Z,{variant:"body2",color:"text.secondary",children:"No preview"})}),[W,null==i?void 0:i.status,es,a]),ed=(0,n.useMemo)(()=>(0,b.j7)(null==i?void 0:i.category_id),[null==i?void 0:i.category_id]),ec=(0,n.useMemo)(()=>(0,C.v4)(null==i?void 0:i.status)?(0,r.jsx)(A,{story:i,setWorkflowRunId:en,setIsRegenerating:H,isDeleting:T,onDelete:async()=>{await (null==R?void 0:R(o))}}):(0,r.jsx)(E,{title:a,formattedDate:(null==i?void 0:i.is_template)?"By OpenArt":ea,typeImage:ed}),[R,ea,o,T,i,a,ed]),eu=(0,n.useMemo)(()=>(0,C.Jc)(null==i?void 0:i.status)?(0,r.jsxs)(u.Z,{className:"action-buttons",direction:"column",justifyContent:"center",alignItems:"center",spacing:1,sx:{position:"absolute",top:8,right:8,zIndex:2,opacity:0,visibility:"visible",transition:"opacity 0.3s ease-in-out, visibility 0.3s ease-in-out"},children:[(0,r.jsx)(M,{icon:(0,r.jsx)(j.G2w,{}),isLoading:U,onClick:async e=>{e.stopPropagation(),e.preventDefault();try{if(O(!0),(0,_.B)("editor_opened",{story_id:null==i?void 0:i.id,opened_from:"story_card"}),null==i?void 0:i.is_template){let e=await et({templateStoryId:i.id,operation:"edit"});window.open(`/story/editor?story_id=${e.id}`,"_blank")}else window.open(`/story/editor?story_id=${o}`,"_blank")}finally{O(!1)}}}),(null==i?void 0:i.is_template)?null:(0,r.jsx)(M,{icon:(0,r.jsx)(j.wg6,{}),onClick:e=>{Y(e.currentTarget),V(!0)}}),(null==i?void 0:i.is_template)?null:(0,r.jsx)(M,{isLoading:z,icon:(0,r.jsx)(j.l8y,{}),onClick:async e=>{Q(e.currentTarget),X(!0)}}),(0,r.jsx)(M,{icon:(0,r.jsx)(j.ttv,{}),isLoading:T||$,onClick:async()=>{try{(null==i?void 0:i.is_template)?(N(!0),await et({templateStoryId:i.id,operation:"delete"})):await (null==R?void 0:R(o))}finally{N(!1)}}})]}):(0,r.jsx)(u.Z,{className:"action-buttons",direction:"column",justifyContent:"center",alignItems:"center",spacing:1,sx:{position:"absolute",top:8,right:8,zIndex:2,opacity:0,visibility:"visible",transition:"opacity 0.3s ease-in-out, visibility 0.3s ease-in-out"},children:(0,r.jsx)(M,{icon:(0,r.jsx)(j.ttv,{}),isLoading:T||$,onClick:async()=>{try{(null==i?void 0:i.is_template)?(N(!0),await et({templateStoryId:i.id,operation:"delete"})):await (null==R?void 0:R(o))}finally{N(!1)}}})}),[null==i?void 0:i.status,null==i?void 0:i.is_template,i.id,U,z,T,$,o,et,ei,R]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.Z,{sx:{pb:1.5,width:"100%",overflow:"hidden",position:"relative",backgroundColor:"#1A1A1A",borderRadius:"8px",border:"1px solid #2E2E2E",background:"#1A1A1A","&:hover .action-buttons":{opacity:1,visibility:"visible"},cursor:"pointer"},onClick:()=>{(0,C.Jc)(null==i?void 0:i.status)?null==k||k():(null==i?void 0:i.status)==="draft"?((0,_.B)("editor_opened",{story_id:null==i?void 0:i.id,opened_from:"story_card"}),ei.push(`/story/editor?story_id=${o}`)):(null==i?void 0:i.status)==="failed"||(null==i?void 0:i.status.startsWith("failed:"))||ei.push(`/story/my/${o}`)},children:[(0,r.jsxs)(d.Z,{sx:{position:"relative",height:146,width:"100%",overflow:"hidden"},children:[el,eu,(null==i?void 0:i.is_template)?(0,r.jsx)(p.Z,{label:"Example",size:"small",sx:{position:"absolute",top:8,right:8,zIndex:3,background:"rgba(0, 0, 0, 0.58)",border:"1px solid rgba(255, 255, 255, 0.08)",backdropFilter:"blur(10.9px)",color:"rgba(255, 255, 255, 0.62)",fontFamily:"Inter",fontSize:"14px",fontWeight:600,height:"24px",borderRadius:"6px","& .MuiChip-label":{px:"8px",py:"4px"}}}):null,eo?(0,r.jsx)(f.d,{workflowRunId:eo,storyId:o,onComplete:L||(()=>{en(null),B&&((0,S.tO)(ee,i),H(!1))}),shouldAutoDownload:!F&&!B}):null]}),ec]}),(0,r.jsx)(y.Z,{open:G,anchorEl:K,onClose:()=>{V(!1),Y(null)},story:i}),(0,r.jsx)(y.Z,{open:q,anchorEl:J,onClose:()=>{X(!1),Q(null)},story:i,openDirectlyToExportOptions:!0})]})}},36857:function(e,t,i){i.d(t,{n:function(){return Z}});var r=i(52676),n=i(75271),o=i(46974),a=i.n(o),s=i(65893),l=i(62935),d=i(40174),c=i(44754),u=i(75616),p=i(53874),h=i(8765),m=i(19242),x=i(89717),g=i(71137),f=i(75783);function v(e){let{buttonText:t="Create Story",className:i}=e,[o,d]=(0,n.useState)(!1),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let u=()=>{d(!o)},p=e=>{d(!1),a().push(e)},h=[{id:"character-vlog",label:"Character vlog",icon:(0,r.jsx)(f.js,{width:13,height:15,fill:"#888888"}),path:"/story/create/vlog"},{id:"music-video",label:"Music video",icon:(0,r.jsx)(f.Eq,{width:12,height:14}),path:"/story/create/mv"},{id:"script-to-video",label:"Script to video",icon:(0,r.jsx)(f.SZ,{width:14,height:12}),path:"/story/create/script"},{id:"from-scratch",label:"From Scratch",icon:(0,r.jsx)(f.jw,{width:13,height:13}),path:"/story/editor"}];return(0,r.jsxs)(s.Z,{sx:{display:"flex",position:"relative"},ref:c,className:i,children:[(0,r.jsx)(g.Z,{variant:"contained",onClick:u,sx:{bgcolor:"#013FFE",color:"#FFFFFF",borderRadius:"4px 0px 0px 4px",py:"9px",px:"20px",textTransform:"none",fontWeight:700,fontSize:"16px",height:"44px","&:hover":{bgcolor:"#0035E0"}},children:t}),(0,r.jsx)(s.Z,{onClick:u,sx:{bgcolor:"#013FFE",borderLeft:"1px solid #1A1A1A",borderRadius:"0px 4px 4px 0px",width:"36px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer","&:hover":{bgcolor:"#0035E0"}},children:(0,r.jsx)(s.Z,{sx:{width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderTop:"4px solid #FFFFFF"}})}),o?(0,r.jsx)(s.Z,{sx:{position:"absolute",top:"52px",left:0,bgcolor:"#2E2E2E",borderRadius:"4px",padding:"8px",minWidth:"178px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3},children:h.map(e=>(0,r.jsxs)(s.Z,{onClick:()=>p(e.path),sx:{display:"flex",alignItems:"center",gap:"4px",padding:"8px 4px",borderRadius:"4px",cursor:"pointer","&:hover":{bgcolor:"rgba(255, 255, 255, 0.05)"}},children:[(0,r.jsx)(s.Z,{sx:{width:"20px",height:"20px",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.icon}),(0,r.jsx)(l.Z,{sx:{fontWeight:500,fontSize:"14px",lineHeight:"16.94px",color:"#CCCCCC"},children:e.label})]},e.id))}):null]})}var y=i(8234);function b(e){let{width:t=188,height:i=188,className:n}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 188 188",fill:"none",className:n,children:[(0,r.jsx)("g",{filter:"url(#filter0_n_131_3390)",children:(0,r.jsx)("path",{d:"M24.2466 72.3885C24.2466 69.8656 26.2918 67.8203 28.8148 67.8203H153.914C156.437 67.8203 158.482 69.8656 158.482 72.3885V147.589C158.482 152.246 154.706 156.022 150.048 156.022H32.6802C28.0225 156.022 24.2466 152.246 24.2466 147.589V72.3885Z",fill:"#1C455C"})}),(0,r.jsx)("mask",{id:"mask0_131_3390",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"21",y:"18",width:"135",height:"45",children:(0,r.jsx)("rect",{width:"134.938",height:"17.7766",rx:"4.56822",transform:"matrix(0.977859 -0.209264 -0.209264 -0.977859 23.9863 63.7305)",fill:"#D9D9D9"})}),(0,r.jsxs)("g",{mask:"url(#mask0_131_3390)",children:[(0,r.jsx)("rect",{width:"16.3599",height:"110.213",transform:"matrix(0.947423 0.319984 0.579713 -0.814821 -8.86987 58.5977)",fill:"#D9D9D9"}),(0,r.jsx)("rect",{width:"16.6745",height:"110.213",transform:"matrix(0.947423 0.319984 0.579713 -0.814821 6.63013 63.832)",fill:"#479ED0"}),(0,r.jsx)("rect",{width:"16.3599",height:"110.213",transform:"matrix(0.947423 0.319984 0.579713 -0.814821 22.427 69.168)",fill:"#0E4B6E"}),(0,r.jsx)("rect",{width:"16.6745",height:"110.213",transform:"matrix(0.947423 0.319984 0.579713 -0.814821 37.9272 74.4023)",fill:"#479ED0"}),(0,r.jsx)("rect",{width:"16.6745",height:"110.213",transform:"matrix(0.947423 0.319984 0.579713 -0.814821 69.2246 84.9727)",fill:"#479ED0"}),(0,r.jsx)("rect",{width:"16.6745",height:"110.213",transform:"matrix(0.947423 0.319984 0.579713 -0.814821 100.585 95.5645)",fill:"#479ED0"}),(0,r.jsx)("rect",{width:"16.3599",height:"110.213",transform:"matrix(0.947423 0.319984 0.579713 -0.814821 53.7251 79.7383)",fill:"#0E4B6E"}),(0,r.jsx)("rect",{width:"16.3599",height:"110.213",transform:"matrix(0.947423 0.319984 0.579713 -0.814821 85.0942 90.334)",fill:"#0E4B6E"})]}),(0,r.jsx)("mask",{id:"mask1_131_3390",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"24",y:"67",width:"135",height:"16",children:(0,r.jsx)("rect",{x:"24.2466",y:"67.8203",width:"134.236",height:"14.8947",rx:"4.56822",fill:"#D9D9D9"})}),(0,r.jsxs)("g",{mask:"url(#mask1_131_3390)",children:[(0,r.jsx)("rect",{width:"15.6447",height:"102.113",transform:"matrix(0.894096 -0.447875 0.791739 0.61086 -6.64697 77.7852)",fill:"#D9D9D9"}),(0,r.jsx)("rect",{width:"15.9455",height:"102.113",transform:"matrix(0.894096 -0.447875 0.791739 0.61086 7.34131 70.7793)",fill:"#479ED0"}),(0,r.jsx)("rect",{width:"15.6447",height:"102.113",transform:"matrix(0.894096 -0.447875 0.791739 0.61086 21.5974 63.6367)",fill:"#0E4B6E"}),(0,r.jsx)("rect",{width:"15.9455",height:"102.113",transform:"matrix(0.894096 -0.447875 0.791739 0.61086 35.5857 56.6309)",fill:"#479ED0"}),(0,r.jsx)("rect",{width:"15.9455",height:"102.113",transform:"matrix(0.894096 -0.447875 0.791739 0.61086 63.8301 42.4824)",fill:"#479ED0"}),(0,r.jsx)("rect",{width:"15.9455",height:"102.113",transform:"matrix(0.894096 -0.447875 0.791739 0.61086 92.1318 28.3047)",fill:"#479ED0"}),(0,r.jsx)("rect",{width:"15.6447",height:"102.113",transform:"matrix(0.894096 -0.447875 0.791739 0.61086 49.8423 49.4883)",fill:"#0E4B6E"}),(0,r.jsx)("rect",{width:"15.6447",height:"102.113",transform:"matrix(0.894096 -0.447875 0.791739 0.61086 78.1514 35.3066)",fill:"#0E4B6E"})]}),(0,r.jsx)("circle",{cx:"96.284",cy:"118.071",r:"19.6785",fill:"white",fillOpacity:"0.12"}),(0,r.jsx)("path",{d:"M103.359 116.801C104.057 117.363 104.057 118.427 103.359 118.989L94.3544 126.246C93.4349 126.987 92.0668 126.333 92.0668 125.152L92.0668 110.638C92.0668 109.457 93.4349 108.803 94.3544 109.544L103.359 116.801Z",fill:"#479ED0"}),(0,r.jsx)("circle",{cx:"26.3549",cy:"63.9543",r:"5.97383",fill:"#0E4B6E"}),(0,r.jsx)("circle",{cx:"26.3548",cy:"63.9537",r:"2.98692",fill:"#479ED0"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("filter",{id:"filter0_n_131_3390",x:"24.2466",y:"67.8203",width:"134.235",height:"88.2012",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,r.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"10 10",stitchTiles:"stitch",numOctaves:"3",result:"noise",seed:"2931"}),(0,r.jsx)("feColorMatrix",{in:"noise",type:"luminanceToAlpha",result:"alphaNoise"}),(0,r.jsx)("feComponentTransfer",{in:"alphaNoise",result:"coloredNoise1",children:(0,r.jsx)("feFuncA",{type:"discrete",tableValues:"1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "})}),(0,r.jsx)("feComposite",{operator:"in",in2:"shape",in:"coloredNoise1",result:"noise1Clipped"}),(0,r.jsx)("feFlood",{floodColor:"rgba(0, 0, 0, 0.25)",result:"color1Flood"}),(0,r.jsx)("feComposite",{operator:"in",in2:"noise1Clipped",in:"color1Flood",result:"color1"}),(0,r.jsxs)("feMerge",{result:"effect1_noise_131_3390",children:[(0,r.jsx)("feMergeNode",{in:"shape"}),(0,r.jsx)("feMergeNode",{in:"color1"})]})]})})]})}var C=i(58997),w=i(62930),j=i(25162),F=i(1327),k=i(80924),_=i(23252),S=i(1372),I=i(45137);function Z(e){let{stories:t,fetchNextPage:i,hasNextPage:a=!1,isFetchingNextPage:g=!1,title:f,maxItems:Z}=e,E=(0,u.NL)();(0,o.useRouter)();let{isMobile:A}=(0,k.j)(),{showModal:M}=(0,h.dd)(),[R]=(0,S.oH)(),[T]=(0,S.lj)(),D=(0,x.aT)(),[z,P]=(0,n.useState)(!1),[L,W]=(0,n.useState)(null),[B,H]=(0,n.useState)(new Map),[U,O]=(0,n.useState)(new Map),[$,N]=(0,n.useState)(new Map),{ref:G,inView:V}=(0,m.YD)({threshold:.1,triggerOnce:!1}),K=(0,n.useMemo)(()=>Z?t.slice(0,Z):t,[t,Z]),Y=(0,n.useMemo)(()=>K.filter(e=>e.status.startsWith("processing")).map(e=>e.workflow_run_id),[K]),q=(0,n.useCallback)((e,t)=>{E.setQueryData(F.Y.lists(),(0,p.Uy)(i=>{if(null==i?void 0:i.pages){for(let r of i.pages)for(let i of r.stories)if(i.workflow_run_id===e){let e=t.story;(0,j.v4)(t.status)?i.status="failed":e&&e.status!==i.status&&Object.assign(i,e);return}}}))},[]);(0,n.useEffect)(()=>{V&&i&&a&&!g&&i()},[V,i,a,g]),(0,_.i)(Y,!0,q);let X=L?K.find(e=>e.id===L.id):null,J=(0,n.useCallback)(e=>{W(e),P(!0)},[]),Q=(0,n.useCallback)(()=>{P(!1),W(null)},[]),ee=(0,n.useCallback)(()=>{L&&L.id!==K.at(-1).id&&W(K[K.indexOf(L)+1])},[L,K]),et=(0,n.useCallback)(()=>{L&&L.id!==K[0].id&&W(K[K.indexOf(L)-1])},[L,K]),ei=(0,n.useCallback)(async()=>{if(X){O(e=>new Map(e).set(X.id,!0));try{let e=await R({story_id:X.id,force_music_reselection:!0});H(t=>new Map(t).set(X.id,e))}finally{O(e=>{let t=new Map(e);return t.delete(X.id),t})}}},[X,R]),er=(0,n.useCallback)(async e=>{D.confirm({title:"Delete Story",content:"Are you sure you want to delete this Story? This action cannot be undone.",iconType:"warning",onConfirm:async()=>{N(t=>new Map(t).set(e,!0));try{if(await T(e),(null==L?void 0:L.id)===e&&z){let t=K.findIndex(t=>t.id===e),i=K[t+1]||K[t-1];i?W(i):(P(!1),W(null))}}finally{N(t=>{let i=new Map(t);return i.delete(e),i})}},onCancel:()=>{N(t=>{let i=new Map(t);return i.delete(e),i})}})},[D,T,null==L?void 0:L.id,z,K]),en=(0,n.useCallback)(e=>{H(t=>{let i=new Map(t);return i.delete(e),i}),O(t=>{let i=new Map(t);return i.delete(e),i})},[]),eo=(0,n.useCallback)(async e=>{O(t=>new Map(t).set(e,!0));try{let t=await R({story_id:e,force_music_reselection:!0});H(i=>new Map(i).set(e,t))}finally{O(t=>{let i=new Map(t);return i.delete(e),i})}},[R]),ea=(0,n.useCallback)(async()=>{if(X){if(A){M(y.$);return}(0,I.B)("editor_opened",{story_id:X.id,opened_from:"story_card_list"}),P(!1),window.open(`/story/editor?story_id=${X.id}`,"_blank")}},[X,A,M]);return(0,r.jsxs)(s.Z,{sx:{mb:4,width:"100%"},children:[f?(0,r.jsx)(l.Z,{variant:"h6",component:"h2",sx:{fontWeight:700,mb:2,color:"#E0E0E0"},children:f}):null,K.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.ZP,{container:!0,spacing:2,children:K.map(e=>(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:4,md:4,lg:3,children:(0,r.jsx)(w.E,{story:e,id:e.id,title:e.title,thumbnail:e.last_export_thumbnail_url,createdAt:e.created_at,isOpenPreview:(null==L?void 0:L.id)===e.id,onOpenPreview:()=>J(e),onExport:()=>eo(e.id),workflowRunId:B.get(e.id),onExportComplete:()=>en(e.id),isRebuilding:U.get(e.id)||!1,onDelete:()=>er(e.id),isDeleting:$.get(e.id)||!1})},e.id))}),!Z&&(a||g)?(0,r.jsx)(s.Z,{ref:G,sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:4,mb:2,py:2,height:"500px"},children:g?(0,r.jsx)(c.Z,{size:24,sx:{color:"#013FFE"}}):null}):null,X?(0,r.jsx)(C.z,{story:X,open:z,onClose:Q,workflowRunId:B.get(X.id)||null,isRebuilding:U.get(X.id)||!1,onDownload:ei,onExportComplete:()=>en(X.id),shouldAutoDownload:z,canNavigateNext:L?L.id!==K.at(-1).id:null,canNavigatePrev:L?L.id!==K[0].id:null,onNext:ee,onPrev:et,onEdit:ea,onDelete:()=>er(X.id),isDeleting:$.get(X.id)||!1,showProfile:!1,canDelete:!0}):null]}):(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:8},children:[(0,r.jsx)(s.Z,{sx:{mb:2.5,display:"flex",justifyContent:"center"},children:(0,r.jsx)(b,{})}),(0,r.jsx)(l.Z,{variant:"body1",sx:{color:"#E0E0E0",mb:2.5,textAlign:"center",fontWeight:600,fontSize:"14px",lineHeight:"20px",maxWidth:"418px"},children:"Start your storytelling journey â€” create your first story!"}),(0,r.jsx)(v,{})]})]})}},61832:function(e,t,i){i.d(t,{Z:function(){return F}});var r=i(52676),n=i(75271),o=i(46974),a=i(71137),s=i(44754),l=i(65893),d=i(62935),c=i(39204),u=i(23638),p=i(83396),h=i(14930),m=i(61271),x=i(57598),g=i(66686),f=i(35019),v=i(12073),y=function(e){let{open:t,onClose:i,onSelectMode:n}=e,o=(0,v.Z)(),s=(0,h.Z)(o.breakpoints.down("sm"));return(0,r.jsx)(m.Z,{open:t,onClose:i,maxWidth:!1,PaperProps:{sx:{backgroundColor:"#1A1A1A",border:"2px solid #2E2E2E",borderRadius:"16px",maxWidth:s?"90vw":"823px",width:"100%",maxHeight:s?"90vh":"561px",height:s?"auto":"561px",p:0,m:s?1:2}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.8)"}},children:(0,r.jsxs)(x.Z,{sx:{p:0,position:"relative"},children:[(0,r.jsx)(g.Z,{onClick:i,sx:{position:"absolute",top:16,right:16,width:30,height:30,backgroundColor:"#101010",color:"#CCCCCC",borderRadius:"24px",zIndex:1,"&:hover":{backgroundColor:"#202020"}},children:(0,r.jsx)(p.Z,{sx:{fontSize:10}})}),(0,r.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:s?"32px":"46px",py:s?4:"173px",width:"100%",height:"100%"},children:[(0,r.jsx)(d.Z,{variant:"h5",sx:{fontFamily:"Inter, sans-serif",fontWeight:500,fontSize:s?"20px":"24px",lineHeight:"19.16px",color:"#FFFFFF",textAlign:"center"},children:"Choose how you want to create"}),(0,r.jsxs)(f.Z,{direction:s?"column":"row",spacing:s?"24px":"46px",sx:{alignItems:"center",width:"100%",justifyContent:"center"},children:[(0,r.jsxs)(a.Z,{onClick:()=>n("list"),sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",width:s?"140px":"160px",height:"auto",backgroundColor:"transparent",border:"none",borderRadius:0,cursor:"pointer",textTransform:"none",p:2,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.04)",borderRadius:"8px"}},children:[(0,r.jsx)(l.Z,{sx:{width:s?"80px":"96px",height:s?"80px":"96px",backgroundColor:"#2E2E2E",borderRadius:"9.1px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:(0,r.jsx)(l.Z,{component:"img",src:"https://cdn.openart.ai/story/home/my/listViewIcon.png",alt:"List View",sx:{width:"100%",height:"100%",objectFit:"contain"}})}),(0,r.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter, sans-serif",fontWeight:700,fontSize:s?"13px":"14.21px",lineHeight:"19.16px",color:"#FFFFFF",mb:"4px"},children:"Write & Generate"}),(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter, sans-serif",fontWeight:500,fontSize:s?"12px":"14px",lineHeight:"19.16px",color:"#AAAAAA"},children:"Storyboard"})]})]}),(0,r.jsxs)(a.Z,{onClick:()=>n("video-editor"),sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",width:s?"140px":"160px",height:"auto",backgroundColor:"transparent",border:"none",borderRadius:0,cursor:"pointer",textTransform:"none",p:2,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.04)",borderRadius:"8px"}},children:[(0,r.jsx)(l.Z,{sx:{width:s?"80px":"96px",height:s?"80px":"96px",backgroundColor:"#2E2E2E",borderRadius:"9.1px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:(0,r.jsx)(l.Z,{component:"img",src:"https://cdn.openart.ai/story/home/my/videoEditorIcon.png",alt:"Video Editor",sx:{width:"100%",height:"100%",objectFit:"contain"}})}),(0,r.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter, sans-serif",fontWeight:700,fontSize:s?"13px":"14.21px",lineHeight:"19.16px",color:"#FFFFFF",mb:"4px"},children:"Upload & Edit"}),(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter, sans-serif",fontWeight:500,fontSize:s?"12px":"14px",lineHeight:"19.16px",color:"#AAAAAA"},children:"Timeline"})]})]})]})]})]})})},b=i(33880),C=i(38118),w=i(80924),j=i(45137),F=function(e){let{title:t,titleNode:i,description:p,urlToJump:h,buttonText:m,isFromScratchCard:x,cardBg:g,cardMainImg:f,hoverBagVideo:v,hoverTitle:F,hoverBagVideoPoster:k}=e,_=(0,n.useRef)(null),S=(0,n.useRef)(null),[I,Z]=(0,n.useState)(!1),E=(0,C.k)(),{isMobile:A,isTouchDevice:M}=(0,w.j)(),[R,T]=(0,n.useState)("idle"),[D,z]=(0,n.useState)(!1),[P,L]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!v||A||M)return;let e=()=>{"complete"===document.readyState&&z(!0)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>window.removeEventListener("load",e);e()},[v,A,M]);let W=(0,n.useCallback)(()=>{T("loading")},[]),B=(0,n.useCallback)(()=>{T("ready")},[]),H=(0,n.useCallback)(()=>{T("error"),console.error("Video failed to load:",v)},[v]);(0,n.useEffect)(()=>{let e=S.current;if(e&&D)return e.addEventListener("loadstart",W),e.addEventListener("canplaythrough",B),e.addEventListener("error",H),()=>{e.removeEventListener("loadstart",W),e.removeEventListener("canplaythrough",B),e.removeEventListener("error",H)}},[D,W,B,H]);let U=(0,n.useCallback)(async()=>{let e=S.current;if(e&&"ready"===R)try{e.currentTime>=e.duration-.5&&(e.currentTime=0),await e.play()}catch(e){console.error("Video play failed:",e)}},[R]),O=(0,n.useCallback)(()=>{let e=S.current;e&&e.pause()},[]);(0,n.useEffect)(()=>{A||M||(I?U():O())},[I,A,M,U,O]);let $=x||t.toLowerCase().includes("scratch")||(null==m?void 0:m.toLowerCase().includes("editor")),{createStoryAsync:N,isLoading:G}=(0,b.no)(),V=(0,o.useRouter)(),K=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"list";if($)try{let t=await N({title:"Untitled",category_id:"create_from_scratch"});(null==t?void 0:t.id)&&((0,j.B)("editor_opened",{story_id:t.id,opened_from:"story_create_card"}),window.open(`/story/editor?story_id=${t.id}&view=${e}`,"_blank"))}catch(e){console.error("Failed to create story:",e)}},Y=()=>{L(!0)},q=e=>{e.preventDefault(),$?E?Y():V.push("/signin?callbackUrl=/story/editor"):window.open(h,"_blank")},X=(0,r.jsx)(a.Z,{disabled:G,onClick:q,variant:"contained",sx:{bgcolor:"#013FFE",color:"#FFFFFF",borderRadius:"6px",py:"10px",px:"12px",width:"100%",height:"40px",textTransform:"none",fontFamily:"Inter, sans-serif",fontWeight:$?600:700,fontSize:"16px",lineHeight:"19.36px",display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",flexShrink:0,"&:hover":{bgcolor:"#0035E0"}},startIcon:G?(0,r.jsx)(s.Z,{size:20}):void 0,children:m||"Create"});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.E.a,{title:t,ref:_,href:h,variants:{initial:{scale:1},hover:{scale:A||M?1:1.02,transition:{type:"spring",stiffness:600,damping:25,duration:.1}}},initial:"initial",whileHover:A||M?void 0:"hover",onHoverStart:A||M?void 0:()=>{A||M||(Z(!0),$||V.prefetch(h))},onHoverEnd:A||M?void 0:()=>{A||M||Z(!1)},onClick:q,style:{position:"relative",width:"100%",minHeight:"280px",height:"100%",borderRadius:"12px",border:"1px solid #2E2E2E",overflow:"hidden",cursor:"pointer"},children:[(0,r.jsxs)(c.E.div,{variants:{initial:{opacity:1,y:0},hover:{opacity:!v||A||M?1:0,y:!v||A||M?0:-5,transition:{duration:.12,ease:"easeOut"}}},initial:"initial",animate:!I||A||M?"initial":"hover",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",zIndex:1},children:[g,(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transformStyle:"preserve-3d"},children:f}),!I&&(0,r.jsx)(a.Z,{variant:"contained",color:"inherit",sx:{position:"absolute",bottom:"15px",width:"70%",left:"50%",transform:"translate(-50%, 0)",backgroundColor:"#343434",boxShadow:"0px 4px 4px 0px rgba(0, 0, 0, 0.25)",borderRadius:"6px",color:"#FFFFFF",fontWeight:700,"&:hover":{bgcolor:"#343434"}},children:$?"Open Editor":"Create"})]}),(0,r.jsx)(c.E.div,{variants:{initial:{opacity:1,y:0},hover:{opacity:1,y:0,transition:{duration:.12,ease:"easeOut"}}},initial:"initial",animate:!I||A||M?"initial":"hover",style:{position:"absolute",top:0,left:0,width:"100%",zIndex:3,padding:$?"20px":"16px",paddingBottom:0},children:(0,r.jsx)(d.Z,{variant:"subtitle1",component:"h3",sx:{fontWeight:$?600:700,fontSize:"20px",lineHeight:"19.36px",color:"#E0E0E0",mb:"4px"},children:i||t})}),p?(0,r.jsx)(c.E.div,{variants:{initial:{opacity:1,y:0},hover:{opacity:!v||A||M?1:0,y:!v||A||M?0:-5,transition:{duration:.12,ease:"easeOut"}}},initial:"initial",animate:!I||A||M?"initial":"hover",style:{position:"absolute",top:$?"60px":"56px",left:0,width:"100%",zIndex:3,padding:$?"0 20px":"0 16px"},children:(0,r.jsx)(d.Z,{variant:"body2",sx:{fontWeight:500,fontSize:"12px",lineHeight:"18px",color:"rgba(255, 255, 255, 0.3)"},children:p})}):null,v&&!A&&!M&&D?(0,r.jsx)(c.E.div,{variants:{initial:{opacity:0,scale:1.03},hover:{opacity:1,scale:1,transition:{duration:.15,ease:"easeOut"}}},initial:"initial",animate:I?"hover":"initial",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"12px",overflow:"hidden",zIndex:1},children:(0,r.jsx)("video",{ref:S,muted:!0,loop:!0,poster:k,playsInline:!0,preload:"metadata",style:{width:"100%",height:"100%",objectFit:"cover",transition:"opacity 0.2s ease-in-out"},children:(0,r.jsx)("source",{src:v,type:"video/mp4"})})}):null,(0,r.jsx)(u.M,{children:!I||A||M?null:(0,r.jsxs)(c.E.div,{variants:{initial:{opacity:0,y:15,scale:.96},hover:{opacity:1,y:0,scale:1,transition:{duration:.15,ease:"easeOut",delay:.05}}},initial:"initial",animate:"hover",exit:"initial",style:{position:"absolute",bottom:0,left:0,right:0,zIndex:2,padding:$?"20px":"16px",display:"flex",flexDirection:"column",gap:F?"12px":"0"},children:[F?(0,r.jsx)("div",{style:{marginBottom:"8px"},children:F}):null,X]})})]}),(0,r.jsx)(y,{open:P,onClose:()=>{L(!1)},onSelectMode:e=>{L(!1),(0,j.B)("create_from_scratch_clicked",{to_view:"list"===e?"all-shots":"video-editor"}),K(e)}})]})}},71854:function(e,t,i){i.d(t,{B:function(){return l}});var r=i(52676),n=i(65893),o=i(62935),a=i(40174),s=i(61832);function l(e){let{cards:t,title:i}=e,l=t.some(e=>{var t;return e.title.toLowerCase().includes("scratch")||(null===(t=e.buttonText)||void 0===t?void 0:t.toLowerCase().includes("editor"))}),d=(()=>{if(l)return null;let e=t.length;return 0===e?12:12/e})();return(0,r.jsxs)(n.Z,{sx:{width:"100%"},children:[i?(0,r.jsx)(o.Z,{variant:"h6",component:"h2",sx:{fontFamily:"Inter, sans-serif",fontWeight:700,fontSize:"16px",lineHeight:"19.36px",mb:2,color:"#E0E0E0"},children:i}):null,(0,r.jsx)(a.ZP,{container:!0,spacing:2,sx:{"& .MuiGrid-item":{display:"flex"}},children:t.map((e,t)=>{var i;let n=e.title.toLowerCase().includes("scratch")||(null===(i=e.buttonText)||void 0===i?void 0:i.toLowerCase().includes("editor"));return(0,r.jsx)(a.ZP,{item:!0,xs:12,sm:6,md:l?n?2.3:3.2:d,lg:l?n?2.3:3.2:d,xl:l?n?2.3:3.2:d,sx:{display:{xs:n?"none !important":"flex !important",sm:"flex !important"},"& > *":{width:"100%",height:"100%",minHeight:"246px",...l&&n&&{maxWidth:{xs:"none",sm:"none",md:"none",lg:"none"},margin:{xs:"0",sm:"0",md:"0",lg:"0 auto",xl:"0 auto"}}}},children:(0,r.jsx)(s.Z,{title:e.title,titleNode:e.titleNode,description:e.description,cardBg:e.cardBg,cardMainImg:e.cardMainImg,urlToJump:e.urlToJump,buttonText:e.buttonText,hoverBagVideo:e.hoverBagVideo,hoverBagVideoPoster:e.hoverBagVideoPoster,hoverTitle:e.hoverTitle})},e.title)})})]})}},76538:function(e,t,i){i.d(t,{m:function(){return th}});var r=i(52676),n=i(75271),o=i(46974),a=i(90836),s=i(65893),l=i(71137),d=i(62935),c=i(42054),u=i(50601),p=i(44754),h=i(68125),m=i(79882),x=i(35910),g=i(89980),f=i(44514),v=i(68953),y=i(2850),b=i(26784),C=i(16850),w=i(33914),j=i(53049),F=i(12558),k=i(21231),_=i(13566),S=i(25528),I=i(42070),Z=i(61271),E=i(57598),A=i(82786),M=i(2656),R=i(63311);function T(e){let{has_lyrics:t=!0,selectedSongId:i,onChange:o,open:a=!1,onClose:c}=e,u=t?R.WK:R.l2,[p,h]=(0,n.useState)(null),[m,x]=(0,n.useState)(!1),g=(0,n.useRef)(null),f=e=>{let t=u.find(t=>t.id===e);t&&(g.current&&(g.current.pause(),g.current=null),x(!1),h(null),o(e,t.url),null==c||c())},v=()=>{g.current&&(g.current.pause(),g.current=null),x(!1),h(null),null==c||c()},y=e=>{let t=u.find(t=>t.id===e);if(!t)return;g.current&&(g.current.pause(),g.current=null);let i=new Audio(t.url);i.volume=.3,g.current=i,h(e),x(!0),i.play().catch(e=>{x(!1)}),i.addEventListener("ended",()=>{x(!1),h(null)}),i.addEventListener("error",()=>{x(!1),h(null)})},b=()=>{g.current&&(g.current.pause(),g.current=null),x(!1),h(null)};return(0,n.useEffect)(()=>{a||(g.current&&(g.current.pause(),g.current=null),x(!1),h(null))},[a]),(0,n.useEffect)(()=>()=>{g.current&&(g.current.pause(),g.current=null)},[]),(0,r.jsx)(Z.Z,{open:a,onClose:v,maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"11px",padding:"16px 20px",width:400,maxWidth:"90vw",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"}},children:(0,r.jsxs)(E.Z,{sx:{padding:0},children:[(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:16,lineHeight:"1.21em",color:"#FFFFFF",textAlign:"left",mb:3},children:"Choose from trending songs"}),(0,r.jsx)(s.Z,{sx:{mb:3,maxHeight:300,overflowY:"auto"},children:(0,r.jsx)(A.Z,{sx:{padding:0},children:u.map((e,t)=>(0,r.jsxs)(M.Z,{onClick:()=>f(e.id),onMouseEnter:()=>y(e.id),onMouseLeave:b,sx:{padding:"8px 12px",backgroundColor:i===e.id?"#292929":"transparent",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,mb:t<u.length-1?"8px":0,"&:hover":{backgroundColor:i===e.id?"#292929":"#2a2a2a"}},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1,minWidth:0,flex:1},children:[(0,r.jsx)(s.Z,{sx:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"},children:i===e.id&&(0,r.jsx)(_.Z,{sx:{color:"#2F66FF",fontSize:18}})}),(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:14,lineHeight:"1.43em",letterSpacing:"-0.02em",color:"#F0F0F0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})]}),(0,r.jsx)(s.Z,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:p===e.id&&m?"rgba(47, 102, 255, 0.8)":"rgba(255, 255, 255, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"background-color 0.2s ease"},children:p===e.id&&m?(0,r.jsx)(S.Z,{sx:{color:"#FFFFFF",fontSize:12}}):(0,r.jsx)(I.Z,{sx:{color:"#FFFFFF",fontSize:12}})})]},e.id))})}),(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:(0,r.jsx)(l.Z,{onClick:v,variant:"outlined",sx:{borderRadius:"5px",padding:"10px 27px",width:"100%",height:44,textTransform:"none",fontFamily:"Inter",fontWeight:600,fontSize:16,lineHeight:"1.02em"},children:"Cancel"})})]})})}var D=i(22465);function z(e){var t;let i,o;let{iconSize:a=20,sx:l,value:c,onChange:u,expanded:p=!1,has_lyrics:h=!1,onExpandChange:m}=e,[_,S]=(0,n.useState)("auto"),[I,Z]=(0,n.useState)(""),[E,A]=(0,n.useState)(""),[M,z]=(0,n.useState)(""),[P,L]=(0,n.useState)(null),[W,B]=(0,n.useState)(""),[H,U]=(0,n.useState)(!1),[O,$]=(0,n.useState)(""),[N,G]=(0,n.useState)(!1),[V,K]=(0,n.useState)(null),{open:Y,context:q,openWithFile:X}=(0,k.L)({uploadProps:{enableTrimming:!0},onChange:(e,t,i)=>{N?(Z(e),S("link"),G(!1)):(A(e),B(t),S("upload"),K(null)),$(""),u(e)},onUploadStart:()=>{},onUploadError:e=>{console.error("Music upload failed:",e),G(!1)}}),{open:J,context:Q}=(0,D.K)({onSuccess:(e,t)=>{Z(e),S("link"),$(""),K(t),u(e)},placeholder:"Enter Suno music URL...",title:"Use Suno music",enableTrimming:!0,onFileReady:(e,t,i)=>{G(!0),K(i),X(e)}}),{open:ee,context:et}=function(e){let[t,i]=(0,n.useState)(!1),o=(0,n.useCallback)(()=>{i(!0)},[]),a=(0,n.useCallback)(()=>{i(!1)},[]),s=(0,n.useCallback)(()=>{a()},[a]),l=(0,n.useCallback)((t,i)=>{e.onChange(t,i),a()},[e.onChange,a]),d=(0,r.jsx)(T,{has_lyrics:e.has_lyrics,selectedSongId:e.selectedSongId,onChange:l,open:t,onClose:s});return{visible:t,open:o,close:a,context:d}}({selectedSongId:P,has_lyrics:h,onChange:(e,t)=>{L(e),z(t),S("trending"),$(""),u(t)}});return(0,n.useEffect)(()=>{},[c]),(0,r.jsxs)(s.Z,{sx:{mb:4,position:"relative",...l},children:[H?(0,r.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(47, 102, 255, 0.1)",border:"2px dashed #2F66FF",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,pointerEvents:"none"},children:(0,r.jsxs)(s.Z,{sx:{backgroundColor:"rgba(47, 102, 255, 0.9)",borderRadius:"8px",padding:"12px 24px",display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(x.Z,{sx:{color:"#FFFFFF",fontSize:20}}),(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:14,color:"#FFFFFF"},children:"Drop audio file to upload"})]})}):null,(0,r.jsxs)(y.Z,{expanded:p,onChange:m,sx:{backgroundColor:"transparent",boxShadow:"none",border:"none","&:before":{display:"none"},"&.Mui-expanded":{margin:0}},children:[(0,r.jsxs)(b.Z,{expandIcon:(0,r.jsx)(g.Z,{sx:{color:"#666",fontSize:16,backgroundColor:"#101010",borderRadius:"50%",width:24,height:24,padding:"4px"}}),sx:{padding:0,minHeight:"auto","&.Mui-expanded":{minHeight:"auto"},"& .MuiAccordionSummary-content":{margin:0,display:"flex",justifyContent:"space-between",alignItems:"center","&.Mui-expanded":{margin:0}},"& .MuiAccordionSummary-expandIconWrapper":{transition:"transform 0.3s","&.Mui-expanded":{transform:"rotate(180deg)"}}},children:[(i=(0,r.jsx)(f.Z,{sx:{color:"#CCCCCC",fontSize:a}}),o="Background Music",(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[i,(0,r.jsx)(d.Z,{sx:{fontWeight:500,fontSize:{xs:"14px",md:"16px"},lineHeight:"1.5em",color:"#CCCCCC"},children:o})]})),(0,r.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1,pr:1},children:(0,r.jsx)(d.Z,{sx:{fontWeight:500,fontSize:{xs:"14px",md:"16px"},lineHeight:"1.43em",color:"#AAAAAA",maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(()=>{switch(_){case"auto":default:return"Auto select";case"link":return(null==V?void 0:V.title)||"Suno music";case"upload":return W||"Uploaded music";case"trending":var e;return P&&(null===(e=R.WK.find(e=>e.id===P))||void 0===e?void 0:e.name)||"Trending song";case"none":return"No background music"}})()})})]}),(0,r.jsx)(C.Z,{sx:{padding:"16px 0 0 0"},children:(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:1},onDragOver:e=>{var t;if(e.preventDefault(),!((null===(t=e.dataTransfer.items)||void 0===t?void 0:t.length)&&Array.from(e.dataTransfer.items).some(e=>e.type.startsWith("audio/")))){e.dataTransfer.dropEffect="none";return}U(!0)},onDragEnter:e=>{e.preventDefault()},onDragLeave:()=>{U(!1)},onDrop:e=>{e.preventDefault(),U(!1);let t=e.dataTransfer.files;0!==t.length&&t[0].type.startsWith("audio/")&&(S("upload"),Y())},children:[(0,r.jsxs)(w.Z,{value:_,onChange:e=>{let t=e.target.value;S(t);let i="";switch(t){case"auto":K(null),u("auto");break;case"link":I?u(I):(J(),i="Please paste a Suno music link");break;case"upload":K(null),E?u(E):(Y(),i="Please upload an audio file");break;case"trending":K(null),P?u(M):(ee(),i="Please select a song from trending songs");break;case"none":K(null),u("")}$(i),i&&u("")},sx:{gap:1},children:[(0,r.jsx)(s.Z,{sx:{backgroundColor:"#101010",borderRadius:"6px",padding:"10px 12px",display:"flex",alignItems:"center",gap:1},children:(0,r.jsx)(j.Z,{value:"auto",control:(0,r.jsx)(F.Z,{sx:{color:"#636366",padding:0,width:16,height:16,"&.Mui-checked":{color:"#2F66FF"},"& .MuiSvgIcon-root":{fontSize:16}}}),label:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:14,lineHeight:"1.67em",color:"#AAAAAA",ml:.5},children:"Auto-select trending song"}),sx:{margin:0,gap:.5}})}),(0,r.jsxs)(s.Z,{sx:{backgroundColor:"#101010",borderRadius:"6px",padding:"10px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,position:"relative"},children:[(0,r.jsx)(j.Z,{value:"link",control:(0,r.jsx)(F.Z,{sx:{color:"#636366",padding:0,width:16,height:16,"&.Mui-checked":{color:"#2F66FF"},"& .MuiSvgIcon-root":{fontSize:16}}}),label:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:14,lineHeight:"1.67em",color:"#AAAAAA",ml:.5},children:"Use Suno music"}),sx:{margin:0,gap:.5}}),(0,r.jsxs)(s.Z,{onClick:J,sx:{display:"flex",alignItems:"center",gap:.5,cursor:"pointer"},children:[(0,r.jsx)(s.Z,{sx:{width:16,height:16,borderRadius:0,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(v.Z,{sx:{color:"#666666",fontSize:16}})}),(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:12,lineHeight:"1.3em",letterSpacing:"-0.02em",color:I?"#2F66FF":"#FFFFFF",maxWidth:150,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I?(null==V?void 0:V.title)?`${V.title}`:"Suno music added":"Paste link"})]})]}),(0,r.jsxs)(s.Z,{sx:{backgroundColor:H?"#1E3A8A":"#101010",borderRadius:"6px",padding:"10px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,border:H?"1px solid #2F66FF":"1px solid transparent",transition:"all 0.2s ease",position:"relative"},children:[(0,r.jsx)(j.Z,{value:"upload",control:(0,r.jsx)(F.Z,{sx:{color:"#636366",padding:0,width:16,height:16,"&.Mui-checked":{color:"#2F66FF"},"& .MuiSvgIcon-root":{fontSize:16}}}),label:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:14,lineHeight:"1.67em",color:"#AAAAAA",ml:.5},children:"Upload a song"}),sx:{margin:0,gap:.5}}),(0,r.jsxs)(s.Z,{onClick:Y,sx:{display:"flex",alignItems:"center",gap:.5,cursor:"pointer"},children:[(0,r.jsx)(s.Z,{sx:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(x.Z,{sx:{color:"#666666",fontSize:16}})}),(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:12,lineHeight:"1.3em",letterSpacing:"-0.02em",color:E?"#2F66FF":"#FFFFFF",maxWidth:150,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:W||(H?"Drop to upload":"Upload")})]}),q]}),(0,r.jsxs)(s.Z,{sx:{backgroundColor:"#101010",borderRadius:"6px",padding:"10px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,position:"relative"},children:[(0,r.jsx)(j.Z,{value:"trending",control:(0,r.jsx)(F.Z,{sx:{color:"#636366",padding:0,width:16,height:16,"&.Mui-checked":{color:"#2F66FF"},"& .MuiSvgIcon-root":{fontSize:16}}}),label:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:14,lineHeight:"1.67em",color:"#AAAAAA",ml:.5},children:"Choose from trending songs"}),sx:{margin:0,gap:.5}}),(0,r.jsxs)(s.Z,{onClick:ee,sx:{display:"flex",alignItems:"center",gap:.5,cursor:"pointer"},children:[(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:12,lineHeight:"1.3em",letterSpacing:"-0.02em",color:M?"#2F66FF":"#FFFFFF"},children:P?null===(t=R.WK.find(e=>e.id===P))||void 0===t?void 0:t.name:"Pick a song"}),(0,r.jsx)(s.Z,{sx:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("svg",{width:"10",height:"5",viewBox:"0 0 10 5",fill:"none",children:(0,r.jsx)("path",{d:"M1 1L5 4L9 1",stroke:"#666666",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,r.jsx)(s.Z,{sx:{backgroundColor:"#101010",borderRadius:"6px",padding:"10px 12px",display:"flex",alignItems:"center",gap:1},children:(0,r.jsx)(j.Z,{value:"none",control:(0,r.jsx)(F.Z,{sx:{color:"#636366",padding:0,width:16,height:16,"&.Mui-checked":{color:"#2F66FF"},"& .MuiSvgIcon-root":{fontSize:16}}}),label:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:14,lineHeight:"1.67em",color:"#AAAAAA",ml:.5},children:"No background music"}),sx:{margin:0,gap:.5}})})]}),O?(0,r.jsx)(s.Z,{sx:{mt:1,p:1,backgroundColor:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)",borderRadius:"4px"},children:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:12,lineHeight:"1.5em",color:"#F44336"},children:O})}):null]})})]}),Q,et]})}var P=i(13402),L=i(48945);let W=[{title:"\uD83D\uDECDï¸ Shopping",description:"@Nina is shopping"},{title:"\uD83E\uDDD6 Spa Day",description:"@Nina is having a relaxing spa day"},{title:"\uD83C\uDF55 Make Pizza",description:"@Nina is making pizza in the kitchen"},{title:"âœˆï¸ Traveling",description:"@Nina is exploring the beautiful streets of Paris"},{title:"\uD83C\uDFAE Gaming",description:"@Nina is playing video game in the bedroom"}];function B(e){let{value:t,onChange:o,error:a,selectedCharacter:l}=e,c=(0,n.useRef)(null),u=(0,n.useRef)(null),[p,h]=(0,n.useState)(l),[m,x]=(0,n.useState)(""),g=(0,n.useMemo)(()=>l?[{key:l.name,value:l.name}]:[],[l]);(0,n.useEffect)(()=>{if(l&&m&&x(""),l!==p){if(h(l),l&&!p&&(!t||""===t.trim())){o("<<THE_MARKER>> "),setTimeout(()=>{if(c.current){let e=document.createRange(),t=window.getSelection();e.selectNodeContents(c.current),e.collapse(!1),null==t||t.removeAllRanges(),null==t||t.addRange(e),c.current.focus()}},100);return}if(l&&p&&l.id!==p.id){if(t&&t.includes("<<THE_MARKER>>")){if(c.current){let e=t.replaceAll("\n","<br>"),i=`<span class="mention-text" data-character-id="${l.id}" contenteditable="false" data-character-name="${l.name}">@${l.name}</span>`;e=e.replaceAll("<<THE_MARKER>>",i),c.current.innerHTML=e,c.current.querySelectorAll(".mention-text").forEach(e=>{e.setAttribute("contenteditable","false")})}}else if(!t||""===t.trim()){o("<<THE_MARKER>> "),setTimeout(()=>{if(c.current){let e=document.createRange(),t=window.getSelection();e.selectNodeContents(c.current),e.collapse(!1),null==t||t.removeAllRanges(),null==t||t.addRange(e),c.current.focus()}},100);return}}}},[l,p,t,o,m]);let f=(0,n.useCallback)(e=>{if(e.nodeType===Node.TEXT_NODE)return e;for(let i=e.childNodes.length-1;i>=0;i--){var t;let r=e.childNodes[i];if(r.nodeType===Node.TEXT_NODE&&(null===(t=r.textContent)||void 0===t?void 0:t.trim()))return r;if(r.nodeType===Node.ELEMENT_NODE){let e=f(r);if(e)return e}}return null},[]),v=(0,n.useCallback)(e=>{if(!l)return e.replaceAll("\n","<br>");let t=e.replaceAll("\n","<br>"),i=`<span class="mention-text" data-character-id="${l.id}" contenteditable="false" data-character-name="${l.name}">@${l.name}</span>`;return t.replaceAll("<<THE_MARKER>>",i)},[l]),y=(0,n.useCallback)(e=>{if(!l)return e;let t=e,i=document.createElement("div");return i.innerHTML=e,i.querySelectorAll(".mention-text").forEach(e=>{if(e.dataset.characterId===l.id){let i=e.textContent||"";t=t.replace(i,"<<THE_MARKER>>")}}),l&&l.name&&RegExp(`@${l.name.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`)}`,"g").test(t)&&(t=t.replaceAll(`@${l.name}`,"<<THE_MARKER>>")),t},[l]),b=(0,n.useCallback)(()=>{if(!c.current)return;let e=c.current.innerHTML,t=c.current.textContent||"",i=y(t);m&&x(""),!(l&&t.includes(`@${l.name}`))&&e.includes("mention-text")&&(c.current.innerHTML=t),o(i)},[y,l,o,m]);(0,n.useEffect)(()=>{if(!c.current)return;let e=e=>{var t;e.preventDefault();let i=((null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain"))??"").replaceAll(/\n\s*\n/g,"\n").trim();document.execCommand("insertText",!1,i)},t=e=>{var t,i,r;if("Backspace"===e.key||"Delete"===e.key){let r=window.getSelection();if(!r||0===r.rangeCount)return;let n=r.getRangeAt(0);if(r.toString()===(null===(t=c.current)||void 0===t?void 0:t.textContent)){e.preventDefault(),c.current.innerHTML="",b();return}let o=null===(i=n.startContainer.parentElement)||void 0===i?void 0:i.closest(".mention-text");if(o){let t=o.textContent||"";l&&`@${l.name}`===t.trim()&&"Backspace"!==e.key||(e.preventDefault(),o.remove(),b())}}else if("Enter"===e.key){let t=window.getSelection();if(!t||0===t.rangeCount)return;let i=null===(r=t.getRangeAt(0).startContainer.parentElement)||void 0===r?void 0:r.closest(".mention-text");if(i){e.preventDefault();let r=document.createRange();r.setStartAfter(i),r.collapse(!0),t.removeAllRanges(),t.addRange(r)}}},r=e=>{let t=e.target.closest(".mention-text");if(t){e.preventDefault();let i=window.getSelection(),r=document.createRange();r.setStartAfter(t),r.collapse(!0),null==i||i.removeAllRanges(),null==i||i.addRange(r)}},n=()=>{var e;let t=window.getSelection();if(!t||0===t.rangeCount)return;let i=null===(e=t.getRangeAt(0).startContainer.parentElement)||void 0===e?void 0:e.closest(".mention-text");if(i){let e=document.createRange();e.setStartAfter(i),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}},a=e=>{},s=e=>{},d=null,p=e=>{d=setTimeout(()=>{c.current&&(c.current.querySelectorAll(".mention-text").forEach(e=>{e.setAttribute("contenteditable","false")}),o(y(c.current.textContent||""))),d=null},0)},h=c.current;return h.addEventListener("paste",e),h.addEventListener("keydown",t),h.addEventListener("click",r),document.addEventListener("selectionchange",n),u.current&&(u.current.detach(h),u.current=null),i.e(7233).then(i.t.bind(i,27233,23)).then(e=>{let t=e.default;document.querySelectorAll(".vlog-tribute-container").forEach(e=>e.remove()),u.current=new t({trigger:"@",values:g,menuContainer:document.body,positionMenu:!0,selectTemplate:e=>e?`<span class="mention-text" data-character-id="${e.original.value}" contenteditable="false" data-character-name="${e.original.key}">@${e.original.key}</span>&nbsp;`:"",containerClass:"tribute-container vlog-tribute-container",menuItemTemplate:e=>`<div class="mention-item">@${e.original.key}</div>`,noMatchTemplate:()=>l?'<div class="mention-item no-match">No matches found</div>':'<div class="mention-item no-match">Please select a character first</div>',allowSpaces:!0,requireLeadingSpace:!1,replaceTextSuffix:""}),c.current&&(u.current.attach(c.current),c.current.addEventListener("tribute-active-true",a),c.current.addEventListener("tribute-active-false",s),c.current.addEventListener("tribute-replaced",p))}).catch(e=>{console.error("Failed to load tributejs:",e)}),()=>{d&&clearTimeout(d),u.current&&h&&u.current.detach(h),h.removeEventListener("paste",e),h.removeEventListener("keydown",t),h.removeEventListener("click",r),document.removeEventListener("selectionchange",n),h.removeEventListener("tribute-active-true",a),h.removeEventListener("tribute-active-false",s),h.removeEventListener("tribute-replaced",p)}},[g]),(0,n.useEffect)(()=>{c.current&&y(c.current.textContent||"")!==t&&(t.includes("<<THE_MARKER>>")&&l?(c.current.innerHTML=v(t),c.current.querySelectorAll(".mention-text").forEach(e=>{e.setAttribute("contenteditable","false")})):c.current.textContent=t)},[t,y,v,l]);let C=(0,n.useCallback)(e=>{if(!l){x("Please select a character first to use activity suggestions.");return}x(""),o(e.replace("@Nina","<<THE_MARKER>>"))},[l,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:`
        .vlog-tribute-container {
          position: absolute !important;
          background-color: #2E2E2E !important;
          border: 1px solid #444444 !important;
          border-radius: 4px !important;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) !important;
          z-index: 10000 !important;
          max-height: 200px !important;
          overflow-y: auto !important;
        }
        
        .vlog-tribute-container .tribute-item,
        .vlog-tribute-container .mention-item {
          padding: 8px 16px !important;
          color: #E0E0E0 !important;
          font-size: 14px !important;
          cursor: pointer !important;
          border: none !important;
          background: none !important;
        }
        
        .vlog-tribute-container .tribute-item:hover,
        .vlog-tribute-container .mention-item:not(.no-match):hover,
        .vlog-tribute-container .tribute-item.highlight {
          color: #6290FF !important;
        }
        
        .vlog-tribute-container .no-match {
          color: #999999 !important;
          cursor: default !important;
        }
        
        .mention-text {
          color: #6290FF !important;
          font-weight: 500 !important;
          margin: 0 1px !important;
          display: inline-block !important;
          user-select: none !important;
        }
      `}),(0,r.jsxs)(s.Z,{sx:{mb:4,position:"relative"},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,r.jsx)(s.Z,{sx:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,r.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"#CCCCCC",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)(d.Z,{variant:"h6",sx:{color:"#CCCCCC",fontWeight:500,fontSize:{xs:14,md:16}},children:"Vlog Topic"})]}),!1,(0,r.jsxs)(s.Z,{sx:{backgroundColor:"#101010",borderRadius:1,p:1.5,border:"1px solid transparent",position:"relative",minHeight:60,"&:focus-within":{borderColor:"#339597"}},children:[(0,r.jsx)(s.Z,{ref:c,contentEditable:!0,onInput:b,sx:{width:"100%",minHeight:40,color:"primary.main",bgcolor:"transparent",caretColor:"white",fontSize:14,fontWeight:500,lineHeight:"1.43em",border:"none",outline:"none",whiteSpace:"pre-wrap",wordBreak:"break-word","&:empty::before":{content:(null==l?void 0:l.name)?`"@${l.name} is making the pizza in the kitchen"`:'"Please select a character first to describe their activities..."',color:"#666666",pointerEvents:"none"}}}),(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1,gap:2},children:(0,r.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:W.map((e,t)=>(0,r.jsx)(L.Z,{label:e.title,onClick:()=>C(e.description),clickable:!0,sx:{backgroundColor:"#2E2E2E",color:"#E0E0E0",fontSize:{xs:12,sm:14},fontWeight:500,height:"auto",py:{xs:.25,sm:.5},px:{xs:1,sm:1.5},borderRadius:"9999px","&:hover":{backgroundColor:"#3E3E3E"},"& .MuiChip-label":{padding:{xs:"2px 0",sm:"4px 0"}}}},t))})})]}),a||m?(0,r.jsx)(d.Z,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:a||m}):null]})]})}var H=i(19702),U=i(51686),O=i(11615),$=i(71087),N=i(9370),G=i(57482);let V="vlog_creation_form_data_v1",K=O.z.object({character:O.z.custom().refine(e=>null!=e,{message:"Please select a character"}),activity:O.z.string().min(1,"Please describe the activity"),aspectRatio:O.z.string().min(1,"Please select an aspect ratio"),title:O.z.string().min(1,"Please enter a title"),background_music:O.z.string().nullable().optional(),imageModelConfig:O.z.custom(),videoModelConfig:O.z.custom()}),Y={character:null,activity:"",aspectRatio:"16:9",title:"My Character Vlog",background_music:"auto",imageModelConfig:{model:"character",parameters:{}},videoModelConfig:{model:"kling2.1",parameters:{videoMode:"std"}}};var q=i(30076),X=i(79267),J=i(59435);function Q(e){var t,i,a;let{onSubmit:c}=e,x=(0,q.B)(),{errors:g,isGenerating:f,isRedirecting:v,selectedCharacter:y,activity:b,aspectRatio:C,backgroundMusic:w,expandedPanels:j,imageModelConfig:F,videoModelConfig:k,imageModelOptions:_,videoModelOptions:S,handleCharacterSelect:I,handleActivityChange:Z,handleTogglePanel:E,handleAspectRatioSelect:A,handleModelSelect:M,handleBackgroundMusicChange:R,onFormSubmit:T}=function(e){let{onSubmit:t}=e,i=(0,o.useRouter)(),[r,a]=(0,n.useState)({advancedSettings:!1,backgroundMusic:!1}),[s,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1),p=(0,U.cI)({mode:"onChange",defaultValues:Y,resolver:(0,H.F)(K)}),{handleSubmit:h,formState:{errors:m},setValue:x,watch:g,setError:f,clearErrors:v}=p,y=g("character"),b=g("activity"),C=g("aspectRatio"),w=g("background_music"),j=g("imageModelConfig"),F=g("videoModelConfig"),{mutate:k,isLoading:_}=(0,N.EY)(!1);(0,n.useEffect)(()=>{c(!0)},[]),(0,n.useEffect)(()=>{if(!d)return;let e=(0,G.$o)(V,{});Object.keys(e).length>0&&Object.entries(e).forEach(e=>{let[t,i]=e;null!=i&&""!==i&&x(t,i)})},[d,x]),(0,n.useEffect)(()=>{if(!d)return;let e=p.watch(e=>{let t=Object.entries(e).reduce((e,t)=>{let[i,r]=t;return null!=r&&""!==r&&(e[i]=r),e},{});Object.keys(t).length>0&&(0,G.qQ)(V,t)});return()=>e.unsubscribe()},[p,d]);let S=(0,n.useMemo)(()=>(0,$._p)(y),[y]),I=(0,n.useMemo)(()=>$.Fj.map(e=>({name:e.name,icon:e.icon,disabled:(0,$.Rx)(e.value)&&S,value:e.value})),[S]),Z=(0,n.useMemo)(()=>$.E5.map(e=>({name:e.name,icon:e.icon,value:e.value})),[]);(0,n.useEffect)(()=>{if(y&&S){let e=$.Fj.find(e=>(0,$.Me)(e.value));(null==e?void 0:e.value)&&x("imageModelConfig",e.value)}},[y,S,x]);let E=(0,n.useCallback)(e=>{x("character",e),v("character")},[x,v]),A=(0,n.useCallback)(e=>{x("activity",e),v("activity")},[x,v]),M=(0,n.useCallback)(e=>{a(t=>({...t,[e]:!t[e]}))},[]),R=(0,n.useCallback)(e=>{x("aspectRatio",e)},[x]),T=(0,n.useCallback)((e,t)=>{if("imageModel"===e){let e=$.Fj.find(e=>e.name===t);if(e){if((0,$.Rx)(e.value)&&S)return;x("imageModelConfig",e.value)}}else if("videoModel"===e){let e=$.E5.find(e=>e.name===t);e&&x("videoModelConfig",e.value)}},[x,S]),D=(0,n.useCallback)(e=>{x("background_music",e),v("background_music")},[x,v]),z=(0,n.useCallback)(()=>{p.reset({character:Y.character,activity:Y.activity,aspectRatio:Y.aspectRatio,title:Y.title,background_music:Y.background_music,imageModelConfig:Y.imageModelConfig,videoModelConfig:Y.videoModelConfig}),a({advancedSettings:!1,backgroundMusic:!1}),d&&(0,G.qQ)(V,{})},[p,d]);return{form:p,errors:m,isGenerating:_,isRedirecting:s,selectedCharacter:y,activity:b,aspectRatio:C,backgroundMusic:w,imageModelConfig:j,videoModelConfig:F,expandedPanels:r,isCustomCharacter:S,imageModelOptions:I,videoModelOptions:Z,handleCharacterSelect:E,handleActivityChange:A,handleTogglePanel:M,handleAspectRatioSelect:R,handleModelSelect:T,handleBackgroundMusicChange:D,onFormSubmit:h(e=>{if(e.character&&!e.activity.includes("<<THE_MARKER>>")){f("activity",{message:'Please use @ to mention the character in your vlog topic (e.g., "@character is cooking dinner")'});return}u.IP.getState().updateFormData({selectedCharacter:e.character,oneSentenceStory:e.activity,aspectRatio:e.aspectRatio,title:e.title}),k({title:e.title,character:(0,$.ZX)(e.character),aspect_ratio:"9:16"===e.aspectRatio?"9:16":"16:9",vlog_topic:e.activity,advanced_settings:{image_model_config:e.imageModelConfig,video_model_config:e.videoModelConfig},background_music:e.background_music},{onSuccess:e=>{d&&(0,G.qQ)(V,{}),e.workflowRunId?(l(!0),i.push(`/story/create/workflow/${e.workflowRunId}`)):t()},onError:e=>{f("root",{message:e instanceof Error?e.message:"Failed to generate character vlog"})}})}),resetForm:z}}({onSubmit:c}),D=J.v["story.character_vlog"];return(0,r.jsxs)(s.Z,{component:"form",onSubmit:e=>{e.preventDefault(),x({onAuthenticated:()=>T(e)})},sx:{maxWidth:800,mx:"auto",mt:{xs:0,md:8},minHeight:"100vh",pb:"140px"},children:[(0,r.jsx)(s.Z,{sx:{mb:2},children:(0,r.jsx)(P.l,{selectedCharacter:y,onCharacterSelect:I,error:null===(t=g.character)||void 0===t?void 0:t.message,characterType:"character_vlog"})}),(0,r.jsx)(B,{value:b,onChange:Z,error:null===(i=g.activity)||void 0===i?void 0:i.message,selectedCharacter:y}),(0,r.jsx)(m.Y,{value:C,onChange:A,sx:{mb:4}}),(0,r.jsx)(z,{value:w,onChange:R,expanded:j.backgroundMusic,onExpandChange:(e,t)=>{t!==j.backgroundMusic&&E("backgroundMusic")}}),(0,r.jsx)(s.Z,{sx:{mb:5},children:(0,r.jsx)(h.d,{imageModelConfig:F,videoModelConfig:k,imageModelOptions:_,videoModelOptions:S,onModelSelect:M,expanded:j.advancedSettings,onChange:(e,t)=>{t!==j.advancedSettings&&E("advancedSettings")}})}),(0,r.jsxs)(s.Z,{sx:{position:"fixed",bottom:0,left:0,right:0,display:"flex",flex:1,flexDirection:"column",gap:1,pb:1,pt:2,backgroundColor:"#1A1A1A",borderTop:"1px solid #2E2E2E",boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.3)",maxWidth:800,mx:"auto",zIndex:10},children:[Object.keys(g).length>0&&(0,r.jsx)(d.Z,{variant:"caption",color:"error",sx:{mb:1,display:"block",backgroundColor:"#2A1A1A",color:"#FF6B6B",padding:"8px 12px",borderRadius:1,border:"1px solid #FF6B6B30"},children:(null===(a=Object.values(g)[0])||void 0===a?void 0:a.message)||"Please fix the errors above"}),(0,r.jsx)(l.Z,{variant:"primary",type:"submit",disabled:f||v,sx:{borderRadius:1,py:2.25,px:6,fontFamily:"Inter",fontWeight:700,fontSize:16,lineHeight:1.21,textTransform:"none",border:"none","&.MuiButton-root":{boxShadow:"none"}},startIcon:f||v?(0,r.jsx)(p.Z,{size:20,sx:{color:"#666666"}}):null,children:f||v?"Generating Story...":"Create Story â†’"}),(0,r.jsxs)(s.Z,{sx:{backgroundColor:"#2E2E2E",borderRadius:1,py:.5,px:0,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(X.GhS,{size:12,sx:{color:"#16D866"}}),(0,r.jsxs)(d.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:11,lineHeight:1.8,letterSpacing:"-0.02em",color:"#16D866"},children:[D.credit," credits"]})]}),(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:12,lineHeight:1,color:"#BFBFBF"},children:f?"Generating your character vlog...":"Video renders in about a minute. Fully editable later."})]})]})]})}var ee=i(35019);i(13270),i(96995);var et=i(57984),ei=i(43237);let er=e=>{let{value:t=!0,onChange:i}=e;return(0,r.jsx)(ei.u,{icon:(0,r.jsx)(X.f5N,{size:16}),title:"Auto Captions",rightSide:(0,r.jsx)(et.r,{checked:t,onChange:e=>null==i?void 0:i(e.target.checked)})})};var en=i(83396),eo=i(58684),ea=i(77742),es=i(21461),el=i(66686),ed=i(46406);let ec=(0,ed.ZP)(Z.Z)(e=>{let{theme:t}=e;return{"& .MuiDialog-paper":{backgroundColor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"11px",width:"444px",maxWidth:"444px"}}}),eu=(0,ed.ZP)(ea.Z)(e=>{let{theme:t}=e;return{color:"#FFFFFF",fontFamily:"Inter",fontWeight:600,fontSize:"16px",lineHeight:"1.21em",padding:"16px 20px 24px 20px",position:"relative"}}),ep=(0,ed.ZP)(E.Z)(e=>{let{theme:t}=e;return{padding:"0 20px 16px 20px",display:"flex",flexDirection:"column",gap:"24px"}}),eh=(0,ed.ZP)(s.Z)(e=>{let{theme:t}=e;return{position:"relative",height:"132px"}}),em=(0,ed.ZP)(es.Z)(e=>{let{theme:t}=e;return{"& .MuiOutlinedInput-root":{backgroundColor:"#101010",borderRadius:"8px",height:"132px",border:"none","& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},"& textarea":{color:"#FFFFFF",fontFamily:"Inter",fontWeight:500,fontSize:"12px",resize:"none","&::placeholder":{color:"#444444",opacity:1}}}}}),ex=(0,ed.ZP)(d.Z)(e=>{let{theme:t}=e;return{position:"absolute",bottom:"11px",right:"12px",color:"#444444",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"1.83em"}}),eg=(0,ed.ZP)(s.Z)(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column"}}),ef=(0,ed.ZP)(s.Z)(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"8px"}}),ev=(0,ed.ZP)(l.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#1D1D1D",border:"1px solid #444444",borderRadius:"5px",color:"#B5B5B5",fontFamily:"Inter",fontWeight:600,fontSize:"16px",lineHeight:"1.02em",padding:"10px 27px",width:"131px",height:"44px",textTransform:"none","&:hover":{backgroundColor:"#2A2A2A",border:"1px solid #555555"}}}),ey=(0,ed.ZP)(eo.Z)(e=>{let{theme:t}=e;return{borderRadius:"5px",fontFamily:"Inter",fontWeight:600,fontSize:"16px",lineHeight:"1.21em",padding:"17px 42px",height:"44px",textTransform:"none",gap:"4px"}});function eb(e){let{open:t,onClose:i,onGenerate:o,isGenerating:a}=e,[s,l]=(0,n.useState)(""),c=async()=>{s.trim()&&o&&await o(s.trim()),null==i||i(void 0,"backdropClick")},u=()=>{l(""),null==i||i(void 0,"backdropClick")};return(0,r.jsxs)(ec,{open:t,onClose:u,maxWidth:!1,children:[(0,r.jsxs)(eu,{children:[(0,r.jsx)(d.Z,{fontSize:16,fontWeight:600,color:"#FFFFFF",children:"Idea to video"}),(0,r.jsx)(el.Z,{onClick:u,sx:{position:"absolute",right:8,top:8,color:"#888888"},children:(0,r.jsx)(en.Z,{})})]}),(0,r.jsxs)(ep,{children:[(0,r.jsx)(eg,{children:(0,r.jsxs)(eh,{children:[(0,r.jsx)(em,{fullWidth:!0,multiline:!0,rows:4,placeholder:"What topic would you like to explain today? Add any extra inputs you'd like here.",value:s,onChange:e=>{let t=e.target.value;t.length<=100&&l(t)},variant:"outlined"}),(0,r.jsxs)(ex,{children:[s.length,"/",100]})]})}),(0,r.jsxs)(ef,{children:[(0,r.jsx)(ev,{onClick:u,children:"Cancel"}),(0,r.jsxs)(ey,{className:"oa-button-primary",onClick:c,variant:"contained",disabled:!s.trim(),loading:a,children:[(0,r.jsx)(X.xsV,{}),(0,r.jsx)(d.Z,{children:"Generate script"})]})]})]})]})}let eC=(0,i(31764).Z)(eo.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#1A1A1A",background:"#1A1A1A",position:"relative",borderRadius:"8px",padding:"4px 8px",height:"32px",color:"#FFFFFF",fontSize:"12px",fontWeight:500,letterSpacing:"-0.01em",textTransform:"none",border:"1.5px solid transparent",backgroundImage:"linear-gradient(#1A1A1A, #1A1A1A), linear-gradient(135deg, #072A6E 0%, #24AFB1 57.27%, #5E6EFF 100%)",backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box","& .MuiButton-startIcon":{marginRight:"4px","& svg":{fontSize:"14px",color:"#FFFFFF"}},"&:hover":{backgroundColor:"#1A1A1A",background:"#1A1A1A",backgroundImage:"linear-gradient(#1A1A1A, #1A1A1A), linear-gradient(135deg, #072A6E 0%, #24AFB1 57.27%, #5E6EFF 100%)",backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",filter:"brightness(1.2)"}}}),ew=e=>{var t;let{isGenerating:i,canGenerate:n,errors:o}=e,a=J.v["story.script_to_video"];return(0,r.jsxs)(s.Z,{sx:{position:"sticky",bottom:0,display:"flex",flexDirection:"column",gap:1,pb:1,pt:2,borderTop:"1px solid #2E2E2E"},children:[Object.keys(o).length>0&&(0,r.jsx)(d.Z,{variant:"caption",color:"error",sx:{mb:1,display:"block",backgroundColor:"#2A1A1A",color:"#FF6B6B",padding:"8px 12px",borderRadius:1,border:"1px solid #FF6B6B30"},children:(null===(t=Object.values(o)[0])||void 0===t?void 0:t.message)||"Please fix the errors above"}),(0,r.jsx)(l.Z,{variant:"primary",size:"medium",type:"submit",disabled:i||!n,sx:{borderRadius:1,fontWeight:700,fontSize:16,border:"none",height:44},startIcon:i?(0,r.jsx)(p.Z,{size:20,sx:{color:"#666666"}}):null,children:i?"Generating Story...":"Create Story â†’"}),(0,r.jsxs)(s.Z,{sx:{backgroundColor:"#2E2E2E",borderRadius:1,py:{xs:1,sm:.5},px:{xs:1,sm:0},display:"flex",justifyContent:"center",alignItems:"center",gap:{xs:.5,sm:1}},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(X.GhS,{size:12,sx:{color:"#16D866"}}),(0,r.jsxs)(d.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:{xs:12,sm:11},lineHeight:1.8,letterSpacing:"-0.02em",color:"#16D866"},children:[a.credit," credits"]})]}),(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:400,fontSize:{xs:11,sm:12},lineHeight:1,color:"#BFBFBF",textAlign:{xs:"center",sm:"left"},display:{xs:"block",sm:"block"}},children:i?"Generating...":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{component:"span",sx:{display:{xs:"none",sm:"inline"}},children:"Ready in about a minute. Fully editable afterward."}),(0,r.jsx)(s.Z,{component:"span",sx:{display:{xs:"inline",sm:"none"}},children:"~3min render, fully editable"})]})})]})]})};var ej=i(96262),eF=i(70565),ek=i(24337);let e_=[{id:"cat-webinar",emoji:"\uD83D\uDC31",text:"Cat Webinar",fullScript:"A cat gives a webinar on how to take over the world in 5 steps",style:"photorealistic"},{id:"puma-intro",emoji:"ï¿½",text:"Puma Intro",fullScript:`Meet the Americas' ultimate predatorâ€”the puma. Silent, powerful, and absolutely magnificent.
Also known as mountain lion or cougar, the puma is the most widely distributed wild cat in the world. Stretching from Canada to South America, these incredible hunters have conquered every terrainâ€”from tropical rainforests to snow-capped mountains.
Weighing up to 100 kilograms, pumas are nature's perfect athletes. They can leap 5.5 meters vertically and over 12 meters horizontally. These solitary hunters stalk their prey with deadly precision, capable of taking down animals twice their size.
As apex predators, pumas maintain the delicate balance of American ecosystems. But habitat loss threatens their survival. Protecting these magnificent cats means preserving the wild heart of the Americas.
The pumaâ€”America's silent sovereign, forever wild, forever free.`,style:"photorealistic"},{id:"travel-asia",emoji:"ï¿½",text:"Travel in Asia",fullScript:"Top 5 cities to visit in Asia",style:"microworld"},{id:"tech-innovations",emoji:"\uD83D\uDCBB",text:"Tech Innovations",fullScript:"Five Tech Innovations That Defined the 1980s",style:"pixelart"}];var eS=i(55309);let eI=(0,ed.ZP)(ee.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#101010",border:"1px solid #2E2E2E",borderRadius:"12px",padding:"20px 16px",display:"flex",flexDirection:"column",gap:"16px",width:"100%"}}),eZ=(0,ed.ZP)(L.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#1A1A1A",color:"#CCCCCC",fontSize:"14px",fontWeight:500,height:"32px",borderRadius:"21px",padding:"4px 12px","& .MuiChip-label":{padding:0},"&:hover":{backgroundColor:"#2A2A2A",cursor:"pointer"}}});function eE(e){let{value:t,scriptOverLimit:i,scriptLength:o,maxScriptLength:a,onChange:l,error:c,helperText:u,autoRewrite:p,onClickUndo:h,canUndo:m,isRewriting:x,setAutoRewrite:g,handleSuggestionClick:f}=e,[v,y]=(0,n.useState)(!1),b=(0,n.useRef)(null);return(0,r.jsxs)(s.Z,{sx:{mb:4},children:[(0,r.jsxs)(eI,{justifyContent:"space-between",sx:{px:{xs:1,md:1.5},py:{xs:1,md:1.5}},children:[(0,r.jsx)(es.Z,{name:"scriptContent",value:t,onChange:e=>{l(e)},placeholder:"Enter your voice-over script: anything you write here will be narrated and come to life on screen.",multiline:!0,variant:"standard",fullWidth:!0,InputProps:{disableUnderline:!0,sx:{flex:1,alignItems:"flex-start",height:"auto","& .MuiInputBase-input":{maxHeight:{xs:"200px",md:"400px"},minHeight:{xs:"200px",md:"380px"},overflowY:"auto !important",padding:"8px",borderRadius:"8px",transition:"background-color 0.2s ease","&:focus":{backgroundColor:"rgba(255, 255, 255, 0.03)",outline:"none"},"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:"2px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}}}},inputProps:{sx:{color:"#FFFFFF",fontSize:{xs:"14px",md:"16px"},fontWeight:500,lineHeight:1.5,"&::placeholder":{color:"#666",opacity:1}}},sx:{flex:1,display:"flex","& .MuiInputBase-root":{flex:1,display:"flex"}}}),(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:(0,r.jsxs)(ee.Z,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,r.jsx)(ej.Z,{sx:{backgroundColor:"transparent",border:"1px solid #2E2E2E",borderRadius:"8px",padding:"4px 8px",height:"32px"},onClick:()=>{y(!v)},ref:b,disabled:x,children:(0,r.jsxs)(ee.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(et.r,{checked:p,onClick:e=>{e.stopPropagation()},onChange:e=>{g(e.target.checked)}}),(0,r.jsx)(d.Z,{fontSize:12,fontWeight:500,sx:{textAlign:"left"},children:"Auto-Polish Script"}),(0,r.jsx)(eF.Z,{title:"Turn on to enhance your voice-over script with AI. Turn off to use your script exactly as written, without optimization.",children:(0,r.jsx)(X.eFz,{color:"#666"})})]})}),m?(0,r.jsx)(L.Z,{component:"div",size:"small",sx:{borderRadius:"8px",padding:"none",backgroundColor:"white",color:eS.tE,cursor:"pointer"},label:(0,r.jsx)(ee.Z,{direction:"row",alignItems:"center",spacing:.2,onClick:h,children:(0,r.jsx)(d.Z,{variant:"editor-label1",children:"Undo"})})}):null]})}),(0,r.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(ek.Z,{sx:{borderColor:"#2E2E2E",flex:1,mr:2}}),(0,r.jsxs)(d.Z,{variant:"caption",sx:{color:i?"#ff4444":"#666",fontSize:"12px",whiteSpace:"nowrap"},children:[o,"/",a]})]}),(0,r.jsx)(ee.Z,{direction:"row",spacing:1.5,alignItems:"center",sx:{width:"100%",overflow:"auto"},children:(0,r.jsx)(ee.Z,{direction:"row",spacing:1,alignItems:"center",sx:{flex:1},children:e_.map((e,t)=>(0,r.jsx)(eZ,{label:e.text,onClick:()=>f(e)},e.id))})})]})]}),u?(0,r.jsx)(d.Z,{variant:"caption",sx:{color:c?"error.main":"text.secondary",mt:1,display:"block"},children:u}):null]})}var eA=i(39204),eM=i(80924);let eR=e=>{let{value:t="",onChange:i,placeholder:o="Describe the style"}=e,[a,s]=(0,n.useState)(t),{isMobile:l}=(0,eM.j)();return(0,r.jsx)(eA.E.div,{initial:{opacity:0,height:0,marginBottom:0},animate:{opacity:1,height:"auto",marginBottom:l?12:16},exit:{opacity:0,height:0,marginBottom:0},transition:{duration:.3,ease:[.4,0,.2,1]},style:{overflow:"hidden"},children:(0,r.jsx)(es.Z,{value:a,onChange:e=>{let t=e.target.value;s(t),null==i||i(t)},placeholder:o,multiline:!0,rows:3,variant:"outlined",fullWidth:!0,size:"small",sx:{mx:0,"& .MuiOutlinedInput-root":{backgroundColor:"#1A1A1A",borderRadius:"6px",fontSize:l?"13px":"14px",fontWeight:500,padding:"8px",px:1,py:0,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"}},"& .MuiOutlinedInput-input":{color:"white",padding:l?"10px 0px":"8px 0px","&::placeholder":{color:"#666666",opacity:1}}}})})};var eT=i(43682),eD=i(23638),ez=i(89663);let eP=(e,t)=>e?ez.RM.mobile:t?ez.RM.tablet:ez.RM.desktop,eL=()=>{let{isMobile:e,isTablet:t}=(0,eM.j)();return(0,n.useMemo)(()=>eP(e,t),[e,t])},eW=()=>{let[e,t]=(0,n.useState)(0),i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=()=>{i.current&&t(i.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{containerWidth:e,containerRef:i}},eB=e=>{let[t,i]=(0,n.useState)(!1),r=(0,n.useRef)(null),{isMobile:o,isTablet:a}=(0,eM.j)();return(0,n.useEffect)(()=>{let e=()=>{if(r.current){let{scrollTop:e,scrollHeight:t,clientHeight:n}=r.current;i(e+n<t-ez.CG.SCROLL_THRESHOLD)}};e();let t=r.current;if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[e]),{canScrollDown:t,scrollableRef:r,handleScrollDown:()=>{if(r.current){let{columnsCount:t,gap:i,padding:n,minCardHeight:s}=eP(o,a),l=e-2*n;r.current.scrollBy({top:Math.max(Math.max(0,(l-i*(t-1))/t),s)+i,behavior:"smooth"})}}}},eH=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=eL(),{cardWidth:o,cardHeight:a,containerHeight:s,columnsCount:l,gap:d,padding:c}=(0,n.useMemo)(()=>{let{columnsCount:n,gap:o,padding:a,minCardHeight:s,fallbackHeight:l,customInputHeight:d,customInputMarginBottom:c,showStyleNumber:u}=r,p=Math.max(0,(e-2*a-o*(n-1))/n),h=Math.max(p,s),m=Math.ceil(u/n),x=h*m+o*(m-1)+2*a;return t&&(x+=d+c),Math.ceil(i/n)>m&&(x+=.25*h),{cardWidth:p,cardHeight:h,containerHeight:x=Math.max(x,l),columnsCount:n,gap:o,padding:a}},[e,r,t,i]);return{cardWidth:o,cardHeight:a,containerHeight:s,columnsCount:l,gap:d,padding:c}},eU=e=>{let{delay:t=0}=e;return(0,r.jsx)(s.Z,{sx:{width:4,height:4,borderRadius:"50%",bgcolor:"rgba(255, 255, 255, 0.6)",animation:`pulse 1.5s ease-in-out infinite ${t}s`,"@keyframes pulse":{"0%, 100%":{opacity:.6},"50%":{opacity:1}}}})},eO=e=>{let{canScrollDown:t,onScrollDown:i}=e;return t?(0,r.jsxs)(s.Z,{onClick:i,sx:{position:"absolute",bottom:12,right:12,display:"flex",alignItems:"center",gap:.5,px:1,py:.5,bgcolor:"rgba(0, 0, 0, 0.7)",borderRadius:"12px",backdropFilter:"blur(4px)",zIndex:3,cursor:"pointer",transition:"all 0.2s","&:hover":{bgcolor:"rgba(0, 0, 0, 0.8)",transform:"scale(1.05)"},"&:active":{transform:"scale(0.95)"}},children:[(0,r.jsx)(eU,{delay:0}),(0,r.jsx)(eU,{delay:.2}),(0,r.jsx)(eU,{delay:.4})]}):null},e$=e=>{let{icon:t,title:i,selectedStyleName:n}=e;return(0,r.jsx)(eA.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(eA.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.4,ease:"easeOut",delay:.1},children:t}),(0,r.jsx)(d.Z,{sx:{fontWeight:500,fontSize:{xs:"14px",md:"16px"},color:"#AAAAAA"},children:i})]}),(0,r.jsx)(eD.M,{mode:"wait",children:n?(0,r.jsx)(eA.E.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},children:(0,r.jsx)(d.Z,{sx:{fontWeight:500,fontSize:{xs:"14px",md:"16px"},color:"#AAAAAA"},children:n})},n):null})]})})};var eN=i(77403),eG=i(54865);let eV=e=>{let{styleOption:t,isSelected:i,onSelect:o,cardWidth:a,cardHeight:l}=e,c=(0,n.useRef)(null),[u,p]=(0,n.useState)(!1),{isMobile:h}=(0,eM.j)();return(0,r.jsx)(s.Z,{sx:{height:`${l}px`,overflow:"hidden",border:i?"2px solid #2F66FF":"2px solid transparent",borderRadius:"6px",transition:"border-color 0.2s ease"},children:(0,r.jsx)(eA.E.div,{whileHover:h?{}:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2,ease:"easeInOut"},style:{width:"100%",height:"100%"},children:(0,r.jsx)(eN.Z,{onClick:()=>{o(t)},onMouseEnter:()=>{!h&&(p(!0),c.current&&t.videoUrl&&c.current.play().catch(()=>{}))},onMouseLeave:()=>{!h&&(p(!1),c.current&&t.videoUrl&&(c.current.pause(),c.current.currentTime=0))},onTouchStart:()=>{h&&c.current&&t.videoUrl&&(p(!0),c.current.play().catch(()=>{}),setTimeout(()=>{p(!1),c.current&&(c.current.pause(),c.current.currentTime=0)},1e3))},sx:{cursor:"pointer",transition:"all 0.2s",backgroundColor:"transparent",boxShadow:"none",borderRadius:"4px",width:"100%",height:"100%",border:"none",...h&&{"&:active":{transform:"scale(0.95)"}}},children:(0,r.jsx)(eG.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:0,"&:last-child":{pb:0},position:"relative",height:"100%"},children:(0,r.jsxs)(s.Z,{sx:{backgroundColor:"Custom"===t.name?"rgba(90, 72, 202, 0.46)":"#1A1A1A",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:"100%",height:"100%",overflow:"hidden"},children:[t.videoUrl?(0,r.jsx)("video",{ref:c,src:t.videoUrl,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",borderRadius:"4px",opacity:u?1:0,transition:"opacity 0.3s ease",zIndex:2}}):null,t.imageUrl?(0,r.jsx)("img",{src:t.imageUrl,alt:t.name,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",borderRadius:"4px",zIndex:1}}):null,(0,r.jsx)(s.Z,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"50%",background:"linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.8) 100%)",borderRadius:"0 0 4px 4px",pointerEvents:"none",zIndex:2.5}}),(0,r.jsx)(eA.E.div,{animate:{color:i?"#FFFFFF":"#CCC"},transition:{duration:.2},style:{position:"absolute",bottom:h?6:8,left:"50%",transform:"translateX(-50%)",zIndex:3},children:(0,r.jsx)(d.Z,{variant:"caption",sx:{textAlign:"center",fontWeight:500,fontSize:`${Math.max(Math.min(.12*a,h?11:12),9)}px`,lineHeight:"1.21em",whiteSpace:"nowrap",textShadow:"0 1px 2px rgba(0, 0, 0, 0.8)"},children:t.name})})]})})})})})},eK=e=>{let{styles:t,selectedStyle:i,onStyleSelect:n,cardWidth:o,cardHeight:a,columnsCount:l=4,gap:d=1.5}=e;return(0,r.jsx)(s.Z,{sx:{display:"grid",gridTemplateColumns:`repeat(${l}, 1fr)`,gap:d/8,width:"100%",pb:.5},children:t.map((e,t)=>(0,r.jsx)(eV,{styleOption:e,isSelected:(null==i?void 0:i.name)===e.name,onSelect:n,cardWidth:o,cardHeight:a},e.name))})},eY=e=>{let{value:t="photorealistic",onChange:i}=e,[o,a]=(0,n.useState)(ez.TV.find(e=>e.value===t)||ez.TV[0]);(0,n.useEffect)(()=>{a(ez.TV.find(e=>e.value===t)||ez.TV[0])},[t]);let l=(0,n.useMemo)(()=>!R.TJ.some(e=>e.value===(null==o?void 0:o.value)),[o]),{isMobile:d}=(0,eM.j)(),c=eL(),{containerWidth:u,containerRef:p}=eW(),{canScrollDown:h,scrollableRef:m,handleScrollDown:x}=eB(u),{cardWidth:g,cardHeight:f,containerHeight:v,columnsCount:y,gap:b,padding:C}=eH(u,l,ez.TV.length),{fallbackHeight:w}=c;return(0,r.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,r.jsx)(e$,{icon:(0,r.jsx)(X.zTQ,{size:16,sx:{color:ez.DM.SECTION_TEXT}}),title:"Video Style",selectedStyleName:null==o?void 0:o.name}),(0,r.jsxs)(eT.Z,{ref:p,elevation:0,sx:{bgcolor:ez.DM.CONTAINER_BACKGROUND,borderRadius:"8px",position:"relative",maxWidth:"100%",width:"100%",height:u>0?`${v}px`:`${w}px`,p:C/8,overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(180deg, ${ez.DM.CONTAINER_BACKGROUND}CC 0%, transparent 100%)`,zIndex:2,pointerEvents:"none"},"&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"4px",background:`linear-gradient(0deg, ${ez.DM.CONTAINER_BACKGROUND}CC 0%, transparent 100%)`,zIndex:2,pointerEvents:"none"}},children:[(0,r.jsxs)(s.Z,{ref:m,sx:{height:"100%",overflow:"auto","&::-webkit-scrollbar":{width:d?"0px":"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:"2px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}},children:[(0,r.jsx)(eD.M,{children:l?(0,r.jsx)(eR,{value:t,onChange:i,placeholder:"Describe the style"}):null}),(0,r.jsx)(eK,{styles:ez.TV,selectedStyle:o,onStyleSelect:e=>{a(e),null==i||i(e.value||"photorealistic")},cardWidth:g,cardHeight:f,columnsCount:y,gap:b})]}),(0,r.jsx)(eO,{canScrollDown:h,onScrollDown:x})]})]})};var eq=i(85814),eX=i(15349),eJ=i(17889);let eQ={vertical:"bottom",horizontal:"right"},e0={vertical:"bottom",horizontal:"left"},e1=e=>{let{sx:t={},title:i,value:o,autoPick:a=!1,onChange:l,anchorOrigin:c=eQ,transformOrigin:u=e0}=e,[p,h]=(0,n.useState)(null),m=(0,n.useMemo)(()=>a?[{key:"auto",label:"Auto",thumbnail:"https://cdn.openart.ai/assets/speech-voice/9.png"},...eJ.B8]:eJ.B8,[a]),x=(0,n.useMemo)(()=>m.find(e=>e.key===o),[o,m]),[g,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),b=n.useRef(null),C=()=>{b.current&&(b.current.pause(),b.current.currentTime=0),y(null),f(!1),h(null)},w=e=>{null==l||l(e),C()},j=(e,t)=>{if(t.stopPropagation(),v===e){b.current&&(b.current.pause(),b.current.currentTime=0,b.current=null),y(null);return}b.current&&(b.current.pause(),b.current.currentTime=0),y(e);let i=eJ.B8.find(t=>t.key===e);if(null==i?void 0:i.voice){let e=new Audio(i.voice);b.current=e,e.play().then(()=>{e.addEventListener("ended",()=>{y(null),b.current=null})}).catch(e=>{console.error("Error playing audio:",e),y(null),b.current=null})}};return(0,r.jsxs)(ee.Z,{direction:"row",justifyContent:"space-between",sx:{backgroundColor:eX.P,borderRadius:eX.tO,height:40,p:1.5,cursor:"pointer",...t},alignItems:"center",onClick:e=>{h(e.currentTarget),f(!0)},children:[x?i({selectedVoice:x}):null,(0,r.jsx)(eq.ZP,{open:g,anchorEl:p,onClose:C,keepMounted:!1,style:{zIndex:1500},anchorOrigin:c,transformOrigin:u,slotProps:{paper:{sx:{backgroundColor:"#1A1A1A",borderRadius:"6px",width:199,maxHeight:300,overflowY:"auto","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"1px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"rgba(255, 255, 255, 0.5)"},"&::-webkit-scrollbar-thumb:active":{backgroundColor:"rgba(255, 255, 255, 0.6)"}}}},disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,onClick:e=>e.stopPropagation(),children:(0,r.jsx)(s.Z,{sx:{padding:"8px 4px"},children:(0,r.jsx)(ee.Z,{spacing:.5,children:m.map(e=>(0,r.jsxs)(ee.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{padding:"4px 8px",height:32,borderRadius:eX.zO,backgroundColor:o===e.key?eX.VY:"transparent","&:hover":{backgroundColor:o===e.key?eX.VY:"rgba(255, 255, 255, 0.1)"},cursor:"pointer"},onClick:()=>w(e.key),children:[(0,r.jsxs)(ee.Z,{direction:"row",alignItems:"center",spacing:1,sx:{width:137},children:[(0,r.jsx)("img",{src:e.thumbnail,alt:e.label,style:{width:24,height:24,overflow:"hidden",backgroundColor:"#555",border:"0.5px solid #2E2E2E",borderRadius:"50%"}}),(0,r.jsx)(d.Z,{fontSize:14,fontWeight:500,sx:{color:"#CCCCCC",textAlign:"left",lineHeight:1.14},children:e.label})]}),(0,r.jsx)(s.Z,{sx:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.3)"},onClick:t=>j(e.key,t),children:v===e.key?(0,r.jsx)(X.gq7,{size:10,style:{color:"white",cursor:"pointer"}}):(0,r.jsx)(X.Mld,{size:10,style:{color:"white",cursor:"pointer"}})})]},e.key))})})})]})},e2=e=>{let{value:t=eJ.Tp,onChange:i}=e;return(0,r.jsx)(ei.u,{icon:(0,r.jsx)(X.GSb,{size:16}),title:"Voice Actor",rightSide:(0,r.jsx)(e1,{value:t,onChange:i,sx:{backgroundColor:"transparent",p:0,height:"auto"},autoPick:!0,title:e=>{let{selectedVoice:t}=e;return(0,r.jsxs)(ee.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,r.jsx)("img",{src:t.thumbnail,alt:t.label,style:{width:24,height:24,overflow:"hidden",backgroundColor:"#555",border:"0.5px solid #2E2E2E",borderRadius:"50%"}}),(0,r.jsx)(d.Z,{fontSize:{xs:"14px",md:"16px"},fontWeight:500,children:t.label}),(0,r.jsx)(g.Z,{sx:{color:"#666",fontSize:16,backgroundColor:"#101010",borderRadius:"50%",width:24,height:24,padding:"4px"}})]})}})})},e5=()=>(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"ai-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"#072A6E"}),(0,r.jsx)("stop",{offset:"50%",stopColor:"#339597"}),(0,r.jsx)("stop",{offset:"100%",stopColor:"#5E6EFF"})]})}),(0,r.jsx)("path",{d:"M5.33382 13.9996C5.33382 13.9996 5.33382 13.9999 6.00049 13.9999V14.6666H5.33382V13.9996Z",fill:"url(#ai-gradient)"}),(0,r.jsx)("path",{d:"M12.8499 10.1576L9.56864 13.4386C8.91059 14.0966 7.97668 14.3876 7.29237 14.5245C6.93747 14.5956 6.6197 14.6308 6.39028 14.6485C6.27511 14.6574 6.18101 14.6619 6.11418 14.6642C6.08074 14.6653 6.05404 14.6659 6.03486 14.6663L6.01178 14.6666L6.00463 14.6666L6.00218 14.6666L6.00124 14.6666C6.00124 14.6666 6.00049 14.6666 6.00049 13.9999L5.33382 13.9996L5.33383 13.9983L5.33383 13.9958L5.33388 13.9887L5.33416 13.9656C5.33448 13.9464 5.33508 13.9197 5.33624 13.8862C5.33854 13.8194 5.34306 13.7252 5.35192 13.61C5.36957 13.3805 5.40481 13.0627 5.4758 12.7077C5.61265 12.0233 5.9035 11.0892 6.56136 10.4314L9.84257 7.15039L12.8499 10.1576Z",fill:"url(#ai-gradient)"}),(0,r.jsx)("path",{d:"M13.7928 9.21478L15.3315 7.67612L15.3338 7.40322C15.3361 7.12312 15.2393 6.77388 15.1136 6.4716C14.9825 6.15624 14.7787 5.79232 14.4934 5.50697C14.208 5.22163 13.8441 5.0179 13.5287 4.88676C13.2264 4.76107 12.8772 4.66431 12.5971 4.66665L12.3242 4.66893L10.7854 6.20761L13.7928 9.21478Z",fill:"url(#ai-gradient)"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.98697 3.98642L4.68426 1.89453H5.31672L6.01401 3.98642L8.1059 4.68371V5.31617L6.01401 6.01346L5.31672 8.10535H4.68426L3.98697 6.01346L1.89508 5.31617V4.68371L3.98697 3.98642Z",fill:"url(#ai-gradient)"})]}),e6=(0,ed.ZP)(Z.Z)(e=>{let{theme:t}=e;return{"& .MuiDialog-paper":{backgroundColor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"11px",padding:"20px",width:"444px",maxWidth:"444px",margin:0}}}),e4=(0,ed.ZP)(ee.Z)(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",gap:"16px",width:"100%"}}),e3=(0,ed.ZP)(ee.Z)(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",gap:"8px"}}),e8=(0,ed.ZP)(s.Z)(e=>{let{theme:t}=e;return{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"}}),e7=(0,ed.ZP)(d.Z)(e=>{let{theme:t}=e;return{fontWeight:600,fontSize:"24px",lineHeight:"28px",color:"#FFFFFF"}}),e9=(0,ed.ZP)(d.Z)(e=>{let{theme:t}=e;return{fontWeight:500,fontSize:"16px",lineHeight:"28px",color:"#E0E0E0",textAlign:"left",width:"100%"}}),te=(0,ed.ZP)(ee.Z)(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",gap:"12px",width:"100%"}}),tt=(0,ed.ZP)(l.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#1D1D1D",border:"1px solid #444444",borderRadius:"5px",padding:"10px 27px",height:"44px",color:"#FFFFFF",fontWeight:600,fontSize:"16px",lineHeight:"16.35px",textTransform:"none",textAlign:"center",flex:1,"&:hover":{backgroundColor:"#2A2A2A",border:"1px solid #555555"}}}),ti=(0,ed.ZP)(eo.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#2E2E2E",borderRadius:"5px",padding:"17px 8px",height:"44px",color:"#FFFFFF",fontWeight:600,fontSize:"16px",gap:"8px","&:hover":{backgroundColor:"#3E3E3E"},"& .MuiLoadingButton-loadingIndicator":{color:"#FFFFFF",position:"absolute"},"&.MuiLoadingButton-loading":{color:"transparent"}}});function tr(e){let{open:t,onClose:i,onProceedAnyway:n,onRewriteWithAI:o,isRewriting:a}=e;return(0,r.jsx)(e6,{open:t,onClose:i,children:(0,r.jsx)(E.Z,{sx:{padding:0},children:(0,r.jsxs)(e4,{children:[(0,r.jsxs)(e3,{children:[(0,r.jsx)(e8,{children:(0,r.jsx)("img",{src:"/_next/static/media/warning-icon.9dd82fac.svg",alt:"Warning",width:23,height:23})}),(0,r.jsx)(e7,{children:"Warning"})]}),(0,r.jsx)(e9,{children:"Looks like your voiceover script is very short â€” the generated video will be just about 5 seconds. Need help expanding it with AI?"}),(0,r.jsxs)(te,{children:[(0,r.jsx)(tt,{onClick:n,children:"Proceed Anyway"}),(0,r.jsxs)(ti,{variant:"contained",onClick:o,loading:a,children:[(0,r.jsx)(e5,{}),(0,r.jsx)(d.Z,{fontSize:16,fontWeight:600,color:"#FFFFFF",children:"Rewrite with AI"})]})]})]})})})}var tn=i(37841),to=i(28337);let ta=async e=>(await to.ZP.post("/stories/rewrite_script",e)).data,ts=(0,to.py)(ta),tl="script_creation_form_data_v1",td=O.z.object({script_content:O.z.string().min(1,"Please enter a script").refine(e=>e.replaceAll(" ","").replaceAll(/\n\s*\n/g,"\n").trim().length<=900,"Script is too long"),voiceover_voice:O.z.enum(eJ.Kz).default("auto"),background_music:O.z.string().nullable().optional(),aspect_ratio:O.z.enum(["16:9","9:16"]).default("16:9"),visual_style:O.z.string().default("photorealistic"),auto_rewrite:O.z.boolean().default(!1),auto_captions:O.z.boolean().default(!0),imageModelConfig:O.z.custom(),videoModelConfig:O.z.custom()}),tc={script_content:"",voiceover_voice:"auto",background_music:"auto",aspect_ratio:"16:9",visual_style:"photorealistic",auto_rewrite:!0,auto_captions:!0,imageModelConfig:{model:"flux_kontext",parameters:{}},videoModelConfig:{model:"kling2.1",parameters:{videoMode:"std"}}};function tu(e){var t;let{onSubmit:i}=e,[a,l]=(0,n.useState)(!1),{form:c,isGenerating:p,canGenerate:x,isRewriting:g,scriptContent:f,scriptOverLimit:v,scriptLength:y,maxScriptLength:b,voiceStyle:C,backgroundMusic:w,imageModelConfig:j,videoModelConfig:F,imageModelOptions:k,videoModelOptions:_,aspectRatio:S,visualStyle:I,autoCaptions:Z,expandedPanels:E,togglePanel:A,onFormSubmit:M,handleModelSelect:T,handleScriptContentChange:D,handleAspectRatioSelect:P,handleVisualStyleSelect:L,handleVoiceoverVoiceChange:W,handleBackgroundMusicChange:B,handleRewriteScript:O,undoScriptContent:N,handleAutoCaptionsChange:V,canUndo:K,autoRewrite:Y,handleAutoRewriteChange:J,handleSuggestionClick:Q,Node:et}=function(){let{onSubmit:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.useRouter)(),{mutate:i,isLoading:a}=(0,tn.vi)(!1),[s,l]=ts(),[d,c]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[m,x]=(0,n.useState)([]),[g,f]=(0,n.useState)(-1),[v,y]=(0,n.useState)({advancedSettings:!1,backgroundMusic:!1}),[b,C]=(0,n.useState)(!1),w=(0,U.cI)({mode:"onChange",defaultValues:tc,resolver:(0,H.F)(td)}),{handleSubmit:j,setValue:F,reset:k,setError:_}=w,S=w.watch("script_content"),I=w.watch("voiceover_voice"),Z=w.watch("background_music"),E=w.watch("aspect_ratio"),A=w.watch("visual_style"),M=w.watch("auto_rewrite"),T=w.watch("auto_captions"),D=w.watch("imageModelConfig"),z=w.watch("videoModelConfig");(0,n.useEffect)(()=>{h(!0)},[]),(0,n.useEffect)(()=>{if(!p)return;let e=(0,G.$o)(tl,{});Object.keys(e).length>0&&Object.entries(e).forEach(e=>{let[t,i]=e;null!=i&&""!==i&&F(t,i)})},[p,F]),(0,n.useEffect)(()=>{if(!p)return;let e=w.watch(e=>{let t=Object.entries(e).reduce((e,t)=>{let[i,r]=t;return null!=r&&""!==r&&(e[i]=r),e},{});Object.keys(t).length>0&&(0,G.qQ)(tl,t)});return()=>e.unsubscribe()},[w,p]);let P=(0,n.useMemo)(()=>$.Fj.filter(e=>!(0,$.Rx)(e.value)).map(e=>({name:e.name,icon:e.icon,value:e.value,disabled:(0,$.Rx)(e.value)})),[]),L=(0,n.useMemo)(()=>$.E5.map(e=>({name:e.name,icon:e.icon,value:e.value})),[]),W=(0,n.useCallback)(e=>{y(t=>({...t,[e]:!t[e]}))},[]),B=(0,n.useMemo)(()=>S.replaceAll(" ","").replaceAll(/\n\s*\n/g,"\n").trim().length,[S]),O=td.safeParse(w.getValues()).success,N=j(async e=>{if(B<100&&!e.auto_rewrite){c(!0);return}await V(e)}),V=async r=>{try{C(!0),u.IP.getState().updateFormData({oneSentenceStory:r.script_content,aspectRatio:r.aspect_ratio});let n={script_content:r.script_content,voiceover_voice:r.voiceover_voice,background_music:r.background_music,aspect_ratio:r.aspect_ratio,visual_style:r.visual_style,auto_rewrite:r.auto_rewrite,auto_captions:r.auto_captions,advanced_settings:{image_model_config:r.imageModelConfig,video_model_config:r.videoModelConfig}};i(n,{onSuccess:i=>{p&&(0,G.qQ)(tl,{}),i.workflowRunId?t.push(`/story/create/workflow/${i.workflowRunId}?category_id=script_to_video`):null==e||e()},onError:e=>{_("root",{message:e instanceof Error?e.message:"Failed to generate character vlog"})}})}catch(e){console.error("Form submission error:",e)}finally{C(!1)}},K=(0,n.useCallback)((e,t)=>{if("imageModel"===e){let e=$.Fj.find(e=>e.name===t);e&&F("imageModelConfig",e.value)}else if("videoModel"===e){let e=$.E5.find(e=>e.name===t);e&&F("videoModelConfig",e.value)}},[F]),Y=(0,n.useCallback)(async e=>{try{let t=w.getValues("script_content"),{enhancedScript:i}=await s({story:e});F("script_content",i),x(e=>{let r=[...e];return t.trim()&&(0===r.length||r.at(-1)!==t)&&r.push(t),i&&i!==r.at(-1)&&r.push(i),r}),f(e=>m.length+(t.trim()&&m.at(-1)!==t?1:0))}catch(e){console.error("Error rewriting script:",e)}},[s,F,w,m]),q=(0,n.useCallback)(()=>{if(g>0){let e=g-1;F("script_content",m[e]),f(e)}},[g,m,F]),X=(0,n.useCallback)(e=>{F("script_content",e)},[F]),J=(0,n.useCallback)(e=>{F("background_music",e)},[F]),Q=(0,n.useCallback)(e=>{F("aspect_ratio",e)},[F]),ee=(0,n.useCallback)(e=>{F("visual_style",e);let t=R.TJ.find(t=>t.value===e);t&&"imageModelConfig"in t&&t.imageModelConfig&&F("imageModelConfig",t.imageModelConfig)},[F]),et=(0,n.useCallback)(e=>{F("voiceover_voice",e)},[F]),ei=(0,n.useCallback)(e=>{F("auto_rewrite",e)},[F]),er=(0,n.useCallback)(e=>{F("auto_captions",e)},[F]),en=(0,n.useCallback)(()=>{k(tc),y({advancedSettings:!1,backgroundMusic:!1}),p&&(0,G.qQ)(tl,{})},[k,p]),eo=(0,n.useCallback)(e=>{F("script_content",e.fullScript),F("visual_style",e.style),F("auto_rewrite",!0)},[F]),ea=(0,r.jsx)(tr,{open:d,isRewriting:l,onProceedAnyway:()=>{c(!1),w.handleSubmit(V)()},onRewriteWithAI:async()=>{await Y(w.getValues("script_content")),c(!1)},onClose:()=>c(!1)});return{form:w,isGenerating:a,isRewriting:l,scriptContent:S,scriptOverLimit:B>900,scriptLength:B,maxScriptLength:900,voiceStyle:I,backgroundMusic:Z,aspectRatio:E,autoCaptions:T,visualStyle:A,autoRewrite:M,imageModelConfig:D,videoModelConfig:z,imageModelOptions:P,videoModelOptions:L,isSubmitting:b,onFormSubmit:N,resetForm:en,expandedPanels:v,togglePanel:W,handleModelSelect:K,handleBackgroundMusicChange:J,handleAspectRatioSelect:Q,handleVisualStyleSelect:ee,handleVoiceoverVoiceChange:et,handleScriptContentChange:X,handleRewriteScript:Y,handleAutoRewriteChange:ei,handleSuggestionClick:eo,handleAutoCaptionsChange:er,undoScriptContent:q,canUndo:g>0,canGenerate:O,Node:ea}}({onSubmit:i}),ei=(0,q.B)(),en=Object.entries(c.formState.errors).reduce((e,t)=>{let[i,r]=t;return(null==r?void 0:r.message)&&(e[i]={message:r.message}),e},{}),eo=()=>{l(!0)},ea=async e=>{await O(e),l(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{component:"form",onSubmit:e=>{e.preventDefault(),ei({onAuthenticated:()=>M(e)})},sx:{width:"100%",maxWidth:1100,mx:"auto",mt:{xs:0,md:8},px:{xs:0,sm:2,md:0},py:{xs:0,md:0}},children:(0,r.jsxs)(ee.Z,{direction:{xs:"column",md:"row"},spacing:{xs:3,lg:0},sx:{width:"100%",alignItems:{xs:"stretch",md:"flex-start"}},children:[(0,r.jsxs)(ee.Z,{sx:{width:{xs:"100%",md:"50%"},pr:{xs:0,md:2}},spacing:{xs:2,sm:2.5},children:[(0,r.jsxs)(ee.Z,{direction:{xs:"column",sm:"row"},spacing:{xs:2,sm:0},sx:{justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"}},children:[(0,r.jsx)(d.Z,{fontSize:{xs:18,sm:16},fontWeight:600,color:"#CCC",sx:{mb:{xs:0,sm:0},display:{xs:"none",sm:"block"}},children:"Voice-over Script"}),(0,r.jsx)(s.Z,{sx:{flexShrink:0},children:(0,r.jsx)(eC,{onClick:()=>{ei({onAuthenticated:()=>eo()})},sx:{width:{xs:"100%",sm:"auto"},minWidth:{xs:"100%",sm:"auto"},py:{xs:1.5,sm:1},fontSize:{xs:14,sm:13}},children:(0,r.jsxs)(ee.Z,{direction:"row",alignItems:"center",gap:1,justifyContent:"center",children:[(0,r.jsx)(X.xsV,{}),(0,r.jsx)(d.Z,{fontSize:{xs:14,sm:13},fontWeight:500,lineHeight:18.2,color:"#FFFFFF",children:"Create Script with AI"})]})})})]}),(0,r.jsx)(eE,{value:f,scriptOverLimit:v,scriptLength:y,maxScriptLength:b,onChange:e=>D(e.target.value),error:!!c.formState.errors.script_content,helperText:null===(t=c.formState.errors.script_content)||void 0===t?void 0:t.message,onClickUndo:N,canUndo:K,isRewriting:g,autoRewrite:Y,setAutoRewrite:J,handleSuggestionClick:Q})]}),(0,r.jsxs)(ee.Z,{sx:{width:{xs:"100%",md:"50%"},pl:{xs:0,md:2}},spacing:{xs:3,sm:2.5},children:[(0,r.jsx)(eY,{value:I,onChange:e=>L(e)}),(0,r.jsx)(e2,{value:C,onChange:e=>W(e)}),(0,r.jsx)(m.Y,{iconSize:16,value:S,onChange:e=>P(e)}),(0,r.jsx)(er,{value:Z,onChange:e=>V(e)}),(0,r.jsx)(z,{iconSize:16,value:w,onChange:e=>B(e),expanded:E.backgroundMusic,onExpandChange:(e,t)=>{t!==E.backgroundMusic&&A("backgroundMusic")},sx:{mb:0}}),(0,r.jsx)(h.d,{iconSize:16,imageModelConfig:j,videoModelConfig:F,imageModelOptions:k,videoModelOptions:_,onModelSelect:T,expanded:E.advancedSettings,onChange:(e,t)=>{t!==E.advancedSettings&&A("advancedSettings")}}),(0,r.jsx)(s.Z,{sx:{pt:{xs:2,lg:1}},children:(0,r.jsx)(ew,{isGenerating:p,canGenerate:x,errors:en})})]})]})}),(0,r.jsx)(eb,{open:a,onClose:()=>{l(!1)},onGenerate:ea,isGenerating:g}),et]})}var tp=i(46858);function th(e){let{mode:t}=e,i=(0,o.useRouter)(),n=(0,tp.Z)(),p=u.YS.use.updateGenerationStatus(),h=()=>{p("script",{loading:!0})},m=()=>{i.push("/story"),localStorage.removeItem("script_creation_form_data"),localStorage.removeItem("vlog_creation_form_data"),localStorage.removeItem("music_video_creation_form_data")};return(0,r.jsxs)(s.Z,{sx:{position:"relative",px:{xs:2,sm:5}},children:[(0,r.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"30vh",zIndex:-1,backgroundImage:`url('${(()=>{switch(t){case"vlog":default:return"https://cdn.openart.ai/assets/Character_vlog_banner.png";case"script":return"https://cdn.openart.ai/assets/Explainer_video_banner.png";case"mv":return"https://cdn.openart.ai/assets/Music_vlog_banner.png"}})()}')`,filter:`brightness(${"vlog"===t?2:1.5})`,mask:"linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.8) 30%, rgba(255, 255, 255, 0.3) 70%, rgba(255, 255, 255, 0) 100%)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.8) 30%, rgba(255, 255, 255, 0.3) 70%, rgba(255, 255, 255, 0) 100%)",backgroundSize:"cover",backgroundPosition:"top",backgroundRepeat:"no-repeat"}}),(0,r.jsxs)(s.Z,{sx:{height:{xs:`calc(${n.height} - ${eS.J9.xs})`,md:`calc(${n.height} - ${eS.gF}px)`},overflow:"auto",pb:1,position:"relative","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"4px"}},children:[(0,r.jsxs)(s.Z,{sx:{mt:2,mb:{xs:3,sm:4}},children:[(0,r.jsx)(s.Z,{sx:{display:{xs:"block",sm:"none"}},children:(0,r.jsxs)(s.Z,{sx:{position:"relative",mb:{xs:1,md:2}},children:[(0,r.jsx)(l.Z,{onClick:m,sx:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",minWidth:40,width:40,height:40,borderRadius:"50%",p:0,color:"text.primary","&:hover":{backgroundColor:"action.hover"}},children:(0,r.jsx)(a.Z,{sx:{fontSize:24}})}),(0,r.jsx)(d.Z,{variant:"h5",component:"h1",sx:{fontSize:24,fontWeight:700,color:"text.primary",lineHeight:1.2,textAlign:"center",px:6},children:(e=>{switch(e){case"vlog":return"Character Vlog";case"script":return"Explainer Video";case"mv":return"Music Video";default:return"Create Story"}})(t)})]})}),(0,r.jsx)(s.Z,{sx:{display:{xs:"none",sm:"flex"},alignItems:"center"},children:(0,r.jsx)(l.Z,{startIcon:(0,r.jsx)(a.Z,{}),sx:{mr:2},onClick:m,children:"Back"})})]}),(()=>{switch(t){case"vlog":default:return(0,r.jsx)(Q,{onSubmit:h});case"script":return(0,r.jsx)(tu,{onSubmit:h});case"mv":return(0,r.jsx)(c.C,{onSubmit:h})}})()]})]})}},77127:function(e,t,i){i.d(t,{l:function(){return w}});var r=i(52676);i(75271);var n=i(23636),o=i.n(n),a=i(90511),s=i(62935),l=i(65893),d=i(71137),c=i(92598),u=i(44754),p=i(60645),h=i(4054),m=i(36857),x=i(71854),g=i(814),f=i(85245),v=i(55309),y=i(80924),b=i(82466),C=i(46858);function w(e){let{initShareStory:t}=e,i=(0,C.Z)(),{isMobile:n}=(0,y.j)(),w=(0,p.p)(),{stories:j=[],isLoading:F,fetchNextPage:k,hasNextPage:_}=(0,f.lk)(),{stories:S,isFetching:I,fetchNextPage:Z,hasNextPage:E,isFetchingNextPage:A}=(0,f.uO)(),{isTeamPlan:M}=(0,b.V)(),R=e=>(0,r.jsx)(s.Z,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:"28px",md:"32px"},color:"#fff",mb:2,fontFamily:"Poppins",letterSpacing:"-0.04em"},children:e});return(0,r.jsxs)(l.Z,{sx:{height:{xs:`calc(${i.height} - ${v.J9.xs})`,md:`calc(${i.height} - ${v.gF}px)`},position:"relative",padding:n?"0px":"16px",overflowY:"auto","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"200px",zIndex:-1,pointerEvents:"none"}},children:[w,(0,r.jsxs)(l.Z,{sx:{mt:1,p:{xs:"12px 0 16px",md:"12px 0 16px"},mb:4},children:[R("Create Your Way"),(0,r.jsx)(x.B,{cards:g.l4})]}),j.length>0&&(0,r.jsxs)(l.Z,{sx:{mb:2},children:[(0,r.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[R(M?"Shared Team Story":"My Story"),(0,r.jsxs)(d.Z,{component:o(),href:"/story/my",sx:{color:"#6290FF"},children:["View all",(0,r.jsx)(a.Z,{sx:{fontSize:"16px"}})]})]}),M?(0,r.jsx)(c.Z,{severity:"info",sx:{mb:2},children:"Stories created by your team are here! Only solo editing for nowâ€”collab mode is on the way!"}):null,F?(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:4},children:(0,r.jsx)(u.Z,{size:32,sx:{color:"#013FFE"}})}):(0,r.jsx)(m.n,{stories:j,maxItems:4,fetchNextPage:k,hasNextPage:_})]}),(0,r.jsxs)(l.Z,{sx:{mb:4},children:[R("Community Stories"),(0,r.jsx)(h.V,{initCommunityStory:t,stories:S,isLoading:I,emptyText:"âœ¨ No published stories available yet. Check back soon for inspiring community stories!",fetchNextPage:Z,hasNextPage:E,isFetchingNextPage:A})]})]})}},52702:function(e,t,i){i.d(t,{X:function(){return s}});var r=i(52676),n=i(75271),o=i(22289),a=i(45137);let s=e=>{let{story:t,origin:i,children:s}=e,{data:l}=(0,o.$_)(),[d,c]=(0,n.useState)(new Set),[u,p]=(0,n.useState)(null),[h,m]=(0,n.useState)(0),[x,g]=(0,n.useState)(null),f=(0,n.useCallback)((e,r)=>{t&&(0,a.B)("story_video_play",{play_event:e,story_id:t.id,story_type:t.category_id,viewer_id:(null==l?void 0:l.id)||"",origin:i,...r})},[t,null==l?void 0:l.id,i]),v=(0,n.useCallback)(e=>{let t=e.currentTarget,i=t.currentTime,r=t.duration;p(Date.now()),g(i),f("start",{current_time:i,duration:r})},[f]),y=(0,n.useCallback)(e=>{let t=e.currentTarget,i=t.currentTime,r=t.duration,n=0;u&&(n=Date.now()-u,m(e=>e+n),p(null)),f("pause",{current_time:i,duration:r,watch_time:n})},[f,u]),b=(0,n.useCallback)(e=>{let t=e.currentTarget.duration,i=0;u&&(i=Date.now()-u,m(e=>e+i),p(null)),f("complete",{current_time:t,duration:t,watch_time:i,total_watch_time:h+i})},[f,u,h]),C=(0,n.useCallback)(e=>{let t=e.currentTarget,i=t.currentTime/t.duration*100;[25,50,75].forEach(e=>{i>=e&&!d.has(e)&&(c(t=>new Set(t).add(e)),f(`progress_${e}`,{current_time:t.currentTime,duration:t.duration,progress:e}))})},[f,d]),w=(0,n.useCallback)(e=>{let t=e.currentTarget,i=t.currentTime;f("seeking",{current_time:i,duration:t.duration,seek_from:x,seek_to:i}),g(i)},[f,x]),j=(0,n.useCallback)(e=>{let t=e.currentTarget,i=t.error;f("error",{error_code:null==i?void 0:i.code,error_message:null==i?void 0:i.message,current_time:t.currentTime,duration:t.duration})},[f]),F=(0,n.useCallback)(e=>{let t=e.currentTarget;f("load_start",{video_url:t.src,duration:t.duration})},[f]);return(0,r.jsx)(r.Fragment,{children:s({onPlay:v,onPause:y,onEnded:b,onTimeUpdate:C,onSeeking:w,onError:j,onLoadStart:F})})}},67753:function(e,t,i){i.d(t,{n:function(){return b}});var r=i(52676),n=i(75271),o=i(83396),a=i(77403),s=i(68096),l=i(54865),d=i(62935),c=i(14930),u=i(61271),p=i(77742),h=i(66686),m=i(57598),x=i(65893),g=i(40174),f=i(12073),v=i(61011);let y=e=>{let{character:t,isSelected:i,onClick:n,characterRef:o}=e;return(0,r.jsx)("div",{ref:o,children:(0,r.jsxs)(a.Z,{onClick:()=>n(t),sx:{cursor:"pointer",bgcolor:"#1A1A1A",border:i?"2px solid #0929F7":"1px solid #2E2E2E",borderRadius:"13px",overflow:"hidden",transition:"all 0.2s ease-in-out","&:hover":{transform:"scale(1.02)",borderColor:i?"#0929F7":"#444444"}},children:[(0,r.jsx)(s.Z,{component:"img",image:t.image_url,alt:t.model_name,sx:{height:"200px",objectFit:"cover",bgcolor:"#2E2E2E"}}),(0,r.jsx)(l.Z,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#FFFFFF",fontWeight:500,fontSize:14,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.model_name})})]})})};function b(e){let{open:t,onClose:i,onCharacterSelect:a,selectedCharacter:s,characterType:l="default"}=e,b=(0,f.Z)(),C=(0,c.Z)(b.breakpoints.down("md")),w=(0,n.useRef)({}),{data:j}=(0,v.Lg)(l);(0,n.useEffect)(()=>{if(t&&s&&j){let e=setTimeout(()=>{let e=w.current[s.id];e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100);return()=>clearTimeout(e)}},[t,s,j]);let F=e=>{a(e),i()};return(0,r.jsxs)(u.Z,{open:t,onClose:i,fullScreen:C,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{bgcolor:"#101010",border:"1px solid #2E2E2E",borderRadius:C?0:"16px",maxHeight:"90vh"}},children:[(0,r.jsxs)(p.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",color:"#FFFFFF",fontWeight:600,fontSize:20,p:3,pb:1},children:["All Characters",(0,r.jsx)(h.Z,{onClick:i,sx:{color:"#AAAAAA","&:hover":{color:"#FFFFFF",bgcolor:"#2E2E2E"}},children:(0,r.jsx)(o.Z,{})})]}),(0,r.jsx)(m.Z,{sx:{p:3,pt:1},children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(d.Z,{variant:"h6",sx:{color:"#CCCCCC",fontWeight:600,mb:2,fontSize:16},children:"By OpenArt"}),(0,r.jsx)(g.ZP,{container:!0,spacing:2,children:null==j?void 0:j.map(e=>(0,r.jsx)(g.ZP,{item:!0,xs:6,sm:4,md:3,lg:2.4,children:(0,r.jsx)(y,{character:e,isSelected:(null==s?void 0:s.id)===e.id,onClick:F,characterRef:t=>{w.current[e.id]=t}})},e.id))})]})})]})}},75783:function(e,t,i){i.d(t,{Eq:function(){return s},QM:function(){return c},SZ:function(){return l},TI:function(){return p},js:function(){return a},jw:function(){return d},yQ:function(){return u}});var r=i(52676);i(75271);var n=i(28382),o=i(31526);let a=e=>{let{width:t=13,height:i=15,fill:n="#888888",className:o}=e;return(0,r.jsx)("svg",{width:t,height:i,viewBox:"0 0 13 15",fill:n,xmlns:"http://www.w3.org/2000/svg",className:o,children:(0,r.jsx)("path",{d:"M8.49892 1.99974C8.49892 1.60423 8.38164 1.2176 8.16191 0.888744C7.94217 0.559889 7.62986 0.303577 7.26445 0.152222C6.89905 0.000866449 6.49697 -0.038735 6.10906 0.0384253C5.72115 0.115586 5.36483 0.306042 5.08516 0.585711C4.80549 0.865379 4.61503 1.2217 4.53787 1.60961C4.46071 1.99752 4.50031 2.3996 4.65167 2.76501C4.80302 3.13041 5.05934 3.44273 5.38819 3.66246C5.71705 3.88219 6.10368 3.99948 6.49919 3.99948C7.02955 3.99948 7.53819 3.78879 7.91321 3.41377C8.28824 3.03874 8.49892 2.5301 8.49892 1.99974ZM6.49919 2.99961C6.30143 2.99961 6.10812 2.94097 5.94369 2.8311C5.77926 2.72123 5.65111 2.56507 5.57543 2.38237C5.49975 2.19967 5.47995 1.99863 5.51853 1.80467C5.55711 1.61072 5.65234 1.43256 5.79217 1.29272C5.93201 1.15289 6.11017 1.05766 6.30412 1.01908C6.49808 0.980502 6.69912 1.0003 6.88182 1.07598C7.06452 1.15166 7.22068 1.27981 7.33055 1.44424C7.44041 1.60867 7.49906 1.80198 7.49906 1.99974C7.49906 2.26492 7.39371 2.51924 7.2062 2.70675C7.01869 2.89426 6.76437 2.99961 6.49919 2.99961ZM12.9671 4.98122C12.9102 4.70124 12.7573 4.44991 12.5348 4.27067C12.3123 4.09142 12.0342 3.9955 11.7485 3.99948H1.24987C0.964964 3.99947 0.6886 4.0968 0.466578 4.27535C0.244556 4.45391 0.0902009 4.70295 0.0290901 4.98123C-0.0320207 5.25952 0.00378064 5.55032 0.130562 5.80547C0.257343 6.06062 0.467494 6.26479 0.726194 6.38416H0.734318L3.90578 7.78086L2.59345 12.7627C2.45613 13.0652 2.4446 13.4098 2.56139 13.7208C2.67817 14.0318 2.91371 14.2836 3.21618 14.4209C3.51865 14.5582 3.86328 14.5698 4.17426 14.453C4.48524 14.3362 4.73709 14.1007 4.8744 13.7982L6.49919 10.9942L8.12397 13.7982C8.26836 14.0878 8.51944 14.3101 8.82438 14.4183C9.12931 14.5266 9.46435 14.5123 9.75901 14.3786C10.0537 14.2449 10.285 14.0021 10.4043 13.7013C10.5236 13.4005 10.5216 13.0652 10.3987 12.7658L9.08635 7.78398L12.2578 6.38729H12.2659C12.5288 6.27191 12.7429 6.06805 12.871 5.81116C12.9991 5.55426 13.0331 5.26059 12.9671 4.98122ZM11.8547 5.47491L8.29708 7.04095C8.18816 7.08894 8.09994 7.17422 8.04828 7.28144C7.99662 7.38866 7.9849 7.51079 8.01524 7.62588L9.44443 13.0608C9.45171 13.0899 9.46197 13.1182 9.47505 13.1452C9.49602 13.19 9.5032 13.2401 9.49568 13.289C9.48816 13.3379 9.46628 13.3835 9.43281 13.42C9.39934 13.4565 9.35579 13.4822 9.30768 13.4939C9.25957 13.5056 9.20907 13.5028 9.16259 13.4857C9.10044 13.4629 9.04987 13.4164 9.02198 13.3564C9.01569 13.3428 9.00859 13.3297 9.00073 13.317L6.93163 9.74872C6.88768 9.67296 6.8246 9.61008 6.74871 9.56636C6.67282 9.52265 6.58677 9.49964 6.49919 9.49964C6.4116 9.49964 6.32556 9.52265 6.24966 9.56636C6.17377 9.61008 6.11069 9.67296 6.06674 9.74872L3.99951 13.3139C3.99165 13.3266 3.98456 13.3397 3.97827 13.3533C3.95038 13.4133 3.89981 13.4598 3.83766 13.4826C3.79118 13.4996 3.74068 13.5025 3.69257 13.4908C3.64446 13.4791 3.60091 13.4534 3.56744 13.4169C3.53397 13.3804 3.51209 13.3348 3.50457 13.2859C3.49705 13.2369 3.50423 13.1869 3.5252 13.142C3.53827 13.115 3.54854 13.0868 3.55582 13.0577L4.98313 7.624C5.01347 7.50892 5.00176 7.38678 4.95009 7.27956C4.89843 7.17234 4.81021 7.08707 4.7013 7.03908L1.14364 5.47491C1.09257 5.45054 1.05128 5.40957 1.02652 5.35869C1.00176 5.30781 0.994998 5.25003 1.00733 5.19481C1.01967 5.13959 1.05038 5.09019 1.09443 5.05468C1.13849 5.01917 1.19329 4.99967 1.24987 4.99935H11.7485C11.8052 4.99924 11.8603 5.01845 11.9047 5.05381C11.9491 5.08916 11.9801 5.13857 11.9927 5.1939C12.0053 5.24923 11.9987 5.3072 11.9739 5.35827C11.9492 5.40934 11.9078 5.45047 11.8566 5.47491H11.8547Z",fill:n})})},s=e=>{let{width:t=12,height:i=14,fill:n="#888888",className:o}=e;return(0,r.jsx)("svg",{width:t,height:i,viewBox:"0 0 12 14",fill:n,xmlns:"http://www.w3.org/2000/svg",className:o,children:(0,r.jsx)("path",{d:"M11.6114 1.6594L6.15686 0.023029C6.07542 -0.00141634 5.98939 -0.0064847 5.90565 0.00822853C5.82191 0.0229418 5.74276 0.057029 5.67453 0.107769C5.6063 0.15851 5.55088 0.224498 5.51269 0.300466C5.4745 0.376434 5.4546 0.460278 5.45458 0.545305V7.92671C4.89597 7.42707 4.18279 7.1343 3.43425 7.09731C2.6857 7.06033 1.94714 7.28138 1.342 7.72352C0.736854 8.16567 0.301794 8.80211 0.109529 9.52648C-0.0827369 10.2509 -0.0205594 11.0193 0.28567 11.7033C0.591899 12.3874 1.12363 12.9456 1.79198 13.2847C2.46034 13.6238 3.22484 13.7232 3.9577 13.5663C4.69056 13.4095 5.34738 13.0059 5.81839 12.4229C6.28941 11.84 6.54607 11.113 6.54549 10.3635V4.55101L11.2978 5.9767C11.3792 6.00115 11.4653 6.00621 11.549 5.9915C11.6327 5.97679 11.7119 5.9427 11.7801 5.89196C11.8483 5.84122 11.9038 5.77523 11.942 5.69926C11.9801 5.6233 12 5.53945 12.0001 5.45442V2.18168C12 2.06441 11.9622 1.95028 11.8922 1.8562C11.8222 1.76213 11.7237 1.69312 11.6114 1.6594ZM3.27275 12.5454C2.84122 12.5454 2.41939 12.4174 2.06059 12.1777C1.70179 11.9379 1.42214 11.5972 1.257 11.1985C1.09186 10.7998 1.04865 10.3611 1.13284 9.93789C1.21703 9.51466 1.42483 9.12589 1.72996 8.82076C2.03509 8.51562 2.42386 8.30782 2.84709 8.22364C3.27033 8.13945 3.70902 8.18266 4.1077 8.3478C4.50638 8.51293 4.84713 8.79258 5.08687 9.15138C5.32662 9.51018 5.45458 9.93202 5.45458 10.3635C5.45458 10.9422 5.22471 11.4972 4.81554 11.9063C4.40636 12.3155 3.85141 12.5454 3.27275 12.5454ZM10.9092 4.72147L6.54549 3.41237V1.27826L10.9092 2.59077V4.72147Z",fill:n})})},l=e=>{let{width:t=14,height:i=12,fill:n="#888888",className:o}=e;return(0,r.jsx)("svg",{width:t,height:i,viewBox:"0 0 14 12",fill:n,xmlns:"http://www.w3.org/2000/svg",className:o,children:(0,r.jsx)("path",{d:"M13.5 0H9C8.61189 0 8.2291 0.0903627 7.88197 0.263932C7.53483 0.437501 7.23287 0.68951 7 1C6.76713 0.68951 6.46517 0.437501 6.11803 0.263932C5.7709 0.0903627 5.38811 0 5 0H0.5C0.367392 0 0.240215 0.0526785 0.146447 0.146447C0.0526784 0.240215 0 0.367392 0 0.5V9.5C0 9.63261 0.0526784 9.75979 0.146447 9.85355C0.240215 9.94732 0.367392 10 0.5 10H5C5.39782 10 5.77936 10.158 6.06066 10.4393C6.34196 10.7206 6.5 11.1022 6.5 11.5C6.5 11.6326 6.55268 11.7598 6.64645 11.8536C6.74021 11.9473 6.86739 12 7 12C7.13261 12 7.25979 11.9473 7.35355 11.8536C7.44732 11.7598 7.5 11.6326 7.5 11.5C7.5 11.1022 7.65804 10.7206 7.93934 10.4393C8.22064 10.158 8.60218 10 9 10H13.5C13.6326 10 13.7598 9.94732 13.8536 9.85355C13.9473 9.75979 14 9.63261 14 9.5V0.5C14 0.367392 13.9473 0.240215 13.8536 0.146447C13.7598 0.0526785 13.6326 0 13.5 0ZM5 9H1V1H5C5.39782 1 5.77936 1.15804 6.06066 1.43934C6.34196 1.72064 6.5 2.10218 6.5 2.5V9.5C6.06769 9.17463 5.54107 8.99909 5 9ZM13 9H9C8.45893 8.99909 7.93231 9.17463 7.5 9.5V2.5C7.5 2.10218 7.65804 1.72064 7.93934 1.43934C8.22064 1.15804 8.60218 1 9 1H13V9ZM9 2.5H11.5C11.6326 2.5 11.7598 2.55268 11.8536 2.64645C11.9473 2.74021 12 2.86739 12 3C12 3.13261 11.9473 3.25979 11.8536 3.35355C11.7598 3.44732 11.6326 3.5 11.5 3.5H9C8.86739 3.5 8.74021 3.44732 8.64645 3.35355C8.55268 3.25979 8.5 3.13261 8.5 3C8.5 2.86739 8.55268 2.74021 8.64645 2.64645C8.74021 2.55268 8.86739 2.5 9 2.5ZM12 5C12 5.13261 11.9473 5.25979 11.8536 5.35355C11.7598 5.44732 11.6326 5.5 11.5 5.5H9C8.86739 5.5 8.74021 5.44732 8.64645 5.35355C8.55268 5.25979 8.5 5.13261 8.5 5C8.5 4.86739 8.55268 4.74021 8.64645 4.64645C8.74021 4.55268 8.86739 4.5 9 4.5H11.5C11.6326 4.5 11.7598 4.55268 11.8536 4.64645C11.9473 4.74021 12 4.86739 12 5ZM12 7C12 7.13261 11.9473 7.25979 11.8536 7.35355C11.7598 7.44732 11.6326 7.5 11.5 7.5H9C8.86739 7.5 8.74021 7.44732 8.64645 7.35355C8.55268 7.25979 8.5 7.13261 8.5 7C8.5 6.86739 8.55268 6.74021 8.64645 6.64645C8.74021 6.55268 8.86739 6.5 9 6.5H11.5C11.6326 6.5 11.7598 6.55268 11.8536 6.64645C11.9473 6.74021 12 6.86739 12 7Z",fill:n})})},d=e=>{let{width:t=13,height:i=13,fill:n="#888888",className:o}=e;return(0,r.jsx)("svg",{width:t,height:i,viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,children:(0,r.jsx)("path",{d:"M5.08172 3.3928C3.8894 4.73678 2.53748 6.67583 1.36899 9.01425C1.28328 9.18567 1.13298 9.31602 0.951161 9.37663C0.76934 9.43724 0.57089 9.42313 0.399467 9.33742C0.228044 9.25171 0.0976913 9.10141 0.0370842 8.91959C-0.0235228 8.73777 -0.00941947 8.53932 0.0762919 8.36789C1.29822 5.92476 2.71947 3.87955 4.00061 2.43447C4.64046 1.71302 5.2572 1.12733 5.81039 0.715686C6.08627 0.509865 6.35925 0.337986 6.6214 0.215216C6.87489 0.095334 7.1652 6.28568e-06 7.46346 6.28568e-06C7.63096 -0.000621184 7.79528 0.0457411 7.93774 0.133826C8.08021 0.221911 8.19512 0.348188 8.26941 0.49831C8.38279 0.72363 8.39507 0.964115 8.39218 1.12661C8.38641 1.47109 8.29469 1.9015 8.17697 2.33987C7.93504 3.23754 7.5104 4.42769 7.08865 5.60267L7.02943 5.76733C6.62068 6.90404 6.21842 8.02269 5.957 8.91603C5.8867 9.15724 5.82917 9.37269 5.78439 9.56238C6.28559 9.16013 6.90377 8.55422 7.55879 7.91003L7.58045 7.88909C8.21669 7.26368 8.89049 6.60217 9.45812 6.14792C9.74049 5.9226 10.0445 5.70811 10.3377 5.58462C10.5833 5.4799 11.1466 5.31019 11.5849 5.74855C11.8623 6.02587 11.9388 6.38696 11.959 6.65561C11.9807 6.93726 11.9475 7.24057 11.8962 7.52945C11.7951 8.10719 11.59 8.78098 11.4029 9.38906L11.3733 9.48655C11.2058 10.0289 11.057 10.5135 10.9725 10.902C11.1603 10.7143 11.3914 10.4153 11.6615 9.97402C11.711 9.89312 11.776 9.82278 11.8528 9.767C11.9295 9.71123 12.0165 9.67111 12.1087 9.64895C12.201 9.62679 12.2967 9.62301 12.3904 9.63783C12.4841 9.65265 12.5739 9.68579 12.6548 9.73534C12.7357 9.78489 12.8061 9.8499 12.8619 9.92663C12.9176 10.0034 12.9578 10.0903 12.9799 10.1826C13.0021 10.2748 13.0059 10.3705 12.991 10.4642C12.9762 10.5579 12.9431 10.6478 12.8935 10.7287C12.5014 11.3686 12.0955 11.8885 11.6651 12.2113C11.2145 12.5493 10.6252 12.74 10.0286 12.4417C9.58956 12.2214 9.4899 11.7845 9.46751 11.5419C9.44368 11.2797 9.48195 10.9937 9.53178 10.7366C9.62567 10.2506 9.80982 9.65554 9.98314 9.09296L10.0229 8.96442C10.2157 8.33756 10.3912 7.75188 10.4742 7.27885L10.4916 7.17413L10.3608 7.27524C9.85676 7.67894 9.23352 8.2899 8.57128 8.94058L8.54962 8.96225C7.91338 9.58693 7.23959 10.2492 6.67195 10.7027C6.38958 10.9287 6.08554 11.1432 5.79234 11.2667C5.5468 11.3714 4.9835 11.5412 4.54514 11.1028C4.32198 10.8796 4.26493 10.598 4.24688 10.4268C4.23014 10.2335 4.23571 10.0389 4.26349 9.84692C4.31259 9.46561 4.4267 9.00197 4.57113 8.51089C4.84556 7.5735 5.26082 6.41657 5.66307 5.29791L5.72951 5.11376C6.15776 3.92072 6.55929 2.79267 6.78172 1.96506L6.83517 1.75851C6.78049 1.79596 6.72656 1.83449 6.6734 1.87406C6.22348 2.20915 5.67896 2.71901 5.08172 3.3928Z",fill:n})})},c=e=>{let{width:t=13,height:i=11,fill:n="#888888",className:o}=e;return(0,r.jsx)("svg",{width:t,height:i,viewBox:"0 0 13 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,style:{fill:"linear-gradient(302deg, #83A9FF -9.88%, #503CFF 90.65%)"},children:(0,r.jsx)("path",{d:"M8.2041 1.84473C8.30753 1.84477 8.40796 1.87694 8.48926 1.93555C8.57063 1.99426 8.62801 2.07668 8.65234 2.16895C8.97843 3.40292 9.31223 4.17442 9.81543 4.72949C10.3109 5.27672 11.0129 5.65817 12.1865 6.02148C12.2778 6.04978 12.3568 6.10408 12.4131 6.17578C12.4694 6.24768 12.5 6.33435 12.5 6.42285C12.5 6.51128 12.4693 6.59709 12.4131 6.66895C12.3569 6.74079 12.2779 6.79488 12.1865 6.82324C11.0646 7.17076 10.3709 7.52347 9.86621 8.06055C9.35553 8.60434 8.99323 9.38362 8.65234 10.6758C8.62801 10.768 8.57063 10.8505 8.48926 10.9092C8.40795 10.9678 8.30755 11 8.2041 11C8.10055 11 7.99934 10.9679 7.91797 10.9092C7.83675 10.8505 7.77919 10.7679 7.75488 10.6758C7.42997 9.44504 7.09578 8.6724 6.5918 8.11621C6.0958 7.56919 5.39313 7.1859 4.22168 6.82324C4.13022 6.7949 4.05042 6.74085 3.99414 6.66895C3.93804 6.59714 3.90726 6.51118 3.90723 6.42285C3.90723 6.33435 3.93786 6.24768 3.99414 6.17578C4.05042 6.10394 4.13028 6.04981 4.22168 6.02148C5.3434 5.674 6.03739 5.32217 6.54199 4.78516C7.05325 4.24137 7.41401 3.4616 7.75488 2.16895C7.77919 2.07677 7.83672 1.99424 7.91797 1.93555C7.99934 1.87684 8.10055 1.84473 8.2041 1.84473ZM3.09082 0C3.19652 0 3.29967 0.0328034 3.38184 0.09375C3.46396 0.154692 3.52093 0.240236 3.54297 0.334961C3.69188 0.978922 3.89971 1.39841 4.17285 1.68945C4.44117 1.97603 4.80731 2.17641 5.35254 2.32422C5.44774 2.35012 5.53133 2.40368 5.59082 2.47656C5.65033 2.54966 5.68262 2.63926 5.68262 2.73047C5.68252 2.82153 5.65024 2.91041 5.59082 2.9834C5.53133 3.05633 5.44778 3.10983 5.35254 3.13574C4.80667 3.28355 4.44117 3.48393 4.17285 3.77051C3.89969 4.06153 3.69189 4.4805 3.54297 5.125C3.52093 5.2197 3.46392 5.30527 3.38184 5.36621C3.29967 5.42716 3.19652 5.45996 3.09082 5.45996C2.98526 5.45989 2.88285 5.42707 2.80078 5.36621C2.71862 5.30526 2.6617 5.21976 2.63965 5.125C2.49075 4.48114 2.28286 4.06154 2.00977 3.77051C1.74144 3.48392 1.37474 3.28355 0.830078 3.13574C0.73487 3.10979 0.651248 3.05634 0.591797 2.9834C0.532375 2.91041 0.500096 2.82153 0.5 2.73047C0.5 2.63926 0.532286 2.54966 0.591797 2.47656C0.651251 2.40366 0.734894 2.35016 0.830078 2.32422C1.39671 2.17026 1.76627 1.95795 2.03027 1.66699C2.30102 1.3703 2.49687 0.953109 2.63965 0.334961C2.6617 0.240205 2.71862 0.154697 2.80078 0.09375C2.88284 0.0329219 2.98529 7.05317e-05 3.09082 0Z",fill:n})})},u=e=>{let{width:t=15,height:i=15,fill:n="#888888",className:o}=e;return(0,r.jsx)("svg",{width:t,height:i,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,children:(0,r.jsx)("path",{d:"M9.25003 2.6875C9.25003 2.34138 9.1474 2.00304 8.9551 1.71525C8.76281 1.42747 8.4895 1.20316 8.16973 1.07071C7.84996 0.938258 7.49809 0.903602 7.15863 0.971127C6.81916 1.03865 6.50734 1.20532 6.2626 1.45006C6.01785 1.69481 5.85118 2.00663 5.78366 2.34609C5.71613 2.68556 5.75079 3.03743 5.88324 3.3572C6.0157 3.67697 6.24 3.95028 6.52779 4.14257C6.81557 4.33486 7.15392 4.4375 7.50003 4.4375C7.96416 4.4375 8.40928 4.25313 8.73747 3.92494C9.06566 3.59675 9.25003 3.15163 9.25003 2.6875ZM7.50003 3.5625C7.32697 3.5625 7.1578 3.51118 7.01391 3.41504C6.87002 3.31889 6.75787 3.18223 6.69164 3.02235C6.62541 2.86246 6.60808 2.68653 6.64185 2.5168C6.67561 2.34706 6.75894 2.19115 6.88131 2.06878C7.00369 1.94641 7.1596 1.86308 7.32933 1.82931C7.49906 1.79555 7.675 1.81288 7.83488 1.87911C7.99477 1.94533 8.13142 2.05748 8.22757 2.20138C8.32371 2.34527 8.37503 2.51444 8.37503 2.6875C8.37503 2.91957 8.28285 3.14212 8.11875 3.30622C7.95466 3.47031 7.7321 3.5625 7.50003 3.5625ZM13.1602 5.29664C13.1104 5.05162 12.9766 4.83168 12.7819 4.67482C12.5872 4.51796 12.3438 4.43402 12.0938 4.4375H2.90628C2.65695 4.43749 2.4151 4.52267 2.22081 4.67893C2.02651 4.83518 1.89144 5.05312 1.83796 5.29665C1.78448 5.54018 1.81581 5.79467 1.92676 6.01795C2.0377 6.24124 2.22161 6.41991 2.448 6.52438H2.45511L5.2305 7.74664L4.08206 12.1063C3.9619 12.371 3.95181 12.6726 4.05401 12.9448C4.15621 13.2169 4.36233 13.4373 4.62703 13.5575C4.89172 13.6776 5.19332 13.6877 5.46546 13.5855C5.7376 13.4833 5.95799 13.2772 6.07816 13.0125L7.50003 10.5587L8.92191 13.0125C9.04827 13.2659 9.26798 13.4605 9.53484 13.5552C9.8017 13.6499 10.0949 13.6374 10.3527 13.5204C10.6106 13.4034 10.813 13.1909 10.9174 12.9277C11.0218 12.6645 11.0201 12.371 10.9125 12.1091L9.7641 7.74938L12.5395 6.52711H12.5466C12.7766 6.42614 12.964 6.24774 13.0761 6.02293C13.1882 5.79812 13.218 5.54112 13.1602 5.29664ZM12.1868 5.72867L9.07339 7.09914C8.97808 7.14114 8.90088 7.21576 8.85567 7.30959C8.81046 7.40342 8.8002 7.5103 8.82675 7.61102L10.0775 12.3672C10.0838 12.3927 10.0928 12.4174 10.1043 12.441C10.1226 12.4803 10.1289 12.5241 10.1223 12.5669C10.1157 12.6097 10.0966 12.6496 10.0673 12.6816C10.038 12.7135 9.99989 12.736 9.95779 12.7462C9.91569 12.7565 9.87149 12.754 9.83081 12.7391C9.77643 12.7191 9.73217 12.6784 9.70777 12.6259C9.70226 12.614 9.69605 12.6025 9.68917 12.5914L7.87847 9.46875C7.84001 9.40245 7.78481 9.34742 7.71839 9.30917C7.65198 9.27091 7.57668 9.25078 7.50003 9.25078C7.42339 9.25078 7.34809 9.27091 7.28167 9.30917C7.21525 9.34742 7.16005 9.40245 7.1216 9.46875L5.31253 12.5887C5.30566 12.5998 5.29945 12.6113 5.29394 12.6231C5.26953 12.6757 5.22528 12.7164 5.17089 12.7363C5.13021 12.7512 5.08602 12.7537 5.04392 12.7435C5.00182 12.7333 4.96371 12.7107 4.93442 12.6788C4.90513 12.6469 4.88598 12.607 4.8794 12.5642C4.87282 12.5213 4.8791 12.4775 4.89746 12.4383C4.9089 12.4147 4.91787 12.3899 4.92425 12.3645L6.17331 7.60938C6.19986 7.50866 6.18961 7.40178 6.1444 7.30795C6.09919 7.21412 6.02199 7.1395 5.92667 7.0975L2.81331 5.72867C2.76862 5.70735 2.73249 5.67149 2.71082 5.62697C2.68916 5.58244 2.68324 5.53188 2.69403 5.48356C2.70483 5.43523 2.7317 5.392 2.77026 5.36092C2.80881 5.32985 2.85677 5.31278 2.90628 5.3125H12.0938C12.1434 5.31241 12.1916 5.32922 12.2305 5.36016C12.2693 5.3911 12.2965 5.43434 12.3075 5.48276C12.3185 5.53118 12.3127 5.58191 12.2911 5.6266C12.2694 5.67129 12.2332 5.70729 12.1884 5.72867H12.1868Z",fill:n})})},p=e=>{let{fill:t="#666666",size:i,className:a,sx:s,...l}=e;return(0,r.jsx)(n.Ld,{width:"16",height:"16",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:a,sx:(0,o.j)({...i?{width:i,height:i,fontSize:i}:{}},s),...l,children:(0,r.jsx)("path",{d:"M16.875 3H6.875C6.70924 3 6.55027 3.06585 6.43306 3.18306C6.31585 3.30027 6.25 3.45924 6.25 3.625V6.75H3.125C2.95924 6.75 2.80027 6.81585 2.68306 6.93306C2.56585 7.05027 2.5 7.20924 2.5 7.375V17.375C2.5 17.5408 2.56585 17.6997 2.68306 17.8169C2.80027 17.9342 2.95924 18 3.125 18H13.125C13.2908 18 13.4497 17.9342 13.5669 17.8169C13.6842 17.6997 13.75 17.5408 13.75 17.375V14.25H16.875C17.0408 14.25 17.1997 14.1842 17.3169 14.0669C17.4342 13.9497 17.5 13.7908 17.5 13.625V3.625C17.5 3.45924 17.4342 3.30027 17.3169 3.18306C17.1997 3.06585 17.0408 3 16.875 3ZM12.5 16.75H3.75V8H12.5V16.75ZM16.25 13H13.75V7.375C13.75 7.20924 13.6842 7.05027 13.5669 6.93306C13.4497 6.81585 13.2908 6.75 13.125 6.75H7.5V4.25H16.25V13Z",fill:t})})}},47406:function(e,t,i){i.d(t,{wY:function(){return p},VB:function(){return h.V},p6:function(){return m.p},$P:function(){return y},nE:function(){return b.n},Bw:function(){return C.B},mU:function(){return w.m},ls:function(){return j.l},Vo:function(){return W}}),i(67206);var r=i(52676),n=i(75271),o=i(63532),a=i(83396),s=i(65893),l=i(90902),d=i(66686),c=i(61271),u=i(57598);let p=(0,n.memo)(e=>{let{src:t,alt:i="",className:p,style:h,errorState:m,width:x="100%",height:g="100%",borderRadius:f=0,objectFit:v="cover",backgroundColor:y="#1A1A1A",showSkeleton:b=!0,rootMargin:C="50px",threshold:w=.1,onLoad:j,onError:F,enableFullscreen:k=!1}=e,[_,S]=(0,n.useState)(!1),[I,Z]=(0,n.useState)(!1),[E,A]=(0,n.useState)(!1),[M,R]=(0,n.useState)(!1),[T,D]=(0,n.useState)(!1),z=(0,n.useRef)(null);(0,n.useEffect)(()=>{m&&A(!0)},[m]),(0,n.useEffect)(()=>{let e=new IntersectionObserver(t=>{let[i]=t;i.isIntersecting&&(Z(!0),e.disconnect())},{threshold:w,rootMargin:C});return z.current&&e.observe(z.current),()=>e.disconnect()},[w,C]);let P=(0,n.useCallback)(()=>{S(!0),A(!1),null==j||j()},[j]),L=(0,n.useCallback)(e=>{A(!0),S(!0),null==F||F()},[F]),W=(0,n.useCallback)(()=>{D(!0)},[]),B=(0,n.useCallback)(()=>{D(!1)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Z,{ref:z,className:p,sx:{width:x,height:g,backgroundColor:y,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",borderRadius:f,overflow:"hidden",...h},onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),children:[!b||_||E?null:(0,r.jsx)(l.Z,{variant:"rectangular",width:"100%",height:"100%",sx:{position:"absolute",top:0,left:0,bgcolor:"#2A2A2A",borderRadius:f,"&::after":{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent)"}}}),I?(0,r.jsx)(s.Z,{component:"img",src:t,alt:i,onLoad:P,onError:L,sx:{width:"100%",height:"100%",objectFit:v,objectPosition:"center",opacity:_?1:0,transition:"opacity 0.3s ease",display:E?"none":"block"}}):null,E?(0,r.jsx)(s.Z,{sx:{width:"100%",height:"100%",backgroundColor:"#2A2A2A",display:"flex",alignItems:"center",justifyContent:"center",color:"#666666",fontSize:"12px",fontFamily:"Inter, sans-serif",userSelect:"none",borderRadius:f},children:"Error"}):null,k&&_&&!E&&M?(0,r.jsx)(d.Z,{onClick:W,sx:{position:"absolute",bottom:"8px",right:"8px",color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.6)",padding:"4px",width:"32px",height:"32px","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.8)"}},children:(0,r.jsx)(o.Z,{sx:{fontSize:"18px"}})}):null]}),k?(0,r.jsx)(c.Z,{open:T,onClose:B,maxWidth:!1,fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"#000000",margin:0,maxWidth:"100vw",maxHeight:"100vh",width:"100vw",height:"100vh",borderRadius:0}},children:(0,r.jsxs)(u.Z,{sx:{padding:0,position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(d.Z,{onClick:B,sx:{position:"absolute",top:"16px",right:"16px",color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)(s.Z,{component:"img",src:t,alt:i,sx:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",objectPosition:"center"}})]})}):null]})});p.displayName="LazyImage",i(97071);var h=i(4054),m=i(20839);i(65210),i(13270),i(42054);var x=i(42070),g=i(44754),f=i(32964),v=i(48385);let y=e=>{let{videoUrl:t,poster:i}=e,[s,l]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[m,y]=(0,n.useState)(!1),[b,C]=(0,n.useState)(0),[w,j]=(0,n.useState)(0),[F,k]=(0,n.useState)(!1),_=(0,n.useRef)(null),{targetRef:S,shouldLoad:I}=(0,v.S)({rootMargin:"50px",threshold:.1,freezeOnceVisible:!0}),Z=()=>{k(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.Z,{ref:S,sx:{width:"100%",height:"100%",position:"relative",cursor:"pointer",overflow:"hidden",borderRadius:"8px"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,r.jsx)("video",{ref:_,poster:i,src:I?t:void 0,loop:!0,muted:!0,playsInline:!0,onEnded:()=>{l(!1),_.current&&(_.current.currentTime=0,C(0))},onLoadStart:()=>{y(!0)},onCanPlay:()=>{y(!1)},onTimeUpdate:()=>{_.current&&C(_.current.currentTime)},onLoadedMetadata:()=>{_.current&&j(_.current.duration)},onClick:()=>{_.current&&(_.current.paused?(l(!0),_.current.play()):(l(!1),_.current.pause()))},style:{width:"100%",height:"100%",objectFit:"contain"}}),m?(0,r.jsx)(f.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:(0,r.jsx)(g.Z,{size:24,sx:{color:"#FFFFFF"}})}):null,!s&&!m&&(0,r.jsx)(f.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:p?1:.7,transition:"opacity 0.2s ease",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.8)",transform:"translate(-50%, -50%) scale(1.1)"}},children:(0,r.jsx)(x.Z,{sx:{color:"#FFFFFF",fontSize:"24px",marginLeft:"2px"}})}),p||s?(0,r.jsxs)(f.Z,{sx:{position:"absolute",bottom:0,left:0,right:0,opacity:p?1:.8,transition:"opacity 0.2s ease"},children:[(0,r.jsx)(f.Z,{sx:{position:"absolute",bottom:0,left:0,right:0,width:"100%",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"2px",cursor:"pointer"},onClick:e=>{if(_.current&&w>0){let t=e.currentTarget.getBoundingClientRect(),i=(e.clientX-t.left)/t.width*w;_.current.currentTime=i,C(i)}},children:(0,r.jsx)(f.Z,{sx:{width:`${w>0?b/w*100:0}%`,height:"100%",backgroundColor:"#FFFFFF",borderRadius:"2px",transition:"width 0.1s ease"}})}),(0,r.jsx)(d.Z,{onClick:()=>{k(!0)},sx:{position:"absolute",bottom:"10px",right:"10px",color:"#FFFFFF",padding:"4px","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:(0,r.jsx)(o.Z,{sx:{fontSize:"20px"}})})]}):null]}),(0,r.jsx)(c.Z,{open:F,onClose:Z,maxWidth:!1,fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"#000000",margin:0,maxWidth:"100vw",maxHeight:"100vh",width:"100vw",height:"100vh",borderRadius:0}},children:(0,r.jsxs)(u.Z,{sx:{padding:0,position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(d.Z,{onClick:Z,sx:{position:"absolute",top:"16px",right:"16px",color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)("video",{src:t,poster:i,controls:!0,autoPlay:s,loop:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"contain"}})]})})]})};i(50601),i(30076),i(62930);var b=i(36857);i(23636),i(61832);var C=i(71854),w=i(76538);i(79267);var j=i(77127);i(46974),i(55309),i(54248),i(46858),i(47372);var F=i(90511),k=i(62935),_=i(71137),S=i(35019),I=i(14930),Z=i(12073),E=i(39204),A=i(8765),M=i(8234),R=i(34800);function T(e){let{open:t,onClose:i}=e,n=(0,Z.Z)(),o=(0,I.Z)(n.breakpoints.down("md"));return(0,r.jsxs)(c.Z,{open:t,onClose:i,maxWidth:!1,fullScreen:o,PaperProps:{sx:{backgroundColor:"#2F66FF",borderRadius:{xs:0,md:"16px"},border:{xs:"none",md:"1.6px solid #2E2E2E"},width:{xs:"100%",md:"873px"},height:{xs:"100%",md:"663px"},position:"relative",overflow:"hidden"}},children:[(0,r.jsx)(f.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:{xs:"220px",md:"160px"},display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(f.Z,{sx:{width:"95%",height:"95%",borderRadius:"14px",backgroundImage:"url(https://cdn.openart.ai/assets/edit_image.webp)",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}),!o&&(0,r.jsx)(f.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"64px",height:"64px",backgroundImage:"url(/cursor-pointer.svg)",backgroundSize:"contain",backgroundRepeat:"no-repeat",filter:"drop-shadow(0px 2.67px 2.13px rgba(0, 0, 0, 0.5))",pointerEvents:"none"}}),(0,r.jsx)(d.Z,{onClick:i,sx:{position:"absolute",top:{xs:"16px",md:"18px"},right:{xs:"16px",md:"18px"},width:{xs:"40px",md:"30px"},height:{xs:"40px",md:"30px"},backgroundColor:"#101010",borderRadius:"24px",color:"#FFFFFF","&:hover":{backgroundColor:"#2A2A2A"}},children:(0,r.jsx)(R.Tw,{sx:{fontSize:{xs:"16px",md:"12px"}}})}),(0,r.jsx)(f.Z,{sx:{position:"absolute",bottom:0,left:"0",width:"100%",height:{xs:"220px",md:"190px"},backgroundColor:"#101010"},children:(0,r.jsxs)(f.Z,{sx:{mt:{xs:"24px",md:"40px"},px:{xs:"16px",md:"0"},display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:"16px",md:"20px"}},children:[(0,r.jsx)(k.Z,{sx:{fontFamily:"Inter",fontWeight:700,fontSize:{xs:"20px",md:"24px"},lineHeight:"1.21em",color:"#FFFFFF",textAlign:"center"},children:"Powerful editing tools"}),(0,r.jsxs)(f.Z,{sx:{display:"flex",gap:{xs:"24px",md:"44px"},flexDirection:{xs:"column",md:"row"},alignItems:"center",justifyContent:"center",width:"100%",maxWidth:{xs:"100%",md:"none"}},children:[(0,r.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",gap:"16px",alignItems:"center"},children:[(0,r.jsx)(k.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:{xs:"14px",md:"15px"},lineHeight:"1.21em",color:"#AAAAAA",textAlign:"center"},children:"\uD83C\uDFAC Add or replace video shots"}),(0,r.jsx)(k.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:{xs:"14px",md:"15px"},lineHeight:"1.21em",color:"#AAAAAA",textAlign:"center"},children:"\uD83D\uDD01 Regenerate clips with a single click"})]}),(0,r.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",gap:"16px",alignItems:"center"},children:[(0,r.jsx)(k.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:{xs:"14px",md:"15px"},lineHeight:"1.21em",color:"#AAAAAA",textAlign:"center"},children:"\uD83C\uDFB5 Auto soundtrack sync"}),(0,r.jsx)(k.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:{xs:"14px",md:"15px"},lineHeight:"1.21em",color:"#AAAAAA",textAlign:"center"},children:"âœ‚ï¸ AI-assisted video editor"})]})]})]})})]})}function D(e){let{side:t,delay:i=0}=e;return(0,r.jsx)(s.Z,{sx:{position:"absolute",[t]:"30px",top:"left"===t?"5px":"17px",height:"548px",overflow:"hidden",display:"flex",flexDirection:"column",width:"70.42px"},children:(0,r.jsx)(E.E.div,{initial:{y:0},animate:{y:-82.94},transition:{duration:3,ease:"linear",repeat:1/0,delay:i},style:{display:"flex",flexDirection:"column"},children:Array.from({length:Math.ceil(6.607185917530745)+2},(e,t)=>(0,r.jsx)(s.Z,{sx:{width:"70.42px",height:"45.38px",backgroundColor:"rgba(255, 255, 255, 0.10)",borderRadius:"5.48px",marginBottom:"37.56px",flexShrink:0}},t))})})}function z(e){let{currentStep:t,status:i}=e;return(0,r.jsx)(s.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[{label:"Creating Story",icon:"\uD83D\uDCDD"},{label:"Generating Images",icon:"\uD83C\uDFA8"},{label:"Creating Videos",icon:"\uD83C\uDFAC"}].map((e,i)=>{let n=i===t,o=i<t;return(0,r.jsxs)(s.Z,{sx:{width:"100%",display:"flex",alignItems:"center",gap:"16px"},children:[(0,r.jsx)(s.Z,{sx:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:n?"#FFFFFF":o?"rgba(255, 255, 255, 0.6)":"rgba(255, 255, 255, 0.1)",border:n?"2px solid rgba(255, 255, 255, 0.8)":"2px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",position:"relative",zIndex:2,color:n?"#000000":o?"#000000":"#FFFFFF"},children:o?"âœ“":e.icon}),(0,r.jsxs)(s.Z,{sx:{flex:1},children:[(0,r.jsx)(k.Z,{sx:{color:n?"#FFFFFF":o?"rgba(255, 255, 255, 0.8)":"#888888",fontSize:"16px",fontWeight:n?600:400,lineHeight:"1.4"},children:e.label}),n?(0,r.jsx)(k.Z,{sx:{color:"#888888",fontSize:"14px",mt:"4px",lineHeight:"1.3"},children:"In progress..."}):null]}),n?(0,r.jsx)(s.Z,{sx:{display:"flex",gap:"4px"},children:[0,1,2].map(e=>(0,r.jsx)(E.E.div,{initial:{opacity:.3},animate:{opacity:1},transition:{duration:.6,repeat:1/0,repeatType:"reverse",delay:.2*e},style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#FFFFFF"}},e))}):null]},i)})})}function P(e){let{status:t,onPreviewEdit:i}=e,[o,a]=(0,n.useState)(0);return(0,n.useEffect)(()=>{t&&a((e=>{switch(e){case"pending":case"processing:creating_story":default:return 0;case"processing:generating_storyboard":case"processing:generating_images":return 1;case"processing:generating_videos":case"processing:generating_timeline":case"processing:exporting_video":case"processing:user_exporting_video":case"completed":return 2}})(t))},[t]),(0,r.jsxs)(s.Z,{sx:{width:"100%",background:"rgba(74,71,70,1) 100%)",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(s.Z,{sx:{textAlign:"center",mb:"32px"},children:[(0,r.jsx)(k.Z,{sx:{color:"#FFFFFF",fontSize:"24px",fontWeight:700,mb:"8px"},children:"Creating Your Story"}),(0,r.jsx)(k.Z,{sx:{color:"#888888",fontSize:"16px",lineHeight:"1.4"},children:"This may take a few minutes"})]}),(0,r.jsxs)(s.Z,{sx:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",p:"24px",mb:"32px",border:"2px solid rgba(255, 255, 255, 0.1)",flex:1},children:[(0,r.jsx)(z,{currentStep:o,status:t}),(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(m.Z,{sx:{background:"transparent",transform:"scale(0.8)"}})}),(0,r.jsxs)(s.Z,{sx:{textAlign:"center",mb:"24px"},children:[(0,r.jsx)(k.Z,{sx:{color:"#FFFFFF",fontSize:"16px",lineHeight:"1.5",mb:"8px",fontWeight:500},children:"Step away any timeâ€”we'll keep working in the background."}),(0,r.jsx)(k.Z,{sx:{color:"#888888",fontSize:"14px",lineHeight:"1.4",fontWeight:500},children:"You can tweak it in the editor once it's ready."})]}),(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(_.Z,{onClick:i,sx:{backgroundColor:"#444444",color:"#FFFFFF",borderRadius:"12px",padding:"16px 32px",fontSize:"16px",fontWeight:600,textTransform:"none",minWidth:"160px","&:hover":{backgroundColor:"#555555"}},endIcon:(0,r.jsx)(F.Z,{}),children:"Preview Edit"})})]}),(0,r.jsx)(s.Z,{sx:{textAlign:"center",mt:"auto"},children:(0,r.jsx)(k.Z,{sx:{color:"#888888",fontSize:"12px",lineHeight:"1.4"},children:"Processing typically takes 2-5 minutes depending on story length"})})]})}function L(e){let{status:t,onPreviewEdit:i}=e,[o,a]=(0,n.useState)(0),[l,d]=(0,n.useState)(0),c=(0,n.useRef)(null);return(0,n.useEffect)(()=>{t&&a((e=>{switch(e){case"pending":case"processing:creating_story":default:return 0;case"processing:generating_storyboard":case"processing:generating_images":return 1;case"processing:generating_videos":case"processing:generating_timeline":case"processing:exporting_video":case"processing:user_exporting_video":case"completed":return 2}})(t))},[t]),(0,n.useEffect)(()=>{let e=setInterval(()=>{d(e=>0===e?5:e-1)},150);return()=>clearInterval(e)},[]),(0,n.useEffect)(()=>{let e,t,i,r;let n=c.current;if(!n)return;let o=n.getContext("2d");if(!o)return;let a=[],s=0,l=()=>{let i=o.createImageData(e,t),r=new Uint32Array(i.data.buffer),n=r.length;for(let e=0;e<n;e++).5>Math.random()&&(r[e]=4278190080);a.push(i)},d=()=>{9===s?s=0:s++,o.putImageData(a[s],0,0)},u=()=>{d(),i=window.setTimeout(()=>{window.requestAnimationFrame(u)},40)},p=()=>{e=n.offsetWidth,t=n.offsetHeight,n.width=e,n.height=t,a=[];for(let e=0;e<10;e++)l();u()},h=()=>{window.clearTimeout(r),r=window.setTimeout(()=>{window.clearTimeout(i),p()},200)};return p(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h),window.clearTimeout(i),window.clearTimeout(r)}},[]),(0,r.jsx)(s.Z,{sx:{width:"100%",maxWidth:"1120px",height:"928px",position:"relative",mx:"auto",mt:"40px"},children:(0,r.jsxs)(s.Z,{sx:{position:"relative",left:0,width:"100%",height:"548px",background:"linear-gradient(to right, rgba(36,31,31,1) 0%, rgba(36,31,31,1) 32%, rgba(74,71,70,1) 100%)",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px"},children:[(0,r.jsx)(s.Z,{component:"canvas",ref:c,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",opacity:.15,zIndex:1}}),(0,r.jsx)(s.Z,{sx:{position:"absolute",top:"40px",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",gap:"8.5px",zIndex:2},children:[{label:"Creating Story Script",width:"190px"},{label:"Creating Image",width:"149px"},{label:"Creating Videos",width:"149px"}].map((e,t)=>{let i=t===o,n=t<o,a=t<2;return(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:"8.5px"},children:[(0,r.jsx)(E.E.div,{initial:{scale:.95,opacity:.8},animate:{scale:i?1.02:.95,opacity:i?1:.3},transition:{duration:.3},children:(0,r.jsx)(s.Z,{sx:{width:e.width,height:"39.5px",borderRadius:"8.5px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:(0,r.jsx)(k.Z,{color:i||n?"#FFFFFF":"#D9D9D9",sx:{fontWeight:700,fontSize:"17px",lineHeight:"1.21em",textAlign:"center"},children:e.label})})}),a?(0,r.jsx)(E.E.div,{initial:{scale:1},animate:{scale:i?1.05:1},transition:{duration:.3},children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"66",height:"14",viewBox:"0 0 66 14",fill:"none",style:{transition:"all 0.3s ease"},children:["M61.9526 0.339844H57.4707L61.3124 6.7426L57.4707 13.1454H61.9526L65.154 6.7426L61.9526 0.339844Z","M51.0679 0.339844H46.5859L50.4276 6.7426L46.5859 13.1454H51.0679L54.2692 6.7426L51.0679 0.339844Z","M39.5435 0.339844H35.0615L38.9032 6.7426L35.0615 13.1454H39.5435L42.7448 6.7426L39.5435 0.339844Z","M26.7368 0.339844H22.2549L26.0965 6.7426L22.2549 13.1454H26.7368L29.9382 6.7426L26.7368 0.339844Z","M16.4917 0.339844H12.0098L15.8514 6.7426L12.0098 13.1454H16.4917L19.6931 6.7426L16.4917 0.339844Z","M4.96728 0.339844H0.485352L4.327 6.7426L0.485352 13.1454H4.96728L8.16866 6.7426L4.96728 0.339844Z"].map((e,i)=>{let a=t===o&&i===l;return(0,r.jsx)("path",{d:e,fill:a?"#FFFFFF":n?"rgba(255, 255, 255, 0.6)":"#D9D9D9",fillOpacity:a?1:.29,style:{transition:"fill 0.1s ease"}},i)})})}):null]},t)})}),(0,r.jsx)(s.Z,{sx:{position:"absolute",width:"100%",height:"100%",boxShadow:"inset 0px 0px 150px 20px black",mixBlendMode:"multiply",animation:"vignette-anim 3s infinite","@keyframes vignette-anim":{"0%, 100%":{opacity:1},"50%":{opacity:.7}}}}),(0,r.jsx)(s.Z,{sx:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:"19px",zIndex:100},children:(0,r.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"19px",width:"100%",height:"100%"},children:(0,r.jsxs)(S.Z,{direction:"column",justifyContent:"center",alignItems:"center",spacing:1.5,children:[(0,r.jsx)(m.Z,{sx:{background:"transparent"}}),(0,r.jsxs)(S.Z,{spacing:1,alignItems:"center",children:[(0,r.jsx)(k.Z,{sx:{fontWeight:500,fontSize:"14px",lineHeight:"1.21em",color:"#888888",textAlign:"center"},children:"Step away any timeâ€”we'll keep working in the background."}),(0,r.jsx)(k.Z,{sx:{fontWeight:500,fontSize:"14px",lineHeight:"1.21em",color:"#888888",textAlign:"center"},children:"You can tweak it in editor once it's ready."})]}),(0,r.jsx)(_.Z,{onClick:i,sx:{backgroundColor:"#444444",color:"#FFFFFF",borderRadius:"6px",padding:"17px 24px",fontWeight:700,fontSize:"16px",lineHeight:"1.6em",textTransform:"none",minWidth:"155px",mt:"20px !important",height:"48px","&:hover":{backgroundColor:"#444444"}},endIcon:(0,r.jsx)(F.Z,{}),children:"Preview edit"})]})})}),(0,r.jsx)(D,{side:"left",delay:0}),(0,r.jsx)(D,{side:"right",delay:1})]})})}function W(e){let{status:t}=e,[i,o]=(0,n.useState)(!1),a=(0,Z.Z)(),{showModal:s}=(0,A.dd)(),l=(0,I.Z)(a.breakpoints.down("md"));return(0,r.jsxs)(r.Fragment,{children:[l?(0,r.jsx)(P,{status:t,onPreviewEdit:()=>{s(M.$)}}):(0,r.jsx)(L,{status:t,onPreviewEdit:()=>{o(!0)}}),(0,r.jsx)(T,{open:i,onClose:()=>{o(!1)}})]})}i(22465),i(67753)},22465:function(e,t,i){i.d(t,{K:function(){return a}});var r=i(52676),n=i(75271),o=i(13270);function a(e){let{onSuccess:t,placeholder:i,title:a,enableTrimming:s=!1,onFileReady:l}=e,[d,c]=(0,n.useState)(!1),u=()=>c(!1),p=(0,r.jsx)(o.m,{open:d,onClose:u,onSuccess:(e,i)=>{t(e,i),u()},onFileReady:s?(e,t,i)=>{l&&l(e,t,i)}:void 0,placeholder:i,title:a});return{open:()=>c(!0),close:u,context:p}}},71087:function(e,t,i){i.d(t,{E5:function(){return r.E5},Fj:function(){return r.Fj},GI:function(){return r.GI},Me:function(){return r.Me},Oo:function(){return o.Oo},Rx:function(){return r.Rx},ZX:function(){return o.ZX},_p:function(){return o._p},l4:function(){return n.l4},t3:function(){return r.t3},tu:function(){return o.tu},yD:function(){return r.yD}});var r=i(16087),n=i(814),o=i(45887)},45306:function(e,t,i){i.d(t,{q:function(){return I}});var r=i(52676),n=i(62935),o=i(70565),a=i(96262),s=i(70811),l=i(32964),d=i(10986),c=i(75783);function u(e){let{items:t,titleSx:i,spacing:o}=e;return(0,r.jsxs)(s.Z,{direction:"column",spacing:1.5,children:[(0,r.jsx)(n.Z,{sx:{color:"#FFFFFF",fontSize:"16px",fontWeight:700,lineHeight:"23px",...i},children:"Generation Detail"}),(0,r.jsx)(s.Z,{direction:"column",spacing:1,sx:{border:"1px solid #2E2E2E",borderRadius:"4px",padding:"12px"},children:t.map((e,i)=>(0,r.jsx)(p,{item:e,isLast:i===t.length-1,spacing:o},e.key))})]})}function p(e){let{item:t,isLast:i,spacing:o}=e;return"column"===t.layout?(0,r.jsxs)(s.Z,{direction:"column",spacing:.5,children:[(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:.5,children:[(0,r.jsx)(s.Z,{alignItems:"center",justifyContent:"center",sx:{width:"16px",height:"16px"},children:t.icon}),(0,r.jsx)(n.Z,{sx:{color:"#AAAAAA",fontSize:"14px",fontWeight:500,lineHeight:"23px"},children:t.label})]}),(0,r.jsx)(s.Z,{direction:"row",justifyContent:"flex-start",alignItems:"center",sx:{padding:"5px 0"},children:t.content})]}):(0,r.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:void 0===o?3.5:o,sx:{padding:"5px 0"},children:[(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:.5,children:[(0,r.jsx)(s.Z,{alignItems:"center",justifyContent:"center",sx:{width:"16px",height:"16px"},children:t.icon}),(0,r.jsx)(n.Z,{sx:{color:"#AAAAAA",fontSize:"14px",fontWeight:500,lineHeight:"23px"},children:t.label})]}),"string"==typeof t.content?(0,r.jsx)(n.Z,{sx:{color:"#888888",fontSize:"14px",fontWeight:500,lineHeight:"18px",letterSpacing:"-0.28px",textAlign:"center"},children:t.content}):t.content]})}function h(e){if(!e)return"Flux";switch(e.model){case"flux_kontext":return"Flux Kontext";case"fluxdev":return"Flux Dev";case"character":return"Character";case"gpt":return"GPT";default:return"Flux"}}function m(e){if(!e)return"Kling";switch(e.model){case"kling":default:return"Kling";case"kling2.1":return"Kling 2.1";case"pixverse4.5":return"PixVerse";case"veo2":return"Veo 2";case"hedra":return"Hedra";case"wan-i2v":return"Wan 2.1";case"wan-multi-talk":return"OpenArt Lipsync";case"seedance-v1":return"Seedance 1.0";case"MiniMax-Hailuo-02":return"MiniMax Hailuo 02"}}var x=i(30076),g=i(79267);let f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e.length<=t?e:`${e.slice(0,Math.max(0,t))}...`};function v(e){var t,i,p;let{story:v,titleSx:y,spacing:b}=e,C=(0,x.B)(),w=v.category_inputs,j=w.vlog_topic.replaceAll("<<THE_MARKER>>",`@${w.character.name||"Character"}`),F=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if("auto"===w.background_music){var t;let i=null===(t=w.background_music_auto_selection)||void 0===t?void 0:t.selectedSong;return i?`Auto: ${e?f(i.name):i.name}`:"Auto"}return e?f(w.background_music):w.background_music};return(0,r.jsxs)(s.Z,{direction:"column",spacing:1.5,children:[(0,r.jsxs)(s.Z,{direction:"column",spacing:1.5,children:[(0,r.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(n.Z,{sx:{color:"#FFFFFF",fontSize:"16px",fontWeight:700,lineHeight:"23px",...y},children:"Story topic"}),(0,r.jsx)(o.Z,{title:"Copy",sx:{},children:(0,r.jsx)(a.Z,{onClick:()=>{C({onAuthenticated:()=>{(0,d.yv)("Story topic copied!",{variant:"success"}),navigator.clipboard.writeText(j)}})},children:(0,r.jsx)(c.TI,{size:20,sx:{cursor:"pointer"}})})})]}),(0,r.jsx)(l.Z,{sx:{backgroundColor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"4px",padding:"8px"},children:(0,r.jsx)(n.Z,{sx:{color:"#888888",fontSize:"14px",fontWeight:500,lineHeight:"20px",wordBreak:"break-word"},children:j})})]}),(0,r.jsx)(u,{titleSx:y,spacing:b,items:[...(null===(t=w.character)||void 0===t?void 0:t.character_image_url)?[{key:"character",label:"Character",icon:(0,r.jsx)(g.rYO,{color:"#888",fontSize:16}),layout:"column",content:(0,r.jsx)(l.Z,{sx:{width:"56px",height:"56px",borderRadius:"5px",overflow:"hidden"},children:(0,r.jsx)("img",{src:w.character.character_image_url,alt:"Character",style:{width:"100%",height:"100%",objectFit:"cover"}})})}]:[],...w.background_music?[{key:"background_music",label:"Background music",icon:(0,r.jsx)(g.XvT,{color:"#888",fontSize:16}),layout:"row",content:(0,r.jsx)(o.Z,{title:F(!1),children:(0,r.jsx)(n.Z,{sx:{color:"#888888",fontSize:"12px",fontWeight:500},children:F()})})}]:[],...(null===(i=w.advanced_settings)||void 0===i?void 0:i.image_model_config)?[{key:"image_model",label:"Image model",icon:(0,r.jsx)(g.L3Q,{color:"#888",fontSize:16}),layout:"row",content:h(w.advanced_settings.image_model_config)}]:[],...(null===(p=w.advanced_settings)||void 0===p?void 0:p.video_model_config)?[{key:"video_model",label:"Video model",icon:(0,r.jsx)(g.Mko,{color:"#888",fontSize:16}),layout:"row",content:m(w.advanced_settings.video_model_config)}]:[]]})]})}var y=i(39204);let b=()=>(0,r.jsx)(y.E.div,{style:{width:"28px",height:"28px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("img",{src:"https://cdn.openart.ai/assets/storyDetailMusic.png",alt:"Music visualization",style:{width:"100%",height:"100%",objectFit:"contain"}})});function C(e){var t,i,o;let{story:d,titleSx:c,spacing:p}=e,f=(0,x.B)(),v=d.category_inputs,y=v.title?v.title:v.music_url?v.music_url.split("/").at(-1).replace(/\.[^/.]+$/,""):"Unknown Track";return(0,r.jsxs)(s.Z,{direction:"column",spacing:1.5,children:[(0,r.jsxs)(s.Z,{direction:"column",spacing:1.5,children:[(0,r.jsx)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,r.jsx)(n.Z,{sx:{color:"#FFFFFF",fontSize:"16px",fontWeight:700,lineHeight:"23px",...c},children:"Music"})}),(0,r.jsxs)(l.Z,{sx:{backgroundColor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"4px",padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,r.jsx)(b,{}),(0,r.jsx)(l.Z,{sx:{flex:1},children:(0,r.jsx)(n.Z,{sx:{color:"#E0E0E0",fontSize:"11px",fontWeight:500,lineHeight:"14px",letterSpacing:"-0.02em",textAlign:"center",wordBreak:"break-word"},children:y})})]}),(0,r.jsx)(a.Z,{sx:{backgroundColor:"#262626",borderRadius:"4px",padding:"4px"},onClick:()=>f({onAuthenticated:async()=>{if(v.music_url)try{let e=await fetch(v.music_url);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.blob(),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=y||"music",document.body.append(r),r.click(),r.remove(),URL.revokeObjectURL(i)}catch(e){console.error("Download failed:",e),window.open(v.music_url,"_blank")}}}),children:(0,r.jsx)(g.l8y,{color:"#888",fontSize:16})})]})]}),(0,r.jsx)(u,{titleSx:c,spacing:p,items:[...(null===(t=v.character)||void 0===t?void 0:t.character_image_url)?[{key:"character",label:"Character",icon:(0,r.jsx)(g.rYO,{color:"#888",fontSize:16}),layout:"column",content:(0,r.jsx)(l.Z,{sx:{width:"56px",height:"56px",borderRadius:"5px",overflow:"hidden"},children:(0,r.jsx)("img",{src:v.character.character_image_url,alt:"Character",style:{width:"100%",height:"100%",objectFit:"cover"}})})}]:[],...v.video_consistent_style?[{key:"video_consistent_style",label:"Style",icon:(0,r.jsx)(g.lHp,{color:"#888",fontSize:16}),layout:"row",content:v.video_consistent_style}]:[],...(null===(i=v.advanced_settings)||void 0===i?void 0:i.image_model_config)?[{key:"image_model",label:"Image model",icon:(0,r.jsx)(g.L3Q,{color:"#888",fontSize:16}),layout:"row",content:h(v.advanced_settings.image_model_config)}]:[],...(null===(o=v.advanced_settings)||void 0===o?void 0:o.video_model_config)?[{key:"video_model",label:"Video model",icon:(0,r.jsx)(g.Mko,{color:"#888",fontSize:16}),layout:"row",content:m(v.advanced_settings.video_model_config)}]:[]]})]})}var w=i(75271),j=i(17889);let F=e=>{let t=j.B8.find(t=>t.key===e);return(null==t?void 0:t.label)||e},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e.length<=t?e:`${e.slice(0,Math.max(0,t))}...`};function _(e){var t,i;let{story:a,titleSx:l,spacing:d}=e,c=a.category_inputs,p=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if("auto"===c.voiceover_voice){var t;let i=null===(t=c.voiceover_voice_auto_selection)||void 0===t?void 0:t.voiceover;if(i){let t=F(i);return`Auto: ${e?k(t):t}`}return"Auto"}return e?k(c.voiceover_voice):c.voiceover_voice},x=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if("auto"===c.background_music){var t;let i=null===(t=c.background_music_auto_selection)||void 0===t?void 0:t.selectedSong;return i?`Auto: ${e?k(i.name):i.name}`:"Auto"}return e?k(c.background_music):c.background_music};return(0,r.jsxs)(s.Z,{direction:"column",spacing:1.5,children:[(0,r.jsx)(S,{prompt:c.script_content,title:"Script",titleSx:l}),c.rewrite_script?(0,r.jsx)(S,{prompt:c.rewrite_script,title:"Rewrite Script",titleSx:l}):null,(0,r.jsx)(u,{spacing:d,items:[...c.visual_style?[{key:"visual_style",label:"Style",icon:(0,r.jsx)(g.lHp,{color:"#888",fontSize:16}),layout:"row",content:c.visual_style}]:[],...c.voiceover_voice?[{key:"voiceover_voice",label:"Voiceover",icon:(0,r.jsx)(g.rYO,{color:"#888",fontSize:16}),layout:"row",content:(0,r.jsx)(o.Z,{title:p(!1),children:(0,r.jsx)(n.Z,{sx:{color:"#888888",fontSize:"12px",fontWeight:500},children:p()})})}]:[],...c.background_music?[{key:"background_music",label:"Background music",icon:(0,r.jsx)(g.XvT,{color:"#888",fontSize:16}),layout:"row",content:(0,r.jsx)(o.Z,{title:x(!1),children:(0,r.jsx)(n.Z,{sx:{color:"#888888",fontSize:"12px",fontWeight:500},children:x()})})}]:[],...(null===(t=c.advanced_settings)||void 0===t?void 0:t.image_model_config)?[{key:"image_model",label:"Image model",icon:(0,r.jsx)(g.L3Q,{color:"#888",fontSize:16}),layout:"row",content:h(c.advanced_settings.image_model_config)}]:[],...(null===(i=c.advanced_settings)||void 0===i?void 0:i.video_model_config)?[{key:"video_model",label:"Video model",icon:(0,r.jsx)(g.Mko,{color:"#888",fontSize:16}),layout:"row",content:m(c.advanced_settings.video_model_config)}]:[]],titleSx:l})]})}let S=e=>{let{prompt:t,title:i,titleSx:u}=e,p=(0,x.B)(),[h,m]=(0,w.useState)(!1),[g,f]=(0,w.useState)(!1),v=(0,w.useRef)(null);return(0,w.useEffect)(()=>{v.current&&f(v.current.scrollHeight>100)},[t]),(0,r.jsxs)(s.Z,{direction:"column",spacing:1.5,children:[(0,r.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(n.Z,{sx:{color:"#FFFFFF",fontSize:"16px",fontWeight:700,lineHeight:"23px",...u},children:i}),(0,r.jsx)(o.Z,{title:"Copy",sx:{},children:(0,r.jsx)(a.Z,{onClick:()=>{p({onAuthenticated:()=>{(0,d.yv)("Story topic copied!",{variant:"success"}),navigator.clipboard.writeText(t)}})},children:(0,r.jsx)(c.TI,{size:20,sx:{cursor:"pointer"}})})})]}),(0,r.jsxs)(l.Z,{sx:{backgroundColor:"#1A1A1A",border:"1px solid #2E2E2E",borderRadius:"4px",padding:"8px"},children:[(0,r.jsx)(n.Z,{sx:{color:"#888888",fontSize:"14px",fontWeight:500,lineHeight:"20px",wordBreak:"break-word",display:"-webkit-box",WebkitLineClamp:h?"none":5,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},ref:v,children:t}),g?(0,r.jsx)(a.Z,{onClick:()=>m(!h),sx:{marginTop:"8px",padding:"4px 8px",borderRadius:"4px",backgroundColor:"#2E2E2E","&:hover":{backgroundColor:"#3A3A3A"}},children:(0,r.jsx)(n.Z,{sx:{color:"#FFFFFF",fontSize:"12px",fontWeight:500},children:h?"Show less":"Show more"})}):null]})]})};function I(e){switch(e){case"character_vlog":return v;case"script_to_video":return _;case"music_video":return C;default:return null}}},50601:function(e,t,i){i.d(t,{IP:function(){return r.I},YS:function(){return r.Y}});var r=i(83068);i(20921)},20921:function(e,t,i){i(83068)},83068:function(e,t,i){i.d(t,{I:function(){return d},Y:function(){return c}});var r=i(67197),n=i(2345),o=i(52973),a=i(47469),s=i(62283);let l={currentStep:"form",generationStatus:{isGeneratingScript:!1,isGeneratingShots:!1,isExporting:!1},formData:{title:"",oneSentenceStory:"",numShots:5,customSystemPrompt:"",selectedCharacter:null,mode:"vlog"},storyScript:null,shots:[],exportOptions:{global_speed_multiplier:1}},d=(0,n.U)()((0,o.mW)((0,o.tJ)((0,a.n)((e,t)=>({...l,setCurrentStep:t=>e(e=>{e.currentStep=t}),updateFormData:t=>e(e=>{Object.assign(e.formData,t)}),updateGenerationStatus:(t,i)=>{switch(t){case"script":e(e=>{if(void 0!==i.loading&&(e.generationStatus.isGeneratingScript=i.loading),void 0!==i.error&&(e.generationStatus.scriptGenerationError=i.error),i.data){let t=i.data.script.shots.map(e=>({id:(e.id||(0,r.x0)()).toString(),prompt:e.imagePrompt,script:e.voiceoverScript||e.shot_description,imageStatus:"idle",videoStatus:"idle"}));e.storyScript={fullText:i.data.script.fullText||"",title:i.data.script.title||"My Story"},e.shots=t,e.currentStep="script"}});break;case"shot":{let{id:t,type:r,status:n,url:o}=i;e(e=>{let i=e.shots.findIndex(e=>e.id===t);-1!==i&&(e.shots[i]["image"===r?"imageStatus":"videoStatus"]=n,o&&(e.shots[i]["image"===r?"generatedImageUrl":"generatedVideoUrl"]=o)),"video"===r&&"success"===n&&o&&e.shots.every(e=>"success"===e.videoStatus&&e.generatedVideoUrl)&&(e.currentStep="preview")});break}case"export":e(e=>{void 0!==i.loading&&(e.generationStatus.isExporting=i.loading),void 0!==i.error&&(e.generationStatus.exportError=i.error),void 0!==i.progress&&(e.generationStatus.exportProgress=i.progress),void 0!==i.exportedVideoUrl&&(e.exportedVideo={url:i.exportedVideoUrl,createdAt:new Date})})}},updateStoryScript:t=>e(e=>{e.storyScript?Object.assign(e.storyScript,t):e.storyScript=t}),updateShot:(t,i)=>e(e=>{let r=e.shots.findIndex(e=>e.id===t);-1!==r&&Object.assign(e.shots[r],i)}),updateShots:t=>e(e=>{e.shots=t}),addShot:t=>e(e=>{e.shots.push(t)}),removeShot:t=>e(e=>{e.shots=e.shots.filter(e=>e.id!==t)}),updateExportOptions:t=>e(e=>{Object.assign(e.exportOptions,t)}),updateExportedVideo:t=>e(e=>{e.exportedVideo?Object.assign(e.exportedVideo,t):e.exportedVideo=t}),resetStore:()=>e(()=>l)})),{name:"story-creation-storage",partialize:e=>({formData:e.formData,storyScript:e.storyScript,shots:e.shots,exportOptions:e.exportOptions,exportedVideo:e.exportedVideo})}),{name:"story-creation-store"})),c=(0,s.N)(d)},89663:function(e,t,i){i.d(t,{CG:function(){return n},DM:function(){return a},RM:function(){return o},TV:function(){return r}});let r=[{name:"Custom",imageUrl:"https://cdn.openart.ai/music_video/CustomButton.png",isSpecial:!0,value:"",videoUrl:null},...i(63311).TJ],n={SCROLL_THRESHOLD:5},o={mobile:{columnsCount:2,gap:8,padding:8,minCardHeight:60,fallbackHeight:160,customInputHeight:32,customInputMarginBottom:12,showStyleNumber:4},tablet:{columnsCount:4,gap:8,padding:8,minCardHeight:70,fallbackHeight:180,customInputHeight:40,customInputMarginBottom:16,showStyleNumber:6},desktop:{columnsCount:4,gap:8,padding:8,minCardHeight:70,fallbackHeight:180,customInputHeight:40,customInputMarginBottom:16,showStyleNumber:6}},a={CUSTOM_BACKGROUND:"rgba(90, 72, 202, 0.46)",DEFAULT_BACKGROUND:"#1A1A1A",CONTAINER_BACKGROUND:"#101010",SELECTED_BORDER:"#2F66FF",SELECTED_TEXT:"#FFFFFF",DEFAULT_TEXT:"#CCC",SECTION_TEXT:"#AAAAAA"}},81969:function(e,t,i){i.d(t,{U:function(){return o}});var r=i(61415),n=i(501);let o=()=>{let e=(0,r.Vi)();return{generationCreditsImage:(0,n.fH)(t=>t.calculateGenerationCredits("image",e)),generationCreditsVideo:(0,n.fH)(t=>t.calculateGenerationCredits("video",e))}}},48385:function(e,t,i){i.d(t,{S:function(){return n}});var r=i(75271);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rootMargin:t="50px",threshold:i=.1,freezeOnceVisible:n=!1}=e,[o,a]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),d=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=d.current;if(!e)return;if(n&&s){a(!0);return}let r=new IntersectionObserver(e=>{let[t]=e,i=t.isIntersecting;a(i),i&&!s&&l(!0)},{rootMargin:t,threshold:i});return r.observe(e),()=>{r.unobserve(e)}},[t,i,n,s]),{targetRef:d,isIntersecting:o,wasEverVisible:s,shouldLoad:n?s:o}}},28141:function(e,t,i){i.d(t,{Bx:function(){return l},EL:function(){return d},cU:function(){return c}});var r=i(13200),n=i(21964),o=i(10986);i(1327);var a=i(57492),s=i(28337);let l=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enqueueSnackbar:n}=(0,o.Ds)(),{enabled:l=!0}=i;return(0,r.a)({queryKey:a.PL.media(e||"",t||""),queryFn:async()=>e&&t&&(await s.ZP.get(`stories/${e}/shots/${t}`)).data.media_resources||{images:[],videos:[],audio:[]},enabled:!!e&&!!t&&l,onError:e=>{console.error("Error loading shot media:",e),n(`Error: ${e.message}`,{variant:"error"})}})},d=e=>{let{enqueueSnackbar:t}=(0,o.Ds)();return(0,n.D)({mutationFn:async t=>{let{shotId:i,mediaTypesArray:r,imagePrompt:n="",videoPrompt:o="",voiceOver:a="",advancedSettings:l}=t;if(!e)throw Error("No story ID provided");let d={media_types:r};return n&&(d.image_prompt=n),o&&(d.video_prompt=o),a&&(d.voice_over=a),l&&(d.advanced_settings=l),(await s.ZP.post(`stories/workflow/regenerate_shot?storyId=${e}&shotId=${i}`,d)).data},onSuccess:(e,t)=>{},onError:e=>{console.error("Error regenerating shot media:",e),t(`Error: ${e.message}`,{variant:"error"})}})},c=e=>{let{enqueueSnackbar:t}=(0,o.Ds)();return(0,n.D)({mutationFn:async t=>{let{mediaTypes:i,advancedSettings:r}=t;if(!e)throw Error("No story ID provided");return(await s.ZP.post(`stories/workflow/batch_generate?storyId=${e}`,{media_types:i,advanced_settings:r})).data},onSuccess:(e,t)=>{},onError:(e,i)=>{console.error(`Error starting batch ${i.mediaTypes.join("/")} generation:`,e),t(`Error: ${e.message}`,{variant:"error"})}})};t.ZP=l},33880:function(e,t,i){i.d(t,{MH:function(){return a},no:function(){return o}}),i(75271);var r=i(21964),n=i(28337);let o=()=>{let{mutate:e,mutateAsync:t,isLoading:i}=(0,r.D)({mutationFn:async e=>(await n.ZP.post("/stories",e)).data});return{createStory:e,createStoryAsync:t,isLoading:i}},a=e=>{let{mutate:t,mutateAsync:i,isLoading:o}=(0,r.D)({mutationFn:async t=>(await n.ZP.patch(`/stories/${e}`,t)).data});return{updateStory:t,updateStoryAsync:i,isLoading:o}}},25162:function(e,t,i){i.d(t,{dr:function(){return v},u9:function(){return y},To:function(){return p},MZ:function(){return k},zB:function(){return b},wC:function(){return C},Jc:function(){return j},Wx:function(){return w},v4:function(){return F},HK:function(){return x}});var r=i(48870),n=i(67197),o=i(76590);let a=e=>structuredClone(e);var s=i(74608),l=i(62684),d=i(75787),c=i(57114),u=i(70210);function p(e){return{shot_id:(0,n.x0)(),shot_type:"empty",image_prompt:"",video_prompt:"",...e}}function h(e,t){return t&&e.find(e=>e.id===t)||null}function m(e,t){return(0,s.YI)(e,t)}function x(){var e,t,i;let s=(i=null===(t=o.jU.getState().story)||void 0===t?void 0:null===(e=t.storyboard)||void 0===e?void 0:e.shots_map)?(0,c.MU)(i).filter(e=>"empty"!==e.shot_type&&!e.is_hidden):[],d=a(l.D.getState().mediaAssets),p=a(l.D.getState().tracks),x=[],v=[],y=0,b=p.findIndex(e=>"video"===u.wD.getTrackCategory(e,d)),C=p.findIndex(e=>"voiceover"===u.wD.getTrackCategory(e,d)),w=p[b],j=p[C],F=null;for(let e of((null==w?void 0:w.items)&&(F=w.items.find(e=>"logo"===e.type)||null),s)){let t,i;let n=h(d,e.active_video_id),o=h(d,e.active_image_id),a=h(d,e.active_voice_over_audio_id);if(e.active_video_id&&!n||e.active_image_id&&!o||e.active_voice_over_audio_id&&!a)throw console.error(`MediaAsset not found for shot ${e.shot_id}`),Error(`MediaAsset not found for shot ${e.shot_id}`);if(n){let o=f(w,e.shot_id,e.active_video_id),a=g(w,e.shot_id);if(o)(t=(0,r.Z)(o)).startTimeInFrames=y;else if(t=m(n,y),a){let{id:e,effects:i,speed:r,volume:o,groupId:s}=a;t.id=e,t.effects=i,t.speed=r,t.volume=o,t.groupId=s,t.sourceTrimStartFrames=0,t.sourceTrimEndFrames=n.metadata.frames,t.durationInFrames=Math.round(t.durationInFrames/t.speed)}i=t,x.push(t)}else if(o){let n=f(w,e.shot_id,e.active_image_id),a=g(w,e.shot_id);if(n)(t=(0,r.Z)(n)).startTimeInFrames=y;else if(t=m(o,y),a){let{id:e,effects:i,groupId:r,durationInFrames:n}=a;t.id=e,t.effects=i,t.groupId=r,t.durationInFrames=n}i=t,x.push(t)}if(a){let i=f(j,e.shot_id,e.active_voice_over_audio_id),n=g(j,e.shot_id);if(i)(t=(0,r.Z)(i)).startTimeInFrames=y;else if(t=m(a,y),n){let{id:e,effects:i,groupId:r,speed:o,volume:a}=n;t.id=e,t.effects=i,t.groupId=r,t.speed=o,t.volume=a,t.durationInFrames=Math.round(t.durationInFrames/t.speed)}v.push(t)}if(!i){let{timelineItem:t,mediaAsset:r}=(0,u.B4)({id:u.HP,url:u.hM,shot_id:e.shot_id,type:"video"},"Failed Video",y);i=t,x.push(t),d.push(r)}y=i.startTimeInFrames+i.durationInFrames}if(w)w.items=x,F&&(F.startTimeInFrames=y,w.items.push(F)),p[b]=w;else if(x.length>0){let e=[...x];F&&(F.startTimeInFrames=y,e.push(F)),p.push({id:`track_video_${(0,n.x0)()}`,type:"video",name:"Video Track",items:e})}return j?(j.items=v,p[C]=j):v.length>0&&p.push({id:`track_voiceover_${(0,n.x0)()}`,type:"audio",subtype:"voiceover",name:"Voiceover Track",items:v}),{tracks:p,mediaAssets:d}}function g(e,t){if((null==e?void 0:e.items)&&(null==e?void 0:e.items.length)!==0)return e.items.find(e=>e.shotId===t)}function f(e,t,i){if((null==e?void 0:e.items)&&(null==e?void 0:e.items.length)!==0)return e.items.find(e=>e.shotId===t&&e.mediaAssetId===i)}function v(e,t){let i=function(e){switch(e.model){case"character":return"create.model.character";case"flux_kontext":default:return"create.model.Flux_Kontext";case"fluxdev":return"create.model.Flux_dev";case"gpt":return`editing.chatToEdit:gpt-${e.parameters.quality}`}}(e);return(0,d.du)([i],{[i]:1},t)}function y(e,t){let i=function(e){if("pixverse4.5"===e.model)return`video.${e.model}.${e.parameters.resolution}`;if("kling2.1"===e.model&&"std"===e.parameters.videoMode)return"video.kling2.1.5.std";if("kling2.1"===e.model&&"pro"===e.parameters.videoMode)return"video.kling2.1.5.pro";if("kling"===e.model&&"std"===e.parameters.videoMode)return"video.kling.5.std";if("kling"===e.model&&"pro"===e.parameters.videoMode)return"video.kling.5.pro";if("wan-i2v"===e.model)return"video.wan-i2v";if("wan2.2-i2v"===e.model)return"video.wan-i2v-2.2.720p";else if("seedance-v1"===e.model)return"video.seedance-v1.5.lite.720p";else if("MiniMax-Hailuo-02"===e.model)return"video.MiniMax-Hailuo-02.6.768P";else return"video.kling.5.pro"}(e);return(0,d.du)([i],{[i]:1},t)}function b(e){return Object.values(e).filter(e=>"empty"===e.shot_type?null!=e.image_prompt&&""!==e.image_prompt.trim():"uploaded_video"!==e.shot_type)}function C(e){return Object.values(e).filter(e=>!e.is_hidden&&("empty"!==e.shot_type||null!=e.active_video_id&&""!==e.active_video_id.trim()))}function w(e){return""===e||null==e}function j(e){return"completed"===e||"failed:user_exporting_video"===e}function F(e){return e.startsWith("failed")&&"failed:user_exporting_video"!==e}function k(e){if(!e.startsWith("failed:"))return{description:""};switch(e){case"failed:creating_story":return{description:"Creating story failed. The credits has been refunded."};case"failed:generating_storyboard":return{description:"Generating storyboard failed. The credits has been refunded."};case"failed:generating_images":return{description:"Generating images failed. The credits has been refunded."};case"failed:generating_videos":return{description:"Generating videos failed. The credits has been refunded."};case"failed:generating_timeline":return{description:"Generating timeline failed. Please try the recover option."};case"failed:exporting_video":return{description:"Exporting video failed. Please try the recover option."};case"failed:user_exporting_video":return{description:"Exporting video failed. Please try again."};default:return{description:"Something went wrong. The credits has been refunded."}}}},49842:function(e,t,i){i.d(t,{ZY:function(){return b}});var r=i(75271),n=i(61659),o=i(76590),a=i(2345),s=i(52973),l=i(47469),d=i(62283);let c=(e,t)=>{if(e===t)return!0;if(null==e||null==t||typeof e!=typeof t)return!1;if("object"!=typeof e)return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let[i,r]of e.entries())if(!c(r,t[i]))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();let i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(let n of i)if(!r.includes(n)||!c(e[n],t[n]))return!1;return!0},u=e=>{if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map(u);let t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=u(e[i]));return t},p=e=>JSON.stringify(e).length,h=()=>`snapshot_${Date.now()}_${Math.random().toString(36).slice(2,11)}`,m={undoStack:[],redoStack:[],maxHistorySize:20,enabled:!0,isRestoring:!1,currentOperation:null,useCompression:!1},x=(0,a.U)()((0,s.mW)((0,l.n)((e,t)=>({...m,createSnapshot:(i,r,n)=>{let o=t();if(!o.enabled||o.isRestoring)return;let a=r(),s={id:h(),timestamp:Date.now(),description:i,shotsMap:u(a.shotsMap),tracks:u(a.tracks),metadata:n};e(e=>{e.undoStack.push(s),e.undoStack.length>e.maxHistorySize&&e.undoStack.shift(),e.redoStack=[]})},startOperation:(i,r)=>{let n=t();if(!n.enabled||n.isRestoring)return;let o=r(),a={id:h(),timestamp:Date.now(),description:`Before ${i}`,shotsMap:u(o.shotsMap),tracks:u(o.tracks)};e(e=>{e.currentOperation={description:i,startSnapshot:a}})},endOperation:i=>{let r=t();if(!r.currentOperation||!r.enabled||r.isRestoring)return!1;let n=i(),{startSnapshot:o,description:a}=r.currentOperation,s={shotsMap:u(n.shotsMap),tracks:u(n.tracks)},l=o&&!c({shotsMap:o.shotsMap,tracks:o.tracks},s);return l&&e(e=>{e.undoStack.push(o),e.undoStack.length>e.maxHistorySize&&e.undoStack.shift(),e.redoStack=[]}),e(e=>{e.currentOperation=null}),l},cancelOperation:()=>{e(e=>{e.currentOperation=null})},restoreSnapshot:async(t,i)=>{e(e=>{e.isRestoring=!0});try{await i({shotsMap:u(t.shotsMap),tracks:u(t.tracks)})}finally{e(e=>{e.isRestoring=!1})}},undo:async(i,r)=>{let n=t();if(!n.canUndo()||n.isRestoring)return;let o=i(),a={id:h(),timestamp:Date.now(),description:"Redo point",shotsMap:u(o.shotsMap),tracks:u(o.tracks)},s=n.undoStack.at(-1);e(e=>{e.undoStack.pop(),e.redoStack.push(a)}),await t().restoreSnapshot(s,r)},redo:async(i,r)=>{let n=t();if(!n.canRedo()||n.isRestoring)return;let o=i(),a={id:h(),timestamp:Date.now(),description:"Undo point from redo",shotsMap:u(o.shotsMap),tracks:u(o.tracks)},s=n.redoStack.at(-1);e(e=>{e.redoStack.pop(),e.undoStack.push(a)}),await t().restoreSnapshot(s,r)},canUndo:()=>{let e=t();return e.undoStack.length>0&&!e.isRestoring},canRedo:()=>{let e=t();return e.redoStack.length>0&&!e.isRestoring},clearHistory:()=>{e(e=>{e.undoStack=[],e.redoStack=[],e.currentOperation=null})},setEnabled:t=>{e(e=>{e.enabled=t})},setMaxHistorySize:t=>{e(e=>{for(e.maxHistorySize=Math.max(1,t);e.undoStack.length>e.maxHistorySize;)e.undoStack.shift()})},setUseCompression:t=>{e(e=>{e.useCompression=t})},getHistoryInfo:()=>{let e=t(),i=e.undoStack.length+e.redoStack.length,r=Math.round((e.undoStack.reduce((e,t)=>e+p(t),0)+e.redoStack.reduce((e,t)=>e+p(t),0))/1024);return{undoCount:e.undoStack.length,redoCount:e.redoStack.length,canUndo:e.canUndo(),canRedo:e.canRedo(),isOperationActive:null!==e.currentOperation,memoryUsage:{totalSnapshots:i,estimatedSizeKB:r}}}})),{name:"video-editor-snapshot-history-store"})),g=(0,d.N)(x);var f=i(62513),v=i(67113),y=i(62684);let b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C((0,f.B)(),(0,y.D)(),e)},C=function(e,t){var i,a;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{maxHistorySize:l=20,enableKeyboardShortcuts:d=!0}=s,c=g(),u=o.jU.use.syncData(),{updateShot:p}=(0,v.Q)();(0,r.useEffect)(()=>{c.setMaxHistorySize(l)},[l,c]);let h=(0,n.Z)(null===(a=e.story)||void 0===a?void 0:null===(i=a.storyboard)||void 0===i?void 0:i.shots_map),m=(0,n.Z)(t.tracks),x=(0,r.useCallback)(()=>({shotsMap:h.current||{},tracks:m.current||[]}),[h,m]),f=(0,r.useCallback)(i=>{let r=e.story;r?e.setStory({...r,storyboard:{...r.storyboard,shots_map:i.shotsMap}}):console.warn("âš ï¸ Cannot apply shotsMap: no current story"),t.setTracks(i.tracks)},[e,t]),y=(0,r.useCallback)((e,t)=>{c.createSnapshot(e,x,t)},[c,x]),b=(0,r.useCallback)(e=>{c.startOperation(e,x)},[c,x]),C=(0,r.useCallback)(()=>c.endOperation(x),[c,x]),w=(0,r.useCallback)(()=>{c.cancelOperation()},[c]),j=(0,r.useCallback)(async()=>{await c.undo(x,f),u([],{fullSync:!0})},[c,x,f,u]),F=(0,r.useCallback)(async()=>{await c.redo(x,f),u([],{fullSync:!0})},[c,x,f,u]);return(0,r.useEffect)(()=>{if(!d)return;let e=e=>{let t=navigator.platform.toUpperCase().includes("MAC")?e.metaKey:e.ctrlKey;t&&"z"===e.key&&!e.shiftKey?(e.preventDefault(),j()):t&&("y"===e.key||"z"===e.key&&e.shiftKey)&&(e.preventDefault(),F())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[d,j,F]),{createSnapshot:y,startOperation:b,endOperation:C,cancelOperation:w,undo:j,redo:F,canUndo:c.canUndo(),canRedo:c.canRedo(),clearHistory:c.clearHistory,setEnabled:c.setEnabled,historyInfo:c.getHistoryInfo(),operations:{addShotWithSnapshot:async(t,i,r)=>{b("Add shot");try{await e.addShot(t,i,r)}finally{C()}},removeShotWithSnapshot:async(t,i)=>{b("Remove shot");try{await e.removeShot(t,i)}finally{C()}},updateShotWithSnapshot:async(e,t,i)=>{b("Update shot");try{await p(e,t,i)}finally{C()}},reorderShotsWithSnapshot:async(t,i,r)=>{b("Reorder shots");try{await e.reorderShots(t,i,r)}finally{C()}},addTrack:e=>{b("Add track"),C()},removeTrack:e=>{b("Remove track"),C()},updateTrack:(e,t)=>{b("Update track"),C()},batchOperation:async(e,t)=>{b(e);try{await t()}finally{setTimeout(()=>{C()&&u([],{fullSync:!0})},0)}}}}}},16589:function(e,t,i){i.d(t,{jU:function(){return r.jU}});var r=i(76590);i(62513)},76590:function(e,t,i){i.d(t,{Jc:function(){return a},jU:function(){return o}});var r=i(75271),n=i(62513);let o=(0,i(62283).N)(n.B),a=()=>{let e=o.use.story(),t=null==e?void 0:e.category_inputs;return(0,r.useMemo)(()=>(null==t?void 0:t.character)||null,[t])}},501:function(e,t,i){i.d(t,{Au:function(){return j},FT:function(){return w},Gl:function(){return S},PR:function(){return Z},aY:function(){return I},bG:function(){return F},fH:function(){return b},hd:function(){return _},k3:function(){return C},rR:function(){return k}});var r=i(75271),n=i(59204),o=i(67197),a=i(2345),s=i(52973),l=i(47469),d=i(71087),c=i(25162),u=i(76590),p=i(22289),h=i(14456),m=i(62283);let x=(0,n.Z)(()=>{(0,h.gf)().invalidateQueries([p.uE])},1e3),g={imageGenHistory:[],videoGenHistory:[],hoveredImageId:"",hoveredVideoId:"",hasActiveImageChanged:!1,isCurrentImageRetried:!1},f=(e,t)=>({resource:e,id:(0,o.x0)(),workflowId:e.workflow_run_id,error:e.status_message,generationStatus:"pending"===e.status||"generating"===e.status?"generating":"completed"===e.status?"completed":"failed",generatedAt:1e3*e.created_at._seconds,isPlaceholder:!1,referenceImageGenerationId:null==t?void 0:t.referenceImageGenerationId}),v={shotStates:{},shotRegenerating:{},advancedSettings:{image_model_config:d.Fj[1],video_model_config:d.E5[3]},workflowRunList:[],newShotIds:[],activeShotId:"",hoveredShotId:"",needCreateShot:!1},y=(0,a.U)()((0,s.mW)((0,l.n)((e,t)=>({...v,setAdvancedSettings:t=>e(e=>{e.advancedSettings={...e.advancedSettings,...t}}),addImageGenerationPlaceholder:(t,i,r,n)=>e(e=>{e.shotStates[t]=e.shotStates[t]||{...g};let a={id:(0,o.x0)(),resource:{id:`placeholder-${i}`,user_id:"",resource_type:"image",title:"Generating...",story_id:"",shot_id:t,source:"generated",ai_model:"",prompt:r,workflow_run_id:i,configs:{},is_deleted:!1,created_at:{_seconds:Math.floor(Date.now()/1e3),_nanoseconds:0},updated_at:{_seconds:Math.floor(Date.now()/1e3),_nanoseconds:0},url:"",status:"pending"},workflowId:i,generationStatus:"generating",generatedAt:Date.now(),isPlaceholder:!0};e.shotStates[t].imageGenHistory=e.shotStates[t].imageGenHistory||[],e.shotStates[t].imageGenHistory=[a,...e.shotStates[t].imageGenHistory],n&&(e.shotStates[t].hoveredImageId=a.resource.id)}),addVideoGenerationPlaceholder:(t,i,r,n,a,s)=>e(e=>{e.shotStates[t]=e.shotStates[t]||{...g};let l={id:(0,o.x0)(),resource:{id:`placeholder-${i}`,user_id:"",resource_type:"video",title:"Generating...",story_id:"",shot_id:t,source:"generated",ai_model:"",prompt:r,workflow_run_id:i,configs:{},is_deleted:!1,created_at:{_seconds:Math.floor(Date.now()/1e3),_nanoseconds:0},updated_at:{_seconds:Math.floor(Date.now()/1e3),_nanoseconds:0},url:"",status:"pending",reference_image:n},workflowId:i,generationStatus:"generating",generatedAt:Date.now(),isPlaceholder:!0,referenceImageGenerationId:s};e.shotStates[t].videoGenHistory=e.shotStates[t].videoGenHistory||[],e.shotStates[t].videoGenHistory.unshift(l),a&&(e.shotStates[t].hoveredVideoId=l.resource.id)}),updateGenerationStatus:(t,i,r)=>e(e=>{if(!e.shotStates[t])return;let n=("image"===r.resource_type?e.shotStates[t].imageGenHistory:e.shotStates[t].videoGenHistory).find(e=>e.workflowId===i);n&&(n.generationStatus="pending"===r.status||"generating"===r.status?"generating":"completed"===r.status?"completed":"failed",n.error=r.status_message,n.resource.status=r.status,n.resource.status_message=r.status_message)}),completeGeneration:(t,i,r)=>e(e=>{if(!e.shotStates[t])return;let n="image"===r.resource_type?e.shotStates[t].imageGenHistory:e.shotStates[t].videoGenHistory,a=n.findIndex(e=>e.workflowId===i);if(-1!==a)n[a]={...n[a],resource:r,generationStatus:"completed",isPlaceholder:!1};else{let e={id:(0,o.x0)(),resource:r,workflowId:i,generationStatus:"completed",generatedAt:Date.now(),isPlaceholder:!1};n.unshift(e)}}),removeGenerationItem:(t,i)=>e(e=>{}),initializeShotStates:t=>e(e=>{e.shotStates[t]=e.shotStates[t]||{...g}}),setShotImageGenHistory:(t,i)=>e(e=>{e.shotStates[t]=e.shotStates[t]||{...g},e.shotStates[t].imageGenHistory=i}),setShotVideoGenHistory:(t,i)=>e(e=>{e.shotStates[t]=e.shotStates[t]||{...g},e.shotStates[t].videoGenHistory=i}),clearShotImageGenHistory:t=>e(e=>{e.shotStates[t]&&(e.shotStates[t].imageGenHistory=[])}),clearShotVideoGenHistory:t=>e(e=>{e.shotStates[t]&&(e.shotStates[t].videoGenHistory=[])}),addExistingMediaResources:(t,i,r,n)=>e(e=>{e.shotStates[t]=e.shotStates[t]||{...g},e.shotStates[t].imageGenHistory=e.shotStates[t].imageGenHistory||[],e.shotStates[t].videoGenHistory=e.shotStates[t].videoGenHistory||[];let o=new Set(e.shotStates[t].imageGenHistory.map(e=>e.workflowId)),a=new Set(e.shotStates[t].videoGenHistory.map(e=>e.workflowId)),s=i.filter(e=>!o.has(e.workflow_run_id)).map(e=>f(e)),l=r.filter(e=>!a.has(e.workflow_run_id)).map(e=>{let t;return(null==n?void 0:n.init)&&e.id===(null==n?void 0:n.activeVideoId)&&(t=null==n?void 0:n.activeImageId),f(e,{referenceImageGenerationId:t})});e.shotStates[t].imageGenHistory=e.shotStates[t].imageGenHistory.concat(s),e.shotStates[t].videoGenHistory=e.shotStates[t].videoGenHistory.concat(l),e.shotStates[t].imageGenHistory.sort((e,t)=>t.generatedAt-e.generatedAt),e.shotStates[t].videoGenHistory.sort((e,t)=>t.generatedAt-e.generatedAt)}),setIsCurrentImageRetried:(t,i)=>e(e=>{e.shotStates[t]=e.shotStates[t]||{...g},e.shotStates[t].isCurrentImageRetried=i}),checkActiveImageChanged:(e,i,r)=>{let n=t().shotStates[e];if(!n)return!1;let o=n.videoGenHistory.find(e=>{var t;return(null===(t=e.resource)||void 0===t?void 0:t.id)===r});return!!o&&o.referenceImageGenerationId!==i&&!n.isCurrentImageRetried},setShotRegenerating:(t,i,r)=>e(e=>{e.shotRegenerating[t]={...e.shotRegenerating[t],[i]:r}}),setHoveredMediaId:function(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e(e=>{if(e.shotStates[t]=e.shotStates[t]||{...g},e.shotStates[t]["image"===i?"hoveredImageId":"hoveredVideoId"]=r,!r&&n){var o,a,s;e.shotStates[t]["image"===i?"hoveredImageId":"hoveredVideoId"]=(null===(s=e.shotStates[t])||void 0===s?void 0:null===(a=s["image"===i?"imageGenHistory":"videoGenHistory"][0])||void 0===a?void 0:null===(o=a.resource)||void 0===o?void 0:o.id)||""}})},getHoveredMediaId:(e,i)=>t().shotStates[e]["image"===i?"hoveredImageId":"hoveredVideoId"],addWorkflowRun:t=>e(e=>{let i=new Set(e.workflowRunList.map(e=>e.workflow_run_id)),r=t.filter(e=>!i.has(e.id)).map(e=>({workflow_run_id:e.id,status:"pending",shot_id:e.shot_id,created_at:Date.now(),updated_at:Date.now()}));e.workflowRunList.push(...r)}),removeWorkflowRun:t=>e(e=>{e.workflowRunList=e.workflowRunList.filter(e=>!t.includes(e.workflow_run_id))}),setHasActiveImageChanged:(t,i)=>e(e=>{e.shotStates[t]=e.shotStates[t]||{...g},e.shotStates[t].hasActiveImageChanged=i}),calculateGenerationCredits:(e,i)=>{let{advancedSettings:r}=t();return"image"===e?(0,c.dr)(r.image_model_config.value,i):(0,c.u9)(r.video_model_config.value,i)},refreshCredits:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(0,h.gf)().invalidateQueries([p.uE]):x()},setActiveShotId:t=>e(e=>{e.activeShotId=t}),setHoveredShotId:t=>e(e=>{e.hoveredShotId=t}),setNeedCreateShot:(t,i)=>e(e=>{e.needCreateShot=t,i&&setTimeout(()=>{u.jU.getState().setViewMode(i)},300)})})),{name:"video-editor-state-management-store"})),b=(0,m.N)(y),C=()=>b(e=>e.advancedSettings),w=(e,t)=>{let i=b(i=>{var r,n;return"image"===t?null===(r=i.shotStates[e])||void 0===r?void 0:r.imageGenHistory:null===(n=i.shotStates[e])||void 0===n?void 0:n.videoGenHistory});return(0,r.useMemo)(()=>i||[],[i])},j=e=>{let t=b(t=>{var i;return null===(i=t.shotStates[e])||void 0===i?void 0:i.imageGenHistory});return(0,r.useMemo)(()=>t||[],[t])},F=e=>{let t=b(t=>{var i;return null===(i=t.shotStates[e])||void 0===i?void 0:i.videoGenHistory});return(0,r.useMemo)(()=>t||[],[t])},k=(e,t)=>b(i=>{var r;return(null===(r=i.shotRegenerating[e])||void 0===r?void 0:r[t])||!1}),_=(e,t)=>(0,u.jU)(i=>{var r,n,o,a;return(null===(a=i.story)||void 0===a?void 0:null===(o=a.storyboard)||void 0===o?void 0:null===(n=o.shots_map)||void 0===n?void 0:null===(r=n[e])||void 0===r?void 0:r[`active_${t}_id`])||""}),S=(e,t)=>b(i=>{var r,n;return"image"===t?(null===(r=i.shotStates[e])||void 0===r?void 0:r.hoveredImageId)||"":(null===(n=i.shotStates[e])||void 0===n?void 0:n.hoveredVideoId)||""}),I=e=>b(t=>t.activeShotId===e?"#2F66FF":t.hoveredShotId===e?"rgba(158, 166, 189, 0.80)":"#2E2E2E"),Z=(e,t,i)=>b(r=>r.checkActiveImageChanged(e,t,i))},62513:function(e,t,i){let r,n,o;i.d(t,{B:function(){return C}});var a=i(59204),s=i(2345),l=i(52973),d=i(47469),c=i(28337),u=i(60439);let p=async(e,t)=>{if(!e.id)throw Error("Story ID is required for sync");let i=await c.ZP.post(`/stories/${e.id}/sync`,t);return(0,u.WJ)({...e,is_export_outdated:!0}),i.data},h=(n=null,o=null,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return new Promise((e,i)=>{r&&(clearTimeout(r),o&&o(Error("Debounced call cancelled"))),n=e,o=i,r=setTimeout(async()=>{try{let e=await p(...t);n&&n(e)}catch(e){o&&o(e)}finally{n=null,o=null}},1e3)})}),m=async(e,t,i)=>{var r;let n=Object.fromEntries(Object.entries(t||{shots_map:null===(r=e.storyboard)||void 0===r?void 0:r.shots_map,video_editor_timeline:e.video_editor_timeline}).filter(e=>{let[t,i]=e;return null!=i&&("object"!=typeof i||0!==Object.keys(i).length)}));if(0===Object.keys(n).length){console.warn("No data to sync");return}return(null==i?void 0:i.immediate)?p(e,n):h(e,n)};var x=i(28318),g=i(62684),f=i(57114);let v=async()=>{let e=C.getState(),t=g.D.getState(),i=new x.O(t).mediaAssetInUse,{story:r,pendingSyncShotIds:n}=e;if(!r||0===n.length)return;let o=[...n];C.setState(e=>{e.syncingShotIds=[...e.pendingSyncShotIds],e.pendingSyncShotIds=[],e.syncStatus="syncing"});try{var a;let e={};(null===(a=r.storyboard)||void 0===a?void 0:a.shots_map)&&o.forEach(t=>{r.storyboard.shots_map[t]&&(e[t]=r.storyboard.shots_map[t])});let n={shots_map:Object.keys(e).length>0?e:void 0,video_editor_timeline:{tracks:t.tracks,mediaAssets:i,globalConfig:t.globalConfig}},s=Object.fromEntries(Object.entries(n).filter(e=>{let[t,i]=e;return void 0!==i}));await m(r,s,{immediate:!0}),C.setState(e=>{e.syncingShotIds=[],e.syncStatus="idle",e.hasUnsavedChanges=e.pendingSyncShotIds.length>0,e.syncError=""});let{pendingSyncShotIds:l}=C.getState();l.length>0&&y()}catch(e){console.error("Error syncing shots:",o,e),C.setState(t=>{t.pendingSyncShotIds=[...o,...t.pendingSyncShotIds],t.syncingShotIds=[],t.syncStatus="error",t.syncError=e instanceof Error?e.message:"Unknown error"})}},y=(0,a.Z)(v,1e3),b={story:null,isLoading:!1,syncStatus:"idle",syncError:"",error:null,hasUnsavedChanges:!1,viewMode:"video-editor",pendingSyncShotIds:[],syncingShotIds:[],uploadingAssets:[]},C=(0,s.U)()((0,l.mW)((0,d.n)((e,t)=>({...b,setStory:t=>e(e=>{var i;e.story={...t,storyboard:{...t.storyboard,shots:(0,f.MU)(null===(i=t.storyboard)||void 0===i?void 0:i.shots_map)}},e.error=null,e.hasUnsavedChanges=!1},!1,"setStory"),setLoading:t=>e(e=>{e.isLoading=t},!1,"setLoading"),setError:t=>e(e=>{e.error=t,e.isLoading=!1},!1,"setError"),setViewMode:t=>e(e=>{e.viewMode=t},!1,"setViewMode"),updateStoryMetadata:t=>e(e=>{e.story&&(Object.assign(e.story,t),e.hasUnsavedChanges=!0)},!1,"updateStoryMetadata"),updateEditorGlobalConfig:t=>e(e=>{e.story.video_editor_timeline.globalConfig={...e.story.video_editor_timeline.globalConfig,...t},e.hasUnsavedChanges=!0},!1,"updateEditorGlobalConfig"),getShotById:e=>{var i;let{story:r}=t();return(null==r?void 0:null===(i=r.storyboard)||void 0===i?void 0:i.shots_map)&&r.storyboard.shots_map[e]||null},updateShot:(i,r,n)=>new Promise(o=>e(e=>{var a,s;let{rebuildTimeline:l=!0}=n||{};if(!(null===(s=e.story)||void 0===s?void 0:null===(a=s.storyboard)||void 0===a?void 0:a.shots))return;let d=e.story.storyboard.shots.findIndex(e=>e.shot_id===i),c=null;-1!==d&&(e.story.storyboard.shots_map=(0,f.vB)(e.story.storyboard.shots_map,i,r),Object.assign(e.story.storyboard.shots[d],r),l&&(c=t().recalculateTimelineTiming()),e.hasUnsavedChanges=!0),null==c||c.then(()=>{o()})},!1,"updateShot")),reorderShots:(i,r,n)=>new Promise(o=>{let a=null,{rebuildTimeline:s=!0}=n||{};e(e=>{let n,l;let d=e.story.storyboard.shots[i];if(i<r?(n=e.story.storyboard.shots[r],l=e.story.storyboard.shots[r+1]):(n=e.story.storyboard.shots[r-1],l=e.story.storyboard.shots[r]),a=d.shot_id,e.story.storyboard.shots_map){let t=(0,f.Pu)(e.story.storyboard.shots_map,d.shot_id,null==n?void 0:n.shot_id,null==l?void 0:l.shot_id),i=(0,f.MU)(t);e.story.storyboard.shots_map=t,e.story.storyboard.shots=i}let c=null;s&&(c=t().recalculateTimelineTiming()),e.hasUnsavedChanges=!0,null==c||c.then(()=>{o()})},!1,"reorderShots"),a&&t().syncData([a])}),addShot:(i,r,n)=>new Promise(o=>e(e=>{if(!e.story)return;let{rebuildTimeline:a=!0}=n||{};if(void 0!==r){let t=e.story.storyboard.shots[r-1],n=e.story.storyboard.shots[r];e.story.storyboard.shots_map=(0,f.l9)(e.story.storyboard.shots_map,i,null==t?void 0:t.shot_id,null==n?void 0:n.shot_id),e.story.storyboard.shots=(0,f.MU)(e.story.storyboard.shots_map)}else e.story.storyboard.shots.push(i);let s=null;a&&(s=t().recalculateTimelineTiming()),e.hasUnsavedChanges=!0,null==s||s.then(()=>{o()})},!1,"addShot")),removeShot:(i,r)=>new Promise(n=>e(e=>{var o,a;if(!(null===(a=e.story)||void 0===a?void 0:null===(o=a.storyboard)||void 0===o?void 0:o.shots))return;let{rebuildTimeline:s=!0}=r||{};e.story.storyboard.shots_map=(0,f.ij)(e.story.storyboard.shots_map,i),e.story.storyboard.shots=(0,f.MU)(e.story.storyboard.shots_map);let l=null;s&&(l=t().recalculateTimelineTiming()),e.hasUnsavedChanges=!0,null==l||l.then(()=>{t().syncData([i],{deleteIds:[i]}),n()})},!1,"removeShot")),reset:()=>e(e=>{Object.assign(e,b)},!1,"reset"),markAsSaved:()=>e(e=>{e.hasUnsavedChanges=!1},!1,"markAsSaved"),recalculateTimelineTiming:()=>new Promise(t=>setTimeout(()=>{e(e=>{g.D.getState().rebuildTimeline().then(()=>{t()}),e.hasUnsavedChanges=!0},!1,"recalculateTimelineTiming")},0)),queueShotsForSync:t=>e(e=>{let i=t.filter(t=>!e.pendingSyncShotIds.includes(t)&&!e.syncingShotIds.includes(t));e.pendingSyncShotIds.push(...i),e.hasUnsavedChanges=!0},!1,"queueShotsForSync"),clearSyncQueues:()=>e(e=>{e.pendingSyncShotIds=[],e.syncingShotIds=[],e.syncStatus="idle"},!1,"clearSyncQueues"),syncData:async(i,r)=>{var n,o;let{story:a}=t(),{forceSync:s=!1,deleteIds:l=[],fullSync:d=!1}=r||{};if(!a){console.warn("No story to sync");return}let c=null===(n=a.storyboard)||void 0===n?void 0:n.shots_map,u=d?Object.keys((null===(o=a.storyboard)||void 0===o?void 0:o.shots_map)||{}):i;if(u&&u.length>0&&e(e=>{let t=u.filter(t=>!e.pendingSyncShotIds.includes(t)&&!e.syncingShotIds.includes(t));t.length>0&&(e.pendingSyncShotIds.push(...t),e.hasUnsavedChanges=!0)}),l&&l.length>0)try{let e={};l.forEach(t=>{let i=c[t];if(!i){e[t]=null;return}"auto"===i.shot_type?e[t]={...i}:e[t]=null});let t={shots_map:e,video_editor_timeline:a.video_editor_timeline};await m(a,t,{immediate:!0})}catch(e){console.error("Error deleting shots:",l,e)}if(e(e=>{e.syncStatus="waitSync"}),s){y.cancel();let{pendingSyncShotIds:e}=t();e.length>0&&await v()}else{let{pendingSyncShotIds:e}=t();e.length>0&&y()}},addUploadingAsset:t=>e(e=>{e.uploadingAssets.push(t)},!1,"addUploadingAsset"),updateUploadingAsset:(t,i)=>e(e=>{let r=e.uploadingAssets.findIndex(e=>e.id===t);-1!==r&&Object.assign(e.uploadingAssets[r],i)},!1,"updateUploadingAsset"),removeUploadingAsset:t=>e(e=>{e.uploadingAssets=e.uploadingAssets.filter(e=>e.id!==t)},!1,"removeUploadingAsset"),clearUploadingAssets:()=>e(e=>{e.uploadingAssets=[]},!1,"clearUploadingAssets"),getUploadingAssetsByType:e=>{let{uploadingAssets:i}=t();return i.filter(t=>t.type===e)}})),{name:"video-editor-store",trace:!0}))},73807:function(e,t,i){i.d(t,{d:function(){return b}});var r=i(52676),n=i(75271),o=i(35019),a=i(65893),s=i(54557),l=i(44754),d=i(62935),c=i(92598),u=i(45265),p=i(99307),h=i(54425),m=i(4757),x=i(14603),g=i(35199),f=i(70210);let v=[],y=[];function b(e){let{storyId:t,tracks:i=v,mediaAssets:b=y,globalConfig:C=h.Kz}=e,w=(0,n.useRef)(null);(0,x.N)({playerRef:w}),(0,m.Lv)(),(0,m.Kt)();let{isLoading:j,error:F,localError:k}=function(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.Kz,o=g.wK.use.init(),a=g.wK.use.isLoading(),s=g.wK.use.error(),[l,d]=(0,n.useState)(null),c=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{(async()=>{if(c.current||(d(null),!e&&0===t.length))return;let n=i.filter(e=>!f.wD.isValidTrack(e));if(n.length>0){d("Invalid track data provided"),console.error("Invalid tracks:",n);return}let a=t.filter(e=>!f.wD.isValidMediaAsset(e));if(a.length>0){d("Invalid media asset data provided"),console.error("Invalid assets:",a);return}0===i.length&&console.warn("No initial tracks provided"),e||0!==t.length||console.warn("No storyId or initial media assets provided");try{c.current=!0,o({storyId:e,mediaAssets:t.length>0?t:[],tracks:i,globalConfig:{watermark:r.watermark||h.wf,fps:r.fps||h.UG,captions:r.captions||{enabled:!0}}})}catch(t){let e=t instanceof Error?t.message:"Failed to initialize timeline";console.error("Timeline initialization failed:",t),d(e),c.current=!1}})()},[o,e,i,t,r]),{isLoading:a,error:s,localError:l}}(t,b,i,C),_=F||k;return(0,r.jsxs)(o.Z,{tabIndex:0,sx:{display:"flex",flexDirection:"column",height:"100%",width:"100%",color:"white",gap:2,outline:"none",position:"relative"},children:[(0,r.jsxs)(o.Z,{sx:{flex:1,position:"relative",width:"100%",minHeight:0,flexDirection:"row",gap:2},children:[(0,r.jsx)(u.xr,{storyId:t,sx:{flex:0,flexBasis:p.Bx,flexGrow:0,flexShrink:0,maxHeight:"100%",height:"100%"}}),(0,r.jsx)(u.V4,{sx:{flex:1,flexBasis:"auto"},playerRef:w}),(0,r.jsx)(u.mG,{sx:{flex:0,flexBasis:p.Bx,flexGrow:0,flexShrink:0}})]}),(0,r.jsx)(a.Z,{sx:{flex:0,flexShrink:0,flexBasis:"210px",minHeight:"max-content",position:"relative",borderRadius:1,overflow:"hidden",bgcolor:"#1a1a1a"},children:(0,r.jsx)(u.dR,{playerRef:w})}),(0,r.jsx)(u.Dy,{}),(0,r.jsx)(s.Z,{open:j,sx:{position:"absolute",zIndex:e=>e.zIndex.drawer+1,color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.7)"},children:(0,r.jsxs)(o.Z,{alignItems:"center",spacing:2,children:[(0,r.jsx)(l.Z,{color:"inherit"}),(0,r.jsx)(d.Z,{variant:"body1",children:"loading..."})]})}),_?(0,r.jsx)(s.Z,{open:!!_,sx:{position:"absolute",zIndex:e=>e.zIndex.drawer+2,backgroundColor:"rgba(0, 0, 0, 0.8)"},children:(0,r.jsx)(a.Z,{sx:{maxWidth:400,width:"90%"},children:(0,r.jsx)(c.Z,{severity:"error",sx:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)","& .MuiAlert-message":{color:"#fff"},"& .MuiAlert-icon":{color:"#f44336"}},children:(0,r.jsx)(d.Z,{variant:"body2",children:_})})})}):null]})}},45265:function(e,t,i){i.d(t,{CX:function(){return p},hV:function(){return B},ji:function(){return ex},t_:function(){return ev},os:function(){return eC},YH:function(){return eR},xr:function(){return eT},Vc:function(){return eD},V4:function(){return ez},pS:function(){return eG},Mk:function(){return ts},mG:function(){return th},Ws:function(){return tr},GI:function(){return tf},mX:function(){return tv},rP:function(){return ty},Tv:function(){return S},ap:function(){return tC},cP:function(){return tO},Hm:function(){return tK},dR:function(){return tQ},ve:function(){return t5},R_:function(){return t6},rg:function(){return t8},tF:function(){return t7},OB:function(){return it},F4:function(){return ir},pg:function(){return id},uH:function(){return il},Gw:function(){return ic},j0:function(){return iu},vK:function(){return im},Dy:function(){return ib}});var r=i(52676),n=i(75271),o=i(79574),a=i.n(o),s=i(35019),l=i(65893),d=i(62935),c=i(57984),u=i(35199);let p=(0,n.memo)(e=>{let{sx:t}=e,i=u.wK.use.globalConfig(),o=u.wK.use.tracks(),p=u.wK.use.updateGlobalConfig(),h=(0,n.useMemo)(()=>null==o?void 0:o.some(e=>e.items.some(e=>"caption"===e.type)),[o]),m=(0,n.useCallback)(e=>{p({captions:{enabled:e}})},[p]);return(0,r.jsxs)(s.Z,{direction:"column",sx:{height:"100%",width:"100%",px:1,py:1.5,...t},children:[h?(0,r.jsxs)(l.Z,{sx:{backgroundColor:"#2E2E2E",borderRadius:.5,padding:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#ffffff",fontSize:12,fontWeight:600},children:"Display Caption"}),(0,r.jsx)(c.r,{checked:i.captions.enabled,onChange:e=>m(e.target.checked),inputProps:{"aria-label":"Display Caption toggle"}})]}):null,(0,r.jsxs)(l.Z,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:1,padding:3},children:[(0,r.jsx)(a(),{src:"https://cdn.openart.ai/story/editor/captionPlaceholder.png",alt:"Caption placeholder",width:117,height:80}),(0,r.jsx)(d.Z,{sx:{fontSize:12,fontWeight:500,color:"#888888",textAlign:"center",width:180,lineHeight:"16px"},children:"More AI caption features and settings coming soon"})]})]})});p.displayName="AllMediaAssetsContentCaption";var h=i(77378),m=i(86355),x=i(44514),g=i(54512),f=i(71137),v=i(55547),y=i(99307),b=i(4757);let C={video:h.Z,image:m.Z,music:x.Z,audio:x.Z},w={video:"video",image:"image",music:"audio",audio:"audio"},j={"image/jpeg":"image","image/jpg":"image","image/png":"image","image/gif":"image","image/webp":"image","video/mp4":"video","video/webm":"video","video/mov":"video","video/avi":"video","audio/mp3":"music","audio/wav":"music","audio/aac":"music","audio/ogg":"music","audio/mpeg":"music"},F=e=>j[e]||null,k=e=>void 0!==j[e],_=e=>e.startsWith("image/")?"image":e.startsWith("video/")?"video":e.startsWith("audio/")?"audio":null,S=(0,n.memo)(e=>{let{activeTab:t,changeTab:i,storyId:o,sx:a}=e,[s,c]=(0,n.useState)(!1),[u,p]=(0,n.useState)({isValid:!1,errors:[]}),[h,m]=(0,n.useState)({show:!1,message:""}),x=(0,n.useRef)(null),j=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),(0,y.nw)(e.dataTransfer)&&c(!0)},[]),S=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},[]),I=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),(e.clientX<=0||e.clientY<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight)&&(c(!1),p({isValid:!1,errors:[]}))},[]),Z=(0,n.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation();let i=null===(t=x.current)||void 0===t?void 0:t.parentElement;if(!i){c(!1),p({isValid:!1,errors:[]});return}let r=i.getBoundingClientRect();e.clientX>=r.left&&e.clientX<=r.right&&e.clientY>=r.top&&e.clientY<=r.bottom||(c(!1),p({isValid:!1,errors:[]}))},[]),E=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),(0,y.nw)(e.dataTransfer)&&c(!0)},[]),A=(0,n.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),(0,y.nw)(e.dataTransfer)&&0===u.errors.length&&!u.detectedType){var i;let r=Array.from((null===(i=e.dataTransfer)||void 0===i?void 0:i.items)||[]).filter(e=>"file"===e.kind);if(r.length>1){p({isValid:!1,errors:["Only one file can be uploaded at a time"]});return}if(1===r.length){let e=r[0].type;if(!k(e)){let t=_(e);p({isValid:!1,errors:[t?`${t} files are not supported yet`:"Only image, video, and audio files are supported"]});return}let i=F(e);p({isValid:!0,detectedType:_(e)||void 0,targetTab:!("music"===i&&"voiceover"===t)&&i||void 0,errors:[]})}}},[u,t]),M=(0,n.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation();let i=null===(t=x.current)||void 0===t?void 0:t.parentElement;if(!i)return;let r=i.getBoundingClientRect();(e.clientX<=r.left||e.clientX>=r.right||e.clientY<=r.top||e.clientY>=r.bottom)&&(c(!1),p({isValid:!1,errors:[]}))},[]),{uploadAndSaveFileWithUploadingAsset:R}=(0,b.No)(o),T=(0,n.useCallback)(async e=>{var r;e.preventDefault(),c(!1),p({isValid:!1,errors:[]});let n=Array.from((null===(r=e.dataTransfer)||void 0===r?void 0:r.files)||[]);if(0===n.length)return;if(n.length>1){m({show:!0,message:"Only one file can be uploaded at a time. Please select a single file."});return}let o=n[0];if(!k(o.type)){let e=_(o.type);m({show:!0,message:e?`${e} files are not supported yet. Please select a supported file type.`:"Only image, video, and audio files are supported. Please select a supported file type."});return}if(u.errors.length>0){m({show:!0,message:u.errors[0]});return}let a=F(o.type);a&&a!==t&&("music"===a&&"voiceover"===t||i(a));try{await R(o,t)}catch(e){console.error("Upload failed:",e)}},[t,i,u,R]),D=(0,n.useCallback)(()=>{c(!1),p({isValid:!1,errors:[]})},[]),z=(0,n.useCallback)(()=>{m({show:!1,message:""})},[]);return(0,n.useEffect)(()=>{var e;let t=null===(e=x.current)||void 0===e?void 0:e.parentElement;if(t)return t.addEventListener("dragenter",E),t.addEventListener("dragover",A),t.addEventListener("dragleave",M),t.addEventListener("drop",T),document.addEventListener("dragenter",j),document.addEventListener("dragover",S),document.addEventListener("dragleave",I),document.addEventListener("drop",Z),window.addEventListener("dragend",D),()=>{t.removeEventListener("dragenter",E),t.removeEventListener("dragover",A),t.removeEventListener("dragleave",M),t.removeEventListener("drop",T),document.removeEventListener("dragenter",j),document.removeEventListener("dragover",S),document.removeEventListener("dragleave",I),document.removeEventListener("drop",Z),window.removeEventListener("dragend",D)}},[E,A,M,T,j,S,I,Z,D]),(0,r.jsxs)(l.Z,{ref:x,sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,pointerEvents:s||h.show?"all":"none",...a},onClick:()=>{c(!1)},children:[(0,r.jsx)(v.Z,{in:s,timeout:{enter:200,exit:300},children:(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",backdropFilter:"blur(8px)",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2},children:(()=>{let{isValid:e,detectedType:i,errors:n,targetTab:o}=u;if(n.length>0&&!e)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{sx:{fontSize:48,color:"#FF6B6B"}}),(0,r.jsx)(d.Z,{variant:"h6",sx:{color:"#FF6B6B",fontWeight:600,textAlign:"center"},children:"Invalid file"}),(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#FF6B6B",textAlign:"center",maxWidth:"300px"},children:n[0]})]});let a=i||"image",s=C[a],l=w[a];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{sx:{fontSize:48,color:"#6290FF"}}),(0,r.jsxs)(d.Z,{variant:"h6",sx:{color:"#6290FF",fontWeight:600},children:["Drop here to upload ",l]}),o&&o!==t?(0,r.jsxs)(d.Z,{variant:"body2",sx:{color:"#6290FF",opacity:.8},children:["Will switch to ",o," tab"]}):null]})})()})}),(0,r.jsx)(v.Z,{in:h.show,timeout:{enter:200,exit:300},children:(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2},children:(0,r.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,px:4,py:3,maxWidth:"400px",width:"90%"},children:[(0,r.jsx)(g.Z,{sx:{fontSize:48,color:"#FF6B6B"}}),(0,r.jsx)(d.Z,{variant:"h6",sx:{color:"#FF6B6B",fontWeight:600,textAlign:"center"},children:"Upload Error"}),(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#FF6B6B",textAlign:"center",lineHeight:1.5},children:h.message}),(0,r.jsx)(f.Z,{variant:"contained",onClick:z,sx:{mt:2,backgroundColor:"#FF6B6B",color:"white","&:hover":{backgroundColor:"#FF5252"}},children:"Got it"})]})})})]})});S.displayName="MediaAssetsDropZone";var I=i(65230),Z=i(85814),E=i(24337),A=i(501),M=i(18972),R=i(79267);let T={image:"image/*",video:"video/*",audio:"audio/*"},D=e=>{let{type:t,subtype:i,storyId:o,sx:a={}}=e,[c,u]=(0,n.useState)(null),[p,h]=(0,n.useState)(),m=(0,n.useRef)(null),x=(0,n.useRef)(null),g=()=>{u(null)},f=e=>{null==e||e(),g()},v=(0,A.fH)(e=>e.setNeedCreateShot),y=()=>{v(!0,"all-shots")},C=()=>{x.current&&x.current.click()},{uploadAndSaveFileWithUploadingAsset:w,isUploading:j}=(0,b.No)(o),F=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){try{await w(r,i)}catch(e){console.error("Upload failed:",e)}x.current&&(x.current.value="")}},k=!!c;(0,n.useEffect)(()=>{let e=e=>{k&&m.current&&!m.current.contains(e.target)&&u(null)};if(k)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[k]);let{handleShowModal:_}=(0,M.$)({type:"image"===t?"image":"video",storyId:o,maxSelectionCount:10});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:x,type:"file",accept:T[t],style:{display:"none"},onChange:F,disabled:j}),(0,r.jsxs)(l.Z,{ref:m,onClick:e=>{c||h(e.currentTarget.offsetWidth),u(c?null:e.currentTarget)},sx:{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"2px",border:"1px dashed #666",background:"#1A1A1A",cursor:"pointer",opacity:j?.6:1,pointerEvents:j?"none":"auto","&:hover":{borderColor:"#ddd"},...a},children:[(0,r.jsx)(R.Zr,{sx:{color:"rgba(255,255,255,0.38)"}}),(0,r.jsx)(d.Z,{sx:{color:"#CCC",fontSize:12,fontWeight:500,lineHeight:"130%",letterSpacing:"-0.24px"},children:j?"Uploading...":"Add"})]}),(0,r.jsx)(Z.ZP,{open:k,anchorEl:c,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{"& .MuiPopover-paper":{backgroundColor:"#111111",border:"1px solid #2E2E2E",borderRadius:"8px",padding:"8px",width:p||"auto",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.3)"}},children:(0,r.jsxs)(s.Z,{spacing:"8px",children:[(0,r.jsxs)(l.Z,{onClick:()=>f(y),sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"8px",cursor:"pointer",borderRadius:"4px",width:"100%","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[(0,r.jsx)(l.Z,{sx:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,r.jsx)(R.DNk,{sx:{color:"#FFFFFF",fontSize:"20px"}})}),(0,r.jsx)(d.Z,{sx:{color:"#B3B3B3",fontFamily:"Inter",fontWeight:600,fontSize:"16px",lineHeight:"22px",letterSpacing:"-2%",display:"flex",alignItems:"center"},children:"Create"})]}),(0,r.jsx)(E.Z,{sx:{borderColor:"#292929",margin:"4px 0"}}),(0,r.jsxs)(l.Z,{onClick:()=>f(()=>{C()}),sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"8px",cursor:"pointer",borderRadius:"4px",width:"100%","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[(0,r.jsx)(l.Z,{sx:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,r.jsx)(R.f91,{sx:{color:"#FFFFFF",fontSize:"20px"}})}),(0,r.jsx)(d.Z,{sx:{color:"#B3B3B3",fontFamily:"Inter",fontWeight:600,fontSize:"16px",lineHeight:"22px",letterSpacing:"-2%",display:"flex",alignItems:"center"},children:"Upload"})]}),["image","video"].includes(t)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.Z,{sx:{borderColor:"#292929",margin:"4px 0"}}),(0,r.jsxs)(l.Z,{onClick:()=>f(_),sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"8px",cursor:"pointer",borderRadius:"4px",width:"100%","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[(0,r.jsx)(l.Z,{sx:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,r.jsx)(R.xsU,{sx:{color:"#FFFFFF",fontSize:"20px"}})}),(0,r.jsx)(d.Z,{sx:{color:"#B3B3B3",fontFamily:"Inter",fontWeight:600,fontSize:"16px",lineHeight:"22px",letterSpacing:"-2%",display:"flex",alignItems:"center"},children:"History"})]})]})]})})]})};var z=i(59999);let P={image:"image/*",video:"video/*",audio:"audio/*"};function L(e){let{type:t="image",subtype:i,storyId:o,hideActions:a=!1}=e,[c,u]=(0,n.useState)(null),p=(0,n.useRef)(null),h=(0,n.useRef)(null),m=(0,A.fH)(e=>e.setNeedCreateShot),x=()=>{u(null)},g=e=>{null==e||e(),x()},v=()=>{h.current&&h.current.click()},y=()=>{g(v)},{uploadAndSaveFileWithUploadingAsset:C,isUploading:w}=(0,b.No)(o),j=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){try{await C(r,i)}catch(e){console.error("Upload failed:",e)}h.current&&(h.current.value="")}},{handleShowModal:F}=(0,M.$)({type:"image"===t?"image":"video",storyId:o,maxSelectionCount:10}),k=!!c;(0,n.useEffect)(()=>{let e=e=>{k&&p.current&&!p.current.contains(e.target)&&u(null)};if(k)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[k]);let _=(0,n.useMemo)(()=>"image"===t?(0,r.jsx)(l.Z,{component:"img",src:"https://cdn.openart.ai/story/editor/emptyImage.png",alt:"video-card-illustration",sx:{width:48,height:51,objectFit:"cover",borderRadius:"2px"}}):"video"===t?(0,r.jsx)(l.Z,{component:"img",src:"https://cdn.openart.ai/story/editor/emptyVideo.png",sx:{width:54,height:40,objectFit:"cover",borderRadius:"2px"},alt:"video-card-illustration"}):"voiceover"===i?(0,r.jsx)(l.Z,{component:"img",src:"https://cdn.openart.ai/story/editor/emptyVoiceover.png",sx:{width:64,height:64,objectFit:"cover",borderRadius:"2px"},alt:"video-card-illustration"}):"music"===i?(0,r.jsx)(l.Z,{component:"img",src:"https://cdn.openart.ai/story/editor/emptyMusic.png",sx:{width:64,height:64,objectFit:"cover",borderRadius:"2px"},alt:"video-card-illustration"}):null,[t,i]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:h,type:"file",accept:P[t],style:{display:"none"},onChange:j,disabled:w}),(0,r.jsxs)(s.Z,{alignItems:"center",justifyContent:"center",spacing:1.5,sx:{width:256,height:216,backgroundColor:"#1A1A1A",borderRadius:"2px",py:2.75,opacity:w?.6:1,pointerEvents:w?"none":"auto"},children:[_,(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#888888",fontSize:12,fontWeight:500,letterSpacing:"-0.02em",textAlign:"center",width:228},children:w?"Uploading...":`No ${t} asset yet.`}),a||"audio"===t?null:(0,r.jsxs)(s.Z,{direction:"row",spacing:1.625,alignItems:"center",children:[(0,r.jsx)(f.Z,{variant:"contained",onClick:()=>{m(!0,"all-shots")},disabled:w,sx:{backgroundColor:"#2E2E2E",color:"#fff",height:28,fontSize:12,minWidth:78,fontWeight:600,letterSpacing:"-0.02em",textTransform:"none",borderRadius:"4px","&:hover":{backgroundColor:"#3E3E3E"},"&:disabled":{backgroundColor:"#2E2E2E",opacity:.6}},startIcon:(0,r.jsx)(R.DNk,{size:12,color:"#2F66FF"}),children:"Create"}),(0,r.jsx)(f.Z,{variant:"contained",onClick:e=>{u(c?null:e.currentTarget)},ref:p,disabled:w,sx:{backgroundColor:"#2E2E2E",color:"#fff",height:28,fontSize:12,minWidth:78,fontWeight:600,letterSpacing:"-0.02em",textTransform:"none",borderRadius:"4px","&:hover":{backgroundColor:"#3E3E3E"},"&:disabled":{backgroundColor:"#2E2E2E",opacity:.6}},startIcon:(0,r.jsx)(l.Z,{sx:{width:12,height:12,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(z.Z,{sx:{color:"#2F66FF",fontSize:"12px"}})}),children:w?"Uploading...":"Add"}),(0,r.jsx)(Z.ZP,{open:k,anchorEl:c,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{"& .MuiPopover-paper":{backgroundColor:"#111111",border:"1px solid #2E2E2E",borderRadius:"8px",padding:"8px",minWidth:"90px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.3)"}},children:(0,r.jsxs)(s.Z,{spacing:"6px",children:[(0,r.jsxs)(l.Z,{onClick:y,sx:{display:"flex",alignItems:"center",gap:"8px",padding:0,cursor:"pointer","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"4px"}},children:[(0,r.jsx)(l.Z,{sx:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"flex-start"},children:(0,r.jsx)(R.f91,{sx:{color:"#FFFFFF",fontSize:"16px"}})}),(0,r.jsx)(d.Z,{sx:{color:"#B3B3B3",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"22px",letterSpacing:"-2%",height:"20px",display:"flex",alignItems:"center"},children:"Upload"})]}),(0,r.jsx)(E.Z,{sx:{borderColor:"#292929",margin:0}}),(0,r.jsxs)(l.Z,{onClick:()=>g(F),sx:{display:"flex",alignItems:"center",gap:"8px",padding:0,cursor:"pointer","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"4px"}},children:[(0,r.jsx)(l.Z,{sx:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(R.xsU,{sx:{color:"#FFFFFF",fontSize:"16px"}})}),(0,r.jsx)(d.Z,{sx:{color:"#B3B3B3",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"22px",letterSpacing:"-2%",height:"20px",display:"flex",alignItems:"center"},children:"History"})]})]})})]}),"audio"===t&&!a&&(0,r.jsx)(f.Z,{variant:"contained",onClick:y,ref:p,disabled:w,sx:{backgroundColor:"#2E2E2E",color:"#fff",height:28,fontSize:12,minWidth:78,fontWeight:600,letterSpacing:"-0.02em",textTransform:"none",borderRadius:"4px"},startIcon:(0,r.jsx)(l.Z,{sx:{width:12,height:12,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(z.Z,{sx:{color:"#2F66FF",fontSize:"12px"}})}),children:"Upload/drag"})]})]})}var W=i(51090);let B=(0,n.memo)(e=>{let{storyId:t,sx:i}=e,o=(0,W.oK)({type:"image"}),a=I.wK.use.selectMediaAsset(),l=I.wK.use.setPreviewingMediaAsset(),d=I.wK.use.togglePlay(),c=(0,n.useCallback)(e=>{a(e.id),l(e),d(!1)},[a,l,d]),u=(0,n.useCallback)((e,t)=>(0,r.jsx)(tf,{mediaAsset:e,onClick:()=>c(e)},e.id||t),[]);return(0,r.jsx)(s.Z,{sx:{p:1,gap:1,height:"100%",...i},children:0===o.length?(0,r.jsx)(L,{type:"image",storyId:t}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D,{type:"image",storyId:t}),(0,r.jsx)(tC,{items:o,layout:"grid",renderItem:u,emptyMessage:"No images found",sx:{flex:1}})]})})});B.displayName="AllMediaAssetsContentImage";let H=(0,n.memo)(e=>{let{type:t,storyId:i,onClick:o}=e,a="upload"===t,s=(0,n.useRef)(null),{uploadAndSaveFileWithUploadingAsset:c,isUploading:u}=(0,b.No)(i),p=()=>{s.current&&s.current.click()},h=async e=>{var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i){try{await c(i,"music")}catch(e){console.error("Upload failed:",e)}s.current&&(s.current.value="")}};return(0,r.jsxs)(l.Z,{onClick:()=>{a&&p(),null==o||o()},sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"4px",padding:"22px 10px",flex:"1 1 50%",height:"45px",backgroundColor:a?"#2E2E2E":"#0C2F75",border:"1px dashed #666666",borderRadius:"2.34375px",cursor:"pointer",opacity:u?.6:1,pointerEvents:u?"none":"auto","&:hover":{opacity:u?.6:.8}},children:[a?(0,r.jsx)("input",{ref:s,type:"file",accept:"audio/*",style:{display:"none"},onChange:h,disabled:u}):null,(0,r.jsx)(l.Z,{sx:{width:"21px",height:"21px",display:"flex",alignItems:"center",justifyContent:"center"},children:a?(0,r.jsx)(R.f91,{sx:{color:"#FFFFFF",fontSize:"16px"}}):(0,r.jsx)(R.qrW,{sx:{color:"#FFFFFF",fontSize:"16px"}})}),(0,r.jsx)(d.Z,{sx:{color:"#E3E3E3",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"15.6px",letterSpacing:"-2%",textAlign:"center"},children:a?u?"Uploading...":"Upload":"Browse â†’"})]})});H.displayName="ActionCard";let U=(0,n.memo)(e=>{let{label:t,active:i=!1,onClick:n}=e;return(0,r.jsxs)(l.Z,{onClick:n,sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3px",height:"20px",backgroundColor:i?"#9CBAFF20":"transparent",borderRadius:"4px",cursor:"pointer",border:i?"1px solid #9CBAFF":"1px solid transparent","&:hover":{opacity:.8,backgroundColor:i?"#9CBAFF30":"#9CBAFF10"}},children:[(0,r.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",gap:"4px"},children:(0,r.jsx)(d.Z,{sx:{color:i?"#9CBAFF":"#FFFFFF",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"20px",whiteSpace:"nowrap"},children:t})}),(0,r.jsx)(l.Z,{sx:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(R.X3R,{sx:{color:i?"#9CBAFF":"#808080",fontSize:"11px"}})})]})});U.displayName="FilterButton";var O=i(13868),$=i(25528),N=i(44754),G=i(70565),V=i(74608);let K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{disabledDrag:t=!1}=e,[i,r]=(0,n.useState)(!1),o=(0,n.useCallback)((e,n)=>{if(i||!n||t)return;let o={source:"media-asset",mediaAssetId:n.id,mediaAssetType:n.resource_type};r(!0),(0,V.tn)(e.dataTransfer,o),e.dataTransfer.effectAllowed="copy"},[i,t]);return{isDragging:i,handleDragStart:o,handleDragEnd:(0,n.useCallback)(()=>{r(!1)},[])}};var Y=i(62684);let q=e=>`${Math.floor(e/60)}:${Math.round(e%60).toString().padStart(2,"0")}`,X=(0,n.memo)(e=>{var t,i;let{musicAsset:o,isSelected:a=!1,isApplied:c=!1,isPlaying:u=!1,showAppliedBadge:p=!1,disabledDrag:h=!1,onPlay:m}=e,x=Y.wK.use.storyId(),{removeMediaAsset:g,addMediaAsset:f,isDeleting:v,isCreating:y}=(0,W.PJ)(x),b=(0,n.useCallback)(()=>{a?g(o.id):f(o)},[a,g,o,f]),C=o.title||"Unknown Track",w=(null===(t=o.configs)||void 0===t?void 0:t.genre)||"",j=(null===(i=o.metadata)||void 0===i?void 0:i.duration)?q(o.metadata.duration):"0:00",F=(0,n.useCallback)(()=>{c||g(o.id)},[c,o.id,g]),k=(0,n.useMemo)(()=>(0,r.jsx)(l.Z,{onClick:F,sx:{width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",cursor:c?"not-allowed":"pointer"},children:(0,r.jsx)(R.l3P,{sx:{color:"#444444",fontSize:"18px"}})}),[F]),_=(0,n.useMemo)(()=>{if(v||y)return(0,r.jsx)(N.Z,{size:18});if(p)return c?(0,r.jsx)(G.Z,{title:"You canâ€™t delete this asset as itâ€™s currently in used in the timeline.",placement:"bottom",children:k}):k;let e=(0,r.jsx)(R.mFL,{sx:{color:"#00B85F",fontSize:"18px"}});return a&&(e=(0,r.jsx)(O.Z,{sx:{color:"#1BEF61",fontSize:"18px"}})),(0,r.jsx)(l.Z,{onClick:b,sx:{width:"18px",height:"18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.1s ease","&:hover":{transform:"scale(1.1)"}},children:e})},[v,y,p,a,b,c,k]),{handleDragStart:S,handleDragEnd:I,isDragging:Z}=K({disabledDrag:h});return(0,r.jsxs)(l.Z,{draggable:!h,onDragStart:e=>S(e,o),onDragEnd:I,sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"11px",padding:"10px",backgroundColor:u?"#2A2A3A":"#2E2E2E",border:u?"1px solid #9CBAFF":"1px solid #444444",borderRadius:"5px",width:"100%",opacity:Z?.5:1,cursor:Z?"grabbing":"grab",transition:"all 0.2s ease"},children:[(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:"10px",children:[(0,r.jsxs)(l.Z,{onClick:m,sx:{position:"relative",width:"25px",height:"25px",cursor:"pointer",transition:"transform 0.1s ease","&:hover":{transform:"scale(1.1)"}},children:[(0,r.jsx)(l.Z,{sx:{width:"25px",height:"25px",backgroundColor:u?"#9CBAFF":"#101010",borderRadius:"50%",transition:"background-color 0.2s ease"}}),(0,r.jsx)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center"},children:u?(0,r.jsx)($.Z,{sx:{color:"#000000",fontSize:"14px"}}):(0,r.jsx)(R.Mld,{size:12,sx:{color:"#CCCCCC"}})})]}),(0,r.jsxs)(s.Z,{spacing:"3px",children:[(0,r.jsx)(d.Z,{sx:{color:u?"#9CBAFF":"#FFFFFF",fontFamily:"Inter",fontWeight:u?600:500,fontSize:"12px",lineHeight:"15.6px",letterSpacing:"-2%",transition:"color 0.2s ease"},children:C}),(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:"3px",children:[(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"3px",padding:"0 4px"},children:(0,r.jsxs)(d.Z,{sx:{color:u?"#B8C8FF":"#E1E6FF",fontFamily:"Inter",fontWeight:500,fontSize:"11px",lineHeight:"13.5px",transition:"color 0.2s ease"},children:[w?`${w} â€¢ `:""," ",j]})}),u?(0,r.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",gap:"2px"},children:[1,2,3].map(e=>(0,r.jsx)(l.Z,{sx:{width:"2px",height:"8px",backgroundColor:"#9CBAFF",borderRadius:"1px",animation:`audioWave${e} 1.2s ease-in-out infinite`,"@keyframes audioWave1":{"0%, 100%":{height:"3px"},"50%":{height:"8px"}},"@keyframes audioWave2":{"0%, 100%":{height:"5px"},"50%":{height:"10px"}},"@keyframes audioWave3":{"0%, 100%":{height:"4px"},"50%":{height:"7px"}}}},e))}):null,p&&c?(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"16px",backgroundColor:"rgba(27, 239, 97, 0.19)",borderRadius:"4px",padding:"2px 4px"},children:(0,r.jsx)(d.Z,{sx:{color:"rgba(255, 255, 255, 0.43)",fontFamily:"Inter",fontWeight:500,fontSize:"11px",lineHeight:"16px"},children:"In Use"})}):null]})]})]}),_]})});X.displayName="MusicItem";var J=i(74861),Q=i(47406),ee=i(62513);let et=(0,n.memo)(e=>{let{mediaAsset:t,layout:i="grid",sx:o={}}=e,a=(0,ee.B)(e=>e.removeUploadingAsset),s=(0,n.useCallback)(()=>{a(t.id)},[t.id,a]);if(!("status"in t))return null;let c="error"===t.status,u="uploading"===t.status||"processing"===t.status;return"grid"===i?(0,r.jsx)(l.Z,{sx:{backgroundColor:c?"#4A2C2C":"#2E2E2E",borderRadius:.4,overflow:"hidden",cursor:"default",width:"100%",height:"100%",aspectRatio:"1/1",border:c?"1px solid #FF6B6B":"1px solid transparent",transition:"all 0.2s ease",opacity:1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:1,"&:hover":{backgroundColor:c?"#5A3232":"#3A3A3A",border:c?"1px solid #FF8A8A":"1px solid #555"},...o},children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{sx:{fontSize:32,color:"#FF6B6B"}}),(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#FF6B6B",textAlign:"center",fontSize:"0.75rem",fontWeight:600},children:"Upload Failed"}),(0,r.jsx)(G.Z,{title:t.error||"Unknown error occurred",placement:"top",children:(0,r.jsx)(l.Z,{sx:{width:"100px",color:"#FF9999",textAlign:"center",fontSize:"0.65rem",lineHeight:1.2,overflow:"hidden",wordBreak:"break-all",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.error||"Unknown error occurred"})}),(0,r.jsx)(f.Z,{variant:"outlined",size:"small",onClick:s,sx:{fontSize:"0.65rem",padding:"2px 8px",minWidth:"auto",color:"#FF6B6B",borderColor:"#FF6B6B","&:hover":{backgroundColor:"rgba(255, 107, 107, 0.1)",borderColor:"#FF8A8A"}},children:"Got it"})]}):u?(0,r.jsx)(Q.p6,{text:"Uploading..."}):(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#888",textAlign:"center",fontSize:"0.75rem"},children:"Processing..."})}):(0,r.jsxs)(l.Z,{sx:{backgroundColor:c?"#4A2C2C":"#2E2E2E",borderRadius:.4,overflow:"hidden",cursor:"default",width:"100%",height:"56px",border:c?"1px solid #FF6B6B":"1px solid transparent",transition:"all 0.2s ease",opacity:1,position:"relative",display:"flex",flexDirection:"row",alignItems:"center",px:2,py:1,gap:2,"&:hover":{backgroundColor:c?"#5A3232":"#3A3A3A",border:c?"1px solid #FF8A8A":"1px solid #555"},...o},children:[(0,r.jsx)(l.Z,{sx:{width:40,height:40,borderRadius:.4,backgroundColor:c?"#FF6B6B":"#4A4A4A",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c?(0,r.jsx)(g.Z,{sx:{fontSize:20,color:"#FFFFFF"}}):(0,r.jsx)(x.Z,{sx:{fontSize:20,color:"#FFFFFF"}})}),(0,r.jsxs)(l.Z,{sx:{flex:1,display:"flex",flexDirection:"column",gap:.5,minWidth:0},children:[(0,r.jsx)(d.Z,{variant:"body2",sx:{color:c?"#FF6B6B":"#FFFFFF",fontWeight:500,fontSize:"0.85rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:"fileName"in t?t.fileName:t.title}),c?(0,r.jsx)(G.Z,{title:t.error||"Unknown error occurred",placement:"top",children:(0,r.jsx)(d.Z,{variant:"caption",sx:{color:"#FF9999",fontSize:"0.7rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.error||"Upload failed"})}):u?(0,r.jsx)(l.Z,{sx:{width:"100%"},children:(0,r.jsx)(J.Z,{variant:"indeterminate",sx:{height:3,borderRadius:1.5,backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{backgroundColor:"#6290FF"}}})}):(0,r.jsx)(d.Z,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem"},children:"Processing..."})]}),c?(0,r.jsx)(f.Z,{variant:"outlined",size:"small",onClick:s,sx:{fontSize:"0.7rem",padding:"4px 12px",minWidth:"auto",color:"#FF6B6B",borderColor:"#FF6B6B",flexShrink:0,"&:hover":{backgroundColor:"rgba(255, 107, 107, 0.1)",borderColor:"#FF8A8A"}},children:"Got it"}):null]})});et.displayName="MediaAssetItemUploading";let ei=()=>{let e=(0,n.useRef)(null),[t,i]=(0,n.useState)(null),[r,o]=(0,n.useState)(!1),a=async n=>{try{if(t===n.id&&e.current){r?(e.current.pause(),o(!1)):(await e.current.play(),o(!0));return}e.current&&(e.current.pause(),e.current=null);let a=new Audio(n.url);e.current=a,a.addEventListener("loadstart",()=>{}),a.addEventListener("canplay",()=>{}),a.addEventListener("play",()=>{i(n.id),o(!0)}),a.addEventListener("pause",()=>{o(!1)}),a.addEventListener("ended",()=>{i(null),o(!1),e.current=null}),a.addEventListener("error",t=>{console.error("Audio playback error:",t),i(null),o(!1),e.current=null}),await a.play()}catch(t){console.error("Failed to play audio:",t),i(null),o(!1),e.current=null}};return(0,n.useEffect)(()=>()=>{e.current&&(e.current.pause(),e.current=null)},[]),{handlePlayAudio:a,stopAudio:()=>{e.current&&(e.current.pause(),e.current=null),i(null),o(!1)},currentPlayingId:t,isPlaying:r}};var er=i(50448);let en=(0,n.memo)(e=>{let{storyId:t,onUpload:i,onBrowse:o}=e,a=(0,W.oK)({type:"audio",subtype:"music"}),{handlePlayAudio:l,currentPlayingId:d,isPlaying:c}=ei(),[u]=(0,er.hH)(),p=(0,n.useMemo)(()=>u.flatMap(e=>e.items.map(e=>e.mediaAssetId)),[u]);return(0,r.jsxs)(s.Z,{spacing:"12px",sx:{alignItems:"center",padding:"0px 0 12px",width:"100%",backgroundColor:"#1A1A1A",borderRadius:"12px"},children:[(0,r.jsxs)(s.Z,{direction:"row",spacing:"5px",sx:{width:"100%"},children:[(0,r.jsx)(H,{type:"upload",storyId:t,onClick:i}),(0,r.jsx)(H,{type:"browse",onClick:o})]}),0===a.length?(0,r.jsx)(L,{type:"audio",subtype:"music",storyId:t,hideActions:!0}):a.map(e=>"uploading"===e.status||"error"===e.status?(0,r.jsx)(et,{mediaAsset:e,layout:"list"},e.id):(0,r.jsx)(X,{musicAsset:e,isApplied:p.includes(e.id),showAppliedBadge:!0,isPlaying:d===e.id&&c,onPlay:()=>l(e)},e.id))]})});en.displayName="MusicHomeView";var eo=i(66462),ea=i(2656),es=i(68331),el=i(81090),ed=i(63311);let ec=e=>({id:e.id.toString(),title:e.name,url:e.url,resource_type:"audio",subtype:"music",source:"generated",user_id:"",is_deleted:!1,created_at:Date.now(),metadata:{duration:e.duration},configs:{genre:e.genre,mood:e.mood,tempo:e.tempo,has_lyrics:e.has_lyrics}}),eu=()=>{let e=new Set,t=new Set,i=new Set;return ed.WK.forEach(r=>{e.add(r.genre),i.add(r.tempo),r.mood.split(",").map(e=>e.trim()).forEach(e=>t.add(e))}),{genres:Array.from(e).sort(),moods:Array.from(t).sort(),tempos:Array.from(i).sort()}},ep=(0,n.memo)(e=>{let{searchQuery:t,onBack:i,onSearch:o,onGenreFilter:a,onMoodFilter:c,onTempoFilter:p}=e,[h,m]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),[f,v]=(0,n.useState)([]),{handlePlayAudio:y,currentPlayingId:b,isPlaying:C}=ei(),[w,j]=(0,n.useState)({genre:null,mood:null,tempo:null}),F=(0,n.useMemo)(()=>eu(),[]),k=(0,n.useMemo)(()=>{let e=ed.WK;if(t&&t.trim()){let i=t.toLowerCase().trim();e=e.filter(e=>e.name.toLowerCase().includes(i)||e.genre.toLowerCase().includes(i)||e.mood.toLowerCase().includes(i)||e.tempo.toLowerCase().includes(i))}return h.length>0&&(e=e.filter(e=>h.includes(e.genre))),x.length>0&&(e=e.filter(e=>{let t=new Set(e.mood.split(",").map(e=>e.trim()));return x.some(e=>t.has(e))})),f.length>0&&(e=e.filter(e=>f.includes(e.tempo))),e.map(ec)},[t,h,x,f]),_=(e,t)=>{j(i=>({...i,[e]:t.currentTarget}))},S=e=>{j(t=>({...t,[e]:null}))},I=(e,t)=>{switch(e){case"genre":m(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);break;case"mood":g(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);break;case"tempo":v(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])}},Z=(0,u.hs)("audio","music"),E=(0,n.useMemo)(()=>Z.map(e=>e.url),[Z]),A=e=>{let t=F[`${e}s`],i="genre"===e?h:"mood"===e?x:f;return(0,r.jsx)(eo.Z,{anchorEl:w[e],open:!!w[e],onClose:()=>S(e),PaperProps:{sx:{backgroundColor:"#2A2A2A",color:"#FFFFFF",maxHeight:300,width:200,"& .MuiMenuItem-root":{fontSize:"14px",fontFamily:"Inter","&:hover":{backgroundColor:"#3A3A3A"}}}},children:t.map(t=>(0,r.jsxs)(ea.Z,{onClick:()=>I(e,t),sx:{padding:"6px 12px"},children:[(0,r.jsx)(es.Z,{checked:i.includes(t),sx:{color:"#9CBAFF","&.Mui-checked":{color:"#9CBAFF"},"& .MuiSvgIcon-root":{fontSize:18}}}),(0,r.jsx)(el.Z,{primary:t,sx:{"& .MuiListItemText-primary":{fontSize:"14px",fontFamily:"Inter"}}})]},t))})};return(0,r.jsxs)(s.Z,{spacing:"12px",sx:{alignItems:"center",padding:"0px 8px 12px",width:"100%",backgroundColor:"#1A1A1A",borderRadius:"12px"},children:[(0,r.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",spacing:"0",sx:{width:"100%"},children:[(0,r.jsx)(s.Z,{direction:"row",justifyContent:"space-between",sx:{width:"100%"},children:(0,r.jsx)(l.Z,{onClick:i,sx:{display:"flex",alignItems:"center",cursor:"pointer"},children:(0,r.jsx)(d.Z,{sx:{color:"#9CBAFF",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"16px",letterSpacing:"-2%"},children:"â† Back"})})}),(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:"0px",children:[(0,r.jsx)(U,{label:`Genre${h.length>0?` (${h.length})`:""}`,onClick:e=>_("genre",e),active:!!w.genre||h.length>0}),(0,r.jsx)(U,{label:`Mood${x.length>0?` (${x.length})`:""}`,onClick:e=>_("mood",e),active:!!w.mood||x.length>0}),(0,r.jsx)(U,{label:`Tempo${f.length>0?` (${f.length})`:""}`,onClick:e=>_("tempo",e),active:!!w.tempo||f.length>0})]}),A("genre"),A("mood"),A("tempo")]}),(0,r.jsx)(s.Z,{spacing:"12px",sx:{width:"100%",alignItems:"center"},children:k.map(e=>(0,r.jsx)(X,{musicAsset:e,isSelected:E.includes(e.url),isPlaying:b===e.id&&C,disabledDrag:!0,onPlay:()=>y(e)},e.id))}),0===k.length&&(0,r.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100px"},children:(0,r.jsx)(d.Z,{sx:{color:"#666666",fontFamily:"Inter",fontWeight:400,fontSize:"14px"},children:"No music found"})})]})});ep.displayName="MusicSearchView";var eh=i(26873);let em=(0,n.memo)(e=>{let{placeholder:t="Search 200+ songs in library",value:i="",variant:o="home",onSearch:a,onFocus:s,onBlur:d}=e,[c,u]=(0,n.useState)(i),p=(0,n.useCallback)(e=>{let t=e.target.value;u(t),null==a||a(t)},[a]),h=(0,n.useCallback)(e=>{"Enter"===e.key&&(null==a||a(c))},[c,a]),m="search"===o;return(0,r.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",gap:"7px"},children:(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"100px",padding:"6px 11px 6px 8px",width:"100%",height:"28px",border:m?"1px solid #2E2E2E":"1px solid #444444",borderRadius:"5px","&:focus-within":{borderColor:m?"#444444":"#666666"}},children:(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[(0,r.jsx)(l.Z,{sx:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,r.jsx)(R.qrW,{sx:{color:"#FFFFFF",fontSize:"13px"}})}),(0,r.jsx)(eh.ZP,{value:c,onChange:p,onKeyPress:h,onFocus:s,onBlur:d,placeholder:t,sx:{flex:1,color:m?"#818181":"#FFFFFF",fontFamily:"Inter",fontWeight:400,fontSize:"12px",lineHeight:"16px",letterSpacing:"-2%","& .MuiInputBase-input":{padding:0,color:"inherit","&::placeholder":{color:m?"#818181":"rgba(255, 255, 255, 0.45)",opacity:1}}}})]})})})});em.displayName="SearchBar";let ex=(0,n.memo)(e=>{let{storyId:t,sx:i}=e,[o,a]=(0,n.useState)("home"),[l,d]=(0,n.useState)(""),c=(0,n.useCallback)(()=>{},[]),u=(0,n.useCallback)(()=>{a("search")},[]),p=(0,n.useCallback)(()=>{"home"===o&&a("search")},[o]),h=(0,n.useCallback)(()=>{a("home"),d("")},[]),m=(0,n.useCallback)(e=>{d(e),e&&"home"===o&&a("search")},[o]),x=(0,n.useCallback)(()=>{},[]),g=(0,n.useCallback)(()=>{},[]),f=(0,n.useCallback)(()=>{},[]);return(0,r.jsxs)(s.Z,{sx:{p:1,gap:1.5,height:"100%",...i},children:[(0,r.jsx)(em,{value:l,variant:"home",placeholder:"Search 200+ songs in library",onSearch:m,onFocus:p}),"home"===o?(0,r.jsx)(en,{storyId:t,onUpload:c,onBrowse:u}):(0,r.jsx)(ep,{searchQuery:l,onBack:h,onSearch:m,onGenreFilter:x,onMoodFilter:g,onTempoFilter:f})]})});ex.displayName="AllMediaAssetsContentMusic";var eg=i(72236),ef=i(30754);let ev=(0,n.memo)(e=>{let{storyId:t,sx:i}=e,o=(0,W.oK)({type:"video"}),a=u.wK.use.togglePlay(),l=u.wK.use.selectMediaAsset(),d=u.wK.use.selectedMediaAssetId(),c=u.wK.use.setPreviewingMediaAsset(),{removeMediaAsset:p}=(0,W.PJ)(t),h=(0,n.useCallback)(e=>{let t=eg.D.getState();if((0,u.CN)(t,e.id)){(0,ef.VW)("This video is in use and cannot be deleted.",{key:`video-in-use-${e.id}`});return}p(e.id)},[p]),m=(0,n.useCallback)(e=>{l(e.id),c(e),a(!1)},[l,c,a]),x=(0,n.useCallback)((e,t)=>(0,r.jsx)(tv,{isSelected:d===e.id,mediaAsset:e,onClick:()=>m(e),onRemove:h},e.id||t),[m,d,h]);return(0,r.jsx)(s.Z,{sx:{p:1,gap:1,height:"100%",...i},children:0===o.length?(0,r.jsx)(L,{type:"video",storyId:t}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D,{type:"video",storyId:t}),(0,r.jsx)(tC,{items:o,layout:"grid",renderItem:x,emptyMessage:"No videos found",sx:{flex:1}})]})})});ev.displayName="AllMediaAssetsContentVideo";let ey=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,eb=(0,n.memo)(e=>{var t;let{voiceoverAsset:i,isPlaying:o,onPlay:a,stopAudio:c}=e,u=i.title||`Voiceover ${i.id.slice(0,8)}`,p=(null===(t=i.metadata)||void 0===t?void 0:t.duration)?ey(i.metadata.duration):"0:00",[h]=(0,er.Eh)(),m=(0,n.useRef)(null),[x,g]=(0,n.useState)(!1),f=(0,n.useMemo)(()=>h.some(e=>e.items.some(e=>e.mediaAssetId===i.id)),[h,i.id]);(0,n.useEffect)(()=>{let e=m.current;e&&g(e.scrollWidth>e.clientWidth)},[u]);let{isDragging:v,handleDragStart:y,handleDragEnd:b}=K(),C=I.wK.use.storyId(),{removeMediaAsset:w,isDeleting:j,isCreating:F}=(0,W.PJ)(C),k=(0,n.useCallback)(()=>{f||(o&&c(),w(i.id))},[f,o,c,i.id,w]),_=(0,n.useMemo)(()=>(0,r.jsx)(l.Z,{onClick:k,sx:{width:"18px",height:"18px",cursor:f?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(R.l3P,{sx:{color:"#444444",fontSize:"18px"}})}),[k]),S=(0,n.useMemo)(()=>j||F?(0,r.jsx)(N.Z,{size:18}):f?(0,r.jsx)(G.Z,{title:"You can't delete this asset as it's currently in used in the timeline.",placement:"bottom",children:_}):_,[j,F,f,_]),Z=(0,r.jsx)(d.Z,{ref:m,sx:{fontFamily:"Inter",fontWeight:o?600:500,fontSize:"12px",lineHeight:1.3,letterSpacing:"-0.02em",color:o?"#9CBAFF":"#FFFFFF",textAlign:"center",transition:"color 0.2s ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:"1 1 auto"},children:u});return(0,r.jsxs)(l.Z,{component:"div",draggable:!0,onDragStart:e=>y(e,i),onDragEnd:b,sx:{display:"flex",alignItems:"center",alignSelf:"stretch",gap:"11px",padding:"10px",backgroundColor:o?"#2A2A3A":"#2E2E2E",border:o?"1px solid #9CBAFF":"1px solid #444444",borderRadius:"5px",cursor:v?"grabbing":"grab",transition:"all 0.2s ease",opacity:v?.5:1,"&:hover":{backgroundColor:o?"#2A2A3A":"#353535"}},children:[(0,r.jsxs)(l.Z,{onClick:a,sx:{position:"relative",width:"25px",height:"25px",cursor:"pointer",transition:"transform 0.1s ease","&:hover":{transform:"scale(1.1)"}},children:[(0,r.jsx)(l.Z,{sx:{width:"25px",height:"25px",backgroundColor:o?"#9CBAFF":"#101010",borderRadius:"50%",transition:"background-color 0.2s ease"}}),(0,r.jsx)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center"},children:o?(0,r.jsx)($.Z,{sx:{color:"#000000",fontSize:"14px"}}):(0,r.jsx)(R.Mld,{size:12,sx:{color:"#CCCCCC"}})})]}),(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",gap:"8px",sx:{flex:"1 1 auto",overflow:"hidden"},children:[x?(0,r.jsx)(G.Z,{title:u,placement:"top",children:Z}):Z,(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",gap:"3px",children:[(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1.6875px",height:"18px",borderRadius:"2.8125px",padding:"0 4px"},children:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:"11px",lineHeight:"13.5px",color:o?"#B8C8FF":"#888888",transition:"color 0.2s ease"},children:p})}),o?(0,r.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",gap:"2px"},children:[1,2,3].map(e=>(0,r.jsx)(l.Z,{sx:{width:"2px",height:"8px",backgroundColor:"#9CBAFF",borderRadius:"1px",animation:`audioWave${e} 1.2s ease-in-out infinite`,"@keyframes audioWave1":{"0%, 100%":{height:"3px"},"50%":{height:"8px"}},"@keyframes audioWave2":{"0%, 100%":{height:"5px"},"50%":{height:"10px"}},"@keyframes audioWave3":{"0%, 100%":{height:"4px"},"50%":{height:"7px"}}}},e))}):null,f?(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",padding:"2px 4px",height:"16px",backgroundColor:"rgba(27, 239, 97, 0.19)",borderRadius:"4px"},children:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:"11px",lineHeight:"16px",textAlign:"center",color:"rgba(255, 255, 255, 0.43)"},children:"In Use"})}):null]})]}),S]})});eb.displayName="VoiceoverItem";let eC=(0,n.memo)(e=>{let{storyId:t,sx:i}=e,o=(0,W.oK)({type:"audio",subtype:"voiceover"}),{handlePlayAudio:a,stopAudio:l,currentPlayingId:d,isPlaying:c}=ei(),u=(0,n.useCallback)((e,t)=>"uploading"===e.status||"error"===e.status?(0,r.jsx)(et,{mediaAsset:e,layout:"list",sx:{flex:"0 0 auto"}},e.id):(0,r.jsx)(eb,{voiceoverAsset:e,isPlaying:d===e.id&&c,onPlay:()=>a(e),stopAudio:l},e.id||t),[d,c,a,l]);return(0,r.jsx)(s.Z,{sx:{p:1,gap:"8px",height:"100%",...i},children:0===o.length?(0,r.jsx)(L,{type:"audio",subtype:"voiceover",storyId:t}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D,{type:"audio",subtype:"voiceover",storyId:t,sx:{flex:"0 0 auto"}}),o.map(u)]})})});eC.displayName="AllMediaAssetsContentVoiceover";var ew=i(10652),ej=i(74076),eF=i(66750),ek=i(22532),e_=i(25822),eS=i(46406),eI=i(75962),eZ=i(23638);let eE=[{value:"video",label:"Videos",icon:(0,r.jsx)(ew.Z,{}),activeIcon:(0,r.jsx)(ej.Z,{})},{value:"image",label:"Images",icon:(0,r.jsx)(eF.Z,{}),activeIcon:(0,r.jsx)(m.Z,{})},{value:"music",label:"Music",icon:(0,r.jsx)(R.CG1,{}),activeIcon:(0,r.jsx)(R.kuK,{})},{value:"voiceover",label:"Voiceover",icon:(0,r.jsx)(R.GSb,{}),activeIcon:(0,r.jsx)(R.qbn,{})},{value:"caption",label:"Captions",icon:(0,r.jsx)(R.ePD,{}),activeIcon:(0,r.jsx)(R.f5N,{})}],eA=(0,eS.ZP)(ek.Z)(e=>{let{theme:t}=e;return{position:"relative",backgroundColor:"#2E2E2E",borderRadius:"10px 10px 0 0",minHeight:45,"& .MuiTabs-flexContainer":{justifyContent:"space-between",alignItems:"center",height:45},"& .MuiTabs-indicator":{backgroundColor:"#6290FF",height:3,borderRadius:"10px 10px 0 0",bottom:0,transition:t.transitions.create(["left","width"],{duration:t.transitions.duration.standard,easing:t.transitions.easing.easeInOut})},"& .MuiTab-root":{minWidth:"0 !important",minHeight:"100% !important",margin:"0 !important",flexGrow:3,flexShrink:1,padding:"0 !important",color:"#AAAAAA",transition:t.transitions.create(["color"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeInOut}),"&:hover":{color:"#E0E0E0"},"&.Mui-selected":{color:"#FFFFFF",flex:7},"& .MuiSvgIcon-root":{fontSize:18,transition:t.transitions.create(["color"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeInOut})},"&:hover .MuiSvgIcon-root":{color:"#E0E0E0"},"&.Mui-selected .MuiTouchRipple-root":{borderRadius:0}}}}),eM={hidden:{opacity:0,width:0,marginLeft:0},visible:{opacity:1,width:"auto",marginLeft:4,transition:{duration:.3,ease:[.43,.13,.23,.96]}},exit:{opacity:0,width:0,marginLeft:0,transition:{duration:.2,ease:[.43,.13,.23,.96]}}},eR=(0,n.memo)(e=>{let{activeTab:t,onTabChange:i,sx:o}=e,[a,s]=(0,n.useState)(null),d=e=>{s(e)},c=()=>{s(null)},u=e=>{let i=t===e.value,n=a===e.value,o=i||n;return(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,r.jsx)(l.Z,{component:eI.m.div,animate:{scale:o?1.05:1},transition:{duration:.2,ease:[.43,.13,.23,.96]},sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:o?e.activeIcon:e.icon}),(0,r.jsx)(eZ.M,{mode:"wait",children:i?(0,r.jsx)(l.Z,{component:eI.m.div,variants:eM,initial:"hidden",animate:"visible",exit:"exit",sx:{fontSize:14,fontWeight:700,color:"#FFFFFF",whiteSpace:"nowrap",overflow:"hidden"},children:e.label},`label-${e.value}`):null})]})};return(0,r.jsx)(l.Z,{sx:{width:y.Bx,...o},children:(0,r.jsx)(eA,{value:t,onChange:(e,t)=>{i(t)},"aria-label":"media assets tabs",children:eE.map(e=>(0,r.jsx)(e_.Z,{value:e.value,title:e.label,onMouseEnter:()=>d(e.value),onMouseLeave:c,label:u(e),sx:{flex:1,maxWidth:"none"}},e.value))})})});eR.displayName="AllMediaAssetsHeader";let eT=(0,n.memo)(e=>{let{storyId:t,sx:i}=e,{activeTab:o,setActiveTab:a}=(0,u.WL)(),d=(0,n.useCallback)(e=>{a(e)},[a]);return(0,r.jsx)(im,{sx:i,title:(0,r.jsx)(eR,{activeTab:o,onTabChange:d}),children:(0,r.jsx)(s.Z,{sx:{height:"100%",position:"relative"},children:(0,r.jsxs)(l.Z,{sx:{flex:1,position:"relative",overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"#1A1A1A"},"&::-webkit-scrollbar-thumb":{background:"#3A3A3A",borderRadius:"3px","&:hover":{background:"#4A4A4A"}}},children:[(()=>{switch(o){case"video":default:return(0,r.jsx)(ev,{storyId:t});case"image":return(0,r.jsx)(B,{storyId:t});case"music":return(0,r.jsx)(ex,{storyId:t});case"voiceover":return(0,r.jsx)(eC,{storyId:t});case"caption":return(0,r.jsx)(p,{})}})(),(0,r.jsx)(S,{activeTab:o,changeTab:d,storyId:t})]})})})});eT.displayName="AllMediaAssetsPane";let eD=(0,n.memo)(e=>{let{sx:t,children:i,textStyle:n}=e;return(0,r.jsx)(l.Z,{sx:{position:"absolute",display:"flex",alignItems:"center",padding:"0px 4px",height:"18px",backgroundColor:"rgba(13, 15, 31, 0.5)",backdropFilter:"blur(4px)",borderRadius:"3px",...t},children:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:"11px",lineHeight:"13.5px",color:"#E1E6FF",...n},children:i})})});eD.displayName="BlurTile";let ez=(0,n.memo)(e=>{let{sx:t,playerRef:i}=e,o=u.wK.use.previewingMediaAsset(),a=u.wK.use.globalConfig(),d=u.wK.use.tracks(),c=u.wK.use.storyId(),p=u.wK.use.mediaAssets(),h=(0,n.useMemo)(()=>({id:c,video_editor_timeline:{tracks:d,mediaAssets:p,globalConfig:a}}),[d,p,a,c]),m=(0,n.useMemo)(()=>o&&("video"===o.resource_type||"image"===o.resource_type),[o]),x=(0,n.useMemo)(()=>0===(null==d?void 0:d.filter(e=>(null==e?void 0:e.items.length)>0)).length||!d,[d]);return(0,r.jsxs)(s.Z,{sx:{flexDirection:"column",borderRadius:1.5,overflow:"hidden",position:"relative",height:"100%",width:"100%",backgroundColor:x?"#101010":"#4C4C4C33",...t},children:[(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:m?1:0},children:(0,r.jsx)(ty,{mediaAsset:o})}),(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:m?0:1},children:(0,r.jsx)(tO,{playerRef:i,storyData:h})})]})});ez.displayName="CenterStage";var eP=i(54425);(0,n.memo)(e=>{let{sx:t,prompt:i,type:n,onClickToJump:o}=e;return(0,r.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{backgroundColor:"#2E2E2E",gap:"10px",padding:"10px",width:"100%",height:eP.ep,...t},children:[(0,r.jsx)(l.Z,{sx:{backgroundColor:"#1A1A1A",borderRadius:"5.5px",padding:"8px 10.5px",flex:1,display:"flex",alignItems:"center",height:"fit-content"},children:(0,r.jsx)(d.Z,{sx:{color:"#888888",fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:"1.5em",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:i})}),(0,r.jsxs)(f.Z,{onClick:o,sx:{backgroundColor:"#101010",borderRadius:"5px",height:"30px",display:"flex",px:1.5,py:.5,gap:1,alignItems:"center",justifyContent:"center","&:hover":{backgroundColor:"#202020"},"&:active":{backgroundColor:"#0A0A0A"}},children:[(0,r.jsxs)(d.Z,{sx:{color:"#FFFFFF",fontFamily:"Inter",fontWeight:600,fontSize:"14px",lineHeight:"1.21em",textTransform:"none"},children:["Retry ","video"===n?"Video":"Image"]}),(0,r.jsxs)(l.Z,{sx:{position:"relative",width:26,height:20,display:"flex",alignItems:"center"},children:[(0,r.jsx)(R.GhS,{}),(0,r.jsx)(d.Z,{sx:{color:"#FFFFFF",fontFamily:"Inter",fontWeight:600,fontSize:"11px",lineHeight:"1.8em",letterSpacing:"-2%",width:14,height:20,display:"flex",alignItems:"center"},children:"20"})]})]})]})}).displayName="CenterStageFooter",i(30354);var eL=i(26056),eW=i(41943),eB=i(81763),eH=i(68731),eU=(i(40174),i(21461)),eO=i(49842),e$=i(65089);let eN=(0,n.memo)(e=>{let{icon:t,title:i,value:o,min:a,max:c,step:u,formatDisplay:p,formatInput:h,parseInput:m,validateInput:x,onChange:g}=e,[f,v]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),C=(0,n.useCallback)(e=>{g(Array.isArray(e)?e[0]:e)},[g]),w=(0,n.useCallback)(()=>{b(!0),v(h(o))},[o,h]),j=(0,n.useCallback)(e=>{v(e.target.value)},[]),F=(0,n.useCallback)(()=>{let e=m(f);!Number.isNaN(e)&&x(e)&&g(e),b(!1),v("")},[f,m,x,g]),k=(0,n.useCallback)(e=>{"Enter"===e.key?F():"Escape"===e.key&&(b(!1),v(""))},[F]),_=(0,n.useCallback)(()=>{F()},[F]);return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[(0,r.jsx)(t,{sx:{fontSize:18,color:"#ffffff"}}),(0,r.jsx)(d.Z,{variant:"body2",sx:{fontSize:12,fontWeight:700,color:"#ffffff"},children:i})]}),(0,r.jsxs)(s.Z,{sx:{position:"relative",alignItems:"center",flexDirection:"row",gap:1,mb:1},children:[(0,r.jsx)(e$.ZP,{value:o,onChange:(e,t)=>C(t),min:a,max:c,step:u,sx:{color:"#6643FF",height:3,flex:1,"& .MuiSlider-track":{border:"none",background:"linear-gradient(90deg, #6643FF 0%, #0929F7 47.18%, #0954F7 100%)"},"& .MuiSlider-rail":{color:"#494949",height:3},"& .MuiSlider-thumb":{height:12,width:12,backgroundColor:"#ffffff",border:"2px solid #0929F7",filter:"drop-shadow(0px 1px 1.6px rgba(0, 0, 0, 1))","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&::before":{display:"none"}},"& .MuiSlider-markLabel":{display:"none"}}}),y?(0,r.jsx)(eU.Z,{value:f,onChange:j,onKeyDown:k,onBlur:_,size:"small",type:"number",inputProps:{min:h(a),max:h(c),step:h(u),style:{textAlign:"center"}},sx:{width:60,"& .MuiOutlinedInput-root":{bgcolor:"#454545",borderRadius:.5,height:24,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"1px solid #6643FF"}},"& .MuiOutlinedInput-input":{fontSize:12,color:"#ffffff",letterSpacing:"-0.24px",fontFamily:"Inter, sans-serif",fontWeight:400,padding:"4px 8px",textAlign:"center"}}}):(0,r.jsx)(l.Z,{onClick:w,sx:{bgcolor:"#454545",borderRadius:.5,px:1,py:.5,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",minWidth:60,"&:hover":{bgcolor:"#505050"}},children:(0,r.jsx)(d.Z,{variant:"body2",sx:{fontSize:12,color:"#ffffff",letterSpacing:"-0.24px",lineHeight:"12px",fontFamily:"Inter, sans-serif",fontWeight:400,whiteSpace:"nowrap"},children:p(o)})})]})]})});eN.displayName="EditPropertySliderInput";let eG=(0,n.memo)(e=>{let{item:t}=e,i=(0,Y.D)(e=>e.updateItemInTrack),o=(0,Y.D)(e=>e.updateItemSpeed),a=(0,Y.D)(e=>e.tracks),s=(0,Y.D)(e=>e.mediaAssets),d=(0,Y.D)(e=>e.globalConfig),{operations:c}=(0,eO.ZY)(),u=a.find(e=>e.items.some(e=>e.id===t.id)),p=((0,n.useMemo)(()=>s.find(e=>e.id===t.mediaAssetId),[s,t.mediaAssetId]),t.durationInFrames/y.UG/2),h=(0,n.useMemo)(()=>({startFrame:t.startTimeInFrames,endFrame:t.startTimeInFrames+t.durationInFrames}),[t.startTimeInFrames,t.durationInFrames]),m=((0,n.useMemo)(()=>({startTime:(0,y.DG)(h.startFrame,d.fps),endTime:(0,y.DG)(h.endFrame,d.fps)}),[h,d.fps]),(0,n.useCallback)(e=>{if(!e)return 0;let t=e.find(e=>"fade-in"===e.type);return t?t.durationInFrames/y.UG:0},[])),x=(0,n.useCallback)(e=>{if(!e)return 0;let t=e.find(e=>"fade-out"===e.type);return t?t.durationInFrames/y.UG:0},[]),g=(0,n.useCallback)(e=>{u&&c.batchOperation("Update audio volume",()=>{i(u.id,{id:t.id,volume:e})})},[t.id,c,u,i]),f=(0,n.useCallback)(e=>{c.batchOperation("Update audio speed",()=>{o(t.id,e)})},[t.id,c,o]),v=(0,n.useCallback)(e=>{if(!u)return;let r=e*y.UG,n=(t.effects||[]).filter(e=>"fade-in"!==e.type),o=r>0?[...n,{type:"fade-in",durationInFrames:r}]:n;c.batchOperation("Update audio fade-in",()=>{i(u.id,{id:t.id,effects:o})})},[u,t.effects,t.id,c,i]),b=(0,n.useCallback)(e=>{if(!u)return;let r=e*y.UG,n=(t.effects||[]).filter(e=>"fade-out"!==e.type),o=r>0?[...n,{type:"fade-out",durationInFrames:r}]:n;c.batchOperation("Update audio fade-out",()=>{i(u.id,{id:t.id,effects:o})})},[u,t.effects,t.id,c,i]);return(0,n.useCallback)(e=>{u&&c.batchOperation("Update Audio Start Time",()=>{i(u.id,{id:t.id,startTimeInFrames:e})})},[t.id,c,u,i]),(0,n.useCallback)(e=>{u&&c.batchOperation("Update Audio Duration",()=>{i(u.id,{id:t.id,durationInFrames:e})})},[t.id,c,u,i]),(0,n.useCallback)(e=>{u&&c.batchOperation("Update Audio Source Trim Start",()=>{i(u.id,{id:t.id,sourceTrimStartFrames:e})})},[t.id,c,u,i]),(0,n.useCallback)(e=>{u&&c.batchOperation("Update Audio Source Trim End",()=>{i(u.id,{id:t.id,sourceTrimEndFrames:e})})},[t.id,c,u,i]),(0,r.jsx)(l.Z,{sx:{overflowY:"auto",bgcolor:"#1a1a1a"},children:(0,r.jsxs)(l.Z,{sx:{p:1.5},children:[(0,r.jsx)(eN,{icon:eH.Z,title:"Audio Volume",value:t.volume??1,min:0,max:1,step:.05,formatDisplay:e=>`${Math.round(100*e)}%`,formatInput:e=>(100*e).toString(),parseInput:e=>Number.parseFloat(e)/100,validateInput:e=>e>=0&&e<=1,onChange:g}),(0,r.jsx)(l.Z,{sx:{mt:2.5},children:(0,r.jsx)(eN,{icon:eL.Z,title:"Audio Speed",value:t.speed??1,min:.5,max:2,step:.25,formatDisplay:e=>`${e.toFixed(2)}x`,formatInput:e=>e.toString(),parseInput:e=>Number.parseFloat(e),validateInput:e=>e>=.5&&e<=2,onChange:f})}),(0,r.jsx)(l.Z,{sx:{mt:2.5},children:(0,r.jsx)(eN,{icon:eB.Z,title:"Fade In",value:m(t.effects),min:0,max:p,step:.05,formatDisplay:e=>`${e.toFixed(2)}s`,formatInput:e=>e.toString(),parseInput:e=>Number.parseFloat(e),validateInput:e=>e>=0&&e<=p,onChange:v})}),(0,r.jsx)(l.Z,{sx:{mt:2.5},children:(0,r.jsx)(eN,{icon:eW.Z,title:"Fade Out",value:x(t.effects),min:0,max:p,step:.05,formatDisplay:e=>`${e.toFixed(2)}s`,formatInput:e=>e.toString(),parseInput:e=>Number.parseFloat(e),validateInput:e=>e>=0&&e<=p,onChange:b})}),null]})})});eG.displayName="EditPropertyForAudio";var eV=i(47195);let eK=(0,n.memo)(e=>{let{item:t}=e,i=(0,Y.D)(e=>e.updateItemInTrack),o=(0,Y.D)(e=>e.tracks),a=(0,Y.D)(e=>e.mediaAssets),s=(0,Y.D)(e=>e.globalConfig),{operations:d}=(0,eO.ZY)(),c=o.find(e=>e.items.some(e=>e.id===t.id)),u=((0,n.useMemo)(()=>a.find(e=>e.id===t.mediaAssetId),[a,t.mediaAssetId]),(0,n.useMemo)(()=>({startFrame:t.startTimeInFrames,endFrame:t.startTimeInFrames+t.durationInFrames}),[t.startTimeInFrames,t.durationInFrames])),p=((0,n.useMemo)(()=>({startTime:(0,y.DG)(u.startFrame,s.fps),endTime:(0,y.DG)(u.endFrame,s.fps)}),[u,s.fps]),(0,n.useCallback)(e=>{if(!c)return;let r=e*y.UG;d.batchOperation("Update Image Duration",()=>{i(c.id,{id:t.id,durationInFrames:r})})},[t.id,d,c,i])),h=((0,n.useCallback)(e=>{c&&d.batchOperation("Update Image Start Time",()=>{i(c.id,{id:t.id,startTimeInFrames:e})})},[t.id,d,c,i]),(0,n.useCallback)(e=>{c&&d.batchOperation("Update Image Duration (Frames)",()=>{i(c.id,{id:t.id,durationInFrames:e})})},[t.id,d,c,i]),(0,n.useMemo)(()=>t.durationInFrames/y.UG,[t.durationInFrames]));return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(eN,{icon:eV.Z,title:"Display Duration",value:h,min:.1,max:10,step:.1,formatDisplay:e=>`${e.toFixed(1)}s`,formatInput:e=>e.toFixed(1),parseInput:e=>Number.parseFloat(e),validateInput:e=>e>=.1&&e<=10,onChange:p}),null]})});eK.displayName="EditPropertyForImage";var eY=i(70811),eq=i(32964),eX=i(52721);let eJ=(0,eS.ZP)(f.Z)(e=>{let{highlighted:t}=e;return{padding:"5px 18px",color:"#fff",backgroundColor:t?"#013FFE":"#2E2E2E",borderRadius:"4px",fontFamily:"Inter",fontSize:"12px",fontWeight:600,lineHeight:"normal","&:hover":{backgroundColor:t?"#0135E5":"#3E3E3E"}}});var eQ=i(81969),e0=i(28141),e1=i(16589),e2=i(13566),e5=i(42070),e6=i(90902),e4=i(66686);let e3=()=>{let e=(0,Y.D)(Y.df),t=(0,n.useMemo)(()=>e?e.shotId:null,[e]),i=(0,e1.jU)(e=>e.story),r=(0,n.useMemo)(()=>{var e;return t?null==i?void 0:null===(e=i.storyboard)||void 0===e?void 0:e.shots_map[t]:null},[t,i]);return{selectedShotId:t,selectedShot:r,resourceType:null==e?void 0:e.type}};var e8=i(23252);let e7=e=>{let{type:t}=e,{selectedShotId:i,selectedShot:o}=e3(),a=Y.wK.use.togglePlay(),s=(0,e1.jU)(e=>{var t;return null===(t=e.story)||void 0===t?void 0:t.id}),d=(0,A.fH)(e=>e.addExistingMediaResources),c=(0,A.fH)(e=>e.updateGenerationStatus),u=(0,A.fH)(e=>e.completeGeneration),p=(0,e1.jU)(e=>e.syncData),h=(0,A.hd)(i,"image"===t?"image":"video"),m=(0,Y.D)(e=>e.addMediaAsset),x=(0,A.FT)(i,t),{data:g,isLoading:f}=(0,e0.ZP)(s,i,{enabled:!0});(0,n.useEffect)(()=>{g&&d(i,(null==g?void 0:g.images)||[],(null==g?void 0:g.videos)||[],{init:!0,activeImageId:(null==o?void 0:o.active_image_id)||"",activeVideoId:(null==o?void 0:o.active_video_id)||""})},[g,i,d]);let v=(0,n.useMemo)(()=>x.filter(e=>"generating"===e.generationStatus||"pending"===e.generationStatus).map(e=>e.workflowId),[x]);(0,e8.i)(v,v.length>0,(e,t)=>{t.results.forEach(t=>{c(i,e,t),"completed"===t.status&&(u(i,e,t),m(t))})});let y=(0,Y.D)(e=>e.setPreviewingMediaAsset),b=(0,Y.D)(e=>e.mediaAssets),C=(0,A.fH)(e=>e.setIsCurrentImageRetried),{operations:w}=(0,eO.ZY)(),j=(0,n.useCallback)(e=>{["generating","pending","failed"].includes(e.generationStatus)||("image"===t&&(null==o?void 0:o.active_image_id)!==e.resource.id?(w.updateShotWithSnapshot(i,{active_image_id:e.resource.id,active_image_url:e.resource.url},{rebuildTimeline:!0}),C(i,!1)):"video"===t&&(null==o?void 0:o.active_video_id)!==e.resource.id&&w.updateShotWithSnapshot(i,{active_video_id:e.resource.id,active_video_url:e.resource.url},{rebuildTimeline:!0}),y(b.find(t=>t.id===e.resource.id)),a(!1),p([i]))},[t,null==o?void 0:o.active_image_id,null==o?void 0:o.active_video_id,y,b,a,p,i,w,C]);return(0,r.jsx)(l.Z,{sx:{mt:"5px",display:"flex",gap:"5px",overflowX:"auto","&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"#444444",borderRadius:"2px"},"&::-webkit-scrollbar-thumb:hover":{background:"#666666"}},children:f?Array.from({length:3}).map((e,t)=>(0,r.jsx)(e6.Z,{variant:"rectangular",width:48,height:48,sx:{flexShrink:0,borderRadius:"4px",bgcolor:"#2A2A2A","&::after":{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent)"}}},t)):x.map(e=>(0,r.jsxs)(l.Z,{onClick:()=>null==j?void 0:j(e),sx:{position:"relative",flexShrink:0,width:"48px",height:"48px",borderRadius:"4px",overflow:"hidden",cursor:"pointer",transition:"all 0.2s ease",opacity:1},children:[h===e.resource.id&&(0,r.jsx)(l.Z,{sx:{zIndex:1e3,position:"absolute",bottom:"4px",right:"4px",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"#013FFE"},children:(0,r.jsx)(e2.Z,{sx:{color:"#FFFFFF",fontSize:"12px"}})}),"generating"===e.generationStatus?(0,r.jsx)(Q.p6,{logoSize:30}):(0,r.jsx)(Q.wY,{src:"image"===t?e.resource.url:e.resource.thumbnail_url,errorState:"failed"===e.generationStatus}),"video"===t&&(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.3)"},children:(0,r.jsx)(e4.Z,{size:"small",sx:{color:"#FFFFFF",padding:"2px","& .MuiSvgIcon-root":{fontSize:"16px"}},children:(0,r.jsx)(e5.Z,{})})})]},e.resource.id))})};var e9=i(67113),te=i(45137);let tt=(0,n.memo)(e=>{let{tab:t}=e,i=(0,e1.jU)(e=>{var t;return null===(t=e.story)||void 0===t?void 0:t.id}),{selectedShot:o,selectedShotId:a}=e3(),s=(0,n.useMemo)(()=>"video"===t?"video_prompt":"image_prompt",[t]),l=(0,A.fH)(e=>e.refreshCredits),d=(0,A.fH)(e=>e.addImageGenerationPlaceholder),c=(0,A.fH)(e=>e.addVideoGenerationPlaceholder),u=(0,e1.jU)(e=>e.syncData),p=(0,A.fH)(e=>e.setIsCurrentImageRetried),{updateShot:h}=(0,e9.Q)(),{mutateAsync:m,isLoading:x}=(0,e0.EL)(i),{generationCreditsImage:g,generationCreditsVideo:f}=(0,eQ.U)(),v=(0,n.useCallback)(()=>{a&&m({shotId:a,mediaTypesArray:["script"===t?"audio-voice-over":t],imagePrompt:null==o?void 0:o.image_prompt,videoPrompt:null==o?void 0:o.video_prompt}).then(e=>{(0,te.B)("shot_regenerate_clicked",{story_id:i,shot_id:a,media_type:t,credits_num:"image"===t?g:f}),"image"===t?d(a,e.workflowRunId,null==o?void 0:o.image_prompt,!0):(c(a,e.workflowRunId,null==o?void 0:o.video_prompt,void 0,!0,null==o?void 0:o.active_image_id),p(a,!0)),u([a]),l()})},[o,a,m,t,l,d,c,u,i,g,f,p]),y=(0,n.useMemo)(()=>"image"===t?null==o?void 0:o.active_image_id:null==o?void 0:o.active_video_id,[o,t]),b=(0,n.useMemo)(()=>"image"===t?g:f,[t,g,f]),C=(0,A.PR)(a,null==o?void 0:o.active_image_id,null==o?void 0:o.image_prompt),w=(0,n.useMemo)(()=>!y||C&&"video"===t,[y,C,t]);return(0,r.jsx)(eq.Z,{children:(null==o?void 0:o.shot_type)==="uploaded_image"&&"image"===t?(0,r.jsx)(Q.wY,{src:null==o?void 0:o.active_image_url,enableFullscreen:!0}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eY.Z,{direction:"column",justifyContent:"space-between",alignItems:"flex-start",sx:{height:"174px",padding:"10px",borderRadius:"8px",border:"1px solid #2E2E2E",background:"#101010"},children:[(0,r.jsx)(eq.Z,{sx:{flex:"1 1 auto",overflowY:"auto"},children:(0,r.jsx)(eX.E,{disabled:"script"===t,isHovered:!0,value:(null==o?void 0:o[s])||"",onChange:e=>{a&&h(a,{[s]:e},{rebuildTimeline:!1})}})}),"script"===t?null:(0,r.jsxs)(eY.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mt:1,width:"100%"},children:[(0,r.jsx)(eq.Z,{children:" "}),(0,r.jsxs)(eJ,{highlighted:w,onClick:v,disabled:x,children:[x?(0,r.jsx)(N.Z,{size:12,sx:{mr:1}}):null,y?"Retry":"Create"," ",t," \xa0",(0,r.jsx)(R.GhS,{size:12}),b]})]})]}),"script"===t?null:(0,r.jsx)(e7,{type:t})]})})});tt.displayName="EditPropertyForShotData";var ti=i(19952);let tr=(0,n.memo)(e=>{let{sx:t,children:i,text:n="Edit Property"}=e;return(0,r.jsx)(s.Z,{sx:{backgroundColor:"#2e2e2e",flexDirection:"row",alignItems:"center",height:eP.sq,px:1,gap:1.5,...i?{justifyContent:"stretch"}:{justifyContent:"center"},...t},children:i||(0,r.jsx)(d.Z,{variant:"h6",sx:{color:"text.primary",fontWeight:500,fontSize:"16px",width:"100%",textAlign:"center"},children:n})})});tr.displayName="EditPropertyPaneHead";let tn=(0,n.memo)(e=>{let{sx:t,tag:i,tab:o,onTabChange:a}=e,s=(0,ee.B)(e=>e.story),d=(0,n.useCallback)((e,t)=>{a(t)},[a]),c=(0,n.useMemo)(()=>(null==s?void 0:s.category_id)==="script_to_video",[null==s?void 0:s.category_id]),{selectedShotId:u,selectedShot:p}=e3(),h=(0,A.PR)(u,(null==p?void 0:p.active_image_id)||"",(null==p?void 0:p.active_video_id)||"");return(0,r.jsx)(tr,{sx:t,children:(0,r.jsxs)(ek.Z,{value:o,onChange:d,"aria-label":"preview tab",sx:{overflowX:"auto","& .MuiTabs-flexContainer":{alignItems:"center"},"& .MuiTab-root:not(.vertical-tab):not(:last-of-type)":{marginRight:0},"& .MuiTab-root:not(.vertical-tab)":{color:"#888",transition:"all 0.2s ease"},"& .MuiTab-root:not(.vertical-tab).Mui-selected":{color:"#fff"},"& .MuiTabs-indicator":{backgroundColor:"#fff"}},children:[c?(0,r.jsx)(e_.Z,{label:(0,r.jsxs)(l.Z,{children:["Script",(0,r.jsx)(ti.Z,{sx:{color:"#ccc",mx:1,fontSize:10}})]}),value:"script",icon:(0,r.jsx)(R.Zr7,{sx:{width:20,height:20,mr:"4px !important"}}),"aria-label":"script"}):null,(0,r.jsx)(e_.Z,{label:(0,r.jsxs)(l.Z,{children:["Still Image",(0,r.jsx)(ti.Z,{sx:{color:"#ccc",mx:1,fontSize:10}})]}),value:"image",icon:(0,r.jsx)(R.L3Q,{sx:{width:20,height:20,mr:"4px !important"}}),"aria-label":"image"}),(0,r.jsx)(e_.Z,{label:(0,r.jsxs)(l.Z,{sx:{position:"relative"},children:["Video",h?(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,right:-7,width:6,height:6,backgroundColor:"#2F66FF",borderRadius:"50%"}}):null]}),value:"video",icon:(0,r.jsx)(R.iJw,{sx:{width:20,height:20,mr:"4px !important"}}),"aria-label":"video"})]})})});tn.displayName="EditPropertyForShotTab";let to=(e,t,i)=>{if("video"!==e.type&&"overlay"!==e.type)return{startFrom:0,endAt:0};let r=null==t?void 0:t.metadata;return r?(0,y.Xq)(e,r,i):{startFrom:0,endAt:0}},ta=(0,n.memo)(e=>{let{item:t}=e,i=(0,Y.D)(e=>e.updateItemSpeed),o=(0,Y.D)(e=>e.updateItemInTrack),a=(0,Y.D)(e=>e.tracks),s=(0,Y.D)(e=>e.mediaAssets),d=(0,Y.D)(e=>e.globalConfig),{operations:c}=(0,eO.ZY)(),u=a.find(e=>e.items.some(e=>e.id===t.id)),p=(0,n.useMemo)(()=>s.find(e=>e.id===t.mediaAssetId),[s,t.mediaAssetId]),{startFrom:h,endAt:m}=(0,n.useMemo)(()=>p?to(t,p,y.UG):{startFrom:0,endAt:0},[t,p]),x=(0,n.useMemo)(()=>({startFrame:t.startTimeInFrames,endFrame:t.startTimeInFrames+t.durationInFrames}),[t.startTimeInFrames,t.durationInFrames]),g=((0,n.useMemo)(()=>({startTime:(0,y.DG)(x.startFrame,d.fps),endTime:(0,y.DG)(x.endFrame,d.fps)}),[x,d.fps]),(0,n.useCallback)(e=>{c.batchOperation("Update Video Speed",()=>{i(t.id,e)})},[t.id,i,c])),f=(0,n.useCallback)(e=>{u&&c.batchOperation("Update Video Volume",()=>{o(u.id,{id:t.id,volume:e})})},[t.id,c,u,o]);return(0,n.useCallback)(e=>{u&&c.batchOperation("Update Video Start Time",()=>{o(u.id,{id:t.id,startTimeInFrames:e})})},[t.id,c,u,o]),(0,n.useCallback)(e=>{u&&c.batchOperation("Update Video Duration",()=>{o(u.id,{id:t.id,durationInFrames:e})})},[t.id,c,u,o]),(0,n.useCallback)(e=>{u&&c.batchOperation("Update Video Source Trim Start",()=>{o(u.id,{id:t.id,sourceTrimStartFrames:e})})},[t.id,c,u,o]),(0,n.useCallback)(e=>{u&&c.batchOperation("Update Video Source Trim End",()=>{o(u.id,{id:t.id,sourceTrimEndFrames:e})})},[t.id,c,u,o]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eN,{icon:eL.Z,title:"Video Speed",value:t.speed??1,min:.5,max:2,step:.25,formatDisplay:e=>`${e.toFixed(2)}x`,formatInput:e=>e.toString(),parseInput:e=>Number.parseFloat(e),validateInput:e=>e>=.5&&e<=2,onChange:g}),(0,r.jsx)(l.Z,{sx:{mt:2.5},children:(0,r.jsx)(eN,{icon:eH.Z,title:"Video Volume",value:t.volume??1,min:0,max:1,step:.05,formatDisplay:e=>`${Math.round(100*e)}%`,formatInput:e=>(100*e).toString(),parseInput:e=>Number.parseFloat(e)/100,validateInput:e=>e>=0&&e<=1,onChange:f})}),null]})});ta.displayName="EditPropertyForVideo";let ts=(0,n.memo)(e=>{let{item:t,shot:i,mediaType:o}=e,[a,d]=(0,n.useState)("video"),c=(0,Y.D)(Y.df);(0,n.useEffect)(()=>{"image"===t.type?d("image"):"video"===t.type?d("video"):"voiceover"===o&&d("script")},[t,o]);let u=(0,n.useCallback)(e=>{d(e)},[]),p=()=>{switch(o){case"video":return(0,r.jsx)(ta,{item:c});case"image":return(0,r.jsx)(eK,{item:c});case"voiceover":return(0,r.jsx)(eG,{item:c})}return null},{selectedShotId:h,selectedShot:m}=e3(),x=(0,A.PR)(h,(null==m?void 0:m.active_image_id)||"",(null==m?void 0:m.active_video_id)||"");return(0,r.jsx)(s.Z,{direction:"column",sx:{height:"100%",bgcolor:"#1a1a1a"},children:(null==m?void 0:m.shot_type)==="uploaded_video"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{sx:{flex:0},children:(0,r.jsx)(tl,{icon:(0,r.jsx)(R.iJw,{sx:{color:"#888"}}),title:"Video"})}),(0,r.jsxs)(l.Z,{sx:{flex:1,p:1.5,overflowY:"auto"},children:[(0,r.jsx)(l.Z,{sx:{height:"280px"},children:(0,r.jsx)(Q.$P,{videoUrl:null==m?void 0:m.active_video_url})}),(0,r.jsx)(l.Z,{sx:{mt:3},children:p()})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{sx:{flex:0},children:(0,r.jsx)(tn,{tag:"Auto",tab:a,onTabChange:u,sx:{flex:0}})}),(0,r.jsxs)(l.Z,{sx:{flex:1,p:1.5,overflowY:"auto"},children:[(0,r.jsxs)(l.Z,{sx:{mb:2},children:[x&&"video"===a?(0,r.jsx)(l.Z,{sx:{mb:1.5,p:"10px",borderRadius:"5px",background:"rgba(255, 170, 0, 0.20)",color:"#FFF",fontFamily:"Inter",fontSize:"12px",fontStyle:"normal",fontWeight:400,lineHeight:"normal"},children:"Image Updated. Create matching clip?"}):null,(0,r.jsx)(tt,{tab:a})]}),p()]})]})})});ts.displayName="EditPropertyForShot";let tl=e=>{let{icon:t,title:i}=e;return(0,r.jsx)(l.Z,{sx:{flex:0},children:(0,r.jsxs)(s.Z,{direction:"row",justifyContent:"flex-start",alignItems:"center",gap:1,sx:{p:1,height:"45px",background:"rgba(255, 255, 255, 0.06)"},children:[(0,r.jsx)(d.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"24px",padding:"1px 4px",borderRadius:"5px",background:"#2A2100",color:"#FFEF66",fontFamily:"Inter",fontSize:"12px",fontStyle:"normal",fontWeight:500,lineHeight:"19.2px"},children:"Uploaded"}),t,(0,r.jsx)(d.Z,{variant:"body2",sx:{color:"#888",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:600,lineHeight:"normal"},children:i})]})})};var td=i(19157),tc=i(45306);let tu=()=>(0,r.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:200,p:2},children:(0,r.jsx)(d.Z,{variant:"body2",color:"text.primary",sx:{fontSize:"14px",fontWeight:700,textAlign:"center"},children:"Select item to edit"})}),tp=()=>{let{story:e}=(0,ee.B)(),t=(0,tc.q)(null==e?void 0:e.category_id);return(0,r.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,r.jsx)(tr,{text:"Story Detail",sx:{flex:"0 0 auto",justifyContent:"flex-start"}}),(0,r.jsx)(l.Z,{sx:{flex:"1 1 auto",overflow:"auto",p:1.5},children:t?(0,r.jsx)(t,{story:e,titleSx:{color:"#CCC",fontFamily:"Inter",fontSize:"12px",fontWeight:600,lineHeight:"20px"},spacing:1}):(0,r.jsx)(tu,{})})]})};(0,n.memo)(()=>(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(tr,{}),(0,r.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:200,p:2,color:"text.disabled"},children:[(0,r.jsx)(td.Z,{sx:{fontSize:48,mb:1,opacity:.5}}),(0,r.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"Select an item to edit"})]})]})).displayName="EmptyState";let th=(0,n.memo)(e=>{let{sx:t}=e,i=(0,Y.D)(Y.df),{selectedShot:n}=e3(),o=(0,W.AC)();return(0,r.jsx)(im,{sx:{...t},children:(()=>{if(!i)return(0,r.jsx)(tp,{});switch(o){case"image":case"video":case"voiceover":return(0,r.jsx)(ts,{item:i,mediaType:o,shot:n});case"music":return(0,r.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:1,height:"100%"},children:[(0,r.jsx)(tr,{}),(0,r.jsx)(eG,{item:i})]});default:return(0,r.jsx)(tp,{})}})()})});th.displayName="EditPropertyPane";var tm=i(83396);let tx=()=>(0,r.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",children:(0,r.jsx)("path",{d:"M9 1.6875C7.55372 1.6875 6.13993 2.11637 4.93739 2.91988C3.73486 3.72339 2.7976 4.86544 2.24413 6.20163C1.69067 7.53781 1.54585 9.00811 1.82801 10.4266C2.11016 11.8451 2.80661 13.148 3.82928 14.1707C4.85195 15.1934 6.15492 15.8898 7.5734 16.172C8.99189 16.4541 10.4622 16.3093 11.7984 15.7559C13.1346 15.2024 14.2766 14.2651 15.0801 13.0626C15.8836 11.8601 16.3125 10.4463 16.3125 9C16.3105 7.06123 15.5394 5.20246 14.1685 3.83154C12.7975 2.46063 10.9388 1.68955 9 1.6875ZM9 15.1875C7.77623 15.1875 6.57994 14.8246 5.56241 14.1447C4.54488 13.4648 3.75181 12.4985 3.2835 11.3679C2.81518 10.2372 2.69265 8.99314 2.93139 7.79288C3.17014 6.59262 3.75944 5.49011 4.62478 4.62478C5.49011 3.75944 6.59262 3.17014 7.79288 2.93139C8.99314 2.69265 10.2372 2.81518 11.3679 3.2835C12.4985 3.75181 13.4648 4.54488 14.1447 5.56241C14.8246 6.57994 15.1875 7.77623 15.1875 9C15.1856 10.6405 14.5331 12.2132 13.3732 13.3732C12.2132 14.5331 10.6405 15.1856 9 15.1875ZM12.375 9C12.375 9.14918 12.3157 9.29226 12.2102 9.39775C12.1048 9.50324 11.9617 9.5625 11.8125 9.5625H9.5625V11.8125C9.5625 11.9617 9.50324 12.1048 9.39775 12.2102C9.29226 12.3157 9.14918 12.375 9 12.375C8.85082 12.375 8.70774 12.3157 8.60225 12.2102C8.49676 12.1048 8.4375 11.9617 8.4375 11.8125V9.5625H6.1875C6.03832 9.5625 5.89524 9.50324 5.78975 9.39775C5.68426 9.29226 5.625 9.14918 5.625 9C5.625 8.85082 5.68426 8.70774 5.78975 8.60225C5.89524 8.49676 6.03832 8.4375 6.1875 8.4375H8.4375V6.1875C8.4375 6.03832 8.49676 5.89524 8.60225 5.78975C8.70774 5.68426 8.85082 5.625 9 5.625C9.14918 5.625 9.29226 5.68426 9.39775 5.78975C9.50324 5.89524 9.5625 6.03832 9.5625 6.1875V8.4375H11.8125C11.9617 8.4375 12.1048 8.49676 12.2102 8.60225C12.3157 8.70774 12.375 8.85082 12.375 9Z",fill:"#00B85F"})});(0,n.memo)(e=>{var t,i;let{mediaAsset:o,isAdded:a,onAdd:c,onRemove:u,onClickCheck:p,sx:h}=e,[m,x]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),b=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(o.url&&!b.current){let e=new Audio;e.src=o.url,e.preload="metadata",e.volume=.5;let t=()=>f(!0),i=()=>f(!1),r=()=>{f(!1),x(!1),console.error("Audio load error for:",o.url)},n=()=>x(!1),a=()=>x(!1),s=()=>x(!0);return e.addEventListener("loadstart",t),e.addEventListener("canplay",i),e.addEventListener("error",r),e.addEventListener("ended",n),e.addEventListener("pause",a),e.addEventListener("play",s),b.current=e,()=>{e.removeEventListener("loadstart",t),e.removeEventListener("canplay",i),e.removeEventListener("error",r),e.removeEventListener("ended",n),e.removeEventListener("pause",a),e.removeEventListener("play",s),e.pause(),e.src="",b.current=null}}},[o.url]),(0,n.useEffect)(()=>()=>{b.current&&(b.current.pause(),b.current.src="",b.current=null)},[]);let C=async e=>{if(e.stopPropagation(),b.current)try{m?b.current.pause():(f(!0),await b.current.play(),f(!1))}catch(e){console.error("Audio playback error:",e),f(!1),x(!1)}},w=(0,n.useCallback)(e=>{if(v)return;let t={source:"media-asset",mediaAssetId:o.id,mediaAssetType:o.resource_type};y(!0),(0,V.tn)(e.dataTransfer,t),e.dataTransfer.effectAllowed="copy"},[v,o.id,o.resource_type]),j=(0,n.useCallback)(()=>{y(!1)},[]);return(0,r.jsxs)(l.Z,{sx:{backgroundColor:"#2E2E2E",border:"1px solid #444444",borderRadius:"5px",padding:"10px",cursor:v?"grabbing":"grab",width:250,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"11px",opacity:v?.5:1,transition:"all 0.2s ease","&:hover":{backgroundColor:"#353535"},...h},draggable:!0,onDragStart:w,onDragEnd:j,children:[(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:"10px",sx:{flex:1,minWidth:0},children:[(0,r.jsxs)(l.Z,{sx:{position:"relative",flexShrink:0},children:[(0,r.jsx)(l.Z,{sx:{width:25,height:25,borderRadius:"50%",backgroundColor:"#101010",display:"flex",alignItems:"center",justifyContent:"center"}}),(0,r.jsx)(e4.Z,{size:"small",onClick:C,disabled:g,sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:16,height:16,minHeight:16,minWidth:16,padding:0,color:"#CCCCCC","&:hover":{backgroundColor:"transparent",color:"#FFFFFF"},"&:disabled":{color:"#666666"}},children:g?(0,r.jsx)(e5.Z,{sx:{fontSize:16,marginLeft:"1px",opacity:.5}}):m?(0,r.jsx)($.Z,{sx:{fontSize:16}}):(0,r.jsx)(e5.Z,{sx:{fontSize:16,marginLeft:"1px"}})})]}),(0,r.jsxs)(s.Z,{direction:"column",spacing:"3px",sx:{flex:1,minWidth:0},children:[(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:"12px",lineHeight:1.3,letterSpacing:"-0.24px",color:"#FFFFFF",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.title||`Music ${o.id.slice(0,8)}`}),(0,r.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1.688px",height:18,paddingX:0},children:(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:500,fontSize:"11px",lineHeight:"13.5px",color:"#E1E6FF",whiteSpace:"nowrap"},children:`${(null===(t=o.metadata)||void 0===t?void 0:t.duration)?`${null===(i=o.metadata)||void 0===i?void 0:i.duration.toFixed(2)}s`:"N/A"}`})})]})]}),(0,r.jsx)(e4.Z,{onClick:e=>{switch(e.stopPropagation(),a){case!0:null==p||p(o);break;case!1:null==c||c(o);break;case void 0:null==u||u(o)}},sx:(()=>{let e={width:18,height:18,minHeight:18,minWidth:18,padding:0};return!0===a?{...e,cursor:p?"pointer":"default","&:hover":{backgroundColor:p?"rgba(27, 239, 97, 0.1)":"transparent"}}:!1===a?{...e,cursor:c?"pointer":"default","&:hover":{backgroundColor:c?"rgba(0, 184, 95, 0.1)":"transparent"}}:{...e,cursor:u?"pointer":"default","&:hover":{backgroundColor:u?"rgba(68, 68, 68, 0.1)":"transparent"}}})(),children:!0===a?(0,r.jsx)(e2.Z,{sx:{fontSize:14,color:"#1BEF61"}}):!1===a?(0,r.jsx)(tx,{}):(0,r.jsx)(tm.Z,{sx:{fontSize:14,color:"#444444"}})})]})}).displayName="MediaAssetItemAudio";var tg=i(76474);let tf=(0,n.memo)(e=>{let{mediaAsset:t,isSelected:i=!1,onClick:o,sx:a}=e,s=Y.wK.use.storyId(),{removeMediaAsset:c}=(0,W.PJ)(s),[u,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!0),[g,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),b=(0,n.useCallback)(e=>{if(v)return;let i={source:"media-asset",mediaAssetId:t.id,mediaAssetType:t.resource_type};(0,V.tn)(e.dataTransfer,i),e.dataTransfer.effectAllowed="copy",y(!0)},[v,t.id,t.resource_type]),C=(0,n.useCallback)(()=>{y(!1)},[]),w=(0,W.IL)(t.id,["video"]);return(0,r.jsx)(l.Z,{sx:{backgroundColor:i?"#3A3A3A":"#2E2E2E",borderRadius:.4,overflow:"hidden",cursor:v?"grabbing":"grab",width:"100%",aspectRatio:"1/1",border:i?"1px solid #4A9EFF":"1px solid transparent",transition:"all 0.2s ease",opacity:v?.5:1,position:"relative","&:hover":{backgroundColor:"#3A3A3A",border:i?"1px solid #4A9EFF":"1px solid #555"},...a},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:()=>{null==o||o()},draggable:!0,onDragStart:b,onDragEnd:C,children:(0,r.jsxs)(l.Z,{sx:{position:"relative",width:"100%",height:"100%",backgroundColor:"#1A1A1A",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:[(0,r.jsx)("img",{src:t.url,alt:t.title||"Image",style:{width:"100%",height:"100%",objectFit:"cover",display:h||g?"none":"block"},onLoad:()=>{x(!1),f(!1)},onError:()=>{x(!1),f(!0)}}),h?(0,r.jsx)(Q.p6,{}):null,g?(0,r.jsxs)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#1A1A1A",gap:1},children:[(0,r.jsx)(m.Z,{sx:{fontSize:32,color:"grey.500"}}),(0,r.jsx)(d.Z,{variant:"caption",sx:{color:"grey.500",fontSize:"10px"},children:"Failed to load"})]}):null,!!(u||i)&&(0,r.jsx)(l.Z,{sx:{position:"absolute",top:4,right:4},children:(0,r.jsx)(G.Z,{title:w?"This image is in use and cannot be deleted.":"Remove image",children:(0,r.jsx)(e4.Z,{size:"small",onClick:e=>{w||(e.stopPropagation(),c(t.id))},sx:{backgroundColor:"rgba(0, 0, 0, 0.5)",color:"#ff6b6b",width:20,height:20,cursor:w?"not-allowed":"pointer","&:hover":{backgroundColor:"rgba(255, 107, 107, 0.2)"}},children:(0,r.jsx)(tg.Z,{sx:{fontSize:14}})})})}),i?(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,border:"2px solid #4A9EFF",borderRadius:"2.34375px",pointerEvents:"none",backgroundColor:"rgba(74, 158, 255, 0.1)"}}):null]})})});tf.displayName="MediaAssetItemImage";let tv=(0,n.memo)(e=>{var t;let{mediaAsset:i,isSelected:n=!1,onClick:o,onRemove:a,sx:s}=e,{isDragging:d,handleDragStart:c,handleDragEnd:u}=K(),p=(0,W.IL)(i.id,["video"]);return(0,r.jsx)(l.Z,{sx:{backgroundColor:n?"#3A3A3A":"#2E2E2E",borderRadius:.4,overflow:"hidden",cursor:d?"grabbing":"grab",width:"100%",aspectRatio:"1/1",borderWidth:"2px",borderStyle:"solid",borderColor:n?"#4A9EFF":"transparent",transition:"all 0.2s ease",position:"relative",opacity:d?.5:1,"&:hover":{backgroundColor:"#3A3A3A",borderColor:n?"#4A9EFF":"#555","& .delete-button":{opacity:1}},"& .delete-button":{opacity:n?1:0,transition:"opacity 0.2s ease"},...n&&{boxShadow:"inset 0 0 0 2px rgba(74, 158, 255, 0.1)"},...s},onClick:()=>{null==o||o()},draggable:!0,onDragStart:e=>c(e,i),onDragEnd:u,children:(0,r.jsxs)(l.Z,{sx:{position:"relative",width:"100%",height:"100%",backgroundColor:"#1A1A1A",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:[i.thumbnail_url?(0,r.jsx)("img",{src:i.thumbnail_url,alt:i.title||"Video thumbnail",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,r.jsx)(e5.Z,{sx:{fontSize:32,color:"grey.500"}}),(0,r.jsx)(eD,{sx:{top:"4.69px",left:"4.69px"},children:(null===(t=i.metadata)||void 0===t?void 0:t.duration)?`${i.metadata.duration.toFixed(2)}s`:"N/A"}),a?(0,r.jsx)(l.Z,{className:"delete-button",sx:{position:"absolute",top:4,right:4},children:(0,r.jsx)(G.Z,{title:p?"This video is in use and cannot be deleted.":"Remove video",children:(0,r.jsx)(e4.Z,{size:"small",onClick:e=>{p||(e.stopPropagation(),null==a||a(i))},sx:{backgroundColor:"rgba(0, 0, 0, 0.5)",color:"#ff6b6b",width:20,height:20,cursor:p?"not-allowed":"pointer","&:hover":{backgroundColor:"rgba(255, 107, 107, 0.2)"}},children:(0,r.jsx)(tg.Z,{sx:{fontSize:14}})})})}):null]})})});tv.displayName="MediaAssetItemVideo",(0,n.memo)(e=>{let{sx:t}=e;return(0,r.jsx)(G.Z,{title:"This video is in use and cannot be deleted.",children:(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",...t},children:(0,r.jsx)(d.Z,{variant:"caption",sx:{color:"grey.500",fontSize:"10px"},children:"In use"})})})}).displayName="InUseBadge";let ty=(0,n.memo)(e=>{let{mediaAsset:t,sx:i}=e,o=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(null==t?void 0:t.resource_type)==="video"&&o.current&&(null==t?void 0:t.url)&&(o.current.src=t.url,o.current.play().catch(()=>{}))},[null==t?void 0:t.url,null==t?void 0:t.resource_type]),(0,r.jsx)(s.Z,{sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",...i},children:(0,r.jsx)(l.Z,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(null==t?void 0:t.resource_type)==="video"&&(null==t?void 0:t.url)?(0,r.jsx)("video",{ref:o,autoPlay:!0,loop:!0,muted:!0,controls:!0,playsInline:!0,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}):(0,r.jsx)("img",{src:null==t?void 0:t.url,alt:"Media preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",opacity:(null==t?void 0:t.url)?1:0}})})})});ty.displayName="MediaAssetPreview";var tb=i(68779);let tC=(0,n.memo)(e=>{let{items:t,layout:i,renderItem:n,emptyMessage:o="No items found",loading:a=!1,sx:s}=e;if(a)return(0,r.jsx)(tb.Z,{loading:!0});let c=(e,t)=>"uploading"===e.status||"error"===e.status?(0,r.jsx)(et,{mediaAsset:e},e.id):n(e,t);return 0===t.length?(0,r.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flex:1,color:"text.secondary",...s},children:(0,r.jsx)(d.Z,{variant:"body2",children:o})}):"grid"===i?(0,r.jsx)(l.Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridAutoRows:"min-content",alignItems:"start",gap:1,overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"#1A1A1A"},"&::-webkit-scrollbar-thumb":{background:"#3A3A3A",borderRadius:"3px","&:hover":{background:"#4A4A4A"}},...s},children:t.map((e,t)=>(0,r.jsx)(l.Z,{sx:{width:"100%"},children:c(e,t)},e.id))}):(0,r.jsx)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:1,p:1,overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"#1A1A1A"},"&::-webkit-scrollbar-thumb":{background:"#3A3A3A",borderRadius:"3px","&:hover":{background:"#4A4A4A"}},...s},children:t.map((e,t)=>(0,r.jsx)(l.Z,{children:c(e,t)},e.id))})});tC.displayName="MediaAssetsList";var tw=i(53785),tj=i(42232);(0,n.memo)(e=>{let{placeholder:t="Search...",value:i="",onChange:o,onSearch:a,sx:s,disabled:l=!1}=e,d=(0,n.useCallback)(e=>{e.preventDefault(),null==a||a(i)},[a,i]);return(0,r.jsx)(eU.Z,{fullWidth:!0,size:"small",placeholder:t,value:i,onChange:e=>{null==o||o(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(null==a||a(i))},disabled:l,InputProps:{startAdornment:(0,r.jsx)(tw.Z,{position:"start",children:(0,r.jsx)(tj.Z,{icon:"ph:magnifying-glass-bold",width:16,height:16,onClick:d,sx:{color:"#FFFFFF"}})}),sx:{height:28,paddingX:"8px",paddingY:"6px",fontSize:12,fontFamily:"Inter",color:"#FFFFFF",backgroundColor:"transparent",borderRadius:"5px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#2E2E2E",borderWidth:"1.2px"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#2E2E2E",borderWidth:"1.2px"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#2E2E2E",borderWidth:"1.2px"},"& .MuiInputBase-input":{padding:0,paddingLeft:"8px",fontSize:12,fontFamily:"Inter",color:"#FFFFFF","&::placeholder":{color:"rgba(255, 255, 255, 0.45)",opacity:1}},"& .MuiInputAdornment-root":{marginLeft:0,marginRight:0}}},sx:{width:"100%","& .MuiInputBase-root":{height:28},...s}})}).displayName="PaneSearchInput",(0,n.memo)(e=>{let{tabs:t,activeTabId:i,onTabChange:o,sx:a}=e,s=(0,n.useCallback)((e,i)=>{let r=t.find(e=>e.id===i);r&&!r.disabled&&o(r.id)},[o,t]);return(0,r.jsx)(l.Z,{sx:{width:"100%",height:25,...a},children:(0,r.jsx)(ek.Z,{value:i,onChange:s,variant:"fullWidth",sx:{minHeight:25,height:25,"& .MuiTabs-flexContainer":{height:25,gap:1},"& .MuiTabs-indicator":{display:"none"},"& .MuiTabs-scroller":{overflow:"visible !important"}},children:t.map(e=>(0,r.jsx)(e_.Z,{label:e.label,value:e.id,disabled:e.disabled,sx:{minHeight:25,height:25,padding:"5px 10px",minWidth:"fit-content",borderRadius:"5px",backgroundColor:i===e.id?"#2E2E2E":"#1A1A1A",color:i===e.id?"#FFFFFF":"#888888",fontFamily:"Inter",fontWeight:i===e.id?500:400,fontSize:12,lineHeight:1.21,textTransform:"none",m:"0 !important",transition:"all 0.2s ease-in-out",flex:t.length>=3?"1 1 0":"0 0 auto",opacity:e.disabled?.5:1,"&:hover":e.disabled?{}:{backgroundColor:i===e.id?"#2E2E2E":"#252525"},"&.Mui-selected":{backgroundColor:"#2E2E2E",color:"#FFFFFF",fontWeight:500},"&.Mui-disabled":{opacity:.5,cursor:"not-allowed"},"&.MuiTab-root":{minWidth:"fit-content",padding:"5px 10px"},"&.MuiButtonBase-root":{borderRadius:"5px"}}},e.id))})})}).displayName="PaneTabs";var tF=i(99058);(0,n.memo)(e=>{let{onClick:t}=e;return(0,r.jsxs)(l.Z,{sx:{flex:0,display:"flex",alignItems:"center",backgroundColor:"#061A3F",border:"1px solid #0C2F75",borderRadius:"5px",height:28,padding:"5px",gap:"5px"},children:[(0,r.jsx)(l.Z,{sx:{width:15,height:15,borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,r.jsx)(tF.Z,{sx:{fontSize:14}})}),(0,r.jsxs)(d.Z,{variant:"body2",sx:{fontSize:12,fontWeight:400,lineHeight:1.21,color:"#CFE0FF",userSelect:"none"},children:["See full controls in",(0,r.jsx)(d.Z,{component:"span",sx:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",color:"inherit",cursor:"pointer",fontWeight:600,marginLeft:.5,transition:"opacity 0.2s ease-in-out","&:hover":{opacity:.8}},onClick:t,children:"All Shots â†’"})]})]})}).displayName="ShotEditTip";var tk=i(29799);let t_=e=>{let{item:t,mediaAsset:i}=e,o=(0,n.useCallback)(e=>{let i=t.volume??1;if(0===i)return 0;let r=i,n=t.effects||[],o=n.find(e=>"fade-in"===e.type);o&&o.durationInFrames>0&&(r*=(0,V.aD)(e,o.durationInFrames));let a=n.find(e=>"fade-out"===e.type);return a&&a.durationInFrames>0&&(r*=(0,V.Xm)(e,a.durationInFrames,t.durationInFrames)),Math.max(0,Math.min(1,r))},[t.volume,t.effects,t.durationInFrames]);return(0,r.jsx)(tk.Bb,{src:i.url,startFrom:Math.floor(Math.max(0,t.sourceTrimStartFrames)),endAt:Math.floor(Math.max(1,t.sourceTrimEndFrames)),volume:o,playbackRate:t.speed||1,muted:0===t.volume,pauseWhenBuffering:!0})},tS=e=>{var t,i,n;let{item:o,globalStyles:a}=e,s=(0,tk.ND)(),{width:l,height:d}=(0,tk.rf)();if(!(s>=0&&s<o.durationInFrames)||!(null===(i=o.caption)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.text))return null;let c=o.caption.data.text,{fontSize:u,captionWidth:p,bottomPercentage:h}=(0,V.bM)(l,d),m=u/22,x={color:"#ffffff",fontSize:`${u}px`,fontFamily:"Inter, Arial, sans-serif",fontWeight:"800",textAlign:"center",maxWidth:p,lineHeight:"1.3",textShadow:`rgba(0, 0, 0, 0.17) ${0*m}px ${0*m}px ${4*m}px`,WebkitTextStroke:"1px rgba(0, 0, 0, 0.15)",whiteSpace:"pre-wrap",wordBreak:"break-word"},g=(null===(n=o.caption)||void 0===n?void 0:n.style)||{},f={...x,...g,...a};return(0,r.jsx)(tk.hU,{style:{position:"absolute",top:`${100-h}%`,left:0,right:0,justifyContent:"flex-start",alignItems:"center",height:`${h}%`,pointerEvents:"none",zIndex:1e3},children:(0,r.jsx)("div",{style:f,children:c})})},{fontFamily:tI}=(0,i(24262).mx)("normal",{weights:["700"],subsets:["latin"]}),tZ=e=>{let{style:t}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"417",height:"68",viewBox:"0 0 417 68",fill:"none",style:t,children:(0,r.jsx)("path",{d:"M86.3169 0.232434C95.2817 0.238815 103.881 3.76453 110.235 10.0381C116.589 16.3118 120.185 24.8245 120.235 33.7181C120.211 40.2431 118.277 46.6222 114.666 52.076C111.055 57.53 105.922 61.8231 99.8956 64.4368C93.8695 67.0501 87.2083 67.8719 80.7213 66.7977C74.2338 65.7233 68.2002 62.8004 63.3562 58.3866C57.3971 53.4532 51.408 48.591 45.391 43.7973L54.0051 36.9748C62.4096 43.6598 69.6986 49.5702 72.5705 51.8642C76.5185 54.7922 81.317 56.377 86.2463 56.3787C98.5661 56.3776 109.48 46.1747 109.269 33.7181C109.227 29.5132 108.013 25.4031 105.765 21.8383C103.517 18.2735 100.322 15.3922 96.5285 13.5155C92.7353 11.639 88.4921 10.8396 84.2693 11.2031C80.0459 11.5668 76.0035 13.0792 72.5926 15.5763C54.317 30.6236 35.468 45.1779 16.8568 59.7811C9.32349 65.0458 0.397833 59.8676 0.396373 51.1493C0.296912 39.5552 0.296912 27.9659 0.396373 16.3883C0.42233 7.6322 9.33721 2.39136 16.8832 7.63299L37.1873 23.9522L28.7938 30.6863L11.3008 16.9929C11.2097 28.1589 11.2097 39.31 11.3008 50.4432C28.8427 36.8762 46.2856 23.1495 63.4048 9.08927C69.6498 3.3877 77.8299 0.22527 86.3169 0.232434ZM215.895 20.36C219.014 20.3603 221.804 21.0734 224.266 22.5003C226.77 23.8868 228.739 25.8459 230.175 28.374C231.653 30.9024 232.391 33.8801 232.391 37.3058C232.391 40.7724 231.653 43.771 230.175 46.2994C228.739 48.8274 226.77 50.7867 224.266 52.1731C221.804 53.5593 219.014 54.2514 215.895 54.2516C213.104 54.2516 210.658 53.6393 208.565 52.4158C207.582 51.8411 206.706 51.1203 205.922 50.2667V65.6283H196.315V20.8498H205.489V24.6582C206.318 23.6633 207.282 22.8401 208.384 22.1958C210.477 20.9729 212.982 20.36 215.895 20.36ZM165.918 10.2057C169.323 10.2058 172.442 10.7556 175.274 11.8562C178.147 12.9572 180.63 14.5094 182.723 16.5075C184.857 18.5057 186.52 20.8504 187.709 23.5417C188.899 26.1924 189.496 29.1285 189.497 32.35C189.497 35.5311 188.899 38.4876 187.709 41.2201C186.52 43.9118 184.857 46.256 182.723 48.2544C180.629 50.2119 178.147 51.7428 175.274 52.8439C172.442 53.9446 169.345 54.4942 165.98 54.4943C162.574 54.4943 159.41 53.945 156.496 52.8439C153.624 51.7428 151.119 50.195 148.986 48.197C146.892 46.1986 145.251 43.85 144.061 41.1583C142.912 38.4671 142.34 35.5305 142.34 32.35C142.34 29.1694 142.912 26.2331 144.061 23.5417C145.251 20.8504 146.913 18.5057 149.047 16.5075C151.181 14.5092 153.685 12.9573 156.558 11.8562C159.432 10.7551 162.552 10.2057 165.918 10.2057ZM254.027 20.36C257.27 20.36 260.184 21.0525 262.77 22.4385C265.396 23.7841 267.47 25.7436 268.987 28.3122C270.507 30.8407 271.269 33.8813 271.269 37.4294C271.269 37.7962 271.249 38.2246 271.207 38.7135C271.167 39.1619 271.125 39.59 271.084 39.9977H246.027C246.22 40.8729 246.525 41.688 246.949 42.4425C247.771 43.7879 248.898 44.8284 250.334 45.5625C251.811 46.2557 253.536 46.6039 255.506 46.6039C257.27 46.6039 258.809 46.3394 260.122 45.8096C261.476 45.2795 262.707 44.4822 263.815 43.4222L268.926 48.9296C267.408 50.6419 265.501 51.9679 263.202 52.9057C260.904 53.8029 258.255 54.2516 255.259 54.2516C251.484 54.2514 248.159 53.5176 245.285 52.0495C242.454 50.5814 240.257 48.5807 238.697 46.0523C237.138 43.4835 236.358 40.5675 236.358 37.3058C236.358 34.0033 237.118 31.0873 238.635 28.5593C240.195 25.9904 242.31 23.9894 244.976 22.5621C247.645 21.0941 250.663 20.3602 254.027 20.36ZM405.556 21.5824H413.803V28.9256H405.556V42.3234C405.556 43.7091 405.925 44.7878 406.663 45.5625C407.402 46.2962 408.407 46.6654 409.677 46.6657C411.196 46.6657 412.49 46.2581 413.556 45.4433L416.142 52.1731C415.158 52.8658 413.967 53.3949 412.572 53.7618C411.219 54.0877 409.804 54.2514 408.327 54.2516C404.429 54.2516 401.39 53.2735 399.214 51.317C397.039 49.3186 395.949 46.3577 395.949 42.4425V28.9256H390.838V21.5824H395.949V13.5684H405.556V21.5824ZM297.795 20.36C300.421 20.3601 302.759 20.8929 304.812 21.9531C306.905 22.9727 308.546 24.5621 309.737 26.7235C310.926 28.8439 311.524 31.575 311.524 34.9184V53.7618H301.917V36.3879C301.917 33.7373 301.324 31.7785 300.134 30.5142C298.985 29.2504 297.342 28.6213 295.209 28.6211C293.69 28.6211 292.314 28.9439 291.083 29.5963C289.892 30.2081 288.947 31.1686 288.25 32.4736C287.593 33.7785 287.266 35.4525 287.266 37.4911V53.7618H277.663V20.8498H286.833V24.7686C287.785 23.7137 288.913 22.8328 290.223 22.134C292.439 20.9518 294.964 20.36 297.795 20.36ZM363.571 53.7618H353.103L349.277 44.5872H329.299L325.46 53.7618H315.24L334.449 10.9383H344.299L363.571 53.7618ZM387.93 29.1683C387.519 29.1275 387.146 29.1065 386.818 29.1065C386.489 29.0658 386.141 29.0491 385.772 29.0491C383.145 29.0493 381.01 29.8042 379.369 31.313C377.77 32.7812 376.968 35.0846 376.968 38.2237V53.7618H367.366V20.8498H376.54V25.1745C377.445 23.948 378.592 22.9535 379.987 22.1958C382.162 20.9726 384.811 20.36 387.93 20.36V29.1683ZM214.231 28.193C212.631 28.193 211.193 28.5578 209.92 29.2918C208.648 30.0258 207.644 31.0667 206.906 32.4118C206.167 33.7576 205.798 35.3891 205.798 37.3058C205.798 39.1819 206.167 40.8131 206.906 42.1998C207.644 43.545 208.648 44.5858 209.92 45.3198C211.193 46.0539 212.631 46.423 214.231 46.423C215.832 46.423 217.25 46.0538 218.481 45.3198C219.753 44.5858 220.757 43.545 221.495 42.1998C222.275 40.8131 222.664 39.1819 222.664 37.3058C222.664 35.3891 222.275 33.7576 221.495 32.4118C220.757 31.0667 219.753 30.0258 218.481 29.2918C217.25 28.5578 215.832 28.1931 214.231 28.193ZM165.918 18.6478C163.99 18.6478 162.203 18.9749 160.561 19.6274C158.96 20.28 157.542 21.2152 156.311 22.4385C155.08 23.662 154.118 25.1132 153.421 26.7853C152.764 28.4569 152.437 30.3116 152.436 32.35C152.436 34.3484 152.764 36.2063 153.421 37.9192C154.118 39.5902 155.06 41.0387 156.249 42.2616C157.481 43.4851 158.918 44.4245 160.561 45.077C162.203 45.7295 163.99 46.0523 165.918 46.0523C167.846 46.0522 169.613 45.7295 171.214 45.077C172.855 44.4246 174.29 43.4845 175.521 42.2616C176.752 41.0384 177.697 39.5907 178.354 37.9192C179.051 36.2472 179.4 34.3891 179.4 32.35C179.4 30.3118 179.051 28.4568 178.354 26.7853C177.697 25.1132 176.752 23.662 175.521 22.4385C174.332 21.2162 172.916 20.2797 171.275 19.6274C169.633 18.975 167.846 18.6479 165.918 18.6478ZM332.45 37.0631H346.144L339.308 20.6689L332.45 37.0631ZM254.089 27.5796C252.45 27.5798 250.993 27.9452 249.72 28.6784C248.489 29.3717 247.524 30.3743 246.825 31.6793C246.376 32.4953 246.072 33.4131 245.912 34.433H262.218C262.062 33.3955 261.755 32.4571 261.291 31.6175C260.594 30.3533 259.632 29.3716 258.401 28.6784C257.169 27.9444 255.731 27.5796 254.089 27.5796Z",fill:"white"})})},tE=()=>(0,r.jsxs)("svg",{width:"40",height:"39",viewBox:"0 0 40 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{id:"Group 1000011525",children:[(0,r.jsx)("g",{id:"Star 1",filter:"url(#filter0_d_4926_16277)",children:(0,r.jsx)("path",{d:"M13.9407 10.1885L14.2448 12.4098C14.8107 16.5436 17.8341 19.9176 21.8813 20.9318V20.9318V20.9318C17.8341 21.9459 14.8107 25.3199 14.2448 29.4537L13.9407 31.675L13.6366 29.4537C13.0707 25.3199 10.0473 21.9459 6.00004 20.9318V20.9318V20.9318C10.0473 19.9176 13.0707 16.5436 13.6366 12.4098L13.9407 10.1885Z",fill:"url(#paint0_linear_4926_16277)"})}),(0,r.jsx)("g",{id:"Star 2",filter:"url(#filter1_d_4926_16277)",children:(0,r.jsx)("path",{d:"M31.2235 19.0361L31.4024 20.3427C31.7352 22.7744 33.5137 24.7591 35.8944 25.3556V25.3556V25.3556C33.5137 25.9522 31.7352 27.9369 31.4024 30.3685L31.2235 31.6752L31.0446 30.3685C30.7117 27.9369 28.9332 25.9522 26.5525 25.3556V25.3556V25.3556C28.9332 24.7591 30.7117 22.7744 31.0446 20.3427L31.2235 19.0361Z",fill:"url(#paint1_linear_4926_16277)"})}),(0,r.jsx)("g",{id:"Star 3",filter:"url(#filter2_d_4926_16277)",children:(0,r.jsx)("path",{d:"M26.3189 1.99987L26.4351 2.84919C26.6515 4.42976 27.8075 5.7198 29.355 6.10757V6.10757V6.10757C27.8075 6.49534 26.6515 7.78539 26.4351 9.36596L26.3189 10.2153L26.2026 9.36596C25.9862 7.78539 24.8302 6.49534 23.2827 6.10757V6.10757V6.10757C24.8302 5.7198 25.9862 4.42976 26.2026 2.84919L26.3189 1.99987Z",fill:"url(#paint2_linear_4926_16277)",fillOpacity:"0.4",shapeRendering:"crispEdges"})})]}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"filter0_d_4926_16277",x:"0.535",y:"6.59189",width:"26.8114",height:"32.4165",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dy:"1.86839"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"2.73252"}),(0,r.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.390325 0 0 0 0 1 0 0 0 0 0.898387 0 0 0 0.47 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4926_16277"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4926_16277",result:"shape"})]}),(0,r.jsxs)("filter",{id:"filter1_d_4926_16277",x:"23.3378",y:"16.9204",width:"15.7714",height:"19.0686",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dy:"1.09905"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"1.60736"}),(0,r.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.390325 0 0 0 0 1 0 0 0 0 0.898387 0 0 0 0.47 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4926_16277"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4926_16277",result:"shape"})]}),(0,r.jsxs)("filter",{id:"filter2_d_4926_16277",x:"21.1932",y:"0.624678",width:"10.2514",height:"12.3946",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dy:"0.714384"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"1.04479"}),(0,r.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.390325 0 0 0 0 1 0 0 0 0 0.898387 0 0 0 0.47 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4926_16277"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4926_16277",result:"shape"})]}),(0,r.jsxs)("linearGradient",{id:"paint0_linear_4926_16277",x1:"6.00004",y1:"20.9318",x2:"21.8813",y2:"20.9318",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#2FFF9E"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#0022FF"})]}),(0,r.jsxs)("linearGradient",{id:"paint1_linear_4926_16277",x1:"26.5525",y1:"25.3556",x2:"35.8944",y2:"25.3556",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#2FFF9E"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#0022FF"})]}),(0,r.jsxs)("linearGradient",{id:"paint2_linear_4926_16277",x1:"23.2827",y1:"6.10757",x2:"29.355",y2:"6.10757",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#2FFF9E"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#C6A3FF"})]})]})]}),tA=()=>(0,r.jsxs)("svg",{width:"30",height:"23",viewBox:"0 0 30 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{id:"Group 1000011526",children:[(0,r.jsx)("g",{id:"Star 2",filter:"url(#filter0_d_4926_16271)",children:(0,r.jsx)("path",{d:"M8.67102 2.99982L8.84989 4.30647C9.18278 6.73812 10.9613 8.7228 13.342 9.31937V9.31937V9.31937C10.9613 9.91594 9.18278 11.9006 8.8499 14.3323L8.67102 15.6389L8.49214 14.3323C8.15926 11.9006 6.38077 9.91594 4.00005 9.31937V9.31937V9.31937C6.38077 8.7228 8.15926 6.73812 8.49214 4.30647L8.67102 2.99982Z",fill:"url(#paint0_linear_4926_16271)"})}),(0,r.jsx)("g",{id:"Star 3",filter:"url(#filter1_d_4926_16271)",children:(0,r.jsx)("path",{d:"M24.7858 11.4073L24.9021 12.2567C25.1185 13.8372 26.2745 15.1273 27.8219 15.5151V15.5151V15.5151C26.2745 15.9028 25.1185 17.1929 24.9021 18.7734L24.7858 19.6228L24.6695 18.7734C24.4532 17.1929 23.2971 15.9028 21.7497 15.5151V15.5151V15.5151C23.2971 15.1273 24.4532 13.8372 24.6695 12.2567L24.7858 11.4073Z",fill:"url(#paint1_linear_4926_16271)",fillOpacity:"0.4",shapeRendering:"crispEdges"})})]}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"filter0_d_4926_16271",x:"0.785319",y:"0.884145",width:"15.7714",height:"19.0686",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dy:"1.09905"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"1.60736"}),(0,r.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.390325 0 0 0 0 1 0 0 0 0 0.898387 0 0 0 0.47 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4926_16271"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4926_16271",result:"shape"})]}),(0,r.jsxs)("filter",{id:"filter1_d_4926_16271",x:"19.6601",y:"10.0322",width:"10.2514",height:"12.3946",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dy:"0.714384"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"1.04479"}),(0,r.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.390325 0 0 0 0 1 0 0 0 0 0.898387 0 0 0 0.47 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4926_16271"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4926_16271",result:"shape"})]}),(0,r.jsxs)("linearGradient",{id:"paint0_linear_4926_16271",x1:"-8.22814",y1:"10.3165",x2:"13.342",y2:"9.31937",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#2FFF9E"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#C6A3FF"})]}),(0,r.jsxs)("linearGradient",{id:"paint1_linear_4926_16271",x1:"13.9249",y1:"15.6006",x2:"27.8219",y2:"15.5151",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#2FFF9E"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#C6A3FF"})]})]})]}),tM=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,r=document.createElement("canvas"),n=r.getContext("2d");if(!n)return"";r.width=e,r.height=t;let o=n.createImageData(e,t),a=o.data;for(let e=0;e<a.length;e+=4){let t=Math.random(),r=Math.random()*i*255,n=t>.5?255:0;a[e]=Math.floor(.7*n+100*t),a[e+1]=Math.floor(.9*n+80*t),a[e+2]=Math.floor(1.2*n+60*t),a[e+3]=r}return n.putImageData(o,0,0),r.toDataURL()},tR=n.memo(()=>{let e=(0,n.useMemo)(()=>tM(200,200,.4),[]),t=`radial-gradient(ellipse 60% 40% at center, 
            rgba(0,0,0,1) 0%, 
            rgba(0,0,0,0.95) 45%, 
            rgba(0,0,0,0.85) 60%, 
            rgba(0,0,0,0.7) 70%, 
            rgba(0,0,0,0.5) 80%, 
            rgba(0,0,0,0.25) 88%, 
            rgba(0,0,0,0.1) 94%, 
            rgba(0,0,0,0) 100%)`;return(0,r.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,r.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%",transform:"rotate(20deg) skewX(0deg)",transformOrigin:"center",mask:t,WebkitMask:t},children:[(0,r.jsx)("div",{style:{transform:"skewX(0deg) rotate(-20deg)",transformOrigin:"center"},children:(0,r.jsx)(tT,{})}),e?(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:`url(${e})`,backgroundRepeat:"repeat",backgroundSize:"100px 100px",opacity:.7,mixBlendMode:"soft-light",pointerEvents:"none",transform:"skewX(0deg) rotate(-20deg)",transformOrigin:"center"}}):null]})})});tR.displayName="GalaxyBackgroundWithParticles";let tT=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"347",height:"187",viewBox:"0 0 347 187",fill:"none",children:[(0,r.jsxs)("g",{filter:"url(#filter0_f_4912_33995)",children:[(0,r.jsx)("ellipse",{cx:"122.927",cy:"26.421",rx:"122.927",ry:"26.421",transform:"matrix(0.894467 0.447135 -0.592435 0.805618 63.8125 15)",fill:"#D9D9D9"}),(0,r.jsx)("g",{clipPath:"url(#paint0_diamond_4912_33995_clip_path)","data-figma-skip-parse":"true",children:(0,r.jsxs)("g",{transform:"matrix(0.119974 0.0536471 0.0151559 0.45581 162.79 91.7662)",children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"1181.92",height:"122.407",fill:"url(#paint0_diamond_4912_33995)",opacity:"1",shapeRendering:"crispEdges"}),(0,r.jsx)("rect",{x:"0",y:"0",width:"1181.92",height:"122.407",transform:"scale(1 -1)",fill:"url(#paint0_diamond_4912_33995)",opacity:"1",shapeRendering:"crispEdges"}),(0,r.jsx)("rect",{x:"0",y:"0",width:"1181.92",height:"122.407",transform:"scale(-1 1)",fill:"url(#paint0_diamond_4912_33995)",opacity:"1",shapeRendering:"crispEdges"}),(0,r.jsx)("rect",{x:"0",y:"0",width:"1181.92",height:"122.407",transform:"scale(-1)",fill:"url(#paint0_diamond_4912_33995)",opacity:"1",shapeRendering:"crispEdges"})]})}),(0,r.jsx)("ellipse",{cx:"122.927",cy:"26.421",rx:"122.927",ry:"26.421",transform:"matrix(0.894467 0.447135 -0.592435 0.805618 63.8125 15)","data-figma-gradient-fill":'{"type":"GRADIENT_DIAMOND","stops":[{"color":{"r":0.94639581441879272,"g":0.98422473669052124,"b":0.85812836885452271,"a":0.80000001192092896},"position":0.0},{"color":{"r":0.013623046688735485,"g":0.19445882737636566,"b":1.0,"a":1.0},"position":0.33653846383094788},{"color":{"r":0.77795690298080444,"g":0.63993012905120850,"b":1.0,"a":1.0},"position":1.0}],"stopsVar":[{"color":{"r":0.94639581441879272,"g":0.98422473669052124,"b":0.85812836885452271,"a":0.80000001192092896},"position":0.0},{"color":{"r":0.013623046688735485,"g":0.19445882737636566,"b":1.0,"a":1.0},"position":0.33653846383094788},{"color":{"r":0.77795690298080444,"g":0.63993012905120850,"b":1.0,"a":1.0},"position":1.0}],"transform":{"m00":239.94859313964844,"m01":30.311830520629883,"m02":27.659652709960938,"m10":107.29411315917969,"m11":911.6191406250,"m12":-417.69039916992188},"opacity":1.0,"blendMode":"NORMAL","visible":true}'})]}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"filter0_f_4912_33995",x:"-1.62599",y:"0.861313",width:"347.791",height:"185.647",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"27.1123",result:"effect1_foregroundBlur_4912_33995"})]}),(0,r.jsx)("clipPath",{id:"paint0_diamond_4912_33995_clip_path",children:(0,r.jsx)("ellipse",{cx:"122.927",cy:"26.421",rx:"122.927",ry:"26.421",transform:"matrix(0.894467 0.447135 -0.592435 0.805618 63.8125 16)"})}),(0,r.jsxs)("linearGradient",{id:"paint0_diamond_4912_33995",x1:"0",y1:"0",x2:"500",y2:"500",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#F1FBDB",stopOpacity:"0.8"}),(0,r.jsx)("stop",{offset:"0.336538",stopColor:"#0332FF"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#C6A3FF"})]})]})]}),tD=417/68,tz=(0,n.memo)(e=>{let{useParticles:t=!1}=e,i=(0,tk.ND)(),{fps:n,width:o,height:a}=(0,tk.rf)(),{isPortrait:s}=(0,V.n3)(o,a),l=s?.6*o:.42*o,d=l/310,c=.1*n,u=.3*n,p=(0,tk.sX)(i,[0,c],[.4,1.15],{extrapolateRight:"clamp"}),h=(0,tk.sX)(i,[0,c],[0,1],{extrapolateRight:"clamp"}),m=(0,tk.sX)(i,[c,u],[1.3,1.4],{extrapolateRight:"clamp"}),x=(0,tk.sX)(i,[c,u],[0,1],{extrapolateRight:"clamp"}),g=s?20:0,f=(0,tk.sX)(i,[c,u],[6+g,g],{extrapolateRight:"clamp"}),v=(0,tk.sX)(i,[c,u],[0,1],{extrapolateRight:"clamp"});return(0,r.jsxs)(tk.hU,{style:{backgroundColor:"black",justifyContent:"center",alignItems:"center",position:"relative"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:s?"40%":"50%",left:"50%",transform:`translate(-50%, -60%) scale(${d})`,opacity:h},children:(0,r.jsx)("div",{style:{transform:`scale(${p})`,transformOrigin:"center"},children:t?(0,r.jsx)(tR,{}):(0,r.jsx)(tT,{})})}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",position:"relative",zIndex:2,bottom:s?"10%":"0%",transform:`scale(${d})`},children:[(0,r.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)("div",{style:{position:"absolute",left:"-13%",top:"70%",transform:`translateY(-50%) scale(${m})`,transformOrigin:"center",opacity:x},children:(0,r.jsx)(tE,{})}),(0,r.jsx)("div",{style:{transformOrigin:"center",opacity:x},children:(0,r.jsx)("div",{style:{fontFamily:tI,fontSize:"44.3742px",fontWeight:"bold",textAlign:"center",letterSpacing:"-3.1062px",lineHeight:"normal",backgroundImage:"linear-gradient(90deg, rgb(191, 255, 191) 0%, rgb(239, 229, 255) 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",whiteSpace:"nowrap",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",position:"relative",width:"310px"},children:"Make Wonders"})}),(0,r.jsx)("div",{style:{position:"absolute",right:"-4.5%",top:"16%",transform:`translateY(-50%) scale(${m})`,transformOrigin:"center",opacity:x},children:(0,r.jsx)(tA,{})})]}),(0,r.jsx)("div",{style:{position:"absolute",top:"100%",opacity:v,width:`${(s?.35*l:.3*l)/d}px`,aspectRatio:tD,transform:`translateY(${f}px)`,transformOrigin:"center top"},children:(0,r.jsx)(tZ,{style:{width:"100%",height:"100%"}})})]})]})});function tP(e){let{config:t}=e,{width:i,height:n}=(0,tk.rf)();if(!t.enabled)return null;let{isLandscape:o}=(0,V.n3)(i,n),a=o?200:.38*i,s={display:"flex",justifyContent:"flex-end",pointerEvents:"none",zIndex:1e3,width:"100%",height:"100%",...o?{alignItems:"flex-end",paddingRight:`${38/1920*i}px`,paddingBottom:`${38/1080*n}px`}:{alignItems:"center",paddingBottom:`${30/1920*n}px`}},l={transform:`scale(${i/(o?1920:1080)*a/417})`,opacity:.6,filter:"drop-shadow(0 1px 3px rgba(0, 0, 0, 0.5))",width:"417px",...o?{transformOrigin:"right bottom"}:{transformOrigin:"center"}};return(0,r.jsx)(tk.hU,{style:s,children:(0,r.jsx)("div",{style:l,children:(0,r.jsx)(tZ,{})})})}tz.displayName="TimelineItemTemplateLogo";let tL={width:"100%",height:"100%",objectFit:"cover"},tW={enabled:!0,type:"openart"};function tB(e){let{item:t,mediaAsset:i,watermarkConfig:o}=e,{fps:a}=(0,tk.rf)(),s=o||tW,l=(0,n.useCallback)(e=>{console.error("[VideoWithOverlay] Video loading/playback error:",{error:e.message,stack:e.stack,mediaAsset:{id:i.id,url:i.url,type:i.resource_type,subtype:i.subtype,metadata:i.metadata},item:{id:t.id,type:t.type,durationInFrames:t.durationInFrames,speed:t.speed,volume:t.volume}})},[t,i]);if("video"!==t.type&&"overlay"!==t.type)return(0,r.jsxs)(tk.hU,{children:[(0,r.jsx)(tk.Ei,{src:i.url,style:tL,pauseWhenLoading:!0}),(0,r.jsx)(tP,{config:s})]});{let e=t.speed||1,n=null==i?void 0:i.metadata,{startFrom:o,endAt:p}=(0,V.Xq)(t,n,a),h=(0,r.jsx)(tk.EB,{src:`${i.url}#disable`,startFrom:o,endAt:p,playbackRate:e,volume:t.volume||1,style:tL,muted:0===t.volume,delayRenderRetries:3,pauseWhenBuffering:!0,onError:l});if("overlay"===t.type){var d,c,u;let e=(null===(d=t.overlayConfig)||void 0===d?void 0:d.message)??((null===(c=t.overlayConfig)||void 0===c?void 0:c.type)==="error"?"Oops, our spell slipped! Credits refunded â€”you can regenerate this shot in the editor.":null===(u=t.overlayConfig)||void 0===u?void 0:u.type);return(0,r.jsxs)(tk.hU,{children:[h,(0,r.jsx)(tk.hU,{style:{background:"linear-gradient(179deg, rgba(184, 67, 151, 0.00) -120.17%, rgba(184, 67, 151, 0.38) -6.47%, rgba(184, 67, 151, 0.00) 98.8%)",top:"0",width:"100%",height:"80%",padding:"80px 15%"},children:(0,r.jsx)("p",{style:{color:"#642c54",fontSize:"60px",textAlign:"center",fontFamily:"Inter, sans-serif",fontWeight:"600",lineHeight:"60px",width:"100%",margin:0,padding:"32px"},children:e})}),(0,r.jsx)(tP,{config:s})]})}return(0,r.jsxs)(tk.hU,{children:[h,(0,r.jsx)(tP,{config:s})]})}}let tH=e=>{var t;let{tracks:i,mediaAssets:o,globalConfig:a=eP.Kz,config:s}=e,{fps:l}=(0,tk.rf)(),d=(null==a?void 0:null===(t=a.captions)||void 0===t?void 0:t.enabled)??eP.Kz.captions.enabled,c=(0,n.useMemo)(()=>new Map(o.map(e=>[e.id,e])),[o]),u=(0,n.useMemo)(()=>{let e=[];return i.forEach(t=>{t.items.forEach(t=>{"caption"===t.type&&e.push(t)})}),e},[i]),p=(0,n.useCallback)((e,t,i)=>(function(e,t,i){if(e.durationInFrames&&e.durationInFrames>0)return Math.max(1,e.durationInFrames);let r=null==t?void 0:t.metadata,n=(null==r?void 0:r.fps)||30,o=null==r?void 0:r.frames;if(!o||o<=0){let t=Math.max(1,(e.sourceTrimEndFrames&&e.sourceTrimStartFrames?e.sourceTrimEndFrames-e.sourceTrimStartFrames:3*n)*i/n/Math.max(.1,e.speed||1));return console.warn(`Using fallback duration calculation for item ${e.id}: ${t} frames`),t}return"image"===e.type?2*i:Math.max(1,o/n/Math.max(.1,e.speed||1)*i)})(e,t,i),[]);return i&&0!==i.length?(0,r.jsxs)(tk.hU,{style:{backgroundColor:"black"},children:[i.map((e,t)=>(0,r.jsx)(tk.FH,{children:e.items.map((t,i)=>{if("caption"===t.type)return null;if("logo"===t.type)return(0,r.jsx)(tk.FH.Sequence,{durationInFrames:Math.floor(t.durationInFrames||1.5*l),name:t.title||`Logo ${t.id}`,children:(0,r.jsx)(tz,{})},`${t.id}-${t.speed}`);let n=c.get(t.mediaAssetId);if(!n)return console.warn(`Media asset not found for item ${t.id}`),null;let o=p(t,n,l);return"video"===e.type?(0,r.jsx)(tk.FH.Sequence,{premountFor:3*l,durationInFrames:Math.floor(o),name:t.title||`Item ${t.id}`,children:(0,r.jsx)(tB,{item:t,mediaAsset:n,watermarkConfig:(null==a?void 0:a.watermark)||s.watermarkConfig})},t.id):(0,r.jsx)(tk.FH.Sequence,{premountFor:3*l,durationInFrames:Math.floor(o),name:t.title||`Audio ${t.id}`,children:(0,r.jsx)(t_,{item:t,mediaAsset:n})},t.id)})},e.id+t)),d?u.map(e=>(0,r.jsx)(tk.T9,{from:Math.floor(e.startTimeInFrames),durationInFrames:Math.floor(e.durationInFrames),name:e.title||`Caption ${e.id}`,children:(0,r.jsx)(tS,{item:e})},e.id)):null]}):(0,r.jsx)(tk.hU,{style:{backgroundColor:"#101010",justifyContent:"center",alignItems:"center"}})};var tU=i(18303);function tO(e){var t,i;let{sx:o,playerRef:a,storyData:s,fps:c,...u}=e,p=(0,n.useRef)(null),h=a||p,m=(0,n.useMemo)(()=>s.video_editor_timeline.tracks,[s.video_editor_timeline.tracks]),x=(0,n.useMemo)(()=>s.video_editor_timeline.mediaAssets,[s.video_editor_timeline.mediaAssets]),g=(0,n.useMemo)(()=>s.video_editor_timeline.globalConfig||eP.Kz,[s.video_editor_timeline.globalConfig]),{width:f,height:v,totalDurationInFrames:y}=(0,n.useMemo)(()=>(0,V.GQ)(m,x),[x,m]),C=(0,n.useRef)(null);(0,b.JA)({playerRef:h,containerRef:C,tracks:m,debug:!1});let w=(0,n.useMemo)(()=>({tracks:m,mediaAssets:x,globalConfig:{...g,watermark:{...g.watermark,enabled:!1}}}),[m,x,g]),j=`remotion-player-${s.id||"unknown"}`,F=(0,n.useCallback)(e=>{let{height:t,width:i,isBuffering:n}=e;return n?(0,r.jsx)(tk.hU,{style:{background:"transparent",minHeight:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:2,padding:"12px 20px",gap:2,background:"rgba(0, 0, 0, 0.5)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",backdropFilter:"blur(8px)"},children:[(0,r.jsx)(N.Z,{size:20,thickness:4,sx:{color:"white","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),(0,r.jsx)(d.Z,{variant:"subtitle1",sx:{color:"white",fontWeight:500},children:"Loading video..."})]})}):(0,r.jsx)(tk.hU,{style:{background:"transparent"}})},[]);return(0,r.jsx)(l.Z,{ref:C,sx:{width:"100%",height:"100%",position:"relative",...o},children:(0,r.jsx)(tU.J5,{ref:h,component:tH,numberOfSharedAudioTags:0,showPosterWhenBuffering:!0,showPosterWhenUnplayed:!0,showPosterWhenPaused:!0,showPosterWhenBufferingAndPaused:!0,acknowledgeRemotionLicense:!0,renderPoster:F,inputProps:w,durationInFrames:y,compositionWidth:f,compositionHeight:v,fps:c||(null===(t=s.video_editor_timeline.globalConfig)||void 0===t?void 0:t.fps)||(null==s?void 0:null===(i=s.metadata)||void 0===i?void 0:i.fps)||eP.UG,style:{width:"100%",height:"100%"},clickToPlay:!0,...u},j)})}var t$=i(6971),tN=i(9383),tG=i(33500),tV=i(85155);let tK=e=>{let{zoomLevel:t,onZoomChange:i,zoomMin:o,zoomMax:a,playerRef:c}=e,u=Y.wK.use.isPlaying(),p=Y.wK.use.togglePlay(),h=Y.wK.use.outputSettings(),m=Y.wK.use.globalConfig(),x=Y.wK.use.tracks(),g=Y.wK.use.mediaAssets(),f=Y.wK.use.setPreviewingMediaAsset(),v=(0,tG.d)(c),b=Y.wK.use.currentTimeInFrames(),C=(0,n.useMemo)(()=>(null==c?void 0:c.current)?v:b,[c,v,b]);(0,tV.a)({playerRef:c,enabled:!0,zoomLevel:t,onZoomChange:i,zoomMin:o,zoomMax:a});let w=(0,n.useCallback)(e=>{(null==c?void 0:c.current)&&(u?c.current.pause():(f(void 0),c.current.play(e))),p()},[u,c,f,p]),j=(0,n.useCallback)(()=>{i(Math.min(a,t+.25))},[t,a,i]),F=(0,n.useCallback)(()=>{i(Math.max(o,t-.25))},[t,o,i]),k=(0,n.useMemo)(()=>(0,y.DG)(C,m.fps),[C,m.fps]),_=(0,n.useMemo)(()=>(0,y.DG)(Math.max(0,h.totalDurationInFrames-1),m.fps),[h.totalDurationInFrames,m.fps]),S=(0,n.useCallback)(()=>{},[x,g]);return(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",sx:{px:2,py:1,width:"100%",position:"relative",justifyContent:"space-between"},children:[(0,r.jsxs)(l.Z,{onClick:S,sx:{borderRadius:"10px",display:"flex",alignItems:"center"},children:[(0,r.jsx)(d.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:"12px",lineHeight:1.21,color:"#9CBAFF",pr:.4,width:"58px"},children:k}),(0,r.jsxs)(d.Z,{sx:{fontFamily:"Inter",fontWeight:600,fontSize:"12px",lineHeight:1.21,color:"#FFFFFF",width:"60px",whiteSpace:"nowrap"},children:["/ ",_]})]}),(0,r.jsx)(e4.Z,{size:"small",onClickCapture:w,sx:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:24,height:24,color:"#fff"},children:u?(0,r.jsx)(t$.Z,{sx:{width:24,height:24}}):(0,r.jsx)(tN.Z,{sx:{width:24,height:24}})}),(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(e4.Z,{size:"small",onClick:F,disabled:t<=o,sx:{width:16,height:16,minWidth:16,padding:0,color:t<=o?"#666666":"#FFF","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"},"&:disabled":{color:"#666666"}},children:(0,r.jsx)(R.zbc,{size:16})}),(0,r.jsx)(l.Z,{sx:{width:112,mx:.5},children:(0,r.jsx)(e$.ZP,{value:t,min:o,max:a,step:.1,onChange:(e,t)=>{i(t)},"aria-labelledby":"timeline-zoom-slider",sx:{height:10,padding:0,"& .MuiSlider-track":{height:2,backgroundColor:"#FFF",border:"none"},"& .MuiSlider-rail":{height:2,backgroundColor:"rgba(255, 255, 255, 0.2)",opacity:1},"& .MuiSlider-thumb":{width:12,height:12,backgroundColor:"#FFF",border:"none","&:hover, &.Mui-focusVisible":{boxShadow:"0 0 0 4px rgba(255, 255, 255, 0.16)"},"&.Mui-active":{boxShadow:"0 0 0 4px rgba(255, 255, 255, 0.16)"}}}})}),(0,r.jsx)(e4.Z,{size:"small",onClick:j,disabled:t>=a,sx:{width:16,height:16,minWidth:16,padding:0,color:t>=a?"#666666":"#FFF","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"},"&:disabled":{color:"#666666"}},children:(0,r.jsx)(R.EZt,{size:16})}),null]})]})};var tY=i(37840),tq=i(47707),tX=i(39204),tJ=i(70210);function tQ(e){let{playerRef:t}=e,i=u.wK.use.tracks(),o=u.wK.use.mediaAssets(),a=u.wK.use.outputSettings(),d=u.wK.use.globalConfig(),c=(0,b.d2)(t),p=u.wK.use.currentTimeInFrames(),h=(0,n.useMemo)(()=>(null==t?void 0:t.current)?c:p,[t,c,p]),m=u.wK.use.selectedItemId(),x=u.wK.use.selectItem(),[g,f]=(0,n.useState)(1),v=(0,n.useRef)(null),y=(0,n.useRef)(null),C=(0,n.useMemo)(()=>a.totalDurationInFrames,[a.totalDurationInFrames]),w=(0,n.useMemo)(()=>0!==i.length&&i.some(e=>e.items.length>0),[i]),{zoomMin:j,zoomMax:F}=(0,n.useMemo)(()=>{if(!w)return{zoomMin:.25,zoomMax:2.5};let e=1/0;return(i.forEach(t=>{t.items.forEach(t=>{"logo"!==t.type&&t.durationInFrames>0&&t.durationInFrames<e&&(e=t.durationInFrames)})}),Number.isFinite(e)&&e!==1/0)?{zoomMin:.25,zoomMax:Math.min(Math.max(1,C/e/2),10)}:{zoomMin:.25,zoomMax:2.5}},[i,C,w]),{contentWidth:k,framePerPixel:_,containerWidth:S}=(0,n.useMemo)(()=>{let e;let t=(e=v.current?v.current.clientWidth:window.innerWidth-90)*g,i=C/t;return{containerWidth:e,contentWidth:t,framePerPixel:i}},[g,C]);(0,b.rr)({containerWidth:S,contentWidth:k,scrollContainerRef:v,currentTimeInFrames:h});let{flatList:I,groupedTracks:Z,singleTracks:E}=(0,n.useMemo)(()=>(0,V.NN)(i),[i]),{shouldShowMusicEmptyTrack:A}=(0,n.useMemo)(()=>{let e=i.some(e=>"video"===e.type&&e.items.length>0),t=i.some(e=>"audio"===e.type&&e.items.length>0),r=i.some(e=>"music"===tJ.wD.getTrackCategory(e,o));return{hasVideoTracks:e,hasAudioTracks:t,hasMusicTracks:r,shouldShowMusicEmptyTrack:e&&!r}},[o,i]),M=(0,n.useCallback)(e=>{switch(tJ.wD.getTrackCategory(e,o)){case"image":case"video":return(0,r.jsx)(ic,{track:e,fps:d.fps,zoomLevel:g,selectedItemId:m,onSelectItem:x},e.id);case"music":return(0,r.jsx)(t7,{track:e,fps:d.fps,zoomLevel:g,selectedItemId:m,onSelectItem:x,audioType:"music"},e.id);case"voiceover":return(0,r.jsx)(t7,{track:e,fps:d.fps,zoomLevel:g,selectedItemId:m,onSelectItem:x,audioType:"voiceover"},e.id);default:return null}},[o,d.fps,g,m,x]),R=(0,n.useCallback)(e=>(0,r.jsx)(iu,{trackGroup:e,fps:d.fps,zoomLevel:g,selectedItemId:m,onSelectItem:x},e[0].id),[d.fps,g,m,x]);return(0,r.jsxs)(l.Z,{ref:y,sx:{width:"100%",height:"100%",bgcolor:"grey.800",display:"flex",flexDirection:"column",position:"relative"},children:[(0,r.jsx)(tK,{zoomLevel:g,onZoomChange:e=>{f(Math.max(j,Math.min(F,e)))},zoomMin:j,zoomMax:F,playerRef:t}),(0,r.jsxs)(l.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"row",overflow:"hidden"},children:[(0,r.jsx)(l.Z,{sx:{pt:`${eP.gI}px`,width:42,display:"flex",flexDirection:"column",flexShrink:0,flexGrow:0},children:(0,r.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:`${eP.ew}px`,justifyContent:"flex-start",alignItems:"center"},children:w?(0,r.jsxs)(r.Fragment,{children:[I.map(e=>(0,r.jsx)(t0,{track:e,mediaAssets:o},e.id)),A?(0,r.jsx)(l.Z,{sx:{width:24,height:`${eP.ZR}px`,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(tY.Z,{})}):null]}):(0,r.jsx)(l.Z,{sx:{width:24,height:`${eP.gd}px`,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(ej.Z,{})})})}),(0,r.jsx)(l.Z,{sx:{flexGrow:1,position:"relative",overflow:"hidden"},className:"timeline-editor-content-container",children:(0,r.jsx)(l.Z,{ref:v,sx:{width:"100%",height:"100%",overflowX:"auto",overflowY:"hidden",position:"relative","&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#2E2E2E3F",borderRadius:"4px",transition:"background-color 0.2s ease"},"&:hover::-webkit-scrollbar-thumb":{backgroundColor:"#2E2E2E5F"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"#2E2E2E7F"},"&::-webkit-scrollbar-track":{backgroundColor:"#2E2E2E0F"},"&::-webkit-scrollbar-corner":{backgroundColor:"#2E2E2E0F"}},className:"timeline-editor-scrollable-content",children:(0,r.jsxs)(l.Z,{sx:{position:"relative",width:`${k}px`,backgroundColor:"transparent",cursor:"text",height:"100%"},className:"timeline-editor-content-inner",children:[w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t8,{fps:d.fps,durationInFrames:C,framePerPixel:_}),(0,r.jsx)(t6,{currentTimeInFrames:h,fps:d.fps,durationInFrames:C,playerRef:t})]}):null,w?(0,r.jsxs)(r.Fragment,{children:[Z.map(R),E.map(M),A?(0,r.jsx)(t5,{zoomLevel:g,trackType:"audio",sx:{mb:`${eP.ew}px`}}):null]}):(0,r.jsx)(t5,{zoomLevel:g,trackType:"video",sx:{height:"100%",width:"100%"}})]})})})]}),(0,r.jsx)(t1,{containerRef:y})]})}function t0(e){let{track:t,mediaAssets:i}=e,o=(0,n.useMemo)(()=>tJ.wD.getTrackCategory(t,i),[t,i]),a=(0,n.useMemo)(()=>{switch(o){case"video":return(0,r.jsx)(ew.Z,{sx:{color:"#6290FF",width:20,height:20}});case"voiceover":return(0,r.jsx)(R.GSb,{sx:{color:"#28BED2",width:18,height:18}});case"music":return(0,r.jsx)(R.CG1,{sx:{color:"#831AC9",width:18,height:18}});default:return null}},[o]);return a?(0,r.jsx)(l.Z,{sx:{width:24,height:`${"video"===o?eP.gd:eP.ZR}px`,display:"flex",alignItems:"center",justifyContent:"center"},children:a}):null}function t1(e){let{containerRef:t}=e,[i,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=e=>{if(!t.current)return!1;let i=t.current.getBoundingClientRect();return e.clientX>=i.left&&e.clientX<=i.right&&e.clientY>=i.top&&e.clientY<=i.bottom},i=t=>{(0,V.nw)(t.dataTransfer)&&o(e(t))},r=t=>{(0,V.nw)(t.dataTransfer)&&o(e(t))},n=e=>{(0,V.nw)(e.dataTransfer)&&o(!1)},a=e=>{(0,V.nw)(e.dataTransfer)&&o(!1)},s=e=>{(0,V.nw)(e.dataTransfer)&&!e.relatedTarget&&o(!1)};return document.addEventListener("dragstart",i),document.addEventListener("dragover",r),document.addEventListener("dragend",n),document.addEventListener("drop",a),document.addEventListener("dragleave",s),()=>{document.removeEventListener("dragstart",i),document.removeEventListener("dragover",r),document.removeEventListener("dragend",n),document.removeEventListener("drop",a),document.removeEventListener("dragleave",s)}},[t]),i)?(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 231, 51, 0.11)",border:"2px dashed #998500",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1001},className:"drop-hint-overlay",onClick:e=>{e.stopPropagation(),o(!1)},children:(0,r.jsxs)(l.Z,{sx:{position:"relative",backgroundColor:"#FFE733",color:"black",padding:"8px 12px",borderRadius:"4px",fontSize:"16px",fontWeight:800,textAlign:"center",maxWidth:"80%",border:"1px solid yellow"},children:[(0,r.jsx)(tX.E.div,{style:{position:"absolute",top:-36,left:-36,zIndex:1},animate:{x:[0,-12,0],y:[0,-12,0],scale:[1,1.3,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:(0,r.jsx)(tq.Z,{sx:{color:"#EFDE10",fontSize:"40px",fontWeight:"bold",transform:"rotate(-45deg) scaleY(1.5)",filter:"drop-shadow(0 3px 6px rgba(0,0,0,0.5)) drop-shadow(0 0 8px rgba(255,231,51,0.4))",strokeWidth:2}})}),(0,r.jsx)(d.Z,{variant:"body1",sx:{color:"black",fontSize:"16px",fontWeight:800,lineHeight:1.3},children:"Add the asset to the asset library first"})]})}):null}var t2=i(93641);function t5(e){let{zoomLevel:t,trackType:i,sx:o}=e,a=u.wK.use.setTracks(),s=u.wK.use.addMediaAssetToTrack(),c=u.wK.use.tracks(),{operations:p}=(0,eO.ZY)(),[h,m]=(0,n.useState)({isDragOver:!1,isCompatible:!1}),[x,g]=(0,n.useState)(null),f=(0,n.useCallback)(()=>{let e=c.find(e=>"video"===i?"video"===e.type&&0===e.items.length:"audio"===i&&"audio"===e.type&&0===e.items.length);if(e)return e;let t="video"===i?"Video Track 1":"Music Track 1",r={id:`${i}-track-${Date.now()}`,type:i,name:t,items:[],..."audio"===i&&{subtype:"music"}};return a([...c,r]),r},[c,i,a]),v=(0,n.useCallback)(e=>{let t;e.preventDefault(),e.stopPropagation();let r=(0,V.MH)(e.dataTransfer);if(!r||"media-asset"!==r.source)return;let n={source:"media-asset",mediaAssetType:r.mediaAssetType,mediaAssetId:"unknown"},o=(0,V.JO)(n.mediaAssetType,i);o||(t="video"===i?"Only video and image files are allowed":"Only audio files are allowed"),g(n),m({isDragOver:!0,isCompatible:o,errorMessage:t})},[i]),y=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h.isDragOver&&x&&(e.dataTransfer.dropEffect=h.isCompatible?"copy":"none")},[h.isDragOver,h.isCompatible,x]),b=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let t=e.relatedTarget;e.currentTarget.contains(t)||(m({isDragOver:!1,isCompatible:!1}),g(null))},[]),C=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let t=(0,V.Tp)(e.dataTransfer);m({isDragOver:!1,isCompatible:!1}),g(null),(null==t?void 0:t.source)==="media-asset"&&h.isCompatible&&t.mediaAssetId&&(0,V.JO)(t.mediaAssetType,i)&&p.batchOperation("Add media asset to track",()=>{s(f().id,t.mediaAssetId,0)})},[h.isCompatible,i,p,f,s]),w="video"===i?eP.gd:eP.ZR;return(0,r.jsx)(l.Z,{sx:{width:"100%",height:`${w}px`,bgcolor:"grey.800",border:h.isDragOver?"2px dashed":"2px dashed transparent",borderColor:h.isDragOver?h.isCompatible?"#4A9EFF":"#ff6b6b":"transparent",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",cursor:"default",backgroundColor:h.isDragOver?h.isCompatible?"rgba(74, 158, 255, 0.1)":"rgba(255, 107, 107, 0.1)":"grey.800","&:hover":{bgcolor:"grey.750"},...o},onDragEnter:v,onDragOver:y,onDragLeave:b,onDrop:C,children:(0,r.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,opacity:h.isDragOver&&h.isCompatible?.8:.6},children:["video"===i?(0,r.jsx)(t2.Z,{sx:{fontSize:24,color:h.isDragOver?h.isCompatible?"#4A9EFF":"#ff6b6b":"text.disabled"}}):(0,r.jsx)(tY.Z,{sx:{fontSize:24,color:h.isDragOver?h.isCompatible?"#4A9EFF":"#ff6b6b":"text.disabled"}}),(0,r.jsx)(d.Z,{variant:"body2",sx:{textAlign:"center",color:h.isDragOver?h.isCompatible?"#4A9EFF":"#ff6b6b":"text.disabled",fontWeight:h.isDragOver?500:400,px:2},children:h.isDragOver?h.isCompatible?"video"===i?"Drop to create video track":"Drop to create music track":h.errorMessage||"Not allowed":"video"===i?"Drag video or image from Media Library to create a track":"Drag audio from Media Library to create a music track"})]})})}let t6=e=>{let{currentTimeInFrames:t,fps:i,durationInFrames:o,playerRef:a}=e,[s,d]=(0,n.useState)({dragging:!1,wasPlaying:!1}),c=(0,n.useRef)(null),u=Y.wK.use.setCurrentTimeInFrames(),p=Y.wK.use.selectItem(),h=Y.wK.use.setPreviewingMediaAsset(),m=100*t/o,x=(0,n.useCallback)((e,t)=>Math.floor(Math.max(0,Math.min(1,e/t))*o),[o]),g=(0,n.useCallback)(e=>{var t;if(!c.current)return;let i=(null==a?void 0:null===(t=a.current)||void 0===t?void 0:t.isPlaying())??!1;i&&(null==a?void 0:a.current)&&a.current.pause(),d({dragging:!0,wasPlaying:i});let r=c.current.getBoundingClientRect();u(Math.min(x(e.clientX-r.left,r.width),o)),p(null),h(void 0),e.currentTarget.setPointerCapture(e.pointerId)},[x,o,u,a,p,h]),f=(0,n.useCallback)(e=>{if(!s.dragging||!c.current)return;let t=c.current.getBoundingClientRect();u(Math.min(x(e.clientX-t.left,t.width),o))},[s.dragging,x,o,u]),v=(0,n.useCallback)(e=>{s.dragging&&(s.wasPlaying&&(null==a?void 0:a.current)&&a.current.play(),d({dragging:!1,wasPlaying:!1}),e.currentTarget.releasePointerCapture(e.pointerId))},[s,a]),b=(0,n.useCallback)(e=>{if(s.dragging||!c.current)return;let t=c.current.getBoundingClientRect();u(Math.min(x(e.clientX-t.left,t.width),o)),p(null),h(void 0)},[s.dragging,x,o,u,p,h]),C=(0,n.useMemo)(()=>({position:"absolute",top:0,left:`${m}%`,transform:"translateX(-42%)",width:"10px",height:"10px",borderRadius:"1px",backgroundColor:"white",cursor:s.dragging?"grabbing":"grab",zIndex:15,pointerEvents:"auto","&::after":{content:'""',position:"absolute",top:"9.6px",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"4px solid white"}}),[m,s.dragging]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Z,{ref:c,onClick:b,onPointerDown:g,onPointerMove:f,onPointerUp:v,sx:{position:"absolute",top:0,left:0,width:"100%",height:`${y.gI}px`,cursor:"text"},children:[(0,r.jsx)(l.Z,{sx:C}),(0,r.jsx)(l.Z,{sx:{position:"absolute",left:`${m}%`,top:0,bottom:0,width:"2px",backgroundColor:"white",pointerEvents:"none",zIndex:10}})]}),(0,r.jsx)(l.Z,{sx:{position:"absolute",left:`${m}%`,top:"30px",bottom:0,width:"2px",backgroundColor:"white",pointerEvents:"none",zIndex:20}})]})},t4={VERY_SPARSE:.1,SPARSE:.06,NORMAL:.03,DENSE:.02,VERY_DENSE:.01},t3={VERY_SPARSE:{major:30,minor:5},SPARSE:{major:20,minor:5},NORMAL:{major:10,minor:2},DENSE:{major:5,minor:1},VERY_DENSE:{major:2,minor:.5},ULTRA_DENSE:{major:1,minor:.2}},t8=e=>{let{fps:t,durationInFrames:i,framePerPixel:o}=e,a=(0,n.useMemo)(()=>i*(1+y.tj),[i]),{majorTicks:s,minorTicks:c}=(0,n.useMemo)(()=>{let e,i;let r=Math.ceil(a/t),n=o/t;n>t4.VERY_SPARSE?{major:e,minor:i}=t3.VERY_SPARSE:n>t4.SPARSE?{major:e,minor:i}=t3.SPARSE:n>t4.NORMAL?{major:e,minor:i}=t3.NORMAL:n>t4.DENSE?{major:e,minor:i}=t3.DENSE:n>t4.VERY_DENSE?{major:e,minor:i}=t3.VERY_DENSE:{major:e,minor:i}=t3.ULTRA_DENSE;let s=[],l=[];for(let t=0;t<=r;t+=e)s.push({time:t,label:`${t}s`});let d=i;for(let e=d;e<=r;e+=d)s.some(t=>.01>Math.abs(t.time-e))||l.push({time:e});return{majorTicks:s,minorTicks:l}},[t,a,o]);return(0,r.jsxs)(l.Z,{sx:{position:"relative",height:`${y.gI}px`,width:`${(1+y.tj)*100}%`,overflow:"hidden",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},className:"timeline-ruler",children:[s.map(e=>{let i=0===e.time;return(0,r.jsx)(l.Z,{sx:{position:"absolute",left:`${e.time*t*100/a}%`,height:"100%",transform:i?"translateX(10%)":"translateX(-50%)",display:"flex",flexDirection:"column",alignItems:"center",pt:.75},children:(0,r.jsx)(d.Z,{variant:"caption",sx:{fontSize:"9px",color:"rgba(255, 255, 255, 0.2)",textAlign:"center",fontFamily:"Inter",fontWeight:600,lineHeight:"12px",fontStyle:"normal"},children:i?"0":e.label})},`major-${e.time}`)}),c.map(e=>(0,r.jsx)(l.Z,{sx:{position:"absolute",left:`${e.time*t*100/a}%`,height:"100%",transform:"translateX(-50%)",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,r.jsx)(l.Z,{sx:{width:"2px",height:"2px",top:"10px",position:"relative",borderRadius:"50%",bgcolor:"rgba(255, 255, 255, 0.2)"}})},`minor-${e.time}`))]})},t7=e=>{let{track:t,fps:i,zoomLevel:o=1,selectedItemId:a,onSelectItem:c,audioType:u="music"}=e,p=Y.wK.use.outputSettings(),h=Y.wK.use.mediaAssets(),{operations:m}=(0,eO.ZY)(),x=Y.wK.use.addMediaAssetToTrack(),g=Y.wK.use.replaceTimelineItemWithMediaAsset(),f=Y.wK.use.reorderItemsInTrack(),[v,b]=(0,n.useState)(!1),C=(0,n.useCallback)(e=>{b(e)},[]),w=(0,V._3)(t.items,p.totalDurationInFrames,i),j=(0,n.useCallback)(e=>{c&&c(e)},[c]),F=(0,n.useCallback)((e,i,r,n)=>{switch(i){case"replace":"timeline-item"===e.source?console.warn("\uD83D\uDD0D [TimelineTrackAudio] Replace with timeline item not allowed"):"media-asset"===e.source&&e.mediaAssetId&&m.batchOperation("Replace audio timeline item with media asset",()=>{g(t.id,n.id,e.mediaAssetId)});break;case"insert-before":if("timeline-item"===e.source&&e.timelineItemId&&e.trackId===t.id){let i=t.items.findIndex(e=>e.id===n.id),r=t.items.findIndex(t=>t.id===e.timelineItemId);if(-1!==i&&-1!==r&&i!==r){let n=t.items.map(e=>e.id);n.splice(r,1),n.splice(r<i?i-1:i,0,e.timelineItemId),m.batchOperation("Reorder audio timeline items",()=>{f(t.id,n)})}}else if("media-asset"===e.source&&e.mediaAssetId){let i=t.items.findIndex(e=>e.id===n.id);-1!==i&&m.batchOperation("Insert media asset before audio timeline item",()=>{x(t.id,e.mediaAssetId,i)})}break;case"insert-after":if("timeline-item"===e.source&&e.timelineItemId&&e.trackId===t.id){let i=t.items.findIndex(e=>e.id===n.id),r=t.items.findIndex(t=>t.id===e.timelineItemId);if(-1!==i&&-1!==r&&i!==r){let n=t.items.map(e=>e.id);n.splice(r,1),n.splice(r<i?i:i+1,0,e.timelineItemId),m.batchOperation("Reorder audio timeline items",()=>{f(t.id,n)})}}else if("media-asset"===e.source&&e.mediaAssetId){let i=t.items.findIndex(e=>e.id===n.id);-1!==i&&m.batchOperation("Insert media asset after audio timeline item",()=>{x(t.id,e.mediaAssetId,i+1)})}}},[x,m,f,g,t.id,t.items]),k=t.items.filter(e=>"audio"===e.type);return(0,r.jsx)(s.Z,{direction:"row",sx:{height:`${y.ZR}px`,width:"100%",mb:`${y.ew}px`,position:"relative"},children:(0,r.jsxs)(l.Z,{sx:{position:"relative",height:"100%",flexGrow:1,width:"100%",overflow:"visible"},children:[0===k.length&&(0,r.jsx)(d.Z,{variant:"caption",sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",color:"text.disabled"},children:"Empty audio track. Drag audio items from Media Library."}),k.map(e=>{let n=h.find(t=>t.id===e.mediaAssetId),o=100*e.durationInFrames/p.totalDurationInFrames,s=100*e.startTimeInFrames/p.totalDurationInFrames;return(0,r.jsx)(tX.E.div,{layoutId:v?`timeline-item-${e.id}`:void 0,transition:v?{type:"spring",stiffness:500,damping:30,duration:.1}:{duration:0},animate:v,style:{position:"absolute",width:`calc(${o}% - 6px)`,left:`calc(${s}% + 3px)`,height:`${y.ZR}px`,top:0,bottom:0},children:(0,r.jsx)(it,{item:e,fps:i,trackType:u,onSelect:()=>j(e.id),isSelected:a===e.id,containerSx:{position:"relative",width:"100%",height:"100%",top:"auto",left:"auto"},onResize:()=>C(!1),dragData:{source:"timeline-item",timelineItemId:e.id,trackId:t.id,mediaAssetId:e.mediaAssetId,mediaAssetType:null==n?void 0:n.resource_type},onDrop:(t,i,r)=>F(t,i,r,e),isDropCompatible:e=>{let{source:i,mediaAssetType:r,trackId:n}=e;return"timeline-item"===i?n.toLowerCase()===t.id.toLowerCase():"media-asset"===i&&"audio"===r}})},e.id)}),w.map(e=>(0,r.jsx)(ir,{gap:e,trackType:t.type,trackId:t.id,totalDurationInFrames:p.totalDurationInFrames},e.id))]})})};var t9=i(20382);function ie(e){let{item:t,onResize:i}=e,r=u.wK.use.adjustSourceTrim(),o=u.wK.use.shiftItemsFromIndex(),a=u.wK.use.updateTotalDurationInFrames(),s=e1.jU.use.syncData(),l=u.wK.use.tracks(),{startOperation:d,endOperation:c}=(0,eO.ZY)(),p=(0,n.useRef)(t.durationInFrames),h=(0,n.useRef)(),m=(0,n.useRef)(!1),x=(0,n.useRef)(null),g=(0,n.useRef)();(0,n.useEffect)(()=>{if(!m.current){var e;p.current=t.durationInFrames,h.current=(null===(e=x.current)||void 0===e?void 0:e.offsetWidth)/t.durationInFrames}},[t.durationInFrames]);let f=(0,n.useCallback)(()=>{if(!t.groupId)return[];let e=[];return l.forEach(i=>{i.items.forEach((r,n)=>{r.groupId===t.groupId&&r.id!==t.id&&e.push({item:r,trackId:i.id,itemIndex:n})})}),e},[t.groupId,t.id,l]);return{handleResize:(0,n.useCallback)((e,n,o,a,s)=>{null==i||i();let l=e/h.current;Math.abs(l)>0&&(void 0===g.current&&(g.current=t.startTimeInFrames),m.current=!0,d("Resize item"),r(a,s,o,l),t.groupId&&f().forEach(e=>{let{item:t,trackId:i}=e;r(i,t.id,o,l)}))},[i,d,r,t.groupId,t.startTimeInFrames,f]),handleResizeEnd:(e,i,r,n)=>{m.current=!1,"left"===e&&(o(i,n,g.current,r),t.groupId&&f().forEach(e=>{let{item:t,trackId:i,itemIndex:r}=e;o(i,r,g.current,t.id)})),g.current=void 0,a(),setTimeout(()=>{c()&&s([],{fullSync:!0})},0)},containerRef:x}}let it=(0,n.memo)(e=>{let{item:t,fps:i,trackType:o,isSelected:a,containerSx:s,onResize:c,...u}=e,p=(0,Y.D)(e=>(0,Y.Z_)(e,t.mediaAssetId)),h=Y.wK.use.removeItemFromTrack(),m=Y.wK.use.selectItem(),x=Y.wK.use.tracks(),{operations:g}=(0,eO.ZY)(),f=(0,Y.D)(e=>e.outputSettings.totalDurationInFrames),{track:v,itemIndex:b}=(0,n.useMemo)(()=>{let e=x.find(e=>e.items.some(e=>e.id===t.id));return e?{track:e,itemIndex:e.items.findIndex(e=>e.id===t.id)}:{track:void 0,itemIndex:void 0}},[x,t.id]),{handleResize:C,handleResizeEnd:w,containerRef:j}=ie({item:t,onResize:c}),F=(0,n.useCallback)(()=>{g.batchOperation("Delete audio",()=>{h(null==v?void 0:v.id,t.id,!0)}),m(null)},[null==v?void 0:v.id,t.id,h,m,g]),{widthPercent:k,leftPercent:_}=(0,n.useMemo)(()=>({widthPercent:100*t.durationInFrames/f,leftPercent:100*t.startTimeInFrames/f}),[t.durationInFrames,t.startTimeInFrames,f]),S=(0,n.useMemo)(()=>"music"===o?"#653597":"#1142A2",[o]);return(0,r.jsx)(l.Z,{ref:j,sx:{position:"absolute",width:`calc(${k}% - 6px)`,left:`calc(${_}% + 3px)`,height:`${y.ZR}px`,top:0,bottom:0,...s},children:(0,r.jsx)(il,{...u,isSelected:a,onResize:(e,i,r)=>C(e,i,r,null==v?void 0:v.id,t.id),onResizeEnd:e=>w(e,null==v?void 0:v.id,t.id,b),onDelete:F,children:(0,r.jsxs)(l.Z,{sx:{position:"relative",width:"100%",height:"100%",borderRadius:1,overflow:"hidden","&:hover":{"&>.audio-title":{opacity:1}}},className:"audio-track-item",children:[(0,r.jsx)(ii,{item:t,baseColor:S}),(0,r.jsx)(t9.z,{audioUrl:null==p?void 0:p.url,sx:{height:"100%",py:"2px"},barColor:"music"===o?"#A386C1":"#9CBAFF"}),(0,r.jsx)(d.Z,{variant:"caption",display:"block",noWrap:!0,className:"audio-title",sx:{flex:1,display:"flex",alignItems:"center",position:"absolute",opacity:0,transition:"opacity 0.3s ease-in-out",bottom:0,left:0,pl:"10px",pr:"6px",top:0,backgroundColor:S,color:"white",textAlign:"center",fontFamily:"Inter",fontSize:"12px",fontWeight:400,lineHeight:"21.53px",borderRadius:1},children:t.title||t.id})]})})})});function ii(e){let{item:t,baseColor:i}=e,n=t.effects||[],o=n.find(e=>"fade-in"===e.type),a=n.find(e=>"fade-out"===e.type),s=(null==o?void 0:o.durationInFrames)||0,l=(null==a?void 0:a.durationInFrames)||0,d=t.durationInFrames,c=100*s/d,u=100*l/d,p=100-c-u;return(0,r.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[s>0&&(0,r.jsx)("path",{d:(()=>{if(0===s)return"";let e=[],t=Math.max(20,Math.floor(c));e.push("M 0 100");for(let i=0;i<=t;i++){let r=i/t*s,n=(0,y.aD)(r,s),o=i/t*c,a=100-100*n;e.push(`L ${o} ${a}`)}return e.push(`L ${c} 100`),e.push("Z"),e.join(" ")})(),fill:i}),p>0&&(0,r.jsx)("path",{d:(()=>{if(p<=0)return"";let e=Math.max(0,c-.1),t=Math.min(100,100-u+.1);return`M ${e} 0 L ${t} 0 L ${t} 100 L ${e} 100 Z`})(),fill:i}),l>0&&(0,r.jsx)("path",{d:(()=>{if(0===l)return"";let e=[],t=100-u,i=Math.max(20,Math.floor(u));e.push(`M ${t} 0`);for(let r=0;r<=i;r++){let n=r/i*l,o=d-l+n,a=(0,y.Xm)(o,l,d),s=t+r/i*u,c=100-100*a;e.push(`L ${s} ${c}`)}return e.push("L 100 100"),e.push(`L ${t} 100`),e.push("Z"),e.join(" ")})(),fill:i})]})}it.displayName="TimelineTrackItemAudio";let ir=e=>{let{gap:t,trackType:i,trackId:o,totalDurationInFrames:a,sx:s}=e,{operations:c}=(0,eO.ZY)(),u=Y.wK.use.addMediaAssetToTrack(),p=(0,n.useMemo)(()=>100*t.durationInFrames/a,[t.durationInFrames,a]),h=(0,n.useMemo)(()=>100*t.startTimeInFrames/a,[t.startTimeInFrames,a]),[m,x]=(0,n.useState)({isDragOver:!1,isCompatible:!1}),[g,f]=(0,n.useState)(null),v=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let t=(0,V.MH)(e.dataTransfer);if(!t||"media-asset"!==t.source)return;let r={source:"media-asset",mediaAssetType:t.mediaAssetType,mediaAssetId:"unknown"},n=(0,V.JO)(r.mediaAssetType,i);f(r),x({isDragOver:!0,isCompatible:n,errorMessage:n?void 0:"Not allowed"})},[i]),y=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m.isDragOver&&g&&(e.dataTransfer.dropEffect=m.isCompatible?"copy":"none")},[m.isDragOver,m.isCompatible,g]),b=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let t=e.relatedTarget;e.currentTarget.contains(t)||(x({isDragOver:!1,isCompatible:!1}),f(null))},[]),C=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let i=(0,V.Tp)(e.dataTransfer);x({isDragOver:!1,isCompatible:!1}),f(null),(null==i?void 0:i.source)==="media-asset"&&m.isCompatible&&i.mediaAssetId&&c.batchOperation("Add media asset to track",()=>{u(o,i.mediaAssetId,t.insertIndex,"end"===t.type?void 0:t.durationInFrames)})},[u,m.isCompatible,t.durationInFrames,t.insertIndex,t.type,c,o]);return(0,r.jsx)(l.Z,{sx:{position:"absolute",left:`${h}%`,width:`${p}%`,height:"100%",top:0,bottom:0,borderRadius:1,pointerEvents:"auto",overflow:"hidden",border:m.isDragOver?void 0:"none",backgroundColor:"transparent",transition:"all 0.2s ease",...m.isDragOver&&{border:`2px dashed ${m.isCompatible?"#4A9EFF":"#ff6b6b"}`,backgroundColor:m.isCompatible?"rgba(74, 158, 255, 0.2)":"rgba(255, 107, 107, 0.2)"},"&:hover":{},...s},onDragEnter:v,onDragOver:y,onDragLeave:b,onDrop:C,children:p>=5&&m.isDragOver&&(0,r.jsx)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",textAlign:"center",px:1},children:(0,r.jsx)(d.Z,{variant:"caption",sx:{fontSize:"11px",fontWeight:500,color:m.isCompatible?"#4A9EFF":"#ff6b6b",whiteSpace:"nowrap",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:m.isCompatible?m.isDragOver&&m.isCompatible?"Insert here":"":m.errorMessage})})})};ir.displayName="TimelineTrackItemPlaceholder";var io=i(24033),ia=i(59437);let is=n.forwardRef((e,t)=>{let{anchorEl:i,anchorPosition:n,open:o,onClose:a,onDelete:s}=e;return(0,r.jsx)(ia.Z,{open:o,anchorEl:n?void 0:i,placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,8]}}],sx:{zIndex:1300},...n&&{anchorEl:{getBoundingClientRect:()=>({top:n.top,left:n.left,right:n.left,bottom:n.top,width:0,height:0})}},children:(0,r.jsx)(l.Z,{ref:t,sx:{backgroundColor:"#1A1A1A",border:"1px solid #333",borderRadius:"8px",boxShadow:"0px 4px 12px 0px rgba(0, 0, 0, 0.4)",overflow:"hidden",width:"100px"},children:(0,r.jsx)(f.Z,{onClick:()=>{s(),a()},sx:{width:"100%",justifyContent:"center",alignItems:"center",color:"#888",backgroundColor:"transparent",borderRadius:0,padding:.5,fontSize:"14px",fontWeight:500,textTransform:"none","&:hover":{backgroundColor:"#2E2E2E"}},startIcon:(0,r.jsx)(io.Z,{sx:{fontSize:"16px",color:"#888"}}),children:"Delete"})})})});is.displayName="TimelineItemContextMenu";let il=e=>{let{draggable:t=!0,droppable:i=!0,isGroupWrapper:o=!1,onSelect:a,isSelected:s,allowResize:d=!0,onDragEnd:c,onDragOver:u,onDrop:p,onResize:h,onResizeEnd:m,isDropCompatible:x,dragData:g,onDelete:f,sx:v,children:y}=e,[b,C]=(0,n.useState)(!1),[w,j]=(0,n.useState)(!1),[F,k]=(0,n.useState)("none"),[_,S]=(0,n.useState)(!1),[I,Z]=(0,n.useState)(),[E,A]=(0,n.useState)(null),[M,R]=(0,n.useState)(null),T=!!M,D=(0,n.useRef)(null),z=(0,n.useRef)(null),P=(0,n.useMemo)(()=>{switch(F){case"replace":return"Replace";case"insert-before":return"Insert before";case"insert-after":return"Insert after";default:return""}},[F]),L=(0,n.useCallback)(e=>{e.stopPropagation(),null==a||a()},[a]),W=(0,n.useCallback)((e,t)=>{if(e.stopPropagation(),e.preventDefault(),!h||!s||!d)return;C(!0);let i=e.clientX,r=e=>{let r=e.clientX,n=r-i;i=r,Math.abs(n)>0&&h(n,0,t)},n=()=>{C(!1),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),null==m||m(t)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",n)},[d,s,h,m]),B=(0,n.useCallback)(e=>{if(t){if(e.stopPropagation(),!g){console.warn("TimelineTrackItemWrapper: No drag data available"),e.preventDefault();return}j(!0),(0,V.tn)(e.dataTransfer,g),e.dataTransfer.effectAllowed="copy"}},[g,t]),H=(0,n.useCallback)(e=>{if(!i||(0,V.nw)(e.dataTransfer)||(e.preventDefault(),e.stopPropagation(),w))return;S(!0);let t=(0,V.MH)(e.dataTransfer);if(!t||!x){Z(!1);return}let r={source:t.source,...t.mediaAssetType&&{mediaAssetType:t.mediaAssetType},..."media-asset"===t.source&&{mediaAssetId:"unknown"},..."timeline-item"===t.source&&{timelineItemId:"unknown",trackId:t.trackId},..."timeline-group"===t.source&&{groupId:t.groupId}},n=x(r);Z(n),n&&A(r)},[i,w,x]),U=(0,n.useCallback)(e=>{if(!i||(0,V.nw)(e.dataTransfer)||(e.preventDefault(),e.stopPropagation(),!E||!z.current||!I))return;S(!0);let t=z.current.getBoundingClientRect(),r=(0,V.Ru)(e.clientX,t,0).type;("timeline-item"===E.source||"timeline-group"===E.source||"media-asset"===E.source&&o)&&(r=(e.clientX-t.left)/t.width<.5?"insert-before":"insert-after"),k(r),e.dataTransfer.dropEffect="copy",null==u||u(e)},[E,i,I,o,u]),O=(0,n.useCallback)(e=>{var t;if(!i||(0,V.nw)(e.dataTransfer))return;e.preventDefault(),e.stopPropagation();let r=e.relatedTarget;(null===(t=z.current)||void 0===t?void 0:t.contains(r))||(S(!1),k("none"),A(null))},[i]),$=(0,n.useCallback)(e=>{if(!i||(0,V.nw)(e.dataTransfer))return;e.preventDefault(),e.stopPropagation();let t=(0,V.Tp)(e.dataTransfer);p&&t&&"none"!==F&&p(t,F,e),S(!1),k("none"),A(null)},[i,p,F]),N=(0,n.useCallback)(e=>{!t||(0,V.nw)(e.dataTransfer)||(j(!1),null==c||c(e))},[t,c]),G=(0,n.useCallback)(e=>{L(e),f&&(e.preventDefault(),e.stopPropagation(),R({top:e.clientY,left:e.clientX}))},[L,f]),K=(0,n.useCallback)(()=>{R(null)},[]),Y=(0,n.useCallback)(()=>{null==f||f()},[f]);(0,n.useEffect)(()=>{let e=e=>{if(T){var t;(null===(t=D.current)||void 0===t?void 0:t.contains(e.target))||R(null)}};if(T)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[T]);let q=(0,n.useMemo)(()=>_&&("none"!==F&&P||!I),[_,F,P,I]),X=(0,n.useMemo)(()=>w?.2:_?.6:1,[_,w]),J=(0,n.useMemo)(()=>q&&("insert-before"===F||"insert-after"===F)?1:0,[q,F]);return(0,r.jsxs)(l.Z,{ref:z,sx:{userSelect:"none",position:"relative",width:"100%",height:"100%",opacity:X,cursor:b?"ew-resize":w?"grabbing":"grab",boxShadow:s?"inset 0 0 0 2px #6290FF":"none",borderRadius:1,transition:"all 0.1s ease",transform:w?"scale(0.98)":"scale(1)","&::before":s?{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,border:"2px solid #6290FF",borderRadius:1,pointerEvents:"none",zIndex:1e3}:{},...v},onClick:L,onContextMenu:G,draggable:!b&&!!g&&t,onDragStart:B,onDragEnd:N,onDragEnter:H,onDragOver:U,onDragLeave:O,onDrop:$,children:[y,f?(0,r.jsx)(is,{ref:D,anchorPosition:M,open:T,onClose:K,onDelete:Y}):null,q?(0,r.jsx)(l.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",border:"2px dashed #6290FF",borderRadius:1,display:"flex",alignItems:"center",overflow:"hidden",justifyContent:"center",pointerEvents:"none",zIndex:1001},className:"drop-hint-overlay",children:I?(0,r.jsx)(l.Z,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"16px",fontWeight:800},children:P}):(0,r.jsx)(l.Z,{sx:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"rgba(255, 107, 107, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative","&::before":{content:'""',position:"absolute",width:"20px",height:"2px",backgroundColor:"white"}}})}):null,J?(0,r.jsx)(l.Z,{sx:{position:"absolute",left:"insert-before"===F?-6:"auto",right:"insert-after"===F?-6:"auto",top:"-5px",width:"6px",height:"calc(100% + 10px)",backgroundColor:"#6290FF",pointerEvents:"none",zIndex:1002,"&::before":{content:'""',position:"absolute",left:"50%",top:0,transform:"translateX(-50%)",width:0,height:0,borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderTop:"12px solid #6290FF"},"&::after":{content:'""',position:"absolute",left:"50%",bottom:0,transform:"translateX(-50%)",width:0,height:0,borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderBottom:"12px solid #6290FF"}}}):null,(0,r.jsx)(l.Z,{className:"resize-handle",role:"button",tabIndex:0,"aria-label":"Resize left edge",sx:{position:"absolute",left:-3,top:"50%",transform:"translateY(-50%)",width:"5px",backgroundColor:"#6290FF",cursor:"ew-resize",borderRadius:"2px",height:"50%",minHeight:"20px",opacity:s&&"none"===F&&d?1:0,transition:"opacity 0.2s",zIndex:10},onMouseDown:e=>W(e,"left")}),(0,r.jsx)(l.Z,{className:"resize-handle",role:"button",tabIndex:0,"aria-label":"Resize right edge",sx:{position:"absolute",right:-3,top:"50%",transform:"translateY(-50%)",width:"5px",backgroundColor:"#6290FF",cursor:"ew-resize",borderRadius:"2px",height:"50%",minHeight:"20px",opacity:s&&"none"===F&&d?1:0,transition:"opacity 0.2s",zIndex:10},onMouseDown:e=>W(e,"right")})]})},id=e=>{let{item:t,fps:i,isSelected:o,containerSx:a,onResize:s,...d}=e,c=Y.wK.use.mediaAssets(),u=Y.wK.use.tracks(),p=Y.wK.use.removeItemFromTrack(),h=Y.wK.use.selectItem(),m=Y.wK.use.outputSettings().totalDurationInFrames,{operations:x}=(0,eO.ZY)(),g=(0,n.useMemo)(()=>c.find(e=>e.id===t.mediaAssetId),[c,t.mediaAssetId]),f=(t.durationInFrames/i).toFixed(1),{widthPercent:v,leftPercent:b}=(0,n.useMemo)(()=>({widthPercent:100*t.durationInFrames/m,leftPercent:100*t.startTimeInFrames/m}),[t.durationInFrames,t.startTimeInFrames,m]),{track:C,itemIndex:w}=(0,n.useMemo)(()=>{let e=u.find(e=>e.items.some(e=>e.id===t.id));return e?{track:e,itemIndex:e.items.findIndex(e=>e.id===t.id)}:{track:void 0,itemIndex:void 0}},[u,t.id]),{handleResize:j,handleResizeEnd:F,containerRef:k}=ie({item:t,onResize:s}),_=(0,n.useCallback)(()=>{x.batchOperation("Delete video",()=>{p(null==C?void 0:C.id,t.id,!0)}),h(null)},[null==C?void 0:C.id,t.id,p,h,x]),S=(0,n.useMemo)(()=>{switch(t.type){case"overlay":return(0,r.jsxs)(l.Z,{className:"overlay-placeholder",sx:{width:"100%",height:"100%",bgcolor:"#2e2e2e",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"8px",padding:"4px"},children:[(0,r.jsx)(l.Z,{sx:{width:"36px",height:"20.7px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"37",height:"21",viewBox:"0 0 37 21",fill:"none",children:(0,r.jsx)("path",{d:"M28.7363 0C29.4479 0 30.0573 0.253699 30.5645 0.760742C31.0717 1.26796 31.3251 1.8771 31.3242 2.58789V8.41016L35.4004 4.33496C35.616 4.11931 35.8535 4.06503 36.1123 4.17285C36.3707 4.28067 36.4999 4.48553 36.5 4.78711V15.915C36.5 16.2168 36.3707 16.4214 36.1123 16.5293C35.8536 16.6371 35.616 16.5837 35.4004 16.3682L31.3242 12.292V18.1152C31.3241 18.8267 31.0707 19.4363 30.5645 19.9434C30.0582 20.4503 29.4487 20.703 28.7363 20.7021H3.08789C2.37629 20.7021 1.76707 20.4496 1.26074 19.9434C0.754506 19.4371 0.500976 18.8275 0.5 18.1152V2.58789C0.5 1.87624 0.75353 1.26709 1.26074 0.760742C1.76796 0.254392 2.3771 0.000862607 3.08789 0H12.9082L12.0068 3.30371L15.3105 6.60742L14.0508 9.30957L15.6113 13.5146L16.6729 9.61035L18.4746 6.60742L16.5117 3.9043L18.0137 0H28.7363Z",fill:"#888888"})})}),(0,r.jsx)(l.Z,{component:"p",sx:{color:"#aaaaaa",fontSize:"11px",fontWeight:500,fontFamily:"Inter, sans-serif",textAlign:"center",lineHeight:"normal",margin:0,minWidth:"min-content",maxHeight:"2.4em",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical","&:hover":{overflow:"visible",whiteSpace:"normal",height:"auto",maxHeight:"none"}},children:"Generation failed. No credit used."})]});case"video":return(null==g?void 0:g.thumbnail_url)?(0,r.jsx)("img",{src:g.thumbnail_url,alt:"video thumbnail",style:{height:"100%",width:"100%",objectFit:"cover"}}):(0,r.jsx)(l.Z,{className:"video-placeholder",sx:{width:"100%",height:"100%",bgcolor:"primary.dark"}});case"image":return(null==g?void 0:g.url)?(0,r.jsx)("img",{src:g.url,alt:"preview",style:{height:"100%",width:"100%",objectFit:"contain"}}):(0,r.jsx)(l.Z,{className:"image-placeholder",sx:{width:"100%",height:"100%",bgcolor:"purple.dark"}});case"logo":return(0,r.jsx)(l.Z,{className:"logo-placeholder",sx:{width:"100%",height:"100%",bgcolor:"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:500,textAlign:"center",padding:"4px"},children:(0,r.jsx)("svg",{width:"40",height:"26",viewBox:"0 0 40 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M26.8739 4.94336C28.9767 4.94486 30.9938 5.77188 32.4843 7.24345C33.9748 8.71508 34.8183 10.7119 34.83 12.798C34.8244 14.3286 34.3706 15.8249 33.5236 17.1042C32.6766 18.3835 31.4726 19.3906 30.059 20.0036C28.6454 20.6167 27.083 20.8094 25.5613 20.5574C24.0395 20.3054 22.6243 19.6198 21.488 18.5845C20.0902 17.4273 18.6853 16.2867 17.2739 15.1623L19.2945 13.562C21.266 15.13 22.9757 16.5164 23.6494 17.0545C24.5755 17.7413 25.701 18.1131 26.8573 18.1135C29.7471 18.1132 32.3072 15.7199 32.2576 12.798C32.2477 11.8117 31.963 10.8476 31.4357 10.0114C30.9084 9.17523 30.1589 8.49936 29.2692 8.05914C28.3794 7.61897 27.3841 7.43147 26.3935 7.51672C25.4029 7.60204 24.4547 7.9568 23.6546 8.54255C19.3677 12.0722 14.9463 15.4861 10.5807 18.9116C8.81366 20.1465 6.71999 18.9319 6.71965 16.8868C6.69632 14.1672 6.69632 11.4487 6.71965 8.73302C6.72573 6.67911 8.81688 5.44978 10.5869 6.6793L15.3496 10.5072L13.3808 12.0869L9.27748 8.87483C9.2561 11.494 9.2561 14.1097 9.27748 16.7212C13.3922 13.5388 17.4838 10.319 21.4994 7.02089C22.9643 5.68349 24.8831 4.94168 26.8739 4.94336Z",fill:"white"})})});default:return(0,r.jsx)(l.Z,{className:"default-placeholder",sx:{width:"100%",height:"100%",bgcolor:"primary.dark"}})}},[t.type,null==g?void 0:g.thumbnail_url,null==g?void 0:g.url]);return(0,r.jsx)(l.Z,{ref:k,sx:{position:"absolute",width:`calc(${v}% - 6px)`,left:`calc(${b}% + 3px)`,height:`${y.gd}px`,top:0,bottom:0,"&:hover .video-overlay":{opacity:1},...a},className:"timeline-item-video",children:(0,r.jsx)(il,{...d,isSelected:o,onResize:(e,i,r)=>j(e,i,r,null==C?void 0:C.id,t.id),onResizeEnd:e=>F(e,null==C?void 0:C.id,t.id,w),onDelete:_,children:(0,r.jsxs)(l.Z,{sx:{position:"relative",width:"100%",height:"100%",overflow:"hidden",borderRadius:1,border:"none",backgroundColor:"#2e2e2e"},children:[S,"overlay"!==t.type&&"logo"!==t.type&&(0,r.jsxs)(l.Z,{className:"video-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0,transition:"opacity 0.2s ease",...o&&{opacity:1}},children:[(0,r.jsx)(eD,{sx:{top:"4.69px",left:"4.69px",display:"none"},children:t.title||"Video"}),(0,r.jsxs)(eD,{sx:{bottom:"4.69px",right:"4.69px"},children:[f,"s"]})]})]})})})},ic=e=>{let{track:t,fps:i,zoomLevel:o=1,selectedItemId:a,onSelectItem:c}=e,u=Y.wK.use.outputSettings(),p=Y.wK.use.mediaAssets(),{operations:h}=(0,eO.ZY)(),m=Y.wK.use.addMediaAssetToTrack(),x=Y.wK.use.replaceTimelineItemWithMediaAsset(),g=Y.wK.use.reorderItemsInTrack(),[f,v]=(0,n.useState)(!1),b=(0,n.useCallback)(e=>{v(e)},[]),C=(0,n.useMemo)(()=>(0,V._3)(t.items,u.totalDurationInFrames,i),[t.items,u.totalDurationInFrames,i]),w=(0,n.useCallback)(e=>{c&&c(e)},[c]),j=(0,n.useMemo)(()=>t.items.filter(e=>"video"===e.type||"image"===e.type||"overlay"===e.type||"logo"===e.type),[t.items]),F=(0,n.useCallback)((e,i,r,n)=>{switch(i){case"replace":"timeline-item"===e.source?console.warn("\uD83D\uDD0D [TimelineTrackVideo] Replace with timeline item not allowed"):"media-asset"===e.source&&e.mediaAssetId&&h.batchOperation("Replace video timeline item with media asset",()=>{x(t.id,n.id,e.mediaAssetId)});break;case"insert-before":if("timeline-item"===e.source&&e.timelineItemId&&e.trackId===t.id){let i=t.items.findIndex(e=>e.id===n.id),r=t.items.findIndex(t=>t.id===e.timelineItemId);if(-1!==i&&-1!==r&&i!==r){let n=t.items.map(e=>e.id);n.splice(r,1),n.splice(r<i?i-1:i,0,e.timelineItemId),h.batchOperation("Reorder video timeline items",()=>{g(t.id,n)})}}else if("media-asset"===e.source&&e.mediaAssetId){let i=t.items.findIndex(e=>e.id===n.id);-1!==i&&h.batchOperation("Insert media asset before video timeline item",()=>{m(t.id,e.mediaAssetId,i)})}break;case"insert-after":if("timeline-item"===e.source&&e.timelineItemId&&e.trackId===t.id){let i=t.items.findIndex(e=>e.id===n.id),r=t.items.findIndex(t=>t.id===e.timelineItemId);if(-1!==i&&-1!==r&&i!==r){let n=t.items.map(e=>e.id);n.splice(r,1),n.splice(r<i?i:i+1,0,e.timelineItemId),h.batchOperation("Reorder video timeline items",()=>{g(t.id,n)})}}else if("media-asset"===e.source&&e.mediaAssetId){let i=t.items.findIndex(e=>e.id===n.id);-1!==i&&h.batchOperation("Insert media asset after video timeline item",()=>{m(t.id,e.mediaAssetId,i+1)})}}},[t.id,t.items,h,x,g,m]);return(0,r.jsx)(s.Z,{direction:"row",sx:{height:`${y.gd}px`,width:"100%",mb:`${y.ew}px`},children:(0,r.jsxs)(l.Z,{sx:{position:"relative",height:"100%",flexGrow:1,bgcolor:"grey.800","&:hover":{bgcolor:"grey.750"},width:"100%",overflow:"visible"},children:[0===j.length&&(0,r.jsx)(d.Z,{variant:"caption",sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",color:"text.disabled"},children:"Empty video track. Drag video or image items from Media Library."}),j.map(e=>{let n=p.find(t=>t.id===e.mediaAssetId),o=100*e.durationInFrames/u.totalDurationInFrames,s=100*e.startTimeInFrames/u.totalDurationInFrames;return(0,r.jsx)(tX.E.div,{layoutId:f?`timeline-item-${e.id}`:void 0,transition:f?{type:"spring",stiffness:500,damping:30,duration:.1}:{duration:0},animate:f,style:{position:"absolute",width:`calc(${o}% - 6px)`,left:`calc(${s}% + 3px)`,height:`${y.gd}px`,top:0,bottom:0},children:(0,r.jsx)(id,{item:e,fps:i,onSelect:()=>w(e.id),isSelected:a===e.id,containerSx:{position:"relative",width:"100%",height:"100%",top:"auto",left:"auto"},dragData:{source:"timeline-item",timelineItemId:e.id,trackId:t.id,mediaAssetId:e.mediaAssetId,mediaAssetType:null==n?void 0:n.resource_type},onResize:()=>b(!1),onDrop:(t,i,r)=>F(t,i,r,e),isDropCompatible:e=>{let{source:i,mediaAssetType:r,trackId:n}=e;return"timeline-item"===i?n.toLowerCase()===t.id.toLowerCase():"media-asset"===i&&("video"===r||"image"===r)}})},e.id)}),C.map(e=>(0,r.jsx)(ir,{gap:e,trackType:t.type,trackId:t.id,totalDurationInFrames:u.totalDurationInFrames},e.id))]})})},iu=e=>{let{trackGroup:t,fps:i,zoomLevel:o=1,selectedItemId:a,onSelectItem:c}=e,u=Y.wK.use.outputSettings(),p=Y.wK.use.selectedGroupId(),h=Y.wK.use.selectGroup(),m=Y.wK.use.selectedItemId(),x=Y.wK.use.selectItem(),g=Y.wK.use.addMediaAssetToTrack(),f=Y.wK.use.reorderItemsInTrack(),v=Y.wK.use.updateItemInTrack(),[b,C]=(0,n.useState)(!1),w=(0,n.useCallback)(e=>{C(e)},[]),j=void 0!==a?a:m,F=c||x,k=(0,n.useMemo)(()=>t.map(e=>(0,V._3)(e.items,u.totalDurationInFrames,i)),[t,u.totalDurationInFrames,i]),{timelineItemGroups:_,singleTimelineItems:S}=(0,n.useMemo)(()=>{let e=t.flatMap(e=>e.items);return{timelineItemGroups:Array.from(new Set(e.map(e=>e.groupId).filter(Boolean))).map(t=>({id:t,items:e.filter(e=>e.groupId===t)})),singleTimelineItems:e.filter(e=>!e.groupId)}},[t]),I=(0,n.useCallback)((e,i)=>{if(i){let i=t.flatMap(e=>e.items).find(t=>t.id===e);if(!(null==i?void 0:i.groupId))return;let r=p===i.groupId;r?r&&!j?F(e):r&&j&&j!==e&&F(e):(h(i.groupId),F(null))}else F(e),h()},[h,F,t,p,j]),Z=(0,n.useCallback)(e=>{e&&p!==e&&(h(e),F(null))},[h,F,p]),E=(0,n.useCallback)((e,i,r)=>{let n;let o=t.flatMap(t=>t.items.filter(t=>t.groupId===e)),a=t.flatMap(e=>e.items.filter(e=>e.groupId===i));if(0===o.length||0===a.length)return;let{allGroupIds:s,groupMetadata:l}=function(e){let t=new Set;e.forEach(e=>{e.items.forEach(e=>{e.groupId&&t.add(e.groupId)})});let i=new Map;return t.forEach(t=>{let r=e.flatMap(e=>e.items.filter(e=>e.groupId===t)),n=ip(r);i.set(t,{items:r,startTime:n.startTime,duration:n.duration,itemsByTrack:new Map}),e.forEach(e=>{let r=e.items.filter(e=>e.groupId===t);r.length>0&&i.get(t).itemsByTrack.set(e.id,r)})}),{allGroupIds:t,groupMetadata:i}}(t);ip(o),ip(a);let d=Array.from(s).sort((e,t)=>l.get(e).startTime-l.get(t).startTime),c=d.indexOf(e),u=d.indexOf(i);if(-1===c||-1===u||c===u)return;let p=[...d];p.splice(c,1),n="before"===r?c<u?u-1:u:c<u?u:u+1,p.splice(n,0,e);let h=0,m=new Map;p.forEach(e=>{let t=l.get(e);m.set(e,{oldStartTime:t.startTime,newStartTime:h,duration:t.duration}),h+=t.duration}),t.forEach(e=>{p.forEach(t=>{let i=l.get(t).itemsByTrack.get(e.id)||[],r=m.get(t);i.forEach(t=>{let i=t.startTimeInFrames-r.oldStartTime,n=r.newStartTime+i;t.startTimeInFrames!==n&&v(e.id,{id:t.id,startTimeInFrames:n})})});let t=[];p.forEach(i=>{let r=[...l.get(i).itemsByTrack.get(e.id)||[]].sort((e,t)=>{let r=m.get(i);return e.startTimeInFrames-r.oldStartTime-(t.startTimeInFrames-r.oldStartTime)});t.push(...r.map(e=>e.id))});let i=e.items.filter(e=>!e.groupId);t.push(...i.map(e=>e.id)),f(e.id,t)})},[t,v,f]),A=(0,n.useCallback)((e,i)=>{let r=t.find(t=>"video"===e.mediaAssetType||"image"===e.mediaAssetType?"video"===t.type:"audio"===e.mediaAssetType&&"audio"===t.type);if(!r)return;let n=r.items.filter(e=>e.groupId===i.id);if(n.length>0){n.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames);let t=n[0],i=r.items.findIndex(e=>e.id===t.id);-1!==i&&g(r.id,e.mediaAssetId,i)}},[t,g]),M=(0,n.useCallback)((e,i)=>{let r=t.find(t=>"video"===e.mediaAssetType||"image"===e.mediaAssetType?"video"===t.type:"audio"===e.mediaAssetType&&"audio"===t.type);if(!r)return;let n=r.items.filter(e=>e.groupId===i.id);if(n.length>0){n.sort((e,t)=>t.startTimeInFrames-e.startTimeInFrames);let t=n[0],i=r.items.findIndex(e=>e.id===t.id)+1;i>0&&g(r.id,e.mediaAssetId,i)}},[t,g]),R=(0,n.useCallback)((e,i)=>{let r=t.find(t=>t.id===e.trackId);if(!r||!r.items.find(t=>t.id===e.timelineItemId))return;let n=r.items.filter(e=>e.groupId===i.id);if(n.length>0){n.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames);let t=n[0],i=r.items.map(e=>e.id),o=i.indexOf(e.timelineItemId),a=i.indexOf(t.id);if(-1!==o&&-1!==a&&o!==a){let t=[...i];t.splice(o,1),t.splice(o<a?a-1:a,0,e.timelineItemId),f(r.id,t)}}},[t,f]),T=(0,n.useCallback)((e,i)=>{let r=t.find(t=>t.id===e.trackId);if(!r)return;let n=r.items.filter(e=>e.groupId===i.id);if(n.length>0){n.sort((e,t)=>t.startTimeInFrames-e.startTimeInFrames);let t=n[0],i=r.items.map(e=>e.id),o=i.indexOf(e.timelineItemId),a=i.indexOf(t.id);if(-1!==o&&-1!==a&&o!==a){let t=[...i];t.splice(o,1),t.splice(o<a?a:a+1,0,e.timelineItemId),f(r.id,t)}}},[t,f]),D=(0,n.useCallback)((e,t,i,r)=>{switch(t){case"replace":console.warn("\uD83D\uDD0D [TimelineTrackVideoWithVoiceover] Replace not allowed for groups");break;case"insert-before":switch(e.source){case"timeline-group":e.groupId&&e.groupId!==r.id&&E(e.groupId,r.id,"before");break;case"media-asset":e.mediaAssetId&&e.mediaAssetType&&A(e,r);break;case"timeline-item":e.timelineItemId&&e.trackId&&R(e,r)}break;case"insert-after":switch(e.source){case"timeline-group":e.groupId&&e.groupId!==r.id&&E(e.groupId,r.id,"after");break;case"media-asset":e.mediaAssetId&&e.mediaAssetType&&M(e,r);break;case"timeline-item":e.timelineItemId&&e.trackId&&T(e,r)}}},[E,A,M,R,T]),z=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=100*e.durationInFrames/u.totalDurationInFrames,a=100*e.startTimeInFrames/u.totalDurationInFrames,s="video"===e.type||"overlay"===e.type||"logo"===e.type?(0,r.jsx)(id,{item:e,fps:i,onSelect:()=>I(e.id,t),isSelected:j===e.id,containerSx:{position:"absolute",width:t?"100%":`calc(${o}% - 6px)`,left:t?"0":`calc(${a}% + 3px)`,top:0,height:`${y.gd}px`},allowResize:t,onResize:()=>w(!1),droppable:!t,draggable:!t},e.id):(0,r.jsx)(it,{item:e,fps:i,trackType:"voiceover",onSelect:()=>I(e.id,t),isSelected:j===e.id,containerSx:{position:"absolute",width:t?"100%":`calc(${o}% - 6px)`,left:t?"0":`calc(${a}% + 3px)`,top:t?`${y.gd+y.ew-2}px`:0,height:`${y.ZR}px`},allowResize:t,onResize:()=>w(!1),droppable:!t,draggable:!t},e.id);return t?s:(0,r.jsx)(tX.E.div,{layoutId:b?`timeline-item-${e.id}`:void 0,transition:b?{type:"spring",stiffness:500,damping:30,duration:.1}:{duration:0},animate:b,style:{position:"absolute",width:`calc(${o}% - 6px)`,left:`calc(${a}% + 3px)`,height:"video"===e.type||"overlay"===e.type||"logo"===e.type?`${y.gd}px`:`${y.ZR}px`,top:"video"===e.type||"overlay"===e.type||"logo"===e.type?0:`${y.gd+y.ew-2}px`},children:n.cloneElement(s,{containerSx:{position:"relative",width:"100%",height:"100%",top:"auto",left:"auto"},droppable:!0})},e.id)},[i,j,I,u.totalDurationInFrames,b]);return(0,r.jsx)(s.Z,{direction:"row",sx:{height:`${y.gd+y.ZR+y.ew}px`,width:"100%",mb:`${y.ew}px`},children:(0,r.jsxs)(l.Z,{sx:{position:"relative",height:"100%",flexGrow:1,bgcolor:"grey.800","&:hover":{bgcolor:"grey.750"},width:"100%",overflow:"visible"},children:[0===t.length&&(0,r.jsx)(d.Z,{variant:"caption",sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",color:"text.disabled"},children:"Empty video track. Drag video or image items from Media Library."}),_.map(e=>{let i=e.items,n=Math.min(...i.map(e=>e.startTimeInFrames)),a=(Math.max(...i.map(e=>e.startTimeInFrames+e.durationInFrames))-n)*100/u.totalDurationInFrames,s=100*n/u.totalDurationInFrames;return(0,r.jsx)(l.Z,{sx:{position:"absolute",width:`calc(${a}% - 6px)`,left:`calc(${s}% + 3px)`,height:"100%",top:0,bottom:0},children:(0,r.jsxs)(il,{onSelect:()=>{Z(e.id)},isGroupWrapper:!0,isSelected:p&&p===e.id?!j:null,dragData:{source:"timeline-group",groupId:e.id},isDropCompatible:i=>{let{source:r,groupId:n,mediaAssetType:o}=i;return"timeline-group"===r?function(e,t,i){if(e.toLowerCase()===t.toLowerCase())return!0;let r=i.some(t=>t.items.some(t=>{var i;return(null===(i=t.groupId)||void 0===i?void 0:i.toLowerCase())===e.toLowerCase()})),n=i.some(e=>e.items.some(e=>{var i;return(null===(i=e.groupId)||void 0===i?void 0:i.toLowerCase())===t.toLowerCase()}));return r&&n}(n,e.id,t):"media-asset"===r&&("video"===o||"image"===o)},allowResize:!1,onDrop:(t,i,r)=>D(t,i,r,e),children:[e.items.map(e=>z(e,!0)),(0,r.jsx)(l.Z,{sx:{position:"absolute",top:`${y.gd-1.4}px`,left:"50%",transform:`translateX(-50%) scaleX(${Math.max(1,o)})`,width:"100%",height:`${y.ew}px`,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(ih,{})})]})},e.id)}),S.map(e=>z(e,!1)),k.map((e,i)=>e.map(e=>(0,r.jsx)(ir,{gap:e,trackType:t[i].type,trackId:t[i].id,totalDurationInFrames:u.totalDurationInFrames,sx:{height:0===i?`${y.gd}px`:`${y.ZR}px`,top:0===i?0:`${y.gd+y.ew}px`}},e.id)))]})})};function ip(e){if(0===e.length)return{startTime:0,duration:0};let t=Math.min(...e.map(e=>e.startTimeInFrames));return{startTime:t,duration:Math.max(...e.map(e=>e.startTimeInFrames+e.durationInFrames))-t}}function ih(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31",height:"11",viewBox:"0 0 31 11",fill:"none",children:(0,r.jsx)("path",{d:"M30.7466 0.839844C30.7466 0.839844 20.7159 1.25649 20.7153 5.42285C20.7153 10.4229 27.8121 10.8398 30.7466 10.8398H0.746582C3.68111 10.8398 10.7778 10.4229 10.7778 5.42285C10.7773 1.25649 0.746582 0.839844 0.746582 0.839844H30.7466Z",fill:"#2E2E2E"})})}let im=(0,n.memo)(e=>{let{sx:t,title:i,children:n,width:o,height:a="auto"}=e;return(0,r.jsxs)(s.Z,{sx:{width:o,height:a,position:"relative",borderRadius:"12px",backgroundColor:"#1A1A1A",overflow:"hidden",...t},children:[i?(0,r.jsx)(l.Z,{sx:{backgroundColor:"#2E2E2E",borderRadius:"8px 8px 0 0",height:eP.sq,display:"flex",alignItems:"center",justifyContent:"center",marginTop:0},children:i}):null,(0,r.jsx)(l.Z,{sx:{flex:1,position:"relative",height:`calc(100% - ${eP.sq}px)`,overflow:"hidden"},children:n})]})});im.displayName="TitlePane";var ix=i(86694),ig=i.n(ix);i(82407),i(43682),i(98866);var iv=i(40728),iy=i(7861);ig()(()=>i.e(8895).then(i.t.bind(i,38895,23)),{loadableGenerated:{webpack:()=>[38895]},ssr:!1});function ib(){let[e,t]=(0,n.useState)(!1),{renderVideo:i}=(0,b.z6)(),[r,o]=((0,u.wK)((0,iv.N)(e=>({isLoading:e.isLoading,error:e.error,mediaAssets:e.mediaAssets,tracks:e.tracks,globalConfig:e.globalConfig,outputSettings:e.outputSettings,selectedItemId:e.selectedItemId,selectedMediaAssetId:e.selectedMediaAssetId,selectedGroupId:e.selectedGroupId,currentTimeInFrames:e.currentTimeInFrames,isPlaying:e.isPlaying,previewingMediaAsset:e.previewingMediaAsset,mediaAssetTab:e.mediaAssetTab}))),(0,n.useState)(0)),[a,s]=(0,n.useState)(()=>{{let e=localStorage.getItem("video-editor-devtools-position");return e?JSON.parse(e):{right:50,top:50}}}),l=(0,n.useRef)(null),[d,c]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1);return(0,n.useDeferredValue)(d),(0,n.useEffect)(()=>{let e=e=>{e.ctrlKey&&"d"===e.key&&(e.preventDefault(),t(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),(0,n.useEffect)(()=>{let e=e=>{if(!d||!l.current)return;let t=e.clientX-l.current.x,i=e.clientY-l.current.y;Math.hypot(t,i)>5&&h(!0),s(e=>{let r=window.innerWidth,n=window.innerHeight;return{right:Math.min(Math.max(e.right-t,0),r-50),top:Math.min(Math.max(e.top+i,0),n-50)}}),l.current={x:e.clientX,y:e.clientY}},t=()=>{d&&(c(!1),l.current=null,localStorage.setItem("video-editor-devtools-position",JSON.stringify(a)))};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[a,d]),(0,n.useEffect)(()=>{let e=()=>{s(e=>{let t=window.innerWidth,i=window.innerHeight;return{right:Math.min(e.right,t-50),top:Math.min(e.top,i-50)}})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),null}},54425:function(e,t,i){i.d(t,{Bx:function(){return u},H6:function(){return x},Kz:function(){return m},UG:function(){return p},ZR:function(){return s},ep:function(){return o},ew:function(){return d},gI:function(){return l},gd:function(){return a},sG:function(){return g},sq:function(){return n},tj:function(){return c},wf:function(){return h},y5:function(){return f}});var r=i(63311);let n=45,o=67,a=80,s=30,l=40,d=12,c=.2,u=280;r.UG;let p=r.UG,h=r.wf,m={...r.Kz,fps:r.Oq},x=3,g=2,f={video:{acceptedTypes:["video/*"],maxFileSize:104857600},image:{acceptedTypes:["image/*"],maxFileSize:10485760},audio:{acceptedTypes:["audio/*"],maxFileSize:10485760},file:{acceptedTypes:[],maxFileSize:0}}},99307:function(e,t,i){i.d(t,{Bx:function(){return r.Bx},DG:function(){return n.DG},H6:function(){return r.H6},L5:function(){return n.L5},UG:function(){return r.UG},Xm:function(){return n.Xm},Xq:function(){return n.Xq},ZR:function(){return r.ZR},aD:function(){return n.aD},ew:function(){return r.ew},gI:function(){return r.gI},gd:function(){return r.gd},nw:function(){return n.nw},tj:function(){return r.tj},y5:function(){return r.y5}});var r=i(54425);i(99161);var n=i(74608)},28318:function(e,t,i){i.d(t,{O:function(){return a}});var r=i(48870),n=i(63311),o=i(70210);class a{get mediaAssets(){return this._timelineData.mediaAssets}get mediaAssetMap(){return new Map(this.mediaAssets.map(e=>[e.id,e]))}get tracks(){return this._timelineData.tracks}get data(){return this._timelineData}get mediaAssetInUse(){let e=new Set(this.tracks.flatMap(e=>e.items.map(e=>e.mediaAssetId)));return this.mediaAssets.filter(t=>e.has(t.id))}get totalDurationInFrames(){let e=0;return this.tracks.forEach(t=>{t.items.forEach(t=>{let i=t.startTimeInFrames+t.durationInFrames;i>e&&(e=i)})}),e}get totalDurationInSeconds(){return this.totalDurationInFrames/a.FPS}get groupInfoMap(){let e=new Map;return this.tracks.forEach(t=>{t.items.forEach(i=>{if(i.groupId){if(e.has(i.groupId)){let r=e.get(i.groupId);r&&(r.groupItems.push(i),r.trackIds.push(t.id),r.startTimeInFrames=Math.min(r.startTimeInFrames,i.startTimeInFrames),r.endTimeInFrames=Math.max(r.endTimeInFrames,i.startTimeInFrames+i.durationInFrames),r.indexInTrack.push(t.items.indexOf(i)),r.isOrphaned=!1)}else e.set(i.groupId,{groupId:i.groupId,groupItems:[i],trackIds:[t.id],startTimeInFrames:i.startTimeInFrames,endTimeInFrames:i.startTimeInFrames+i.durationInFrames,indexInTrack:[t.items.indexOf(i)],isOrphaned:!0})}})}),e}get validGroupInfoMap(){return new Map(Array.from(this.groupInfoMap.values()).filter(e=>e.groupItems.length>1).map(e=>[e.groupId,e]))}get hasGroups(){return this.validGroupInfoMap.size>0}get hasVoiceoverTrack(){return this.tracks.some(e=>"audio"===e.type&&"voiceover"===e.subtype)}get dimensions(){let e=this.mediaAssetMap,t=1280,i=720,r=null,n=null;return this.tracks.filter(e=>"video"===e.type).forEach(t=>{t.items.filter(e=>"video"===e.type||"logo"===e.type).forEach(t=>{let i=e.get((null==t?void 0:t.mediaAssetId)||"");if((null==t?void 0:t.mediaAssetId)&&i&&i.metadata){let e=i.metadata;e.width&&e.height&&((null===r||e.width<r)&&(r=e.width),(null===n||e.height<n)&&(n=e.height))}})}),r&&n&&(t=r,i=n),{width:t,height:i}}get aspectRatio(){let{width:e,height:t}=this.dimensions,i=(e,t)=>0===t?e:i(t,e%t),r=i(e,t),n=e/r,o=t/r;return`${n}:${o}`}getTrackCategory(e){return o.wD.getTrackCategory(e,this.mediaAssets)}findGroupsInFrameRange(e,t){let i=e??0,r=t??this.totalDurationInFrames;return Array.from(this.validGroupInfoMap.values()).filter(e=>e.startTimeInFrames>=i&&e.startTimeInFrames<=r)}updateFromShotMap(e){return this}isSimpleScenario(e){if(!this.hasVoiceoverTrack)return!0;if(!e)return!1;let t=this.tracks.find(t=>t.id===e);return t?"audio"===t.type&&"music"===t.subtype:(this._log("isSimpleScenario: track not found",{trackId:e}),!0)}isComplexScenario(e){return!this.isSimpleScenario(e)}_log(e,t){this._debug&&void 0!==t&&Array.isArray(t)}_findGroupById(e,t){return this.groupInfoMap.get(e)||(this._log(`${t}: group not found`,{groupId:e}),null)}_findTrack(e,t){return this.tracks.find(t=>t.id===e)||(this._log(`${t}: track not found`,{trackId:e}),null)}_findItemIndex(e,t,i){let r=e.items.findIndex(e=>e.id===t);return -1===r&&this._log(`${i}: item not found`,{trackId:e.id,itemId:t}),r}_validateIndexRange(e,t,i,r){return!(e<0)&&!(e>=t)||(this._log(`${r}: ${i} out of range`,{[i]:e,length:t}),!1)}_validateFramePosition(e,t){return!(e<0)||(this._log(`${t}: negative target position`,{targetFramePosition:e}),!1)}_validateFrameRange(e,t,i){return!(e>t)||(this._log(`${i}: invalid frame range`,{frameRangeStart:e,frameRangeEnd:t}),!1)}_updateTracksTypeAndSubtype(){this._timelineData.tracks.forEach(e=>{if("video"!==e.type){if("audio"===e.type){let t=e.items[0];if(!t){e.subtype="music";return}let i=this.mediaAssets.find(e=>e.id===t.mediaAssetId);if(!i){e.subtype="music";return}"voiceover"===i.subtype?e.subtype="voiceover":(i.subtype,e.subtype="music");return}"file"!==e.type&&(e.type="video")}}),this._log("_updateTracksTypeAndSubtype: tracks updated",{tracks:this._timelineData.tracks.map(e=>({id:e.id,type:e.type,subtype:e.subtype,itemCount:e.items.length}))})}shiftItemsInTimeRange(e,t,i,r){let n=Array.isArray(r)?r:[r];if(!this._validateFrameRange(e,t,"shiftItemsInTimeRange"))return this;if(0===i)return this._log("shiftItemsInTimeRange: no shift needed",{shiftFrames:i}),this;let o=0;return n.forEach(r=>{let n=this._findTrack(r,"shiftItemsInTimeRange");if(!n)return;let a=0;n.items.forEach(r=>{if(r.startTimeInFrames>=e&&r.startTimeInFrames<=t){let e=r.startTimeInFrames;r.startTimeInFrames+=i,r.startTimeInFrames<0&&(this._log("shiftItemsInTimeRange: preventing negative start time",{itemId:r.id,oldStartTime:e,newStartTime:r.startTimeInFrames}),r.startTimeInFrames=0),a++,o++}}),this._log("shiftItemsInTimeRange: track processed",{trackId:r,affectedItems:a})}),this._log("shiftItemsInTimeRange: completed",{frameRangeStart:e,frameRangeEnd:t,shiftFrames:i,trackIds:n,totalAffectedItems:o}),this}filterTracksByType(e){let t=this._timelineData.tracks.filter(t=>t.type===e);return new a({...this._timelineData,tracks:t},this._debug)}updateSubsequentItemStartTimes(e,t){let i=this._findTrack(e,"updateSubsequentItemStartTimes");if(!i||!this._validateIndexRange(t,i.items.length,"fromIndex","updateSubsequentItemStartTimes"))return this;for(let e=t;e<i.items.length;e++)if(0===e)i.items[e].startTimeInFrames=0;else{let t=i.items[e-1];i.items[e].startTimeInFrames=t.startTimeInFrames+t.durationInFrames}return this._log("updateSubsequentItemStartTimes: success",{trackId:e,fromIndex:t}),this}moveItemInTrackByIndex(e,t,i){let r=this._findTrack(e,"moveItemInTrackByIndex");if(!r)return this;let n=this._findItemIndex(r,t,"moveItemInTrackByIndex");if(-1===n||!this._validateIndexRange(i,r.items.length,"targetIndex","moveItemInTrackByIndex"))return this;if(i===n)return this._log("moveItemInTrackByIndex: target index same as current index",{trackId:e,itemId:t,targetIndex:i,currentIndex:n}),this;let[o]=r.items.splice(n,1);r.items.splice(i,0,o);let a=Math.min(n,i);return this.updateSubsequentItemStartTimes(e,a),this._log("moveItemInTrackByIndex: success",{trackId:e,itemId:t,currentIndex:n,targetIndex:i,startIndex:a}),this}moveItemInTrackByFramePosition(e,t,i){let r;let n=this._findTrack(e,"moveItemInTrackByFramePosition");if(!n)return this;let o=this._findItemIndex(n,t,"moveItemInTrackByFramePosition");if(-1===o||!this._validateFramePosition(i,"moveItemInTrackByFramePosition"))return this;let a=n.items[o],s=a.startTimeInFrames,l=s+a.durationInFrames;if(i>=s-10&&i<=l+10)return this._log("moveItemInTrackByFramePosition: target position within current item range",{trackId:e,itemId:t,targetFramePosition:i,originalStartFrame:s,originalEndFrame:l,errorMargin:10}),this;let d=this.isComplexScenario(e)?this.tracks.filter(e=>"video"===e.type||"audio"===e.type):this.tracks,c=[0];d.forEach(e=>{e.items.forEach(e=>{c.push(e.startTimeInFrames),c.push(e.startTimeInFrames+e.durationInFrames)})});let u=[...new Set(c)].sort((e,t)=>e-t);if(!u.includes(i))return this._log("moveItemInTrackByFramePosition: invalid target position",{trackId:e,itemId:t,targetFramePosition:i,validPositions:u,relevantTracksCount:d.length}),this;let p=i<s;if(r=p?i:i-a.durationInFrames,p){let t=s-1;r<=t&&this.shiftItemsInTimeRange(r,t,a.durationInFrames,e)}else{let t=i-1;l<=t&&this.shiftItemsInTimeRange(l,t,-a.durationInFrames,e)}return a.startTimeInFrames=r,n.items.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames),this._log("moveItemInTrackByFramePosition: completed",{trackId:e,itemId:t,targetFramePosition:i,originalStartFrame:s,originalEndFrame:l,movingLeft:p,newStartFrame:r}),this}reorderByMoveItem(e,t,i){let r=this._findTrack(e,"reorderByMoveItem");if(!r)return this;let n=this._findItemIndex(r,t,"reorderByMoveItem");if(-1===n||!this._validateIndexRange(i,r.items.length,"targetIndex","reorderByMoveItem"))return this;if(i===n)return this._log("reorderByMoveItem: target index same as current index",{trackId:e,itemId:t,targetIndex:i,itemIndex:n}),this;let o=r.items[n];if(this.isSimpleScenario(e))return this._log("reorderByMoveItem: simple scenario",{trackId:e}),this.moveItemInTrackByIndex(e,t,i);this._log("reorderByMoveItem: complex scenario",{trackId:e});let a=null;if("video"===r.type?a=this.tracks.find(e=>"audio"===e.type&&"voiceover"===e.subtype)||null:"audio"===r.type&&"voiceover"===r.subtype&&(a=this.tracks.find(e=>"video"===e.type)||null),!a)return this._log("reorderByMoveItem: corresponding track not found",{trackId:e,trackType:r.type}),this.moveItemInTrackByIndex(e,t,i);let s=0;if(i>0){let e=r.items[i-1];s=e.startTimeInFrames+e.durationInFrames}let l=null;if(o.groupId&&(l=a.items.find(e=>e.groupId===o.groupId)||null),l||(l=a.items.find(e=>{let t=Math.abs(e.startTimeInFrames-o.startTimeInFrames),i=Math.abs(e.durationInFrames-o.durationInFrames);return t<=10&&i<=10})||null),l)this._log("reorderByMoveItem: found corresponding item, moving both",{itemId:t,correspondingItemId:l.id,targetFramePosition:s}),this.moveItemInTrackByFramePosition(e,t,s),this.moveItemInTrackByFramePosition(a.id,l.id,s);else{let i,r,n;this._log("reorderByMoveItem: no corresponding item found, syncing tracks",{itemId:t,targetFramePosition:s});let l=o.startTimeInFrames,d=l+o.durationInFrames;this.moveItemInTrackByFramePosition(e,t,s),s<l?(i=s,r=l-1,n=o.durationInFrames):(i=d,r=s-1,n=-o.durationInFrames),i<=r&&this.shiftItemsInTimeRange(i,r,n,a.id)}return this._log("reorderByMoveItem: completed",{trackId:e,itemId:t,targetIndex:i,targetFramePosition:s,hasCorrespondingItem:!!l}),this}reorderByMoveItemGroup(e,t){if(!e)return this._log("reorderByMoveItemGroup: invalid groupId",{groupId:e}),this;if(!this._validateFramePosition(t,"reorderByMoveItemGroup"))return this;let i=this._findGroupById(e,"reorderByMoveItemGroup");if(!i)return this;if(i.isOrphaned)return this._log("reorderByMoveItemGroup: group is orphaned, skipping",{groupId:e}),this;if(t===i.startTimeInFrames)return this._log("reorderByMoveItemGroup: target position same as current",{groupId:e,targetFramePosition:t,currentStartFrame:i.startTimeInFrames}),this;let r=[0];return(this.tracks.forEach(t=>{t.items.forEach(t=>{t.groupId!==e&&r.push(t.startTimeInFrames+t.durationInFrames)})}),r.includes(t))?(i.groupItems.forEach(i=>{let r=this.tracks.find(e=>e.items.some(e=>e.id===i.id));r&&(this._log("reorderByMoveItemGroup: moving item in group",{groupId:e,itemId:i.id,trackId:r.id,targetFramePosition:t}),this.moveItemInTrackByFramePosition(r.id,i.id,t))}),this._log("reorderByMoveItemGroup: completed",{groupId:e,targetFramePosition:t,groupItemsCount:i.groupItems.length,trackIds:i.trackIds})):this._log("reorderByMoveItemGroup: invalid target position",{groupId:e,targetFramePosition:t,validTargetPositions:r}),this}constructor(e,t=!0){this._debug=!1,this._timelineData=(0,r.Z)(e),this._debug=t,this._updateTracksTypeAndSubtype()}}a.FPS=n.UG},99161:function(e,t,i){i.d(t,{N:function(){return s}});var r=i(68836),n=i.n(r),o=i(99307);async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{onProgress:i}=t,r=new FormData;r.append("file",e);let o=await n().post("/api/media/upload",r,{onUploadProgress:e=>{if(e.lengthComputable&&e.total){let t=Math.round(e.loaded/e.total*100);null==i||i(t)}}});if(o.status>=200&&o.status<300)return o.data;throw Error(`HTTP ${o.status}: ${o.statusText}`)}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{onProgress:i}=t,{validFiles:r,errors:n}=(0,o.L5)(e,o.y5),s=e.filter(e=>!r.includes(e)),l=[];for(let[e,t]of s.entries()){let r=n[e]||"Invalid file type";l.push({file:t,success:!1,error:r}),null==i||i({fileName:t.name,progress:100,completed:!0,error:r})}if(0===r.length)return{totalFiles:e.length,successCount:0,failureCount:l.length,results:l,shouldSwitchTab:!1,targetTab:void 0};r.forEach(e=>{null==i||i({fileName:e.name,progress:0,completed:!1})});let d=r.map(async e=>{try{let t=await a(e,{onProgress:t=>{null==i||i({fileName:e.name,progress:t,completed:!1})}});return null==i||i({fileName:e.name,progress:100,completed:!0,url:t.url}),{file:e,success:!0,url:t.url}}catch(r){let t=r instanceof Error?r.message:"Upload failed";return null==i||i({fileName:e.name,progress:100,completed:!0,error:t}),{file:e,success:!1,error:t}}}),c=await Promise.all(d),u=c.filter(e=>e.success).length,p=l.length+c.filter(e=>!e.success).length;return{totalFiles:e.length,successCount:u,failureCount:p,results:[...l,...c],shouldSwitchTab:!1,targetTab:void 0}}},74608:function(e,t,i){i.d(t,{AO:function(){return y},DG:function(){return d},GQ:function(){return h},JO:function(){return m},L5:function(){return p},MH:function(){return w},NN:function(){return C},Ru:function(){return x},Tp:function(){return v},Xm:function(){return S},Xq:function(){return l},YI:function(){return f},_3:function(){return b},aD:function(){return _},bM:function(){return s},hb:function(){return g},n3:function(){return a},nw:function(){return c},tn:function(){return j}});var r=i(67197),n=i(29799),o=i(54425);function a(e,t){let i=e/t;return{aspectRatio:i,isPortrait:i<1,isLandscape:i>=1}}function s(e,t){let i,r,n;let{isLandscape:o}=a(e,t);return o?(i=Math.max(24,Math.min(e/1920*54,72)),r="65%",n=24):(i=Math.max(16,Math.min(e/416*22,48)),r="71%",n=31),{fontSize:i,captionWidth:r,bottomPercentage:n}}function l(e,t,i){let r=i/t.fps,n=e.durationInFrames*e.speed/Math.max(1,e.sourceTrimEndFrames-e.sourceTrimStartFrames),o=t.fps?r:n,a=Math.max(0,e.sourceTrimStartFrames*o||0);return{startFrom:a,endAt:a+e.durationInFrames}}let d=(e,t)=>{let i=Math.floor(e/t);return`${Math.floor(i/60).toString().padStart(2,"0")}:${(i%60).toString().padStart(2,"0")}:${Math.floor(e%t).toString().padStart(2,"0")}`},c=e=>!!e&&e.types.includes("Files"),u=e=>e.type.startsWith("video/")?"video":e.type.startsWith("image/")?"image":e.type.startsWith("audio/")?"audio":null,p=(e,t)=>{let i;let r=[],n=[];for(let o of e){let e=u(o);if(!e){n.push(`Unsupported file type: ${o.name}`);continue}i||(i=e);let a=t[e];if(!a||0===a.acceptedTypes.length){n.push(`${e} uploads not supported yet`);continue}if(o.size>a.maxFileSize){let e=Math.round(a.maxFileSize/1048576);n.push(`${o.name} is too large (max ${e}MB)`);continue}if(!a.acceptedTypes.some(e=>e.endsWith("/*")?o.type.startsWith(e.replace("/*","/")):o.type===e)){n.push(`${o.name} type not supported for ${e}`);continue}r.push(o)}return{validFiles:r,errors:n,detectedType:i,hasValidFiles:r.length>0}};function h(e,t){let i=new Map(t.map(e=>[e.id,e])),r=1280,n=720,a="16:9",s=null,l=null;if(e.filter(e=>"video"===e.type).forEach(e=>{e.items.filter(e=>"video"===e.type||"logo"===e.type).forEach(e=>{let t=i.get((null==e?void 0:e.mediaAssetId)||"");if((null==e?void 0:e.mediaAssetId)&&t&&t.metadata){let e=t.metadata;e.width&&e.height&&((null===s||e.width<s)&&(s=e.width),(null===l||e.height<l)&&(l=e.height))}})}),s&&l){let e=(t,i)=>0===i?t:e(i,t%i),t=e(r=Math.floor(s),n=Math.floor(l)),i=r/t,o=n/t;a=`${i}:${o}`}let d=0;return e.forEach(e=>{e.items.forEach(e=>{let t=e.startTimeInFrames+e.durationInFrames;t>d&&(d=t)})}),{width:r,height:n,aspectRatio:a,totalDurationInFrames:Math.max(Math.ceil(d),o.sG*o.UG)}}let m=(e,t)=>{switch(t){case"video":return"video"===e||"image"===e;case"audio":return"audio"===e;default:return!1}},x=(e,t,i)=>{let r=(e-t.left)/t.width;return r<.25?{type:"insert-before",itemId:"",insertIndex:i}:r>.75?{type:"insert-after",itemId:"",insertIndex:i+1}:{type:"replace",itemId:"",insertIndex:i}},g=(e,t)=>{if(0===e)return 0;if(e>=t.length){if(0===t.length)return 0;let e=t.at(-1);return e.startTimeInFrames+e.durationInFrames}let i=t[e-1];return i.startTimeInFrames+i.durationInFrames},f=function(e,t,i){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.UG,s="video"===e.resource_type?"video":"audio"===e.resource_type?"audio":"image",l="image"===s?a*o.H6:Math.floor(((null===(n=e.metadata)||void 0===n?void 0:n.duration)||0)*a),d=function(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.UG;switch(t){case"image":return i||r*o.H6;case"audio":var n;return i||Math.floor(((null===(n=e.metadata)||void 0===n?void 0:n.duration)||0)*r);case"video":let a=function(e){let t=null==e?void 0:e.metadata;return t&&t?(null==t?void 0:t.frames)??(null==t?void 0:t.duration)*(null==t?void 0:t.fps):0}(e),s=a/e.metadata.fps*r/1;if(void 0!==i&&i<s)return a/s*i;return a;default:return 0}}(e,s,i,a);return{id:(0,r.x0)(),mediaAssetId:e.id,shotId:e.shot_id,type:s,title:e.title||e.id,startTimeInFrames:t,durationInFrames:i||l,sourceTrimStartFrames:0,sourceTrimEndFrames:d,speed:1,volume:1}},v=e=>{try{let t=e.getData("application/json");if(!t)return null;let i=JSON.parse(t);if(!i.source||"media-asset"===i.source&&(!i.mediaAssetId||!i.mediaAssetType)||"timeline-item"===i.source&&!i.timelineItemId)return null;return i}catch{return null}},y=(e,t)=>{for(let i=t;i<e.length;i++)if(0===i)e[i].startTimeInFrames=0;else{let t=e[i-1];e[i].startTimeInFrames=t.startTimeInFrames+t.durationInFrames}},b=function(e,t){let i;arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UG;let n=[],a=[...e].sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames);if(a.length>0){let e=a[0];e.startTimeInFrames>0&&n.push({id:(0,r.x0)(),startTimeInFrames:0,endTimeInFrames:e.startTimeInFrames,durationInFrames:e.startTimeInFrames,type:"middle",insertIndex:0})}for(let e=0;e<a.length;e++){let t=a[e],i=a[e+1];if(i){let o=t.startTimeInFrames+t.durationInFrames,a=i.startTimeInFrames;a>o&&n.push({id:(0,r.x0)(),startTimeInFrames:o,endTimeInFrames:a,durationInFrames:a-o,type:"middle",insertIndex:e+1})}}let s=e.length>0?t*o.tj:t;if(0===a.length)i=0,s=t;else{let e=a.at(-1);i=e.startTimeInFrames+e.durationInFrames}return n.push({id:(0,r.x0)(),startTimeInFrames:i,endTimeInFrames:i+s,durationInFrames:s,type:"end",insertIndex:a.length}),n};function C(e){let t=new Map;e.forEach(e=>{let i;for(let t of e.items)if(t.groupId){i=t.groupId;break}i&&t.set(e.id,i)});let i=new Map,r=[];e.forEach(e=>{let n=t.get(e.id);n?(i.has(n)||i.set(n,[]),i.get(n).push(e)):r.push(e)});let n=(e,t)=>"video"===e.type&&"audio"===t.type?-1:"audio"===e.type&&"video"===t.type?1:0,o=[],a=[];i.forEach(e=>{e.sort(n),e.length>1?o.push(e):a.push(...e)});let s=[...r,...a];s.sort(n);let l=[];return o.forEach(e=>{l.push(...e)}),l.push(...s),{flatList:l,groupedTracks:o,singleTracks:s}}let w=e=>{try{let t=Array.from(e.types).filter(e=>e.startsWith("type/"));if(0===t.length)return null;let i=t[0].split("/");if(i.length<2)return null;let r=i[1];if("video"===r||"audio"===r||"image"===r)return{source:"media-asset",mediaAssetType:r};if("timeline-item"===r){let e=i[2];if(!e)return null;return{source:"timeline-item",trackId:e}}if("timeline-group"===r){let e=i[2];if(!e)return null;return{source:"timeline-group",groupId:e}}return null}catch{return null}},j=(e,t)=>{let i;if(e.setData("application/json",JSON.stringify(t)),"media-asset"===t.source&&t.mediaAssetType)i=`type/${t.mediaAssetType}`;else if("timeline-item"===t.source&&t.trackId)i=`type/timeline-item/${t.trackId}`;else if("timeline-group"===t.source&&t.groupId)i=`type/timeline-group/${t.groupId}`;else{console.warn("âš ï¸ [setDragDataWithType] Invalid drag data or missing required fields:",{source:t.source,mediaAssetType:t.mediaAssetType,trackId:t.trackId,groupId:t.groupId});return}e.setData(i,"")},F=n.oY.bezier(.3,.83,1,1),k=n.oY.bezier(.83,.3,1,1);function _(e,t){return t<=0?1:(0,n.sX)(e,[0,t],[0,1],{extrapolateLeft:"clamp",extrapolateRight:"clamp",easing:F})}function S(e,t,i){return t<=0?1:(0,n.sX)(e,[i-t,i],[1,0],{extrapolateLeft:"clamp",extrapolateRight:"clamp",easing:k})}},4757:function(e,t,i){i.d(t,{rr:function(){return w},d2:function(){return r.d},z6:function(){return p},_b:function(){return n._b},No:function(){return n.No},Lv:function(){return x},Kt:function(){return g},JA:function(){return f}});var r=i(33500);i(85155);var n=i(51090);i(25532),i(14603);var o=i(75271),a=i(21964),s=i(54425),l=i(62684),d=i(30754);let c=(e,t,i,r)=>{try{(()=>{try{return new URL(e).origin!==window.location.origin}catch{return!0}})()&&e.startsWith("http")?fetch(e,{mode:"cors",credentials:"same-origin"}).then(e=>{if(!e.ok)throw Error(`Failed to fetch: ${e.status} ${e.statusText}`);return e.blob()}).then(r=>{let n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=t||e.split("/").pop()||"download",i&&(o.target=i),document.body.append(o),o.click(),setTimeout(()=>{o.remove(),URL.revokeObjectURL(n)},100)}).catch(e=>{console.error("download file failed:",e),n(),r&&r(e)}):n()}catch(e){console.error("download file failed:",e),n(),r&&e instanceof Error&&r(e)}function n(){let r=document.createElement("a");r.href=e,r.download=t||e.split("/").pop()||"download",i&&(r.target=i),r.style.display="none",document.body.append(r),r.click(),setTimeout(()=>{r.remove()},100)}},u={enabled:!1,type:"openart"};function p(){let{tracks:e=[],mediaAssets:t=[],onSuccess:i,onProgress:r,maxRetries:n=3,downloadBehavior:p="download",watermarkConfig:h=u,configFromStory:m=s.Kz}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[x,g]=(0,o.useState)({status:"idle"}),f=(0,o.useRef)(null),v=(0,o.useRef)(null),y=(0,o.useRef)(0),b=()=>{f.current&&(clearInterval(f.current),f.current=null)};(0,o.useEffect)(()=>b,[]);let C=(0,a.D)({mutationFn:async e=>{b(),y.current=Date.now();let t={status:"waiting"};g(t),null==r||r(t);let i=await fetch("/api/internal/storybuilder/render_video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!i.ok)throw Error(`Failed to start render process: ${i.statusText}`);let n=await i.json();if(!n.renderId)throw Error("Invalid response: missing renderId");return v.current=n.renderId,new Promise((e,t)=>{let i=async()=>{try{if(Date.now()-y.current>6e5){b(),t(Error("Render timeout exceeded"));return}if(!v.current)return;let i=await fetch(`/api/internal/storybuilder/render_video?id=${v.current}`);if(!i.ok){console.error("Failed to fetch render progress");return}let n=await i.json();g(n),null==r||r(n),"success"===n.status&&n.url?(b(),e({url:n.url})):"error"===n.status&&(b(),t(Error(n.error||"Unknown render error")))}catch(e){console.error("Error polling render progress:",e)}};i(),f.current=setInterval(i,2e3)})},retry:n,retryDelay:1e3,onSuccess:e=>{if(!e.url)throw Error("Invalid response format, no video URL returned");i?i(e.url):c(e.url,"download.mp4"),(0,d.t5)("Export completed! Download will start soon.")},onError:e=>{console.error("Video rendering error:",e),b(),(0,d.cB)("Error during export. Check console for details.")}});return{renderVideo:async()=>{try{let i;if(e.length>0&&t.length>0)i={tracks:e,mediaAssets:t,downloadBehavior:p,watermarkConfig:h,configFromStory:m};else{let{tracks:e,mediaAssets:t,globalConfig:r}=l.D.getState();i={tracks:e,mediaAssets:t,downloadBehavior:p,watermarkConfig:h}}await C.mutateAsync(i)}catch(e){console.error("Failed to render video:",e)}},isRendering:C.isLoading,progress:x,error:C.error}}i(73808);var h=i(62513),m=i(35199);function x(){let e=m.wK.use.setShotSyncCallbacks();(0,o.useEffect)(()=>(e({onShotAdd:(e,t)=>{h.B.getState().addShot(e,t,{rebuildTimeline:!1})},onShotRemove:e=>{h.B.getState().removeShot(e,{rebuildTimeline:!1})},onShotsReorder:(e,t)=>{h.B.getState().reorderShots(e,t,{rebuildTimeline:!1})},onShotUpdate:(e,t)=>{h.B.getState().updateShot(e,t,{rebuildTimeline:!1})},onGlobalConfigUpdate:e=>{h.B.getState().updateEditorGlobalConfig(e)}}),()=>{e({})}),[e])}i(72236);let g=()=>{let e=l.wK.use.tracks(),t=l.wK.use.outputSettings(),i=l.wK.use.updateOutputSettings();(0,o.useEffect)(()=>{let r;let n=(r=0,0===e.length?0:(e.forEach(e=>{e.items.forEach(e=>{let t=e.startTimeInFrames+e.durationInFrames;t>r&&(r=t)})}),r));t.totalDurationInFrames!==n&&i({totalDurationInFrames:n})},[t.totalDurationInFrames,e,i])},f=function(){let{playerRef:e,containerRef:t,debug:i=!1,tracks:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,o.useRef)([]),a=(0,o.useMemo)(()=>{let e=function(e){if(!e)return[];let t=[];for(let i of e){if("video"!==i.type)continue;let e=0;for(let r of i.items){if("video"!==r.type&&"overlay"!==r.type)continue;let i=e+(r.durationInFrames||0);t.push({item:r,startFrame:e,endFrame:i,speed:r.speed||1}),e=i}}return t.sort((e,t)=>e.startFrame-t.startFrame)}(r);return n.current=e,e},[r,i]);(0,o.useEffect)(()=>{if(!(null==e?void 0:e.current)){i&&console.warn("[VideoSpeedSync] No player ref available");return}let r=e.current;if("function"!=typeof r.addEventListener){console.error("[VideoSpeedSync] Player does not support addEventListener");return}let o=()=>{if(!(null==e?void 0:e.current))return;let r=e.current.getCurrentFrame(),o=v(n.current,r),a=(null==o?void 0:o.speed)??1;y(()=>{b(a,null==t?void 0:t.current,i)},1)},a=r=>{let o=r.detail.frame;if(!(null==e?void 0:e.current))return;let a=v(n.current,o),s=(null==a?void 0:a.speed)??1;y(()=>{b(s,null==t?void 0:t.current,i)},1)},s=()=>{},l=()=>{},d=i=>{if(!(null==e?void 0:e.current))return;let r=i.detail.frame,o=v(n.current,r),a=(null==o?void 0:o.speed)??1,s=null==t?void 0:t.current;s&&s.querySelectorAll("video").forEach((e,t)=>{if(!e.paused&&!e.ended&&Math.abs(e.playbackRate-a)>.01)try{e.playbackRate=a}catch(e){console.error(`[VideoSpeedSync] Failed to set speed for video ${t}:`,e)}})};return r.addEventListener("play",o),r.addEventListener("seeked",a),r.addEventListener("pause",s),r.addEventListener("ended",l),r.addEventListener("frameupdate",d),()=>{r.removeEventListener&&(r.removeEventListener("play",o),r.removeEventListener("seeked",a),r.removeEventListener("pause",s),r.removeEventListener("ended",l),r.removeEventListener("frameupdate",d))}},[e,i,t,a])};function v(e,t){for(let i of e)if(t>=i.startFrame&&t<i.endFrame)return i;return null}function y(e,t){let i=t,r=()=>{--i<=0?e():requestAnimationFrame(r)};requestAnimationFrame(r)}function b(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t?t.querySelectorAll("video"):document.querySelectorAll("video");if(0===r.length)return i&&console.warn("[VideoSpeedSync] No video elements found"),!1;let n=0;return r.forEach((t,i)=>{if(!t.paused&&!t.ended&&Math.abs(t.playbackRate-e)>.01)try{t.playbackRate=e,n++}catch(e){console.error(`[VideoSpeedSync] Failed to set playbackRate for video ${i}:`,e)}}),n>0}var C=i(20512);let w=e=>{let{disabled:t=!1,containerWidth:i,contentWidth:r,scrollContainerRef:n,currentTimeInFrames:a}=e,s=l.wK.use.isPlaying(),{totalDurationInFrames:d}=l.wK.use.outputSettings(),c=(0,o.useRef)(!1),u=(0,o.useCallback)(e=>{if(!n.current||t||c.current||!s)return;let o=n.current.scrollLeft,a=r*e/d,l=o+i/5;if(a>o+4*i/5)c.current=!0,n.current.scrollTo({left:a-i/5,behavior:"smooth"}),setTimeout(()=>{c.current=!1},600);else{if(!(a<l)||!(o>a))return;c.current=!0,n.current.scrollTo({left:Math.max(0,a-i/5),behavior:"smooth"}),setTimeout(()=>{c.current=!1},600)}},[n,s,t,d,r,i]),p=(0,o.useMemo)(()=>(0,C.Z)(u,200),[u]);(0,o.useEffect)(()=>{p(a),0===a&&n.current.scrollTo({left:0,behavior:"smooth"})},[a,n,p]),(0,o.useEffect)(()=>()=>{p.cancel()},[p])}},33500:function(e,t,i){i.d(t,{d:function(){return n}});var r=i(75271);let n=e=>{let t=(0,r.useCallback)(t=>{if(!(null==e?void 0:e.current))return()=>{};let{current:i}=e,r=e=>{let{detail:i}=e;if(!i){console.warn("useCurrentPlayerFrame updater: frame update detail is null");return}t()};return i.addEventListener("frameupdate",r),()=>{null==i||i.removeEventListener("frameupdate",r)}},[null==e?void 0:e.current]),i=(0,r.useCallback)(()=>{if(!(null==e?void 0:e.current))return 0;let t=e.current.getCurrentFrame();return void 0===t?(console.warn("useCurrentPlayerFrame: getCurrentFrame returned undefined"),0):t},[null==e?void 0:e.current]);return(0,r.useSyncExternalStore)(t,i,()=>0)}},18972:function(e,t,i){i.d(t,{$:function(){return s}});var r=i(8765),n=i(1399),o=i(51090);let a=e=>{let{onClose:t,type:i="image",hiddenTabList:o=[],maxSelectionCount:a=1}=e,{showModal:s}=(0,r.dd)();return{handleShowModal:()=>{s(n.S,{historyFilter:{resource_type:i},maxSelectionCount:a,showTabList:["generation","albums","storyAsset"],hiddenTabList:o,onClose:e=>{null==t||t(e)}})}}},s=e=>{let{storyId:t,type:i="image",subtype:r,shotId:n,maxSelectionCount:s=1,onUploadSuccess:l}=e,{saveFileWithUploadingAsset:d,isAddingMediaAsset:c}=(0,o.No)(t),{handleShowModal:u}=a({type:i,hiddenTabList:"video"===i?["albums"]:[],onClose:e=>{e.length>0&&e.forEach(e=>{d({url:e,type:i,subtype:r,shotId:n}).then(e=>{null==l||l(e)})})},maxSelectionCount:s});return{handleShowModal:u,isAddingMediaAsset:c}}},85155:function(e,t,i){i.d(t,{a:function(){return a}});var r=i(75271),n=i(49842),o=i(35199);function a(){let{playerRef:e,enabled:t=!0,zoomLevel:i,onZoomChange:a,zoomMin:s=.5,zoomMax:l=5}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=o.wK.use.currentTimeInFrames(),c=o.wK.use.outputSettings(),u=o.wK.use.isPlaying(),p=o.wK.use.selectItem(),h=o.wK.use.selectGroup(),m=o.wK.use.setCurrentTimeInFrames(),x=o.wK.use.togglePlay(),g=o.wK.use.removeItemFromTrack(),f=o.wK.use.updateItemInTrack(),v=o.wK.use.clearAllSelections(),y=o.wK.use.selectedItemId(),b=o.wK.use.tracks(),C=o.wK.use.selectedGroupId(),w=o.wK.use.setPreviewingMediaAsset(),{operations:j}=(0,n.ZY)(),F=(0,r.useMemo)(()=>{if(y)for(let e of b){let t=e.items.find(e=>e.id===y);if(t)return t}},[y,b]),k=(0,r.useMemo)(()=>C?b.flatMap(e=>e.items.filter(e=>e.groupId===C).map(t=>({trackId:e.id,itemId:t.id,item:t}))):[],[C,b]),_=(0,r.useMemo)(()=>{if(y)return b.find(e=>e.items.some(e=>e.id===y))},[y,b]),S=(0,r.useRef)({key:null,intervalId:null,direction:1,wasPlayingBeforeFrameAdjustment:!1}),I=(0,r.useCallback)(()=>{let e=document.activeElement;if(!e)return!1;let t=e.tagName.toLowerCase(),i="true"===e.getAttribute("contenteditable");return"input"===t||"textarea"===t||i},[]),Z=(0,r.useCallback)(t=>{let i=Math.max(0,Math.min(c.totalDurationInFrames-1,d+t));m(i),(null==e?void 0:e.current)&&e.current.seekTo(i)},[d,c.totalDurationInFrames,m,e]),E=(0,r.useCallback)(e=>{if(!F||!_||"video"!==F.type&&"audio"!==F.type)return;let t=Math.max(0,Math.min(1,(F.volume??1)+.05*e));j.batchOperation("Adjust volume through keyboard",()=>{f(_.id,{id:F.id,volume:t})})},[F,_,f,j]),A=(0,r.useCallback)(e=>{a&&void 0!==i&&a(Math.max(s,Math.min(l,i+.25*e)))},[i,a,s,l]),M=(0,r.useCallback)((t,i)=>{S.current.wasPlayingBeforeFrameAdjustment=u,u&&((null==e?void 0:e.current)&&e.current.pause(),u&&x()),S.current.intervalId&&clearInterval(S.current.intervalId),S.current.key=i,S.current.direction=t,S.current.intervalId=setInterval(()=>{Z(t)},8)},[u,e,x,Z]),R=(0,r.useCallback)(()=>{if(S.current.intervalId&&(clearInterval(S.current.intervalId),S.current.intervalId=null),S.current.wasPlayingBeforeFrameAdjustment){if(null==e?void 0:e.current)try{e.current.play()}catch(e){console.warn("Autoplay restricted during frame adjustment resume:",e)}u||x()}S.current.key=null,S.current.wasPlayingBeforeFrameAdjustment=!1},[e,u,x]),T=(0,r.useCallback)((e,t)=>{S.current.intervalId&&clearInterval(S.current.intervalId),S.current.key=e,S.current.direction=t,S.current.intervalId=setInterval(()=>{E(t)},150)},[E]),D=(0,r.useCallback)(()=>{S.current.intervalId&&(clearInterval(S.current.intervalId),S.current.intervalId=null),S.current.key=null},[]),z=(0,r.useCallback)(i=>{if(!t||I())return;let{key:r}=i;switch(r){case"Escape":i.preventDefault(),v();break;case"Delete":case"Backspace":if(i.preventDefault(),!F&&0===k.length)return;if((null==F?void 0:F.type)==="audio"&&k.length>0){j.batchOperation("Delete audio in group though keyboard",()=>{g(_.id,F.id,!1)}),p(null);return}0===k.length?_&&(j.batchOperation("Delete item though keyboard",()=>{g(_.id,F.id)}),p(null)):(j.batchOperation("Delete items in group though keyboard",()=>{k.forEach(e=>{g(e.trackId,e.itemId)})}),h(null));break;case" ":if(i.preventDefault(),x(),null==e?void 0:e.current){if(u)e.current.pause();else try{w(void 0),e.current.play()}catch(e){console.warn("Autoplay restricted:",e)}}break;case"ArrowLeft":i.preventDefault(),"ArrowLeft"!==S.current.key&&(Z(-1),M(-1,"ArrowLeft"));break;case"ArrowRight":i.preventDefault(),"ArrowRight"!==S.current.key&&(Z(1),M(1,"ArrowRight"));break;case"ArrowUp":i.preventDefault(),"ArrowUp"!==S.current.key&&(E(1),T("ArrowUp",1));break;case"ArrowDown":i.preventDefault(),"ArrowDown"!==S.current.key&&(E(-1),T("ArrowDown",-1))}},[t,I,v,F,k,j,p,g,_,h,x,e,u,w,Z,M,E,T]),P=(0,r.useCallback)(e=>{if(!t)return;let{key:i}=e;["ArrowLeft","ArrowRight"].includes(i)?S.current.key===i&&R():["ArrowUp","ArrowDown"].includes(i)&&S.current.key===i&&D()},[t,R,D]),L=(0,r.useCallback)(e=>{t&&a&&void 0!==i&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation(),A(e.deltaY>0?-1:1))},[t,a,i,A]);(0,r.useEffect)(()=>{if(t)return document.addEventListener("keydown",z),document.addEventListener("keyup",P),document.addEventListener("wheel",L,{passive:!1}),()=>{document.removeEventListener("keydown",z),document.removeEventListener("keyup",P),document.removeEventListener("wheel",L),R(),D()}},[t,z,P,L,R,D]),(0,r.useEffect)(()=>()=>{R(),D()},[R,D])}},51090:function(e,t,i){i.d(t,{AC:function(){return b},oK:function(){return C},PJ:function(){return v},IL:function(){return w},_b:function(){return f},No:function(){return g}});var r=i(75271),n=i(62513),o=i(67197);let a=e=>e.startsWith("image/")?"image":e.startsWith("video/")?"video":e.startsWith("audio/")?"audio":null,s=(e,t)=>e.startsWith("audio/")?"voiceover"===t?"voiceover":"music":null,l=(e,t,i)=>({id:(0,o.x0)(),fileName:(null==i?void 0:i.fileName)||(null==e?void 0:e.name),type:(null==i?void 0:i.type)||a(null==e?void 0:e.type),subtype:(null==i?void 0:i.subtype)||(e?s(null==e?void 0:e.type,t):null),progress:0,status:"uploading",fileSize:null==e?void 0:e.size,created_at:{_seconds:Date.now(),_nanoseconds:0}});var d=i(25532),c=i(73808),u=i(50448),p=i(35199),h=i(72236),m=i(45137);function x(){return`media_${Date.now()}_${Math.random().toString(36).slice(2,9)}`}function g(e){let{uploadAndSaveFile:t,isUploading:i,error:o,progress:a,reset:s}=f(e),d=(0,n.B)(e=>e.addUploadingAsset),c=(0,n.B)(e=>e.updateUploadingAsset),u=(0,n.B)(e=>e.removeUploadingAsset),{addMediaAsset:p,isCreating:h}=v(e);return{uploadAndSaveFileWithUploadingAsset:(0,r.useCallback)(async(e,i)=>{let r=l(e,i);d(r);try{let n=await t(e,i);return c(r.id,{status:"completed",progress:100}),u(r.id),n}catch(e){throw c(r.id,{status:"error",error:e instanceof Error?e.message:"Upload failed"}),e}},[t,d,c,u]),saveFileWithUploadingAsset:(0,r.useCallback)(async e=>{let{url:t,type:i,subtype:r,shotId:n}=e,o={id:x(),resource_type:i,url:t,source:"generated",configs:{}};n&&(o.shot_id=n),"audio"===i&&r&&(o.subtype=r);let a=l(void 0,r,{type:i,subtype:r,fileName:t});d(a);try{let e=await p(o);return u(a.id),e}catch(e){throw c(a.id,{status:"error",error:e instanceof Error?e.message:"Upload failed"}),e}},[p,d,c,u]),isUploading:i,isAddingMediaAsset:h,error:o,progress:a,reset:s}}function f(e){let{uploadFile:t,isUploading:i,error:n,progress:o,reset:a}=(0,d.q)(),{addMediaAsset:s,isCreating:l}=v(e),[c,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null);return{uploadAndSaveFile:(0,r.useCallback)(async(i,r,n)=>{try{var o;h(null),u(!0);let a=await t(i);if(!a.success||!a.url)throw Error(a.error||"File upload failed");let{type:l}=(o=i.type).startsWith("image/")?{type:"image"}:o.startsWith("video/")?{type:"video"}:o.startsWith("audio/")?{type:"audio",subtype:"music"}:{type:"file"};(0,m.B)("asset_uploaded",{story_id:e,asset_type:l,asset_sub_type:r});let d={id:x(),resource_type:l,url:a.url,title:i.name,source:"user_upload",user_id:"",is_deleted:!1,created_at:Date.now(),updated_at:Date.now(),configs:{}};return(null==n?void 0:n.shotId)&&(d.shot_id=n.shotId),"audio"===l&&r&&(d.subtype="voiceover"===r?"voiceover":"music"),await s(d)}catch(t){let e=Error(t instanceof Error?t.message:"Upload and save failed");throw h(e),e}finally{u(!1)}},[t,s]),isUploading:i||l||c,error:p||n,progress:o,reset:(0,r.useCallback)(()=>{a(),h(null),u(!1)},[a])}}function v(e){let{addMediaAsset:t,removeMediaAsset:i,updateMediaAsset:n,setMediaAssets:o}=(0,h.D)(),{createMediaAsset:a,deleteMediaAssets:s,refreshMediaAssets:l,isCreating:d,isDeleting:u,isOperating:p}=(0,c.Sx)(e||""),m=(0,r.useCallback)(async r=>{if(!e)return null;try{let e=(await a({type:r.resource_type,subtype:r.subtype,shot_id:r.shot_id,url:r.url,title:r.title||`${r.resource_type} asset`,metadata:r.metadata})).media_resource;return t(e),e}catch(t){i(r.id);let e=t instanceof Error?t.message:"Failed to add media asset";throw console.error("Failed to sync media asset to server:",t),Error(e)}},[t,i,a,e]);return{addMediaAsset:m,removeMediaAsset:(0,r.useCallback)(async t=>{let r=h.D.getState().mediaAssets;if(!r.find(e=>e.id===t))return;let n=[...r];if(i(t),e)try{await s([t])}catch(t){o(n);let e=t instanceof Error?t.message:"Failed to remove media asset";throw console.error("Failed to remove media asset from server:",t),Error(e)}},[i,o,s,e]),updateMediaAsset:(0,r.useCallback)(e=>{n(e)},[n]),refreshMediaAssets:(0,r.useCallback)(()=>{e&&l()},[l,e]),isCreating:d,isDeleting:u,isOperating:p}}let y=()=>{let e=(0,h.D)(p.df),t=(0,h.D)(e=>e.mediaAssets);return(0,r.useMemo)(()=>t.find(t=>t.id===(null==e?void 0:e.mediaAssetId)),[e,t])},b=()=>{let e=y();return(null==e?void 0:e.resource_type)==="image"?"image":(null==e?void 0:e.resource_type)==="video"?"video":(null==e?void 0:e.resource_type)==="audio"&&"music"===e.subtype?"music":(null==e?void 0:e.resource_type)==="audio"&&"voiceover"===e.subtype?"voiceover":"unknown"},C=e=>{let{type:t,subtype:i,sort:o="desc"}=e,a=(0,p.hs)(t,i),s=(0,n.B)(e=>e.uploadingAssets),l=(0,r.useMemo)(()=>s.filter(e=>e.type===t&&(!i||e.subtype===i)),[s,t,i]);return(0,r.useMemo)(()=>[...a,...l].sort((e,t)=>{var i,r;let n=(null===(i=e.created_at)||void 0===i?void 0:i._seconds)||0,a=(null===(r=t.created_at)||void 0===r?void 0:r._seconds)||0;return"asc"===o?n-a:a-n}),[a,l,o])},w=(e,t)=>{let[i]=(0,u.On)(t);return(0,r.useMemo)(()=>i.some(t=>t.items.some(t=>t.mediaAssetId===e)),[i,e])}},25532:function(e,t,i){i.d(t,{q:function(){return a}});var r=i(75271),n=i(21964),o=i(99161);function a(){let{uploadFiles:e,isUploading:t,error:i,fileProgress:a,reset:s}=function(){let[e,t]=(0,r.useState)({}),i=(0,r.useCallback)(e=>{t(t=>({...t,[e.fileName]:e}))},[]),a=(0,r.useCallback)(()=>{t({})},[]),s=(0,n.D)({mutationFn:async e=>(t({}),await (0,o.N)(e,{onProgress:i})),onError:e=>{console.error("Media upload failed:",e)},onSuccess:e=>{}});return{uploadFiles:s.mutateAsync,isUploading:s.isLoading,error:s.error,fileProgress:e,reset:a}}();return{uploadFile:(0,r.useCallback)(async t=>(await e([t])).results[0],[e]),isUploading:t,error:i,progress:Object.values(a)[0],reset:s}}},14603:function(e,t,i){i.d(t,{N:function(){return a}});var r=i(75271),n=i(33500),o=i(35199);let a=e=>{let{playerRef:t}=e,i=o.wK.use.isPlaying(),a=o.wK.use.setCurrentTimeInFrames(),s=o.wK.use.currentTimeInFrames(),l=o.wK.use.togglePlay();(0,r.useEffect)(()=>{t.current&&!i&&t.current.pause()},[i,t]),(0,r.useEffect)(()=>{t.current&&t.current.getCurrentFrame()!==s&&t.current.seekTo(s)},[t,s]);let d=(0,n.d)(t);(0,r.useEffect)(()=>{(null==t?void 0:t.current)&&(0===d&&l(!1),a(d))},[t,d,a,l])}},67113:function(e,t,i){i.d(t,{Q:function(){return d}});var r=i(75271),n=i(16589),o=i(99307),a=i(72236),s=i(70210);let l=()=>{let e=(0,a.D)(e=>e.tracks),t=(0,a.D)(e=>e.mediaAssets);return{getTrackByType:(0,r.useCallback)(i=>e.find(e=>s.wD.getTrackCategory(e,t)===i),[e,t])}},d=()=>{let e=(0,n.jU)(e=>e.updateShot),t=(0,a.D)(e=>e.updateItemInTrack),i=(0,a.D)(e=>e.mediaAssets),s=(0,n.jU)(e=>{var t,i;return null===(i=e.story)||void 0===i?void 0:null===(t=i.storyboard)||void 0===t?void 0:t.shots_map}),{getTrackByType:d}=l();return{updateShot:(0,r.useCallback)(async(r,n,a)=>{let{rebuildTimeline:l=!1}=a||{};if(!l){let e=n.active_image_id&&n.active_image_url,a=n.active_video_id&&n.active_video_url,l=s[r];if(a){var c;let e=d("video"),r=null==e?void 0:e.items.find(e=>e.mediaAssetId===(null==l?void 0:l.active_video_id)),a=i.find(e=>e.id===n.active_video_id),s=null==a?void 0:null===(c=a.metadata)||void 0===c?void 0:c.duration,u=(null==r?void 0:r.speed)||1;r&&t(e.id,{id:r.id,mediaAssetId:n.active_video_id,durationInFrames:Math.floor(s*o.UG/u)})}else if(e){let e=d("image"),i=null==e?void 0:e.items.find(e=>e.mediaAssetId===(null==l?void 0:l.active_image_id));i&&t(e.id,{id:i.id,mediaAssetId:n.active_image_id,durationInFrames:Math.floor(o.H6*o.UG)})}}await e(r,n,{rebuildTimeline:l})},[e,s,t,d,i])}}},50448:function(e,t,i){i.d(t,{Eh:function(){return s},On:function(){return l},hH:function(){return a}});var r=i(75271),n=i(72236),o=i(70210);let a=()=>{let e=(0,n.D)(e=>e.tracks),t=(0,n.D)(e=>e.mediaAssets);return[(0,r.useMemo)(()=>e.filter(e=>"music"===o.wD.getTrackCategory(e,t)),[e,t])]},s=()=>{let e=(0,n.D)(e=>e.tracks),t=(0,n.D)(e=>e.mediaAssets);return[(0,r.useMemo)(()=>e.filter(e=>"voiceover"===o.wD.getTrackCategory(e,t)),[e,t])]},l=e=>{let t=(0,n.D)(e=>e.tracks),i=(0,n.D)(e=>e.mediaAssets);return[(0,r.useMemo)(()=>t.filter(t=>e.includes(o.wD.getTrackCategory(t,i))),[t,i,e])]}},65230:function(e,t,i){i.d(t,{cP:function(){return r.cP},dt:function(){return o.d},wK:function(){return n.wK}});var r=i(45265);i(99307);var n=i(62684),o=i(73807)},62684:function(e,t,i){i.d(t,{D:function(){return n.D},Z_:function(){return r.Z_},df:function(){return r.df},wK:function(){return r.wK}});var r=i(35199),n=i(72236)},35199:function(e,t,i){i.d(t,{CN:function(){return d},WL:function(){return s},Z_:function(){return o},df:function(){return a},hs:function(){return l},wK:function(){return n}});var r=i(72236);let n=(0,i(62283).N)(r.D),o=(e,t)=>e.mediaAssets.find(e=>e.id===t),a=e=>{if(e.selectedItemId)for(let t of e.tracks){let i=t.items.find(t=>t.id===e.selectedItemId);if(i)return i}},s=()=>({activeTab:(0,r.D)(e=>e.mediaAssetTab),setActiveTab:n.use.setMediaAssetsActiveTab()});function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc";return n.use.mediaAssets().filter(i=>i.resource_type===e&&(!t||i.subtype===t)).sort((e,t)=>{var r,n,o,a;return"asc"===i?((null===(o=e.created_at)||void 0===o?void 0:o._seconds)||0)-((null===(a=t.created_at)||void 0===a?void 0:a._seconds)||0):((null===(r=t.created_at)||void 0===r?void 0:r._seconds)||0)-((null===(n=e.created_at)||void 0===n?void 0:n._seconds)||0)})}let d=(e,t)=>e.tracks.some(e=>e.items.some(e=>e.mediaAssetId===t))},72236:function(e,t,i){i.d(t,{D:function(){return m}});var r=i(2345),n=i(47469),o=i(25162),a=i(62513),s=i(54425),l=i(28318),d=i(74608),c=i(73808),u=i(70210);let p={aspectRatio:"16:9",width:1920,height:1080,totalDurationInFrames:20*s.UG},h={isLoading:!1,error:void 0,mediaAssets:[],tracks:[],globalConfig:s.Kz,outputSettings:p,selectedItemId:void 0,selectedMediaAssetId:void 0,selectedGroupId:void 0,currentTimeInFrames:0,isPlaying:!1,previewingMediaAsset:void 0,mediaAssetTab:"video",storyId:void 0},m=(0,r.U)()((0,n.n)((e,t)=>{let i={},r=(e,t,i)=>"image"===e.type||"audio"===e.type?e.durationInFrames:"video"===e.type?e.sourceTrimEndFrames-e.sourceTrimStartFrames>0?e.sourceTrimEndFrames-e.sourceTrimStartFrames:Number.isNaN(Number(e.sourceTrimEndFrames))||Number.isNaN(Number(e.sourceTrimStartFrames))?t.metadata.frames:0:void 0,n=(e,t,i)=>"image"===e.type?1:"audio"===e.type?t.metadata.duration*s.UG:"video"===e.type?t.metadata.frames:void 0;return{...h,init:t=>{let{storyId:i,mediaAssets:r,tracks:n,globalConfig:o=s.Kz}=t;try{let t=(0,d.GQ)(n,r);e(e=>{e.storyId=i,e.mediaAssets=r,e.tracks=n,e.globalConfig={...s.Kz,...o},e.outputSettings={...e.outputSettings,width:t.width,height:t.height,aspectRatio:t.aspectRatio,totalDurationInFrames:t.totalDurationInFrames},e.isLoading=!1,e.error=void 0})}catch(i){let t=i instanceof Error?i.message:"Failed to initialize timeline";throw e(e=>{e.isLoading=!1,e.error=t}),i}},syncMediaAssetsFromServer:async i=>{try{let r=(await (0,c.oX)(i)).media_resources.map(u.wD.convertStoryMediaResourceToMediaAssetItem),n=[...t().mediaAssets];r.forEach(e=>{let t=n.findIndex(t=>t.id===e.id);-1===t?n.push(e):n[t]={...e,...n[t]}}),e(e=>{e.mediaAssets=n;let t=(0,d.GQ)(e.tracks,n);e.outputSettings={...e.outputSettings,width:t.width,height:t.height,aspectRatio:t.aspectRatio,totalDurationInFrames:t.totalDurationInFrames}})}catch(e){console.error("Failed to sync media assets from server:",e)}},setLoading:t=>e(e=>{e.isLoading=t}),setError:t=>e(e=>{e.error=t}),clearError:()=>e(e=>{e.error=void 0}),addMediaAsset:t=>e(e=>{e.mediaAssets.some(e=>e.id===t.id)||e.mediaAssets.push(t)}),removeMediaAsset:t=>e(e=>{if(new l.O({tracks:e.tracks,mediaAssets:e.mediaAssets}).mediaAssetInUse.some(e=>e.id===t)){console.error(`Cannot remove media asset ${t} that is in use`);return}e.mediaAssets=e.mediaAssets.filter(e=>e.id!==t)}),updateMediaAsset:t=>e(e=>{let i=e.mediaAssets.findIndex(e=>e.id===t.id);-1!==i&&(e.mediaAssets[i]={...e.mediaAssets[i],...t})}),setMediaAssets:t=>e(e=>{e.mediaAssets=t}),setTracks:t=>e(e=>{e.tracks=t}),rebuildTimeline:()=>new Promise(t=>e(e=>{let i=(0,o.HK)();e.tracks=i.tracks,t()})),updateTrack:t=>e(e=>{let i=e.tracks.findIndex(e=>e.id===t.id);-1!==i&&(e.tracks[i]={...e.tracks[i],...t})}),addItemToTrack:(t,i)=>e(e=>{let r=e.tracks.find(e=>e.id===t);r&&!r.items.some(e=>e.id===i.id)&&(r.items.push(i),r.items.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames),(0,d.AO)(r.items,0))}),removeItemFromTrack:function(t,r){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return e(e=>{let o=e.tracks.find(e=>e.id===t);if(o){let e=o.items.find(e=>e.id===r),t=o.items.findIndex(e=>e.id===r);if(o.items=o.items.filter(e=>e.id!==r),n&&(0,d.AO)(o.items,0===t?0:t-1),(null==e?void 0:e.shotId)&&i.onShotRemove)try{i.onShotRemove(e.shotId)}catch(e){console.error("Failed to remove shot from videoEditorStore:",e)}}})},updateItemInTrack:(t,i)=>new Promise(r=>e(e=>{let n=e.tracks.find(e=>e.id===t);if(n){let e=n.items.findIndex(e=>e.id===i.id);-1!==e&&(n.items[e]={...n.items[e],...i},n.items.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames),(0,d.AO)(n.items,0))}r()})),reorderItemsInTrack:(t,r)=>e(e=>{let n=e.tracks.find(e=>e.id===t);if(n&&r.length===n.items.length){let e=[...n.items],t=Object.fromEntries(n.items.map(e=>[e.id,e])),o=r.map(e=>t[e]),a=0;if(o.forEach(e=>{e.startTimeInFrames=a,a+=e.durationInFrames}),n.items=o,"video"===n.type&&i.onShotsReorder)try{let t=e.map(e=>e.id),n=-1,o=-1;for(let[e,i]of t.entries())if(i!==r[e]){n=e,o=r.indexOf(i);break}-1!==n&&-1!==o&&n!==o&&i.onShotsReorder(n,o)}catch(e){console.error("Failed to sync shot reorder with videoEditorStore:",e)}}}),updateOutputSettings:t=>e(e=>{e.outputSettings={...e.outputSettings,...t}}),updateGlobalConfig:t=>e(e=>{if(e.globalConfig={...e.globalConfig,...t},i.onGlobalConfigUpdate)try{i.onGlobalConfigUpdate(t)}catch(e){console.error("Failed to sync global config with videoEditorStore:",e)}}),updateTotalDurationInFrames:()=>e(e=>{let t=0;e.tracks.forEach(e=>{e.items.forEach(e=>{let i=e.startTimeInFrames+e.durationInFrames;i>t&&(t=i)})}),e.outputSettings.totalDurationInFrames=Math.max(e.outputSettings.totalDurationInFrames,t)}),updateItemSpeed:(t,i)=>e(e=>{let r,n;for(let i of e.tracks){let e=i.items.find(e=>e.id===t);if(e){r=e,n=i;break}}if(!r||!n)return;let o=r.durationInFrames,a=Math.round(o*(r.speed||1)/i),s=o-a,l=[];if(r.groupId)for(let t of e.tracks)for(let e=0;e<t.items.length;e++){let i=t.items[e];i.groupId===r.groupId&&l.push({item:i,track:t,index:e})}else{let e=n.items.findIndex(e=>e.id===t);-1!==e&&l.push({item:r,track:n,index:e})}for(let{item:e}of l)e.speed=i,e.durationInFrames=a;for(let e of new Set(l.map(e=>{let{track:t}=e;return t})))for(let{index:t}of l.filter(t=>{let{track:i}=t;return i===e}))for(let i=t+1;i<e.items.length;i++)e.items[i].startTimeInFrames-=s;let d=0;e.tracks.forEach(e=>{e.items.forEach(e=>{let t=e.startTimeInFrames+e.durationInFrames;t>d&&(d=t)})}),e.outputSettings.totalDurationInFrames=Math.max(e.outputSettings.totalDurationInFrames,d)}),shiftItemsFromIndex:(t,i,r,n)=>e(e=>{let o=e.tracks.find(e=>e.id===t),a=null==o?void 0:o.items.find(e=>e.id===n);if(!a){console.warn("Item not found:",{itemId:n});return}let s=r-a.startTimeInFrames;if(o&&-1!==i){for(let e=i;e<o.items.length;e++){let t=o.items[e].startTimeInFrames;o.items[e]={...o.items[e],startTimeInFrames:t+s}}o.items.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames)}}),adjustSourceTrim:(i,o,a,s)=>e(e=>{let l=e.tracks.find(e=>e.id===i),d=null==l?void 0:l.items.find(e=>e.id===o),c=e.mediaAssets.find(e=>e.id===(null==d?void 0:d.mediaAssetId));if(!c){console.warn("Media asset not found:",{itemId:o});return}let u=r(d,c,e),p=n(d,c,e),h=s*u/d.durationInFrames;if("left"===a){let e=(d.sourceTrimStartFrames||0)+h,t=d.startTimeInFrames+s,i=d.durationInFrames-s;if(e<=0||t<=0||i<=0){console.warn("Invalid source trim values:",{newSourceTrimStartFrames:e,newStartTimeInFrames:t,newDurationInFrames:i});return}d.sourceTrimStartFrames=e,d.startTimeInFrames=t,d.durationInFrames=i}else{let e=(d.sourceTrimEndFrames||p)+h,t=d.durationInFrames+s;if(e>p&&"image"!==d.type&&e>d.sourceTrimEndFrames||t<=0){console.warn("Invalid source trim values:",{newSourceTrimEndFrames:e,newDurationInFrames:t,totalFramesInSource:p,itemType:d.type});return}d.sourceTrimEndFrames=e,d.durationInFrames=t;let i=l.items.findIndex(e=>e.id===o);if(-1!==i){for(let e=i+1;e<l.items.length;e++)l.items[e]={...l.items[e],startTimeInFrames:l.items[e].startTimeInFrames+s};l.items.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames)}}t().updateTotalDurationInFrames()}),selectItem:t=>e(e=>{e.selectedItemId=t??void 0}),selectGroup:t=>e(e=>{e.selectedGroupId=t??void 0}),selectMediaAsset:t=>e(e=>{e.selectedMediaAssetId=t??void 0}),clearAllSelections:()=>e(e=>{e.selectedItemId=void 0,e.selectedGroupId=void 0,e.selectedMediaAssetId=void 0}),setCurrentTimeInFrames:t=>e(e=>{e.currentTimeInFrames=Math.max(0,Math.floor(t))}),togglePlay:t=>e(e=>{e.isPlaying=void 0===t?!e.isPlaying:t}),setMediaAssetsActiveTab:t=>e(e=>{e.mediaAssetTab=t}),setPreviewingMediaAsset:t=>e(e=>{e.previewingMediaAsset=t}),addMediaAssetToTrack:(t,r,n,o)=>e(e=>{let s=e.tracks.find(e=>e.id===t);if(s){let t=e.mediaAssets.find(e=>e.id===r);if(t){let r=(0,d.hb)(n,s.items),l=(0,d.YI)(t,r,o);s.items.splice(n,0,l),(0,d.AO)(s.items,n+1);let c=(0,d.GQ)(e.tracks,e.mediaAssets);if(e.outputSettings.totalDurationInFrames=c.totalDurationInFrames,"video"===s.type&&i.onShotAdd)try{if(t.shot_id){let e=a.B.getState().getShotById(t.shot_id);(null==e?void 0:e.is_hidden)&&(e.is_hidden=!1,e.hidden_at=null,i.onShotAdd(e,n))}let e=u.wD.createUploadedShotFromMediaAsset(t);i.onShotAdd(e,n)}catch(e){console.error("Failed to add shot to videoEditorStore:",e)}}}}),replaceTimelineItemWithMediaAsset:(t,i,r)=>e(e=>{let n=e.tracks.find(e=>e.id===t);if(n){let o=n.items.findIndex(e=>e.id===i);if(-1!==o){let a=n.items[o];e.removeItemFromTrack(t,i),e.addMediaAssetToTrack(t,r,o,a.durationInFrames)}}}),setShotSyncCallbacks:e=>{i={...e}}}}))},15349:function(e,t,i){i.d(t,{$w:function(){return j},E9:function(){return M},F2:function(){return g},FJ:function(){return A},G9:function(){return S},Gw:function(){return f},Gz:function(){return C},Hp:function(){return k},Ke:function(){return T},L8:function(){return d},Li:function(){return n},P:function(){return p},U4:function(){return w},VA:function(){return m},VY:function(){return F},Wv:function(){return c},Xp:function(){return I},YZ:function(){return D},_c:function(){return b},b5:function(){return h},c_:function(){return o},d6:function(){return y},hb:function(){return u},i7:function(){return Z},n6:function(){return r},o0:function(){return s},oe:function(){return x},r_:function(){return v},tO:function(){return l},te:function(){return _},w9:function(){return R},zO:function(){return a},zP:function(){return E}});let r="66px",n="366px",o="2px",a="4px",s="5px",l="8px",d="#202020",c="white",u="#262626",p="#161616",h="#464646",m="#838383",x="#393838",g="#6C6C6C",f="#858585",v="#C6C6C6",y="#E3E3E3",b="#4B4B4B",C="#7F7F7F",w="#8BDE78",j="#495746",F="#1736FF",k="rgba(9, 41, 247, 1)",_="rgba(9, 84, 247, 1)",S="#101E7D",I="#359DFF",Z="#7E9DFF",E="#FDEA01",A="#0929F7",M="#AB00FF",R="#16D866",T="black",D="white"},57482:function(e,t,i){function r(e,t){try{let i=JSON.stringify(t);return localStorage.setItem(e,i),!0}catch(t){return console.warn(`Failed to save to localStorage with key "${e}":`,t),!1}}function n(e,t){try{let i=localStorage.getItem(e);if(null===i)return t;return JSON.parse(i)}catch(i){return console.warn(`Failed to read from localStorage with key "${e}":`,i),t}}i.d(t,{$o:function(){return n},qQ:function(){return r}})},57114:function(e,t,i){i.d(t,{MU:function(){return l},P3:function(){return s},Pu:function(){return c},ij:function(){return u},l9:function(){return d},vB:function(){return p}});var r=i(32880),n=i(64268),o=i(98935),a=i(64366);function s(e){let t={};if(!e||0===e.length)return t;let i=r.LexoRank.middle();for(let r=0;r<e.length;r++){let n=e[r],o={...n,lexorank:i.toString()};t[n.shot_id]=o,r<e.length-1&&(i=i.genNext())}return t}function l(e){return(0,n.Z)(e)?[]:(0,o.Z)((0,a.Z)(e),e=>(null==e?void 0:e.lexorank)?r.LexoRank.parse(e.lexorank):(console.error("Shot has no lexorank",e),r.LexoRank.max()))}function d(e,t,i,n){let o;let a={...e};if(i||n){if(i){if(n){let t=e[i],a=e[n];if(!t)throw Error(`Before shot with ID ${i} not found`);if(!a)throw Error(`After shot with ID ${n} not found`);let s=r.LexoRank.parse(t.lexorank),l=r.LexoRank.parse(a.lexorank);o=s.between(l)}else{let t=e[i];if(!t)throw Error(`Before shot with ID ${i} not found`);o=r.LexoRank.parse(t.lexorank).genNext()}}else{let t=e[n];if(!t)throw Error(`After shot with ID ${n} not found`);o=r.LexoRank.parse(t.lexorank).genPrev()}}else o=r.LexoRank.middle();let s={...t,lexorank:o.toString()};return a[t.shot_id]=s,a}function c(e,t,i,r){let{[t]:n,...o}=e;if(!n)throw Error(`Shot with ID ${t} not found`);let{lexorank:a,...s}=n;return d(o,s,i,r)}function u(e,t){let i={...e};return i[t]&&("auto"===i[t].shot_type?i[t]={...i[t],is_hidden:!0,hidden_at:Math.floor(Date.now()/1e3)}:delete i[t]),i}function p(e,t,i){let r=e[t];if(!r)throw Error(`Shot with ID ${t} not found`);return{...e,[t]:{...r,...i}}}},70210:function(e,t,i){i.d(t,{B4:function(){return c},HP:function(){return l},hM:function(){return d},wD:function(){return u}});var r=i(67197),n=i(25162),o=i(63311),a=i(57114);let s=o.UG,l="failed-video-resource-id",d="https://cdn.openart.ai/assets/whats_new/file_Wx-fkUz9_1750754633802.mp4";function c(e,t,i,n,o){let a=s*o||3*s,l={...e,id:e.id||"",resource_type:"video",title:t,url:e.url||"",metadata:(null==e?void 0:e.metadata)||{frames:a,duration:o||3,width:1920,height:1080,fps:s}};return{timelineItem:{id:(0,r.x0)(),mediaAssetId:e.id,shotId:null==e?void 0:e.shot_id,type:"overlay",title:t,startTimeInFrames:i,durationInFrames:a,sourceTrimStartFrames:0,sourceTrimEndFrames:a,speed:1,volume:1,status:"failed",statusMessage:e.status_message||"Generation Error",overlayConfig:{type:"error",message:"Oops, our spell slipped! Credits refunded â€”you can regenerate this shot in the editor."}},mediaAsset:l,duration:a}}let u={isValidTrack:e=>!!e&&"string"==typeof e.type&&"string"==typeof e.name&&"string"==typeof e.id&&Array.isArray(e.items),isValidMediaAsset:e=>!!e&&"string"==typeof e.id&&"string"==typeof e.url,calculateContentEndTime:e=>0===e.length?0:e.reduce((e,t)=>0===t.items.length?e:Math.max(e,t.items.reduce((e,t)=>Math.max(e,t.startTimeInFrames+t.durationInFrames),0)),0),getMediaAssetByTimelineItem:(e,t)=>t.find(t=>t.id===e.mediaAssetId),getTimelineItemByMediaAsset:(e,t)=>t.find(t=>t.mediaAssetId===e.id),mapMediaAssetTypeToMediaResourceType(e){switch(e){case"image":return{type:"image",subtype:void 0};case"video":return{type:"video",subtype:void 0};case"music":return{type:"audio",subtype:"music"};case"voiceover":return{type:"audio",subtype:"voiceover"};case"caption":return{type:"file",subtype:"caption"}}},mapMediaResourceTypeToMediaAssetCategory(e,t){switch(e){case"image":return"image";case"video":return"video";case"audio":switch(t){case"music":default:return"music";case"voiceover":return"voiceover"}case"file":if("caption"===t)return"caption";return"video";default:return"video"}},convertStoryMediaResourceToMediaAssetItem:e=>({...e,id:e.id||""}),getTrackCategory(e,t){if("video"===e.type)return"video";if("audio"===e.type){let i=e.items[0];if(!i)return"voiceover"===e.subtype?"voiceover":"music";let r=t.find(e=>e.id===i.mediaAssetId);return r?(null==r?void 0:r.subtype)==="voiceover"?"voiceover":(r.subtype,"music"):"voiceover"===e.subtype?"voiceover":"music"}return"file"===e.type?"caption":"video"},findMediaAsset:(e,t)=>t&&e.find(e=>e.id===t)||null,getOrCreateVideoTrack(e){let t=e.tracks.find(e=>"video"===e.type);return t||(t={id:`track_video_${(0,r.x0)()}`,type:"video",name:"Video Track",items:[]},e.tracks.push(t)),t},getOrCreateVoiceoverTrack(e){let t=e.tracks.find(e=>"audio"===e.type&&"voiceover"===e.subtype);return t||(t={id:`track_voiceover_${(0,r.x0)()}`,type:"audio",subtype:"voiceover",name:"Voiceover Track",items:[]},e.tracks.push(t)),t},validateShotMediaAssets(e,t){if(e.active_video_id&&!this.findMediaAsset(t,e.active_video_id))throw Error(`Video media asset with ID ${e.active_video_id} not found for shot ${e.shot_id}`);if(e.active_image_id&&!this.findMediaAsset(t,e.active_image_id))throw Error(`Image media asset with ID ${e.active_image_id} not found for shot ${e.shot_id}`);if(e.active_voice_over_audio_id&&!this.findMediaAsset(t,e.active_voice_over_audio_id))throw Error(`Audio media asset with ID ${e.active_voice_over_audio_id} not found for shot ${e.shot_id}`)},getShotByMediaAsset(e,t){if(!e)return null;switch(e.resource_type){case"video":return t.find(t=>t.active_video_id===e.id);case"image":return t.find(t=>t.active_image_id===e.id);case"audio":if("voiceover"===e.subtype)return t.find(t=>t.active_voice_over_audio_id===e.id);return null;default:return null}},createUploadedShotFromMediaAsset(e,t){let i=(0,n.To)({shot_type:"video"===e.resource_type?"uploaded_video":"uploaded_image",video_prompt:""});return"video"===e.resource_type?(i.active_video_id=e.id,i.active_video_url=e.url):(i.active_image_id=e.id,i.active_image_url=e.url),i},generateTimelineItems(e,t,i,r,n){var o,a,l,d;let c=0,u=1;if(t&&i){let e=(null===(o=t.metadata)||void 0===o?void 0:o.duration)*s||0,r=(null===(a=i.metadata)||void 0===a?void 0:a.duration)*s||0;r>0?(u=e/r,c=r):c=e}else if(t)c=(null===(l=t.metadata)||void 0===l?void 0:l.duration)*s||0;else{if(!i)return{videoItem:null,voiceoverItem:null,nextStartTime:r};c=(null===(d=i.metadata)||void 0===d?void 0:d.duration)*s||0}return c=!Number.isFinite(c)||c<=0?s:Math.max(c,s),{videoItem:t?this.createVideoItem(e,t,r,c,u,n):null,voiceoverItem:i?this.createVoiceoverItem(e,i,r,c,n):null,nextStartTime:r+c}},createVideoItem(e,t,i,r,n,o){var a;return{id:`video-${e.shot_id}-${Date.now()}`,mediaAssetId:t.id,shotId:e.shot_id,type:"video",title:`Video for ${e.shot_id}`,startTimeInFrames:i,durationInFrames:r,sourceTrimStartFrames:0,sourceTrimEndFrames:(null===(a=t.metadata)||void 0===a?void 0:a.frames)||r,speed:n,volume:1,...o&&{groupId:o}}},createVoiceoverItem:(e,t,i,r,n)=>({id:`voiceover-${e.shot_id}-${Date.now()}`,mediaAssetId:t.id,shotId:e.shot_id,type:"audio",title:`Voiceover for ${e.shot_id}`,startTimeInFrames:i,durationInFrames:r,sourceTrimStartFrames:0,sourceTrimEndFrames:r,speed:1,volume:1,...n&&{groupId:n}}),updateSubsequentItemStartTimes(e,t){if(!(t<0)&&!(t>=e.length))for(let i=t;i<e.length;i++)if(0===i)e[i].startTimeInFrames=0;else{let t=e[i-1];e[i].startTimeInFrames=t.startTimeInFrames+t.durationInFrames}},getTimelineItemsByShot(e,t){let i=[];return e.tracks.forEach(e=>{e.items.forEach(e=>{e.shotId===t&&i.push(e)})}),i},removeTimelineItemsByShot(e,t){e.tracks.forEach(e=>{let i=e.items.length;e.items=e.items.filter(e=>e.shotId!==t),e.items.length<i&&(e.items.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames),this.updateSubsequentItemStartTimes(e.items,0))})},insertTimelineItemsForShot(e,t,i){let r=e.mediaAssets,n=this.findMediaAsset(r,t.active_video_id),o=this.findMediaAsset(r,t.active_voice_over_audio_id);if(!n&&!o)return;let a=n?this.getOrCreateVideoTrack(e):null,s=o?this.getOrCreateVoiceoverTrack(e):null,l=0;if(i>0&&a&&a.items.length>0){let e=a.items[Math.min(i-1,a.items.length-1)];e&&(l=e.startTimeInFrames+e.durationInFrames)}let d=n&&o?`group-${t.shot_id}`:void 0,c=this.generateTimelineItems(t,n,o,l,d);c.videoItem&&a&&(a.items.splice(i,0,c.videoItem),this.updateSubsequentItemStartTimes(a.items,i+1)),c.voiceoverItem&&s&&(s.items.splice(i,0,c.voiceoverItem),this.updateSubsequentItemStartTimes(s.items,i+1))},addShot(e,t,i,r){let n={...e};n.storyboard||(n.storyboard={shots_map:{}}),n.storyboard.shots_map||(n.storyboard.shots_map={}),n.video_editor_timeline||(n.video_editor_timeline={tracks:[],mediaAssets:[],globalConfig:o.Kz}),this.validateShotMediaAssets(t,n.video_editor_timeline.mediaAssets),n.storyboard.shots_map=(0,a.l9)(n.storyboard.shots_map,t,i||null,r||null);let s=(0,a.MU)(n.storyboard.shots_map).findIndex(e=>e.shot_id===t.shot_id);return this.insertTimelineItemsForShot(n.video_editor_timeline,t,s),n},deleteShot(e,t){var i;let r={...e};return(null===(i=r.storyboard)||void 0===i?void 0:i.shots_map)&&r.video_editor_timeline&&(r.storyboard.shots_map=(0,a.ij)(r.storyboard.shots_map,t),this.removeTimelineItemsByShot(r.video_editor_timeline,t)),r},updateShot(e,t){var i;let r={...e};return(null===(i=r.storyboard)||void 0===i?void 0:i.shots_map)&&r.video_editor_timeline&&(this.validateShotMediaAssets(t,r.video_editor_timeline.mediaAssets),r.storyboard.shots_map=(0,a.vB)(r.storyboard.shots_map,t.shot_id,t),this.updateTimelineItemsForShot(r.video_editor_timeline,t)),r},reorderShots(e,t,i,r){var n;let o={...e};if(!(null===(n=o.storyboard)||void 0===n?void 0:n.shots_map)||!o.video_editor_timeline)return o;o.storyboard.shots_map=(0,a.Pu)(o.storyboard.shots_map,t,i||null,r||null);let s=this.getTimelineItemsByShot(o.video_editor_timeline,t);o.video_editor_timeline.tracks.forEach(e=>{e.items=e.items.filter(e=>e.shotId!==t)});let l=(0,a.MU)(o.storyboard.shots_map).findIndex(e=>e.shot_id===t);return s.forEach(e=>{let t=o.video_editor_timeline.tracks.find(t=>t.type===e.type&&("audio"!==e.type||"voiceover"===t.subtype));if(t){let i=0;if(l>0){let e=t.items.filter((e,t)=>t<l);if(e.length>0){let t=e.at(-1);i=t.startTimeInFrames+t.durationInFrames}}let r={...e,startTimeInFrames:i};t.items.splice(l,0,r)}}),o.video_editor_timeline.tracks.forEach(e=>{e.items.sort((e,t)=>e.startTimeInFrames-t.startTimeInFrames),this.updateSubsequentItemStartTimes(e.items,0)}),o},addTimelineItem(e,t,i,r){var n;let s={...e};s.video_editor_timeline||(s.video_editor_timeline={tracks:[],mediaAssets:[],globalConfig:o.Kz});let l=s.video_editor_timeline.tracks.find(e=>e.id===r);if(!l)throw Error(`Track with ID ${r} not found`);let d=this.findMediaAsset(s.video_editor_timeline.mediaAssets,t.mediaAssetId);if(!d)throw Error(`Media asset with ID ${t.mediaAssetId} not found`);if(l.items.splice(i,0,t),this.updateSubsequentItemStartTimes(l.items,i+1),t.shotId&&(null===(n=s.storyboard)||void 0===n?void 0:n.shots_map)&&!s.storyboard.shots_map[t.shotId]){let e={shot_id:t.shotId,shot_type:"manual",active_video_id:"video"===t.type?t.mediaAssetId:void 0,active_image_id:"image"===t.type?t.mediaAssetId:void 0,active_voice_over_audio_id:"audio"===t.type?t.mediaAssetId:void 0,active_video_url:"video"===t.type?d.url:void 0,active_image_url:"image"===t.type?d.url:void 0,active_voice_over_audio_url:"audio"===t.type?d.url:void 0},r=(0,a.MU)(s.storyboard.shots_map),n=i>0?r[i-1]:null,o=i<r.length?r[i]:null;s.storyboard.shots_map=(0,a.l9)(s.storyboard.shots_map,e,(null==n?void 0:n.shot_id)||null,(null==o?void 0:o.shot_id)||null)}return s},deleteTimelineItem(e,t,i){var r;let n={...e};if(!n.video_editor_timeline)return n;let o=n.video_editor_timeline.tracks.find(e=>e.id===i);if(!o)throw Error(`Track with ID ${i} not found`);let s=o.items.find(e=>e.id===t);return s&&(o.items=o.items.filter(e=>e.id!==t),s.shotId&&(null===(r=n.storyboard)||void 0===r?void 0:r.shots_map)&&(n.storyboard.shots_map=(0,a.ij)(n.storyboard.shots_map,s.shotId))),n},updateTimelineItem(e,t,i){let r={...e};if(!r.video_editor_timeline)return r;let n=r.video_editor_timeline.tracks.find(e=>e.id===i);if(!n)throw Error(`Track with ID ${i} not found`);let o=n.items.findIndex(e=>e.id===t.id);if(-1===o)throw Error(`Timeline item with ID ${t.id} not found`);let s=n.items[o];if(n.items[o]={...s,...t},s.durationInFrames!==t.durationInFrames&&this.updateSubsequentItemStartTimes(n.items,o+1),void 0!==t.mediaAssetId&&s.mediaAssetId!==t.mediaAssetId){var l;let e=this.findMediaAsset(r.video_editor_timeline.mediaAssets,t.mediaAssetId);if(!e)throw Error(`Media asset with ID ${t.mediaAssetId} not found`);let i=n.items[o].shotId;if(i&&(null===(l=r.storyboard)||void 0===l?void 0:l.shots_map)){let s={};switch(n.items[o].type){case"video":s.active_video_id=t.mediaAssetId,s.active_video_url=e.url;break;case"image":s.active_image_id=t.mediaAssetId,s.active_image_url=e.url;break;case"audio":s.active_voice_over_audio_id=t.mediaAssetId,s.active_voice_over_audio_url=e.url}Object.keys(s).length>0&&(r.storyboard.shots_map=(0,a.vB)(r.storyboard.shots_map,i,s))}}return r},reorderTimelineItems(e,t,i){var r;let n={...e};if(!n.video_editor_timeline)return n;let o=n.video_editor_timeline.tracks.find(e=>e.id===i);if(!o)throw Error(`Track with ID ${i} not found`);let a=Object.fromEntries(o.items.map(e=>[e.id,e])),s=t.map(e=>{let t=a[e];if(!t)throw Error(`Timeline item with ID ${e} not found`);return t});if(o.items=s,this.updateSubsequentItemStartTimes(o.items,0),"video"===o.type&&(null===(r=n.storyboard)||void 0===r?void 0:r.shots_map)){let e=s.map(e=>e.shotId).filter(Boolean);e.length>0&&this.reorderShotsByIds(n,e)}return n},addMediaAsset:(e,t)=>({...e,video_editor_timeline:{...e.video_editor_timeline,mediaAssets:[...e.video_editor_timeline.mediaAssets,t]}}),addMediaAssets:(e,t)=>({...e,video_editor_timeline:{...e.video_editor_timeline,mediaAssets:[...e.video_editor_timeline.mediaAssets,...t]}}),removeMediaAsset(e,t){var i;let r={...e};return!r.video_editor_timeline||r.video_editor_timeline.tracks.some(e=>e.items.some(e=>e.mediaAssetId===t))||(null===(i=r.storyboard)||void 0===i?void 0:i.shots_map)&&Object.values(r.storyboard.shots_map).some(e=>e.active_video_id===t||e.active_image_id===t||e.active_voice_over_audio_id===t)||(r.video_editor_timeline={...r.video_editor_timeline,mediaAssets:r.video_editor_timeline.mediaAssets.filter(e=>e.id!==t)}),r},updateTimelineItemsForShot(e,t){let i=e.mediaAssets;e.tracks.forEach(e=>{e.items.forEach(e=>{if(e.shotId===t.shot_id){let r=e.mediaAssetId;"video"===e.type&&t.active_video_id?this.findMediaAsset(i,t.active_video_id)&&(r=t.active_video_id):"image"===e.type&&t.active_image_id?this.findMediaAsset(i,t.active_image_id)&&(r=t.active_image_id):"audio"===e.type&&t.active_voice_over_audio_id&&this.findMediaAsset(i,t.active_voice_over_audio_id)&&(r=t.active_voice_over_audio_id),e.mediaAssetId=r}})})},reorderShotsByIds(e,t){var i;if(!(null===(i=e.storyboard)||void 0===i?void 0:i.shots_map))return;let r=t.map(t=>{let i=e.storyboard.shots_map[t];if(!i)throw Error(`Shot with ID ${t} not found`);let{lexorank:r,...n}=i;return n});e.storyboard.shots_map=(0,a.P3)(r)}}},95254:function(e,t,i){i.d(t,{g:function(){return r}});let r=e=>{if(null==e)return new Date;if("number"==typeof e)return new Date(e);if(e&&"object"==typeof e){if("_seconds"in e&&"_nanoseconds"in e)return new Date(1e3*e._seconds+e._nanoseconds/1e6);if(e instanceof Date)return e;if("seconds"in e&&"nanoseconds"in e)return new Date(1e3*e.seconds+e.nanoseconds/1e6)}return new Date}}}]);